"use strict";(self.webpackChunkpractice_two=self.webpackChunkpractice_two||[]).push([[179],{2011:(mt,be,U)=>{U.d(be,{Dh:()=>Ne,GT:()=>_e,cc:()=>Re,hO:()=>Ve,on:()=>z,pX:()=>ue,xv:()=>Ee});var f=U(2223),$=U(9260),O=U(4976);mt=U.hmd(mt);const ee=["ngOnDestroy"],ue=(Oe,Ct,dt,re={})=>new Proxy(Oe,{get:(Ce,ae)=>dt.runOutsideAngular(()=>{var me;if(Oe[ae])return!(null===(me=re?.spy)||void 0===me)&&me.get&&re.spy.get(ae,Oe[ae]),Oe[ae];if(ee.indexOf(ae)>-1)return()=>{};const Pe=Ct.toPromise().then(ne=>{const tt=ne&&ne[ae];return"function"==typeof tt?tt.bind(ne):tt&&tt.then?tt.then($e=>dt.run(()=>$e)):dt.run(()=>tt)});return new Proxy(()=>{},{get:(ne,tt)=>Pe[tt],apply:(ne,tt,$e)=>Pe.then(en=>{var wr;const ii=en&&en(...$e);return!(null===(wr=re?.spy)||void 0===wr)&&wr.apply&&re.spy.apply(ae,$e,ii),ii})})})}),_e=(Oe,Ct)=>{Ct.forEach(dt=>{Object.getOwnPropertyNames(dt.prototype||dt).forEach(re=>{Object.defineProperty(Oe.prototype,re,Object.getOwnPropertyDescriptor(dt.prototype||dt,re))})})};class we{constructor(Ct){return Ct}}const Ne=new f.OlP("angularfire2.app.options"),Ee=new f.OlP("angularfire2.app.name");function z(Oe,Ct,dt){const Ce="object"==typeof dt&&dt||{};Ce.name=Ce.name||"string"==typeof dt&&dt||"[DEFAULT]";const me=$.Z.apps.filter(Pe=>Pe&&Pe.name===Ce.name)[0]||Ct.runOutsideAngular(()=>$.Z.initializeApp(Oe,Ce));try{JSON.stringify(Oe)!==JSON.stringify(me.options)&&q("error",`${me.name} Firebase App already initialized with different options${mt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new we(me)}const q=(Oe,...Ct)=>{(0,f.X6Q)()&&typeof console<"u"&&console[Oe](...Ct)},ie={provide:we,useFactory:z,deps:[Ne,f.R0b,[new f.FiY,Ee]]};let Ve=(()=>{class Oe{constructor(dt){$.Z.registerVersion("angularfire",O.q4.full,"core"),$.Z.registerVersion("angularfire",O.q4.full,"app-compat"),$.Z.registerVersion("angular",f.q4F.full,dt.toString())}static initializeApp(dt,re){return{ngModule:Oe,providers:[{provide:Ne,useValue:dt},{provide:Ee,useValue:re}]}}}return Oe.\u0275fac=function(dt){return new(dt||Oe)(f.LFG(f.Lbi))},Oe.\u0275mod=f.oAB({type:Oe}),Oe.\u0275inj=f.cJS({providers:[ie]}),Oe})();function Re(Oe,Ct,dt,re,Ce){const[,ae,me]=globalThis.\u0275AngularfireInstanceCache.find(Pe=>Pe[0]===Oe)||[];if(ae)return function Xe(Oe,Ct){try{return Oe.toString()===Ct.toString()}catch{return Oe===Ct}}(Ce,me)||(Ze("error",`${Ct} was already initialized on the ${dt} Firebase App with different settings.${xe?" You may need to reload as Firebase is not HMR aware.":""}`),Ze("warn",{is:Ce,was:me})),ae;{const Pe=re();return globalThis.\u0275AngularfireInstanceCache.push([Oe,Pe,Ce]),Pe}}const xe=!!mt.hot,Ze=(Oe,...Ct)=>{(0,f.X6Q)()&&typeof console<"u"&&console[Oe](...Ct)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(mt,be,U)=>{U.d(be,{q4:()=>Lr,iC:()=>Fl,fc:()=>qo,HU:()=>Vp,vb:()=>kh,JM:()=>dy});var f=U(2223),$=U(259),O=U(5861),ee=U(6881),ue=U(2090),_e=U(4859),we=U(1877);const Ne=(I,T)=>T.some(R=>I instanceof R);let Ee,z;const Ve=new WeakMap,Re=new WeakMap,Xe=new WeakMap,xe=new WeakMap,Ze=new WeakMap;let dt={get(I,T,R){if(I instanceof IDBTransaction){if("done"===T)return Re.get(I);if("objectStoreNames"===T)return I.objectStoreNames||Xe.get(I);if("store"===T)return R.objectStoreNames[1]?void 0:R.objectStore(R.objectStoreNames[0])}return me(I[T])},set:(I,T,R)=>(I[T]=R,!0),has:(I,T)=>I instanceof IDBTransaction&&("done"===T||"store"===T)||T in I};function ae(I){return"function"==typeof I?function Ce(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ie(){return z||(z=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...T){return I.apply(Pe(this),T),me(Ve.get(this))}:function(...T){return me(I.apply(Pe(this),T))}:function(T,...R){const B=I.call(Pe(this),T,...R);return Xe.set(B,T.sort?T.sort():[T]),me(B)}}(I):(I instanceof IDBTransaction&&function Ct(I){if(Re.has(I))return;const T=new Promise((R,B)=>{const K=()=>{I.removeEventListener("complete",X),I.removeEventListener("error",pe),I.removeEventListener("abort",pe)},X=()=>{R(),K()},pe=()=>{B(I.error||new DOMException("AbortError","AbortError")),K()};I.addEventListener("complete",X),I.addEventListener("error",pe),I.addEventListener("abort",pe)});Re.set(I,T)}(I),Ne(I,function q(){return Ee||(Ee=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,dt):I)}function me(I){if(I instanceof IDBRequest)return function Oe(I){const T=new Promise((R,B)=>{const K=()=>{I.removeEventListener("success",X),I.removeEventListener("error",pe)},X=()=>{R(me(I.result)),K()},pe=()=>{B(I.error),K()};I.addEventListener("success",X),I.addEventListener("error",pe)});return T.then(R=>{R instanceof IDBCursor&&Ve.set(R,I)}).catch(()=>{}),Ze.set(T,I),T}(I);if(xe.has(I))return xe.get(I);const T=ae(I);return T!==I&&(xe.set(I,T),Ze.set(T,I)),T}const Pe=I=>Ze.get(I),$e=["get","getKey","getAll","getAllKeys","count"],en=["put","add","delete","clear"],wr=new Map;function ii(I,T){if(!(I instanceof IDBDatabase)||T in I||"string"!=typeof T)return;if(wr.get(T))return wr.get(T);const R=T.replace(/FromIndex$/,""),B=T!==R,K=en.includes(R);if(!(R in(B?IDBIndex:IDBObjectStore).prototype)||!K&&!$e.includes(R))return;const X=function(){var pe=(0,O.Z)(function*(Ke,...ze){const pt=this.transaction(Ke,K?"readwrite":"readonly");let Lt=pt.store;return B&&(Lt=Lt.index(ze.shift())),(yield Promise.all([Lt[R](...ze),K&&pt.done]))[0]});return function(ze){return pe.apply(this,arguments)}}();return wr.set(T,X),X}!function re(I){dt=I(dt)}(I=>({...I,get:(T,R,B)=>ii(T,R)||I.get(T,R,B),has:(T,R)=>!!ii(T,R)||I.has(T,R)}));const zs="@firebase/installations",de="0.6.4",Ie=1e4,Te=`w:${de}`,ke="FIS_v2",Ge="https://firebaseinstallations.googleapis.com/v1",Be=36e5,rt=new ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function yt(I){return I instanceof ue.ZR&&I.code.includes("request-failed")}function sn({projectId:I}){return`${Ge}/projects/${I}/installations`}function vn(I){return{token:I.token,requestStatus:2,expiresIn:Ni(I.expiresIn),creationTime:Date.now()}}function $n(I,T){return tn.apply(this,arguments)}function tn(){return(tn=(0,O.Z)(function*(I,T){const B=(yield T.json()).error;return rt.create("request-failed",{requestName:I,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function Er({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function rr(I){return qn.apply(this,arguments)}function qn(){return(qn=(0,O.Z)(function*(I){const T=yield I();return T.status>=500&&T.status<600?I():T})).apply(this,arguments)}function Ni(I){return Number(I.replace("s","000"))}function Hr(){return(Hr=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:T},{fid:R}){const B=sn(I),K=Er(I),X=T.getImmediate({optional:!0});if(X){const pt=yield X.getHeartbeatsHeader();pt&&K.append("x-firebase-client",pt)}const Ke={method:"POST",headers:K,body:JSON.stringify({fid:R,authVersion:ke,appId:I.appId,sdkVersion:Te})},ze=yield rr(()=>fetch(B,Ke));if(ze.ok){const pt=yield ze.json();return{fid:pt.fid||R,registrationStatus:2,refreshToken:pt.refreshToken,authToken:vn(pt.authToken)}}throw yield $n("Create Installation",ze)})).apply(this,arguments)}function Kn(I){return new Promise(T=>{setTimeout(T,I)})}const Cs=/^[cdef][\w-]{21}$/,Ye="";function ht(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const R=function wt(I){return function si(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Cs.test(R)?R:Ye}catch{return Ye}}function Zt(I){return`${I.appName}!${I.appId}`}const fr=new Map;function _i(I,T){const R=Zt(I);us(R,T),function gn(I,T){const R=function Ft(){return!ti&&"BroadcastChannel"in self&&(ti=new BroadcastChannel("[Firebase] FID Change"),ti.onmessage=I=>{us(I.data.key,I.data.fid)}),ti}();R&&R.postMessage({key:I,fid:T}),function Pn(){0===fr.size&&ti&&(ti.close(),ti=null)}()}(R,T)}function us(I,T){const R=fr.get(I);if(R)for(const B of R)B(T)}let ti=null;const Wi="firebase-installations-database",Ds=1,$r="firebase-installations-store";let Zn=null;function Tn(){return Zn||(Zn=function ne(I,T,{blocked:R,upgrade:B,blocking:K,terminated:X}={}){const pe=indexedDB.open(I,T),Ke=me(pe);return B&&pe.addEventListener("upgradeneeded",ze=>{B(me(pe.result),ze.oldVersion,ze.newVersion,me(pe.transaction))}),R&&pe.addEventListener("blocked",()=>R()),Ke.then(ze=>{X&&ze.addEventListener("close",()=>X()),K&&ze.addEventListener("versionchange",()=>K())}).catch(()=>{}),Ke}(Wi,Ds,{upgrade:(I,T)=>{0===T&&I.createObjectStore($r)}})),Zn}function sr(I,T){return On.apply(this,arguments)}function On(){return(On=(0,O.Z)(function*(I,T){const R=Zt(I),K=(yield Tn()).transaction($r,"readwrite"),X=K.objectStore($r),pe=yield X.get(R);return yield X.put(T,R),yield K.done,(!pe||pe.fid!==T.fid)&&_i(I,T.fid),T})).apply(this,arguments)}function pr(I){return kn.apply(this,arguments)}function kn(){return(kn=(0,O.Z)(function*(I){const T=Zt(I),B=(yield Tn()).transaction($r,"readwrite");yield B.objectStore($r).delete(T),yield B.done})).apply(this,arguments)}function oi(I,T){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,O.Z)(function*(I,T){const R=Zt(I),K=(yield Tn()).transaction($r,"readwrite"),X=K.objectStore($r),pe=yield X.get(R),Ke=T(pe);return void 0===Ke?yield X.delete(R):yield X.put(Ke,R),yield K.done,Ke&&(!pe||pe.fid!==Ke.fid)&&_i(I,Ke.fid),Ke})).apply(this,arguments)}function W(I){return G.apply(this,arguments)}function G(){return G=(0,O.Z)(function*(I){let T;const R=yield oi(I.appConfig,B=>{const K=function F(I){return It(I||{fid:ht(),registrationStatus:0})}(B),X=function V(I,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(rt.create("app-offline"))};const R={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},B=function P(I,T){return J.apply(this,arguments)}(I,R);return{installationEntry:R,registrationPromise:B}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:ve(I)}:{installationEntry:T}}(I,K);return T=X.registrationPromise,X.installationEntry});return R.fid===Ye?{installationEntry:yield T}:{installationEntry:R,registrationPromise:T}}),G.apply(this,arguments)}function J(){return J=(0,O.Z)(function*(I,T){try{const R=yield function zi(I,T){return Hr.apply(this,arguments)}(I,T);return sr(I.appConfig,R)}catch(R){throw yt(R)&&409===R.customData.serverCode?yield pr(I.appConfig):yield sr(I.appConfig,{fid:T.fid,registrationStatus:0}),R}}),J.apply(this,arguments)}function ve(I){return qe.apply(this,arguments)}function qe(){return(qe=(0,O.Z)(function*(I){let T=yield Et(I.appConfig);for(;1===T.registrationStatus;)yield Kn(100),T=yield Et(I.appConfig);if(0===T.registrationStatus){const{installationEntry:R,registrationPromise:B}=yield W(I);return B||R}return T})).apply(this,arguments)}function Et(I){return oi(I,T=>{if(!T)throw rt.create("installation-not-found");return It(T)})}function It(I){return function ft(I){return 1===I.registrationStatus&&I.registrationTime+Ie<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Cn(){return(Cn=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:T},R){const B=function Bt(I,{fid:T}){return`${sn(I)}/${T}/authTokens:generate`}(I,R),K=function hr(I,{refreshToken:T}){const R=Er(I);return R.append("Authorization",function Oo(I){return`${ke} ${I}`}(T)),R}(I,R),X=T.getImmediate({optional:!0});if(X){const pt=yield X.getHeartbeatsHeader();pt&&K.append("x-firebase-client",pt)}const Ke={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:Te,appId:I.appId}})},ze=yield rr(()=>fetch(B,Ke));if(ze.ok)return vn(yield ze.json());throw yield $n("Generate Auth Token",ze)})).apply(this,arguments)}function Nr(I){return Gr.apply(this,arguments)}function Gr(){return Gr=(0,O.Z)(function*(I,T=!1){let R;const B=yield oi(I.appConfig,X=>{if(!Ht(X))throw rt.create("not-registered");const pe=X.authToken;if(!T&&function on(I){return 2===I.requestStatus&&!function xr(I){const T=Date.now();return T<I.creationTime||I.creationTime+I.expiresIn<T+Be}(I)}(pe))return X;if(1===pe.requestStatus)return R=function ge(I,T){return oe.apply(this,arguments)}(I,T),X;{if(!navigator.onLine)throw rt.create("app-offline");const Ke=function Yn(I){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:T})}(X);return R=function gt(I,T){return xt.apply(this,arguments)}(I,Ke),Ke}});return R?yield R:B.authToken}),Gr.apply(this,arguments)}function oe(){return(oe=(0,O.Z)(function*(I,T){let R=yield Le(I.appConfig);for(;1===R.authToken.requestStatus;)yield Kn(100),R=yield Le(I.appConfig);const B=R.authToken;return 0===B.requestStatus?Nr(I,T):B})).apply(this,arguments)}function Le(I){return oi(I,T=>{if(!Ht(T))throw rt.create("not-registered");return function co(I){return 1===I.requestStatus&&I.requestTime+Ie<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function xt(){return xt=(0,O.Z)(function*(I,T){try{const R=yield function Mt(I,T){return Cn.apply(this,arguments)}(I,T),B=Object.assign(Object.assign({},T),{authToken:R});return yield sr(I.appConfig,B),R}catch(R){if(!yt(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const B=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield sr(I.appConfig,B)}else yield pr(I.appConfig);throw R}}),xt.apply(this,arguments)}function Ht(I){return void 0!==I&&2===I.registrationStatus}function tu(){return(tu=(0,O.Z)(function*(I){const T=I,{installationEntry:R,registrationPromise:B}=yield W(T);return B?B.catch(console.error):Nr(T).catch(console.error),R.fid})).apply(this,arguments)}function vi(){return vi=(0,O.Z)(function*(I,T=!1){const R=I;return yield function ho(I){return Fo.apply(this,arguments)}(R),(yield Nr(R,T)).token}),vi.apply(this,arguments)}function Fo(){return(Fo=(0,O.Z)(function*(I){const{registrationPromise:T}=yield W(I);T&&(yield T)})).apply(this,arguments)}function sa(I){return rt.create("missing-app-config-values",{valueName:I})}const Cc="installations",nu=I=>{const T=I.getProvider("app").getImmediate(),R=function cl(I){if(!I||!I.options)throw sa("App Configuration");if(!I.name)throw sa("App Name");const T=["projectId","apiKey","appId"];for(const R of T)if(!I.options[R])throw sa(R);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(T);return{app:T,appConfig:R,heartbeatServiceProvider:(0,ee._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},ru=I=>{const T=I.getProvider("app").getImmediate(),R=(0,ee._getProvider)(T,Cc).getImmediate();return{getId:()=>function ko(I){return tu.apply(this,arguments)}(R),getToken:K=>function eh(I){return vi.apply(this,arguments)}(R,K)}};(function nh(){(0,ee._registerComponent)(new _e.wA(Cc,nu,"PUBLIC")),(0,ee._registerComponent)(new _e.wA("installations-internal",ru,"PRIVATE"))})(),(0,ee.registerVersion)(zs,de),(0,ee.registerVersion)(zs,de,"esm2017");const dl="@firebase/remote-config",wn=new ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ou{constructor(T,R,B,K){this.client=T,this.storage=R,this.storageCache=B,this.logger=K}isCachedDataFresh(T,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-R,K=B<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${K}.`),K}fetch(T){var R=this;return(0,O.Z)(function*(){const[B,K]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(K&&R.isCachedDataFresh(T.cacheMaxAgeMillis,B))return K;T.eTag=K&&K.eTag;const X=yield R.client.fetch(T),pe=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&pe.push(R.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(pe),X})()}}function fl(I=navigator){return I.languages&&I.languages[0]||I.language}class fo{constructor(T,R,B,K,X,pe){this.firebaseInstallations=T,this.sdkVersion=R,this.namespace=B,this.projectId=K,this.apiKey=X,this.appId=pe}fetch(T){var R=this;return(0,O.Z)(function*(){const[B,K]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),pe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Ke={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},ze={sdk_version:R.sdkVersion,app_instance_id:B,app_instance_id_token:K,app_id:R.appId,language_code:fl()},pt={method:"POST",headers:Ke,body:JSON.stringify(ze)},Lt=fetch(pe,pt),kt=new Promise((Vi,Ui)=>{T.signal.addEventListener(()=>{const Na=new Error("The operation was aborted.");Na.name="AbortError",Ui(Na)})});let Yr;try{yield Promise.race([Lt,kt]),Yr=yield Lt}catch(Vi){let Ui="fetch-client-network";throw"AbortError"===Vi?.name&&(Ui="fetch-timeout"),wn.create(Ui,{originalErrorMessage:Vi?.message})}let mr=Yr.status;const Ys=Yr.headers.get("ETag")||void 0;let Ma,Os;if(200===Yr.status){let Vi;try{Vi=yield Yr.json()}catch(Ui){throw wn.create("fetch-client-parse",{originalErrorMessage:Ui?.message})}Ma=Vi.entries,Os=Vi.state}if("INSTANCE_STATE_UNSPECIFIED"===Os?mr=500:"NO_CHANGE"===Os?mr=304:("NO_TEMPLATE"===Os||"EMPTY_CONFIG"===Os)&&(Ma={}),304!==mr&&200!==mr)throw wn.create("fetch-status",{httpStatus:mr});return{status:mr,eTag:Ys,config:Ma}})()}}class Vo{constructor(T,R){this.client=T,this.storage=R}fetch(T){var R=this;return(0,O.Z)(function*(){const B=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(T,B)})()}attemptFetch(T,{throttleEndTimeMillis:R,backoffCount:B}){var K=this;return(0,O.Z)(function*(){yield function Fn(I,T){return new Promise((R,B)=>{const K=Math.max(T-Date.now(),0),X=setTimeout(R,K);I.addEventListener(()=>{clearTimeout(X),B(wn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,R);try{const X=yield K.client.fetch(T);return yield K.storage.deleteThrottleMetadata(),X}catch(X){if(!function pl(I){if(!(I instanceof ue.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}(X))throw X;const pe={throttleEndTimeMillis:Date.now()+(0,ue.$s)(B),backoffCount:B+1};return yield K.storage.setThrottleMetadata(pe),K.attemptFetch(T,pe)}})()}}class gl{constructor(T,R,B,K,X){this.app=T,this._client=R,this._storageCache=B,this._storage=K,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Wr(I,T){const R=I.target.error||void 0;return wn.create(T,{originalErrorMessage:R&&R?.message})}const li="app_namespace_store";class Ep{constructor(T,R,B,K=function un(){return new Promise((I,T)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=B=>{T(Wr(B,"storage-open"))},R.onsuccess=B=>{I(B.target.result)},R.onupgradeneeded=B=>{0===B.oldVersion&&B.target.result.createObjectStore(li,{keyPath:"compositeKey"})}}catch(R){T(wn.create("storage-open",{originalErrorMessage:R?.message}))}})}()){this.appId=T,this.appName=R,this.namespace=B,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var R=this;return(0,O.Z)(function*(){const B=yield R.openDbPromise;return new Promise((K,X)=>{const Ke=B.transaction([li],"readonly").objectStore(li),ze=R.createCompositeKey(T);try{const pt=Ke.get(ze);pt.onerror=Lt=>{X(Wr(Lt,"storage-get"))},pt.onsuccess=Lt=>{const kt=Lt.target.result;K(kt?kt.value:void 0)}}catch(pt){X(wn.create("storage-get",{originalErrorMessage:pt?.message}))}})})()}set(T,R){var B=this;return(0,O.Z)(function*(){const K=yield B.openDbPromise;return new Promise((X,pe)=>{const ze=K.transaction([li],"readwrite").objectStore(li),pt=B.createCompositeKey(T);try{const Lt=ze.put({compositeKey:pt,value:R});Lt.onerror=kt=>{pe(Wr(kt,"storage-set"))},Lt.onsuccess=()=>{X()}}catch(Lt){pe(wn.create("storage-set",{originalErrorMessage:Lt?.message}))}})})()}delete(T){var R=this;return(0,O.Z)(function*(){const B=yield R.openDbPromise;return new Promise((K,X)=>{const Ke=B.transaction([li],"readwrite").objectStore(li),ze=R.createCompositeKey(T);try{const pt=Ke.delete(ze);pt.onerror=Lt=>{X(Wr(Lt,"storage-delete"))},pt.onsuccess=()=>{K()}}catch(pt){X(wn.create("storage-delete",{originalErrorMessage:pt?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Ts{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,O.Z)(function*(){const R=T.storage.getLastFetchStatus(),B=T.storage.getLastSuccessfulFetchTimestampMillis(),K=T.storage.getActiveConfig(),X=yield R;X&&(T.lastFetchStatus=X);const pe=yield B;pe&&(T.lastSuccessfulFetchTimestampMillis=pe);const Ke=yield K;Ke&&(T.activeConfig=Ke)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function la(){return ca.apply(this,arguments)}function ca(){return(ca=(0,O.Z)(function*(){if(!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}!function Uo(){(0,ee._registerComponent)(new _e.wA("remote-config",function I(T,{instanceIdentifier:R}){const B=T.getProvider("app").getImmediate(),K=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw wn.create("registration-window");if(!(0,ue.hl)())throw wn.create("indexed-db-unavailable");const{projectId:X,apiKey:pe,appId:Ke}=B.options;if(!X)throw wn.create("registration-project-id");if(!pe)throw wn.create("registration-api-key");if(!Ke)throw wn.create("registration-app-id");const ze=new Ep(Ke,B.name,R=R||"firebase"),pt=new Ts(ze),Lt=new we.Yd(dl);Lt.logLevel=we.in.ERROR;const kt=new fo(K,ee.SDK_VERSION,R,X,pe,Ke),Yr=new Vo(kt,ze),mr=new ou(Yr,ze,pt,Lt),Ys=new gl(B,mr,pt,ze,Lt);return function Ut(I){const T=(0,ue.m9)(I);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Ys),Ys},"PUBLIC").setMultipleInstances(!0)),(0,ee.registerVersion)(dl,"0.4.4"),(0,ee.registerVersion)(dl,"0.4.4","esm2017")}();const Or=(I,T)=>T.some(R=>I instanceof R);let au,ni;const ds=new WeakMap,po=new WeakMap,Sn=new WeakMap,da=new WeakMap,ha=new WeakMap;let Tc={get(I,T,R){if(I instanceof IDBTransaction){if("done"===T)return po.get(I);if("objectStoreNames"===T)return I.objectStoreNames||Sn.get(I);if("store"===T)return R.objectStoreNames[1]?void 0:R.objectStore(R.objectStoreNames[0])}return Ss(I[T])},set:(I,T,R)=>(I[T]=R,!0),has:(I,T)=>I instanceof IDBTransaction&&("done"===T||"store"===T)||T in I};function oh(I){return"function"==typeof I?function ry(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function bc(){return ni||(ni=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...T){return I.apply(Sc(this),T),Ss(ds.get(this))}:function(...T){return Ss(I.apply(Sc(this),T))}:function(T,...R){const B=I.call(Sc(this),T,...R);return Sn.set(B,T.sort?T.sort():[T]),Ss(B)}}(I):(I instanceof IDBTransaction&&function ml(I){if(po.has(I))return;const T=new Promise((R,B)=>{const K=()=>{I.removeEventListener("complete",X),I.removeEventListener("error",pe),I.removeEventListener("abort",pe)},X=()=>{R(),K()},pe=()=>{B(I.error||new DOMException("AbortError","AbortError")),K()};I.addEventListener("complete",X),I.addEventListener("error",pe),I.addEventListener("abort",pe)});po.set(I,T)}(I),Or(I,function ri(){return au||(au=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,Tc):I)}function Ss(I){if(I instanceof IDBRequest)return function sh(I){const T=new Promise((R,B)=>{const K=()=>{I.removeEventListener("success",X),I.removeEventListener("error",pe)},X=()=>{R(Ss(I.result)),K()},pe=()=>{B(I.error),K()};I.addEventListener("success",X),I.addEventListener("error",pe)});return T.then(R=>{R instanceof IDBCursor&&ds.set(R,I)}).catch(()=>{}),ha.set(T,I),T}(I);if(da.has(I))return da.get(I);const T=oh(I);return T!==I&&(da.set(I,T),ha.set(T,I)),T}const Sc=I=>ha.get(I);function yl(I,T,{blocked:R,upgrade:B,blocking:K,terminated:X}={}){const pe=indexedDB.open(I,T),Ke=Ss(pe);return B&&pe.addEventListener("upgradeneeded",ze=>{B(Ss(pe.result),ze.oldVersion,ze.newVersion,Ss(pe.transaction))}),R&&pe.addEventListener("blocked",()=>R()),Ke.then(ze=>{X&&ze.addEventListener("close",()=>X()),K&&ze.addEventListener("versionchange",()=>K())}).catch(()=>{}),Ke}function _l(I,{blocked:T}={}){const R=indexedDB.deleteDatabase(I);return T&&R.addEventListener("blocked",()=>T()),Ss(R).then(()=>{})}const Cp=["get","getKey","getAll","getAllKeys","count"],ah=["put","add","delete","clear"],uh=new Map;function Ac(I,T){if(!(I instanceof IDBDatabase)||T in I||"string"!=typeof T)return;if(uh.get(T))return uh.get(T);const R=T.replace(/FromIndex$/,""),B=T!==R,K=ah.includes(R);if(!(R in(B?IDBIndex:IDBObjectStore).prototype)||!K&&!Cp.includes(R))return;const X=function(){var pe=(0,O.Z)(function*(Ke,...ze){const pt=this.transaction(Ke,K?"readwrite":"readonly");let Lt=pt.store;return B&&(Lt=Lt.index(ze.shift())),(yield Promise.all([Lt[R](...ze),K&&pt.done]))[0]});return function(ze){return pe.apply(this,arguments)}}();return uh.set(T,X),X}!function Ip(I){Tc=I(Tc)}(I=>({...I,get:(T,R,B)=>Ac(T,R)||I.get(T,R,B),has:(T,R)=>!!Ac(T,R)||I.has(T,R)}));const Rc="/firebase-messaging-sw.js",vl="/firebase-cloud-messaging-push-scope",wl="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Dp="https://fcmregistrations.googleapis.com/v1",lh="google.c.a.c_id",Qn="google.c.a.c_l",fa="google.c.a.ts";var hs=(()=>((hs=hs||{}).PUSH_RECEIVED="push-received",hs.NOTIFICATION_CLICKED="notification-clicked",hs))();function Pi(I){const T=new Uint8Array(I);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ch(I){const R=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(R),K=new Uint8Array(B.length);for(let X=0;X<B.length;++X)K[X]=B.charCodeAt(X);return K}const uu="fcm_token_details_db",lu=5,iy="fcm_token_object_Store";function Oi(){return Oi=(0,O.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(uu))return null;let T=null;return(yield yl(uu,lu,{upgrade:(B=(0,O.Z)(function*(K,X,pe,Ke){var ze;if(X<2||!K.objectStoreNames.contains(iy))return;const pt=Ke.objectStore(iy),Lt=yield pt.index("fcmSenderId").get(I);if(yield pt.clear(),Lt)if(2===X){const kt=Lt;if(!kt.auth||!kt.p256dh||!kt.endpoint)return;T={token:kt.fcmToken,createTime:null!==(ze=kt.createTime)&&void 0!==ze?ze:Date.now(),subscriptionOptions:{auth:kt.auth,p256dh:kt.p256dh,endpoint:kt.endpoint,swScope:kt.swScope,vapidKey:"string"==typeof kt.vapidKey?kt.vapidKey:Pi(kt.vapidKey)}}}else if(3===X){const kt=Lt;T={token:kt.fcmToken,createTime:kt.createTime,subscriptionOptions:{auth:Pi(kt.auth),p256dh:Pi(kt.p256dh),endpoint:kt.endpoint,swScope:kt.swScope,vapidKey:Pi(kt.vapidKey)}}}else if(4===X){const kt=Lt;T={token:kt.fcmToken,createTime:kt.createTime,subscriptionOptions:{auth:Pi(kt.auth),p256dh:Pi(kt.p256dh),endpoint:kt.endpoint,swScope:kt.swScope,vapidKey:Pi(kt.vapidKey)}}}}),function(X,pe,Ke,ze){return B.apply(this,arguments)})})).close(),yield _l(uu),yield _l("fcm_vapid_details_db"),yield _l("undefined"),function pa(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:T}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}(T)?T:null;var B}),Oi.apply(this,arguments)}const kr="firebase-messaging-database",ga=1,fs="firebase-messaging-store";let ma=null;function El(){return ma||(ma=yl(kr,ga,{upgrade:(I,T)=>{0===T&&I.createObjectStore(fs)}})),ma}function go(I){return Il.apply(this,arguments)}function Il(){return Il=(0,O.Z)(function*(I){const T=cu(I),B=yield(yield El()).transaction(fs).objectStore(fs).get(T);if(B)return B;{const K=yield function dh(I){return Oi.apply(this,arguments)}(I.appConfig.senderId);if(K)return yield Nc(I,K),K}}),Il.apply(this,arguments)}function Nc(I,T){return xc.apply(this,arguments)}function xc(){return(xc=(0,O.Z)(function*(I,T){const R=cu(I),K=(yield El()).transaction(fs,"readwrite");return yield K.objectStore(fs).put(T,R),yield K.done,T})).apply(this,arguments)}function ya(){return(ya=(0,O.Z)(function*(I){const T=cu(I),B=(yield El()).transaction(fs,"readwrite");yield B.objectStore(fs).delete(T),yield B.done})).apply(this,arguments)}function cu({appConfig:I}){return I.appId}const qr=new ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function rw(I,T){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,O.Z)(function*(I,T){const R=yield du(I),B=hu(T),K={method:"POST",headers:R,body:JSON.stringify(B)};let X;try{X=yield(yield fetch(Oc(I.appConfig),K)).json()}catch(pe){throw qr.create("token-subscribe-failed",{errorInfo:pe?.toString()})}if(X.error)throw qr.create("token-subscribe-failed",{errorInfo:X.error.message});if(!X.token)throw qr.create("token-subscribe-no-token");return X.token})).apply(this,arguments)}function Dl(){return(Dl=(0,O.Z)(function*(I,T){const R=yield du(I),B=hu(T.subscriptionOptions),K={method:"PATCH",headers:R,body:JSON.stringify(B)};let X;try{X=yield(yield fetch(`${Oc(I.appConfig)}/${T.token}`,K)).json()}catch(pe){throw qr.create("token-update-failed",{errorInfo:pe?.toString()})}if(X.error)throw qr.create("token-update-failed",{errorInfo:X.error.message});if(!X.token)throw qr.create("token-update-no-token");return X.token})).apply(this,arguments)}function Tp(I,T){return _a.apply(this,arguments)}function _a(){return(_a=(0,O.Z)(function*(I,T){const B={method:"DELETE",headers:yield du(I)};try{const X=yield(yield fetch(`${Oc(I.appConfig)}/${T}`,B)).json();if(X.error)throw qr.create("token-unsubscribe-failed",{errorInfo:X.error.message})}catch(K){throw qr.create("token-unsubscribe-failed",{errorInfo:K?.toString()})}})).apply(this,arguments)}function Oc({projectId:I}){return`${Dp}/projects/${I}/registrations`}function du(I){return hh.apply(this,arguments)}function hh(){return(hh=(0,O.Z)(function*({appConfig:I,installations:T}){const R=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function hu({p256dh:I,auth:T,endpoint:R,vapidKey:B}){const K={web:{endpoint:R,auth:T,p256dh:I}};return B!==wl&&(K.web.applicationPubKey=B),K}const fh=6048e5;function bl(){return bl=(0,O.Z)(function*(I){const T=yield function Vc(I,T){return ci.apply(this,arguments)}(I.swRegistration,I.vapidKey),R={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:T.endpoint,auth:Pi(T.getKey("auth")),p256dh:Pi(T.getKey("p256dh"))},B=yield go(I.firebaseDependencies);if(B){if(function Tl(I,T){return T.vapidKey===I.vapidKey&&T.endpoint===I.endpoint&&T.auth===I.auth&&T.p256dh===I.p256dh}(B.subscriptionOptions,R))return Date.now()>=B.createTime+fh?function kc(I,T){return Fc.apply(this,arguments)}(I,{token:B.token,createTime:Date.now(),subscriptionOptions:R}):B.token;try{yield Tp(I.firebaseDependencies,B.token)}catch(K){console.warn(K)}return mn(I.firebaseDependencies,R)}return mn(I.firebaseDependencies,R)}),bl.apply(this,arguments)}function qi(){return qi=(0,O.Z)(function*(I){const T=yield go(I.firebaseDependencies);T&&(yield Tp(I.firebaseDependencies,T.token),yield function Pc(I){return ya.apply(this,arguments)}(I.firebaseDependencies));const R=yield I.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()}),qi.apply(this,arguments)}function Fc(){return Fc=(0,O.Z)(function*(I,T){try{const R=yield function bp(I,T){return Dl.apply(this,arguments)}(I.firebaseDependencies,T),B=Object.assign(Object.assign({},T),{token:R,createTime:Date.now()});return yield Nc(I.firebaseDependencies,B),R}catch(R){throw yield function Sp(I){return qi.apply(this,arguments)}(I),R}}),Fc.apply(this,arguments)}function mn(I,T){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,O.Z)(function*(I,T){const B={token:yield rw(I,T),createTime:Date.now(),subscriptionOptions:T};return yield Nc(I,B),B.token})).apply(this,arguments)}function ci(){return(ci=(0,O.Z)(function*(I,T){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ch(T)})})).apply(this,arguments)}function Uc(I){const T={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function mo(I,T){if(!T.notification)return;I.notification={};const R=T.notification.title;R&&(I.notification.title=R);const B=T.notification.body;B&&(I.notification.body=B);const K=T.notification.image;K&&(I.notification.image=K);const X=T.notification.icon;X&&(I.notification.icon=X)}(T,I),function Kr(I,T){T.data&&(I.data=T.data)}(T,I),function oy(I,T){var R,B,K,X,pe;if(!(T.fcmOptions||null!==(R=T.notification)&&void 0!==R&&R.click_action))return;I.fcmOptions={};const Ke=null!==(K=null===(B=T.fcmOptions)||void 0===B?void 0:B.link)&&void 0!==K?K:null===(X=T.notification)||void 0===X?void 0:X.click_action;Ke&&(I.fcmOptions.link=Ke);const ze=null===(pe=T.fcmOptions)||void 0===pe?void 0:pe.analytics_label;ze&&(I.fcmOptions.analyticsLabel=ze)}(T,I),T}function gh(I,T){const R=[];for(let B=0;B<I.length;B++)R.push(I.charAt(B)),B<T.length&&R.push(T.charAt(B));return R.join("")}function Bc(I){return qr.create("missing-app-config-values",{valueName:I})}gh("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),gh("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class mh{constructor(T,R,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function Ho(I){if(!I||!I.options)throw Bc("App Configuration Object");if(!I.name)throw Bc("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:R}=I;for(const B of T)if(!R[B])throw Bc(B);return{appName:I.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:K,installations:R,analyticsProvider:B}}_delete(){return Promise.resolve()}}function Sl(){return(Sl=(0,O.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(Rc,{scope:vl}),I.swRegistration.update().catch(()=>{})}catch(T){throw qr.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function As(){return(As=(0,O.Z)(function*(I,T){if(!T&&!I.swRegistration&&(yield function jc(I){return Sl.apply(this,arguments)}(I)),T||!I.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw qr.create("invalid-sw-registration");I.swRegistration=T}})).apply(this,arguments)}function wa(){return(wa=(0,O.Z)(function*(I,T){T?I.vapidKey=T:I.vapidKey||(I.vapidKey=wl)})).apply(this,arguments)}function Hc(){return Hc=(0,O.Z)(function*(I,T){if(!navigator)throw qr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw qr.create("permission-blocked");return yield function Rt(I,T){return wa.apply(this,arguments)}(I,T?.vapidKey),yield function va(I,T){return As.apply(this,arguments)}(I,T?.serviceWorkerRegistration),function ph(I){return bl.apply(this,arguments)}(I)}),Hc.apply(this,arguments)}function $c(){return($c=(0,O.Z)(function*(I,T,R){const B=function _h(I){switch(I){case hs.NOTIFICATION_CLICKED:return"notification_open";case hs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(T);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:R[lh],message_name:R[Qn],message_time:R[fa],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function fu(){return fu=(0,O.Z)(function*(I,T){const R=T.data;if(!R.isFirebaseMessaging)return;I.onMessageHandler&&R.messageType===hs.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Uc(R)):I.onMessageHandler.next(Uc(R)));const B=R.data;(function jo(I){return"object"==typeof I&&!!I&&lh in I})(B)&&"1"===B["google.c.a.e"]&&(yield function ay(I,T,R){return $c.apply(this,arguments)}(I,R.messageType,B))}),fu.apply(this,arguments)}const Gc="@firebase/messaging",Al=I=>{const T=new mh(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function yo(I,T){return fu.apply(this,arguments)}(T,R)),T},Ap=I=>{const T=I.getProvider("messaging").getImmediate();return{getToken:B=>function yh(I,T){return Hc.apply(this,arguments)}(T,B)}};function nn(){return zc.apply(this,arguments)}function zc(){return(zc=(0,O.Z)(function*(){try{yield(0,ue.eu)()}catch{return!1}return typeof window<"u"&&(0,ue.hl)()&&(0,ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Me(){(0,ee._registerComponent)(new _e.wA("messaging",Al,"PUBLIC")),(0,ee._registerComponent)(new _e.wA("messaging-internal",Ap,"PRIVATE")),(0,ee.registerVersion)(Gc,"0.12.4"),(0,ee.registerVersion)(Gc,"0.12.4","esm2017")}();const wh="analytics",mu="firebase_id",wi="origin",ps=6e4,Eh="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",_o="https://www.googletagmanager.com/gtag/js",Dn=new we.Yd("@firebase/analytics"),Cr=new ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Wc(I){if(!I.startsWith(_o)){const T=Cr.create("invalid-gtag-resource",{gtagURL:I});return Dn.warn(T.message),""}return I}function $o(I){return Promise.all(I.map(T=>T.catch(R=>R)))}function yu(){return(yu=(0,O.Z)(function*(I,T,R,B,K,X){const pe=B[K];try{if(pe)yield T[pe];else{const ze=(yield $o(R)).find(pt=>pt.measurementId===K);ze&&(yield T[ze.appId])}}catch(Ke){Dn.error(Ke)}I("config",K,X)})).apply(this,arguments)}function vo(){return(vo=(0,O.Z)(function*(I,T,R,B,K){try{let X=[];if(K&&K.send_to){let pe=K.send_to;Array.isArray(pe)||(pe=[pe]);const Ke=yield $o(R);for(const ze of pe){const pt=Ke.find(kt=>kt.measurementId===ze),Lt=pt&&T[pt.appId];if(!Lt){X=[];break}X.push(Lt)}}0===X.length&&(X=Object.values(T)),yield Promise.all(X),I("event",B,K||{})}catch(X){Dn.error(X)}})).apply(this,arguments)}const Zc=30,Mp=new class uy{constructor(T={},R=1e3){this.throttleMetadata=T,this.intervalMillis=R}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,R){this.throttleMetadata[T]=R}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Ei(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Ln(){return(Ln=(0,O.Z)(function*(I){var T;const{appId:R,apiKey:B}=I,K={method:"GET",headers:Ei(B)},X=Eh.replace("{app-id}",R),pe=yield fetch(X,K);if(200!==pe.status&&304!==pe.status){let Ke="";try{const ze=yield pe.json();null!==(T=ze.error)&&void 0!==T&&T.message&&(Ke=ze.error.message)}catch{}throw Cr.create("config-fetch-failed",{httpStatus:pe.status,responseMessage:Ke})}return pe.json()})).apply(this,arguments)}function bh(){return(bh=(0,O.Z)(function*(I,T=Mp,R){const{appId:B,apiKey:K,measurementId:X}=I.options;if(!B)throw Cr.create("no-app-id");if(!K){if(X)return{measurementId:X,appId:B};throw Cr.create("no-api-key")}const pe=T.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ke=new Xc;return setTimeout((0,O.Z)(function*(){Ke.abort()}),void 0!==R?R:ps),Np({appId:B,apiKey:K,measurementId:X},pe,Ke,T)})).apply(this,arguments)}function Np(I,T,R){return Th.apply(this,arguments)}function Th(){return Th=(0,O.Z)(function*(I,{throttleEndTimeMillis:T,backoffCount:R},B,K=Mp){var X;const{appId:pe,measurementId:Ke}=I;try{yield function Qc(I,T){return new Promise((R,B)=>{const K=Math.max(T-Date.now(),0),X=setTimeout(R,K);I.addEventListener(()=>{clearTimeout(X),B(Cr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(B,T)}catch(ze){if(Ke)return Dn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ke} provided in the "measurementId" field in the local Firebase config. [${ze?.message}]`),{appId:pe,measurementId:Ke};throw ze}try{const ze=yield function Go(I){return Ln.apply(this,arguments)}(I);return K.deleteThrottleMetadata(pe),ze}catch(ze){const pt=ze;if(!function xp(I){if(!(I instanceof ue.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}(pt)){if(K.deleteThrottleMetadata(pe),Ke)return Dn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ke} provided in the "measurementId" field in the local Firebase config. [${pt?.message}]`),{appId:pe,measurementId:Ke};throw ze}const Lt=503===Number(null===(X=pt?.customData)||void 0===X?void 0:X.httpStatus)?(0,ue.$s)(R,K.intervalMillis,Zc):(0,ue.$s)(R,K.intervalMillis),kt={throttleEndTimeMillis:Date.now()+Lt,backoffCount:R+1};return K.setThrottleMetadata(pe,kt),Dn.debug(`Calling attemptFetch again in ${Lt} millis`),Np(I,kt,B,K)}}),Th.apply(this,arguments)}class Xc{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Ms,ln;function vu(){return(vu=(0,O.Z)(function*(I,T,R,B,K){if(K&&K.global)I("event",R,B);else{const X=yield T;I("event",R,Object.assign(Object.assign({},B),{send_to:X}))}})).apply(this,arguments)}function Dr(){return(Dr=(0,O.Z)(function*(){if(!(0,ue.hl)())return Dn.warn(Cr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ue.eu)()}catch(I){return Dn.warn(Cr.create("indexeddb-unavailable",{errorInfo:I?.toString()}).message),!1}return!0})).apply(this,arguments)}function yn(){return yn=(0,O.Z)(function*(I,T,R,B,K,X,pe){var Ke;const ze=function Yc(I){return bh.apply(this,arguments)}(I);ze.then(mr=>{R[mr.measurementId]=mr.appId,I.options.measurementId&&mr.measurementId!==I.options.measurementId&&Dn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${mr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(mr=>Dn.error(mr)),T.push(ze);const pt=function Eu(){return Dr.apply(this,arguments)}().then(mr=>{if(mr)return B.getId()}),[Lt,kt]=yield Promise.all([ze,pt]);(function Dh(I){const T=window.document.getElementsByTagName("script");for(const R of Object.values(T))if(R.src&&R.src.includes(_o)&&R.src.includes(I))return R;return null})(X)||function Ih(I,T){const R=function Ia(I,T){let R;return window.trustedTypes&&(R=window.trustedTypes.createPolicy(I,T)),R}("firebase-js-sdk-policy",{createScriptURL:Wc}),B=document.createElement("script"),K=`${_o}?l=${I}&id=${T}`;B.src=R?R?.createScriptURL(K):K,B.async=!0,document.head.appendChild(B)}(X,Lt.measurementId),ln&&(K("consent","default",ln),function Ca(I){ln=I}(void 0)),K("js",new Date);const Yr=null!==(Ke=pe?.config)&&void 0!==Ke?Ke:{};return Yr[wi]="firebase",Yr.update=!0,null!=kt&&(Yr[mu]=kt),K("config",Lt.measurementId,Yr),Ms&&(K("set",Ms),function zo(I){Ms=I}(void 0)),Lt.measurementId}),yn.apply(this,arguments)}class Tt{constructor(T){this.app=T}_delete(){return delete Ns[this.app.options.appId],Promise.resolve()}}let Ns={},Iu=[];const Cu={};let Da,Xn,xs="dataLayer",Ki=!1;function Du(I,T,R){!function ba(){const I=[];if((0,ue.ru)()&&I.push("This is a browser extension environment."),(0,ue.zI)()||I.push("Cookies are not available."),I.length>0){const T=I.map((B,K)=>`(${K+1}) ${B}`).join(" "),R=Cr.create("invalid-analytics-context",{errorInfo:T});Dn.warn(R.message)}}();const B=I.options.appId;if(!B)throw Cr.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Cr.create("no-api-key");Dn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ns[B])throw Cr.create("already-exists",{id:B});if(!Ki){!function Ml(I){let T=[];Array.isArray(window[I])?T=window[I]:window[I]=T}(xs);const{wrappedGtag:X,gtagCore:pe}=function Ch(I,T,R,B,K){let X=function(...pe){window[B].push(arguments)};return window[K]&&"function"==typeof window[K]&&(X=window[K]),window[K]=function Rs(I,T,R,B){function X(){return X=(0,O.Z)(function*(pe,...Ke){try{if("event"===pe){const[ze,pt]=Ke;yield function Kc(I,T,R,B,K){return vo.apply(this,arguments)}(I,T,R,ze,pt)}else if("config"===pe){const[ze,pt]=Ke;yield function qc(I,T,R,B,K,X){return yu.apply(this,arguments)}(I,T,R,B,ze,pt)}else if("consent"===pe){const[ze]=Ke;I("consent","update",ze)}else if("get"===pe){const[ze,pt,Lt]=Ke;I("get",ze,pt,Lt)}else if("set"===pe){const[ze]=Ke;I("set",ze)}else I(pe,...Ke)}catch(ze){Dn.error(ze)}}),X.apply(this,arguments)}return function K(pe){return X.apply(this,arguments)}}(X,I,T,R),{gtagCore:X,wrappedGtag:window[K]}}(Ns,Iu,Cu,xs,"gtag");Xn=X,Da=pe,Ki=!0}return Ns[B]=function Zr(I,T,R,B,K,X,pe){return yn.apply(this,arguments)}(I,Iu,Cu,T,Da,xs,R),new Tt(I)}function Ps(){return Li.apply(this,arguments)}function Li(){return(Li=(0,O.Z)(function*(){if((0,ue.ru)()||!(0,ue.zI)()||!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}const Nh="@firebase/analytics";!function Io(){(0,ee._registerComponent)(new _e.wA(wh,(T,{options:R})=>Du(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ee._registerComponent)(new _e.wA("analytics-internal",function I(T){try{const R=T.getProvider(wh).getImmediate();return{logEvent:(B,K,X)=>function Eo(I,T,R,B){I=(0,ue.m9)(I),function Sh(I,T,R,B,K){return vu.apply(this,arguments)}(Xn,Ns[I.app.options.appId],T,R,B).catch(K=>Dn.error(K))}(R,B,K,X)}}catch(R){throw Cr.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ee.registerVersion)(Nh,"0.10.0"),(0,ee.registerVersion)(Nh,"0.10.0","esm2017")}();var Op=U(4408),Ol=U(7565);const Fp=new class cy extends Ol.v{}(class kp extends Op.o{constructor(T,R){super(T,R),this.scheduler=T,this.work=R}schedule(T,R=0){return R>0?super.schedule(T,R):(this.delay=R,this.state=T,this.scheduler.flush(this),this)}execute(T,R){return R>0||this.closed?super.execute(T,R):this._execute(T,R)}requestAsyncId(T,R,B=0){return null!=B&&B>0||null==B&&this.delay>0?super.requestAsyncId(T,R,B):(T.flush(this),0)}});var bu=U(4986),Wo=U(8505),Co=U(5363),ye=U(9468);const Lr=new f.GfV("7.6.1"),gr="__angularfire_symbol__analyticsIsSupportedValue",L="__angularfire_symbol__analyticsIsSupported",Ci="__angularfire_symbol__remoteConfigIsSupportedValue",Tu="__angularfire_symbol__remoteConfigIsSupported",kl="__angularfire_symbol__messagingIsSupportedValue",Ph="__angularfire_symbol__messagingIsSupported";function dy(I,T,R){if(T){if(1===T.length)return T[0];const X=T.filter(pe=>pe.app===R);if(1===X.length)return X[0]}return R.container.getProvider(I).getImmediate({optional:!0})}globalThis[L]||(globalThis[L]=Ps().then(I=>globalThis[gr]=I).catch(()=>globalThis[gr]=!1)),globalThis[Ph]||(globalThis[Ph]=nn().then(I=>globalThis[kl]=I).catch(()=>globalThis[kl]=!1)),globalThis[Tu]||(globalThis[Tu]=la().then(I=>globalThis[Ci]=I).catch(()=>globalThis[Ci]=!1));const kh=(I,T)=>{const R=T?[T]:(0,$.C6)(),B=[];return R.forEach(K=>{K.container.getProvider(I).instances.forEach(pe=>{B.includes(pe)||B.push(pe)})}),B};function Un(){}class sd{constructor(T,R=Fp){this.zone=T,this.delegate=R}now(){return this.delegate.now()}schedule(T,R,B){const K=this.zone;return this.delegate.schedule(function(pe){K.runGuarded(()=>{T.apply(this,[pe])})},R,B)}}class Aa{constructor(T){this.zone=T,this.task=null}call(T,R){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Un,{},Un,Un)),R.pipe((0,Wo.b)({next:B,complete:B,error:B})).subscribe(T).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Vp=(()=>{class I{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new sd(Zone.current)),this.insideAngular=R.run(()=>new sd(Zone.current,bu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(R){return new(R||I)(f.LFG(f.R0b))},I.\u0275prov=f.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function ur(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function qo(I){return I.pipe((0,Co.Q)(ur().outsideAngular))}function Fl(I){return ur(),function od(I){return function(R){return(R=R.lift(new Aa(I.ngZone))).pipe((0,ye.R)(I.outsideAngular),(0,Co.Q)(I.insideAngular))}}(ur())(I)}},1389:(mt,be,U)=>{U.d(be,{$:()=>Rc,A:()=>q,D:()=>Re,I:()=>th,J:()=>nu,L:()=>At,N:()=>oi,P:()=>Zr,Q:()=>Ep,R:()=>Ah,U:()=>Bo,V:()=>la,W:()=>ca,X:()=>xi,Y:()=>ri,Z:()=>bc,_:()=>ha,a:()=>Rl,a0:()=>wl,a1:()=>lh,a2:()=>pC,a3:()=>iy,a4:()=>Oi,a5:()=>kr,a6:()=>fs,a7:()=>El,a8:()=>Il,a9:()=>xc,aA:()=>ne,aB:()=>Ci,aC:()=>pr,aD:()=>Yt,aE:()=>Co,aF:()=>nd,aG:()=>ly,aH:()=>or,aL:()=>Zs,aO:()=>au,aa:()=>Pc,ab:()=>cu,ac:()=>sy,ad:()=>bp,ae:()=>Tp,af:()=>Oc,ai:()=>fh,aj:()=>bl,ak:()=>Sp,an:()=>ry,ao:()=>mo,aq:()=>wa,ar:()=>Gc,as:()=>$e,at:()=>It,au:()=>ve,av:()=>re,aw:()=>Yr,ax:()=>Vn,ay:()=>ft,az:()=>Ce,b:()=>pu,c:()=>Xn,d:()=>Du,e:()=>Ii,f:()=>Nh,g:()=>cy,h:()=>Op,i:()=>_u,j:()=>bu,k:()=>Vi,l:()=>ki,m:()=>Vl,p:()=>Ne,r:()=>Fi,s:()=>Rh,u:()=>Eu});var f=U(5861),$=U(2090),O=U(6881),ee=U(7582),ue=U(1877),_e=U(4859);const Ne={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},q={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Re=function ie(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Xe=function Ve(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},xe=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Oe=new ue.Yd("@firebase/auth");function dt(w,...g){Oe.logLevel<=ue.in.ERROR&&Oe.error(`Auth (${O.SDK_VERSION}): ${w}`,...g)}function re(w,...g){throw Pe(w,...g)}function Ce(w,...g){return Pe(w,...g)}function ae(w,g,y){const C=Object.assign(Object.assign({},Xe()),{[g]:y});return new $.LL("auth","Firebase",C).create(g,{appName:w.name})}function me(w,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&re(w,"argument-error"),ae(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pe(w,...g){if("string"!=typeof w){const y=g[0],C=[...g.slice(1)];return C[0]&&(C[0].appName=w.name),w._errorFactory.create(y,...C)}return xe.create(w,...g)}function ne(w,g,...y){if(!w)throw Pe(g,...y)}function tt(w){const g="INTERNAL ASSERTION FAILED: "+w;throw dt(g),new Error(g)}function $e(w,g){w||tt(g)}function en(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function wr(){return"http:"===ii()||"https:"===ii()}function ii(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Ie{constructor(g,y){this.shortDelay=g,this.longDelay=y,$e(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return function zs(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(wr()||(0,$.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Te(w,g){$e(w.emulator,"Emulator should always be set here");const{url:y}=w.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class ke{static initialize(g,y,C){this.fetchImpl=g,y&&(this.headersImpl=y),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void tt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void tt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void tt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ge={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Be=new Ie(3e4,6e4);function Je(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function ot(w,g,y,C){return xn.apply(this,arguments)}function xn(){return(xn=(0,f.Z)(function*(w,g,y,C,M={}){return rt(w,M,(0,f.Z)(function*(){let k={},Q={};C&&("GET"===g?Q=C:k={body:JSON.stringify(C)});const fe=(0,$.xO)(Object.assign({key:w.config.apiKey},Q)).slice(1),je=yield w._getAdditionalHeaders();return je["Content-Type"]="application/json",w.languageCode&&(je["X-Firebase-Locale"]=w.languageCode),ke.fetch()($n(w,w.config.apiHost,y,fe),Object.assign({method:g,headers:je,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function rt(w,g,y){return yt.apply(this,arguments)}function yt(){return(yt=(0,f.Z)(function*(w,g,y){w._canInitEmulator=!1;const C=Object.assign(Object.assign({},Ge),g);try{const M=new tn(w),k=yield Promise.race([y(),M.promise]);M.clearNetworkTimeout();const Q=yield k.json();if("needConfirmation"in Q)throw Er(w,"account-exists-with-different-credential",Q);if(k.ok&&!("errorMessage"in Q))return Q;{const fe=k.ok?Q.errorMessage:Q.error.message,[je,st]=fe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===je)throw Er(w,"credential-already-in-use",Q);if("EMAIL_EXISTS"===je)throw Er(w,"email-already-in-use",Q);if("USER_DISABLED"===je)throw Er(w,"user-disabled",Q);const Dt=C[je]||je.toLowerCase().replace(/[_\s]+/g,"-");if(st)throw ae(w,Dt,st);re(w,Dt)}}catch(M){if(M instanceof $.ZR)throw M;re(w,"network-request-failed",{message:String(M)})}})).apply(this,arguments)}function sn(w,g,y,C){return vn.apply(this,arguments)}function vn(){return(vn=(0,f.Z)(function*(w,g,y,C,M={}){const k=yield ot(w,g,y,C,M);return"mfaPendingCredential"in k&&re(w,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function $n(w,g,y,C){const M=`${g}${y}?${C}`;return w.config.emulator?Te(w.config,M):`${w.config.apiScheme}://${M}`}class tn{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,C)=>{this.timer=setTimeout(()=>C(Ce(this.auth,"network-request-failed")),Be.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Er(w,g,y){const C={appName:w.name};y.email&&(C.email=y.email),y.phoneNumber&&(C.phoneNumber=y.phoneNumber);const M=Ce(w,g,C);return M.customData._tokenResponse=y,M}function rr(){return(rr=(0,f.Z)(function*(w,g){return ot(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Ni(){return(Ni=(0,f.Z)(function*(w,g){return ot(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function zi(){return(zi=(0,f.Z)(function*(w,g){return ot(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Hr(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function Cs(){return(Cs=(0,f.Z)(function*(w,g=!1){const y=(0,$.m9)(w),C=yield y.getIdToken(g),M=ht(C);ne(M&&M.exp&&M.auth_time&&M.iat,y.auth,"internal-error");const k="object"==typeof M.firebase?M.firebase:void 0,Q=k?.sign_in_provider;return{claims:M,token:C,authTime:Hr(Ye(M.auth_time)),issuedAtTime:Hr(Ye(M.iat)),expirationTime:Hr(Ye(M.exp)),signInProvider:Q||null,signInSecondFactor:k?.sign_in_second_factor||null}})).apply(this,arguments)}function Ye(w){return 1e3*Number(w)}function ht(w){const[g,y,C]=w.split(".");if(void 0===g||void 0===y||void 0===C)return dt("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,$.tV)(y);return M?JSON.parse(M):(dt("Failed to decode base64 JWT payload"),null)}catch(M){return dt("Caught error parsing JWT payload as JSON",M?.toString()),null}}function Zt(w,g){return fr.apply(this,arguments)}function fr(){return(fr=(0,f.Z)(function*(w,g,y=!1){if(y)return g;try{return yield g}catch(C){throw C instanceof $.ZR&&function _i({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}(C)&&w.auth.currentUser===w&&(yield w.auth.signOut()),C}})).apply(this,arguments)}class Wt{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const M=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const C=this.getInterval(g);this.timerId=setTimeout((0,f.Z)(function*(){yield y.iteration()}),C)}iteration(){var g=this;return(0,f.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y?.code&&g.schedule(!0))}g.schedule()})()}}class ir{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hr(this.lastLoginAt),this.creationTime=Hr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function us(w){return gn.apply(this,arguments)}function gn(){return gn=(0,f.Z)(function*(w){var g;const y=w.auth,C=yield w.getIdToken(),M=yield Zt(w,function Oo(w,g){return zi.apply(this,arguments)}(y,{idToken:C}));ne(M?.users.length,y,"internal-error");const k=M.users[0];w._notifyReloadListener(k);const Q=null!==(g=k.providerUserInfo)&&void 0!==g&&g.length?function Wi(w){return w.map(g=>{var{providerId:y}=g,C=(0,ee._T)(g,["providerId"]);return{providerId:y,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}(k.providerUserInfo):[],fe=function Pn(w,g){return[...w.filter(C=>!g.some(M=>M.providerId===C.providerId)),...g]}(w.providerData,Q),Dt=!!w.isAnonymous&&!(w.email&&k.passwordHash||fe?.length),Xt={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:fe,metadata:new ir(k.createdAt,k.lastLoginAt),isAnonymous:Dt};Object.assign(w,Xt)}),gn.apply(this,arguments)}function Ft(){return(Ft=(0,f.Z)(function*(w){const g=(0,$.m9)(w);yield us(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function $r(){return($r=(0,f.Z)(function*(w,g){const y=yield rt(w,{},(0,f.Z)(function*(){const C=(0,$.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:M,apiKey:k}=w.config,Q=$n(w,M,"/v1/token",`key=${k}`),fe=yield w._getAdditionalHeaders();return fe["Content-Type"]="application/x-www-form-urlencoded",ke.fetch()(Q,{method:"POST",headers:fe,body:C})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class Zn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ne(g.idToken,"internal-error"),ne(typeof g.idToken<"u","internal-error"),ne(typeof g.refreshToken<"u","internal-error");const y="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function wt(w){const g=ht(w);return ne(g,"internal-error"),ne(typeof g.exp<"u","internal-error"),ne(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var C=this;return(0,f.Z)(function*(){return ne(!C.accessToken||C.refreshToken,g,"user-token-expired"),y||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(g,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var C=this;return(0,f.Z)(function*(){const{accessToken:M,refreshToken:k,expiresIn:Q}=yield function Ds(w,g){return $r.apply(this,arguments)}(g,y);C.updateTokensAndExpiration(M,k,Number(Q))})()}updateTokensAndExpiration(g,y,C){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(g,y){const{refreshToken:C,accessToken:M,expirationTime:k}=y,Q=new Zn;return C&&(ne("string"==typeof C,"internal-error",{appName:g}),Q.refreshToken=C),M&&(ne("string"==typeof M,"internal-error",{appName:g}),Q.accessToken=M),k&&(ne("number"==typeof k,"internal-error",{appName:g}),Q.expirationTime=k),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Zn,this.toJSON())}_performRefresh(){return tt("not implemented")}}function Tn(w,g){ne("string"==typeof w||typeof w>"u","internal-error",{appName:g})}class sr{constructor(g){var{uid:y,auth:C,stsTokenManager:M}=g,k=(0,ee._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=C,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new ir(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,f.Z)(function*(){const C=yield Zt(y,y.stsTokenManager.getToken(y.auth,g));return ne(C,y.auth,"internal-error"),y.accessToken!==C&&(y.accessToken=C,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),C})()}getIdTokenResult(g){return function si(w){return Cs.apply(this,arguments)}(this,g)}reload(){return function ti(w){return Ft.apply(this,arguments)}(this)}_assign(g){this!==g&&(ne(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const y=new sr(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return y.metadata._copy(this.metadata),y}_onReload(g){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var C=this;return(0,f.Z)(function*(){let M=!1;g.idToken&&g.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(g),M=!0),y&&(yield us(C)),yield C.auth._persistUserIfCurrent(C),M&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var g=this;return(0,f.Z)(function*(){const y=yield g.getIdToken();return yield Zt(g,function hr(w,g){return rr.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var C,M,k,Q,fe,je,st,Dt;const Xt=null!==(C=y.displayName)&&void 0!==C?C:void 0,gs=null!==(M=y.email)&&void 0!==M?M:void 0,Au=null!==(k=y.phoneNumber)&&void 0!==k?k:void 0,Wp=null!==(Q=y.photoURL)&&void 0!==Q?Q:void 0,Vh=null!==(fe=y.tenantId)&&void 0!==fe?fe:void 0,qp=null!==(je=y._redirectEventId)&&void 0!==je?je:void 0,Kp=null!==(st=y.createdAt)&&void 0!==st?st:void 0,Ru=null!==(Dt=y.lastLoginAt)&&void 0!==Dt?Dt:void 0,{uid:ud,emailVerified:Zp,isAnonymous:Yp,providerData:ld,stsTokenManager:Pa}=y;ne(ud&&Pa,g,"internal-error");const Qp=Zn.fromJSON(this.name,Pa);ne("string"==typeof ud,g,"internal-error"),Tn(Xt,g.name),Tn(gs,g.name),ne("boolean"==typeof Zp,g,"internal-error"),ne("boolean"==typeof Yp,g,"internal-error"),Tn(Au,g.name),Tn(Wp,g.name),Tn(Vh,g.name),Tn(qp,g.name),Tn(Kp,g.name),Tn(Ru,g.name);const Mu=new sr({uid:ud,auth:g,email:gs,emailVerified:Zp,displayName:Xt,isAnonymous:Yp,photoURL:Wp,phoneNumber:Au,tenantId:Vh,stsTokenManager:Qp,createdAt:Kp,lastLoginAt:Ru});return ld&&Array.isArray(ld)&&(Mu.providerData=ld.map(cd=>Object.assign({},cd))),qp&&(Mu._redirectEventId=qp),Mu}static _fromIdTokenResponse(g,y,C=!1){return(0,f.Z)(function*(){const M=new Zn;M.updateFromServerResponse(y);const k=new sr({uid:y.localId,auth:g,stsTokenManager:M,isAnonymous:C});return yield us(k),k})()}}const On=new Map;function pr(w){$e(w instanceof Function,"Expected a class definition");let g=On.get(w);return g?($e(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,On.set(w,g),g)}const oi=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(y,C){var M=this;return(0,f.Z)(function*(){M.storage[y]=C})()}_get(y){var C=this;return(0,f.Z)(function*(){const M=C.storage[y];return void 0===M?null:M})()}_remove(y){var C=this;return(0,f.Z)(function*(){delete C.storage[y]})()}_addListener(y,C){}_removeListener(y,C){}}return w.type="NONE",w})();function Yt(w,g,y){return`firebase:${w}:${g}:${y}`}class W{constructor(g,y,C){this.persistence=g,this.auth=y,this.userKey=C;const{config:M,name:k}=this.auth;this.fullUserKey=Yt(this.userKey,M.apiKey,k),this.fullPersistenceKey=Yt("persistence",M.apiKey,k),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,f.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?sr._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,f.Z)(function*(){if(y.persistence===g)return;const C=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,C?y.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,C="authUser"){return(0,f.Z)(function*(){if(!y.length)return new W(pr(oi),g,C);const M=(yield Promise.all(y.map(function(){var st=(0,f.Z)(function*(Dt){if(yield Dt._isAvailable())return Dt});return function(Dt){return st.apply(this,arguments)}}()))).filter(st=>st);let k=M[0]||pr(oi);const Q=Yt(C,g.config.apiKey,g.name);let fe=null;for(const st of y)try{const Dt=yield st._get(Q);if(Dt){const Xt=sr._fromJSON(g,Dt);st!==k&&(fe=Xt),k=st;break}}catch{}const je=M.filter(st=>st._shouldAllowMigration);return k._shouldAllowMigration&&je.length?(k=je[0],fe&&(yield k._set(Q,fe.toJSON())),yield Promise.all(y.map(function(){var st=(0,f.Z)(function*(Dt){if(Dt!==k)try{yield Dt._remove(Q)}catch{}});return function(Dt){return st.apply(this,arguments)}}())),new W(k,g,C)):new W(k,g,C)})()}}function G(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(J(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(F(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(qe(g))return"Blackberry";if(Et(g))return"Webos";if(V(g))return"Safari";if((g.includes("chrome/")||P(g))&&!g.includes("edge/"))return"Chrome";if(ve(g))return"Android";{const C=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===C?.length)return C[1]}return"Other"}function F(w=(0,$.z$)()){return/firefox\//i.test(w)}function V(w=(0,$.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function P(w=(0,$.z$)()){return/crios\//i.test(w)}function J(w=(0,$.z$)()){return/iemobile/i.test(w)}function ve(w=(0,$.z$)()){return/android/i.test(w)}function qe(w=(0,$.z$)()){return/blackberry/i.test(w)}function Et(w=(0,$.z$)()){return/webos/i.test(w)}function It(w=(0,$.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function ft(w=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function Bt(w=(0,$.z$)()){return It(w)||ve(w)||Et(w)||qe(w)||/windows phone/i.test(w)||J(w)}function Gr(w,g=[]){let y;switch(w){case"Browser":y=G((0,$.z$)());break;case"Worker":y=`${G((0,$.z$)())}-${w}`;break;default:y=w}const C=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${O.SDK_VERSION}/${C}`}function oe(){return(oe=(0,f.Z)(function*(w){return(yield ot(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Le(w,g){return gt.apply(this,arguments)}function gt(){return(gt=(0,f.Z)(function*(w,g){return ot(w,"GET","/v2/recaptchaConfig",Je(w,g))})).apply(this,arguments)}function xt(w){return void 0!==w&&void 0!==w.getResponse}function Ht(w){return void 0!==w&&void 0!==w.enterprise}class on{constructor(g){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===g.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=g.recaptchaKey.split("/")[3],this.emailPasswordEnabled=g.recaptchaEnforcementState.some(y=>"EMAIL_PASSWORD_PROVIDER"===y.provider&&"OFF"!==y.enforcementState)}}function Yn(w){return new Promise((g,y)=>{const C=document.createElement("script");C.setAttribute("src",w),C.onload=g,C.onerror=M=>{const k=Ce("internal-error");k.customData=M,y(k)},C.type="text/javascript",C.charset="UTF-8",function xr(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(C)})}function co(w){return`__${w}${Math.floor(1e6*Math.random())}`}class vi{constructor(g){this.type="recaptcha-enterprise",this.auth=or(g)}verify(g="verify",y=!1){var C=this;return(0,f.Z)(function*(){function k(){return k=(0,f.Z)(function*(fe){if(!y){if(null==fe.tenantId&&null!=fe._agentRecaptchaConfig)return fe._agentRecaptchaConfig.siteKey;if(null!=fe.tenantId&&void 0!==fe._tenantRecaptchaConfigs[fe.tenantId])return fe._tenantRecaptchaConfigs[fe.tenantId].siteKey}return new Promise(function(){var je=(0,f.Z)(function*(st,Dt){Le(fe,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Xt=>{if(void 0!==Xt.recaptchaKey){const gs=new on(Xt);return null==fe.tenantId?fe._agentRecaptchaConfig=gs:fe._tenantRecaptchaConfigs[fe.tenantId]=gs,st(gs.siteKey)}Dt(new Error("recaptcha Enterprise site key undefined"))}).catch(Xt=>{Dt(Xt)})});return function(st,Dt){return je.apply(this,arguments)}}())}),k.apply(this,arguments)}function Q(fe,je,st){const Dt=window.grecaptcha;Ht(Dt)?Dt.enterprise.ready(()=>{Dt.enterprise.execute(fe,{action:g}).then(Xt=>{je(Xt)}).catch(()=>{je("NO_RECAPTCHA")})}):st(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((fe,je)=>{(function M(fe){return k.apply(this,arguments)})(C.auth).then(st=>{if(!y&&Ht(window.grecaptcha))Q(st,fe,je);else{if(typeof window>"u")return void je(new Error("RecaptchaVerifier is only supported in browser"));Yn("https://www.google.com/recaptcha/enterprise.js?render="+st).then(()=>{Q(st,fe,je)}).catch(Dt=>{je(Dt)})}}).catch(st=>{je(st)})})})()}}function ho(w,g,y){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,f.Z)(function*(w,g,y,C=!1){const M=new vi(w);let k;try{k=yield M.verify(y)}catch{k=yield M.verify(y,!0)}const Q=Object.assign({},g);return Object.assign(Q,C?{captchaResp:k}:{captchaResponse:k}),Object.assign(Q,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Q,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Q})).apply(this,arguments)}class _p{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,y){const C=k=>new Promise((Q,fe)=>{try{Q(g(k))}catch(je){fe(je)}});C.onAbort=y,this.queue.push(C);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(g){var y=this;return(0,f.Z)(function*(){if(y.auth.currentUser===g)return;const C=[];try{for(const M of y.queue)yield M(g),M.onAbort&&C.push(M.onAbort)}catch(M){C.reverse();for(const k of C)try{k()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}class Ic{constructor(g,y,C,M){this.app=g,this.heartbeatServiceProvider=y,this.appCheckServiceProvider=C,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ty(this),this.idTokenSubscription=new ty(this),this.beforeStateQueue=new _p(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(g,y){var C=this;return y&&(this._popupRedirectResolver=pr(y)),this._initializationPromise=this.queue((0,f.Z)(function*(){var M,k;if(!C._deleted&&(C.persistenceManager=yield W.create(C,g),!C._deleted)){if(null!==(M=C._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch{}yield C.initializeCurrentUser(y),C.lastNotifiedUid=(null===(k=C.currentUser)||void 0===k?void 0:k.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,f.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y,!0)}})()}initializeCurrentUser(g){var y=this;return(0,f.Z)(function*(){var C;const M=yield y.assertedPersistence.getCurrentUser();let k=M,Q=!1;if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const fe=null===(C=y.redirectUser)||void 0===C?void 0:C._redirectEventId,je=k?._redirectEventId,st=yield y.tryRedirectSignIn(g);(!fe||fe===je)&&st?.user&&(k=st.user,Q=!0)}if(!k)return y.directlySetCurrentUser(null);if(!k._redirectEventId){if(Q)try{yield y.beforeStateQueue.runMiddleware(k)}catch(fe){k=M,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(fe))}return k?y.reloadAndSetCurrentUserOrClear(k):y.directlySetCurrentUser(null)}return ne(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===k._redirectEventId?y.directlySetCurrentUser(k):y.reloadAndSetCurrentUserOrClear(k)})()}tryRedirectSignIn(g){var y=this;return(0,f.Z)(function*(){let C=null;try{C=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch{yield y._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,f.Z)(function*(){try{yield us(g)}catch(C){if("auth/network-request-failed"!==C?.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function de(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,f.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,f.Z)(function*(){const C=g?(0,$.m9)(g):null;return C&&ne(C.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(C&&C._clone(y))})()}_updateCurrentUser(g,y=!1){var C=this;return(0,f.Z)(function*(){if(!C._deleted)return g&&ne(C.tenantId===g.tenantId,C,"tenant-id-mismatch"),y||(yield C.beforeStateQueue.runMiddleware(g)),C.queue((0,f.Z)(function*(){yield C.directlySetCurrentUser(g),C.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,f.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var y=this;return this.queue((0,f.Z)(function*(){yield y.assertedPersistence.setPersistence(pr(g))}))}initializeRecaptchaConfig(){var g=this;return(0,f.Z)(function*(){const y=yield Le(g,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),C=new on(y);null==g.tenantId?g._agentRecaptchaConfig=C:g._tenantRecaptchaConfigs[g.tenantId]=C,C.emailPasswordEnabled&&new vi(g).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new $.LL("auth","Firebase",g())}onAuthStateChanged(g,y,C){return this.registerStateListener(this.authStateSubscription,g,y,C)}beforeAuthStateChanged(g,y){return this.beforeStateQueue.pushCallback(g,y)}onIdTokenChanged(g,y,C){return this.registerStateListener(this.idTokenSubscription,g,y,C)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var C=this;return(0,f.Z)(function*(){const M=yield C.getOrInitRedirectPersistenceManager(y);return null===g?M.removeCurrentUser():M.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,f.Z)(function*(){if(!y.redirectPersistenceManager){const C=g&&pr(g)||y._popupRedirectResolver;ne(C,y,"argument-error"),y.redirectPersistenceManager=yield W.create(y,[pr(C._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,f.Z)(function*(){var C,M;return y._isInitialized&&(yield y.queue((0,f.Z)(function*(){}))),(null===(C=y._currentUser)||void 0===C?void 0:C._redirectEventId)===g?y._currentUser:(null===(M=y.redirectUser)||void 0===M?void 0:M._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,f.Z)(function*(){if(g===y.currentUser)return y.queue((0,f.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,C,M){if(this._deleted)return()=>{};const k="function"==typeof y?y:y.next.bind(y),Q=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(Q,this,"internal-error"),Q.then(()=>k(this.currentUser)),"function"==typeof y?g.addObserver(y,C,M):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,f.Z)(function*(){y.currentUser&&y.currentUser!==g&&y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh(),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Gr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,f.Z)(function*(){var y;const C={"X-Client-Version":g.clientVersion};g.app.options.appId&&(C["X-Firebase-gmpid"]=g.app.options.appId);const M=yield null===(y=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();M&&(C["X-Firebase-Client"]=M);const k=yield g._getAppCheckToken();return k&&(C["X-Firebase-AppCheck"]=k),C})()}_getAppCheckToken(){var g=this;return(0,f.Z)(function*(){var y;const C=yield null===(y=g.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getToken();return C?.error&&function Ct(w,...g){Oe.logLevel<=ue.in.WARN&&Oe.warn(`Auth (${O.SDK_VERSION}): ${w}`,...g)}(`Error while retrieving App Check token: ${C.error}`),C?.token})()}}function or(w){return(0,$.m9)(w)}class ty{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,$.ne)(y=>this.observer=y)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function th(w,g,y){const C=or(w);ne(C._canInitEmulator,C,"emulator-config-failed"),ne(/^https?:\/\//.test(g),C,"invalid-emulator-scheme");const M=!!y?.disableWarnings,k=cl(g),{host:Q,port:fe}=function sa(w){const g=cl(w),y=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!y)return{host:"",port:null};const C=y[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(C);if(M){const k=M[1];return{host:k,port:Cc(C.substr(k.length+1))}}{const[k,Q]=C.split(":");return{host:k,port:Cc(Q)}}}(g);C.config.emulator={url:`${k}//${Q}${null===fe?"":`:${fe}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:Q,port:fe,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function vp(){function w(){const g=document.createElement("p"),y=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function cl(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function Cc(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class nu{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return tt("not implemented")}_getIdTokenResponse(g){return tt("not implemented")}_linkToIdToken(g,y){return tt("not implemented")}_getReauthenticationResolver(g){return tt("not implemented")}}function ru(w,g){return nh.apply(this,arguments)}function nh(){return(nh=(0,f.Z)(function*(w,g){return ot(w,"POST","/v1/accounts:resetPassword",Je(w,g))})).apply(this,arguments)}function dl(w,g){return hl.apply(this,arguments)}function hl(){return(hl=(0,f.Z)(function*(w,g){return ot(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function jt(){return(jt=(0,f.Z)(function*(w,g){return ot(w,"POST","/v1/accounts:update",Je(w,g))})).apply(this,arguments)}function Pr(w,g){return wn.apply(this,arguments)}function wn(){return(wn=(0,f.Z)(function*(w,g){return sn(w,"POST","/v1/accounts:signInWithPassword",Je(w,g))})).apply(this,arguments)}function Ws(w,g){return ai.apply(this,arguments)}function ai(){return(ai=(0,f.Z)(function*(w,g){return ot(w,"POST","/v1/accounts:sendOobCode",Je(w,g))})).apply(this,arguments)}function iu(){return(iu=(0,f.Z)(function*(w,g){return Ws(w,g)})).apply(this,arguments)}function oa(w,g){return su.apply(this,arguments)}function su(){return(su=(0,f.Z)(function*(w,g){return Ws(w,g)})).apply(this,arguments)}function ih(w,g){return ar.apply(this,arguments)}function ar(){return(ar=(0,f.Z)(function*(w,g){return Ws(w,g)})).apply(this,arguments)}function Ut(){return(Ut=(0,f.Z)(function*(w,g){return Ws(w,g)})).apply(this,arguments)}function ui(){return(ui=(0,f.Z)(function*(w,g){return sn(w,"POST","/v1/accounts:signInWithEmailLink",Je(w,g))})).apply(this,arguments)}function zr(){return(zr=(0,f.Z)(function*(w,g){return sn(w,"POST","/v1/accounts:signInWithEmailLink",Je(w,g))})).apply(this,arguments)}class qs extends nu{constructor(g,y,C,M=null){super("password",C),this._email=g,this._password=y,this._tenantId=M}static _fromEmailAndPassword(g,y){return new qs(g,y,"password")}static _fromEmailAndCode(g,y,C=null){return new qs(g,y,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if(y?.email&&y?.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,f.Z)(function*(){var C;switch(y.signInMethod){case"password":const M={returnSecureToken:!0,email:y._email,password:y._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(C=g._getRecaptchaConfig())&&void 0!==C&&C.emailPasswordEnabled){const k=yield ho(g,M,"signInWithPassword");return Pr(g,k)}return Pr(g,M).catch(function(){var k=(0,f.Z)(function*(Q){if("auth/missing-recaptcha-token"===Q.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const fe=yield ho(g,M,"signInWithPassword");return Pr(g,fe)}return Promise.reject(Q)});return function(Q){return k.apply(this,arguments)}}());case"emailLink":return function Gn(w,g){return ui.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:re(g,"internal-error")}})()}_linkToIdToken(g,y){var C=this;return(0,f.Z)(function*(){switch(C.signInMethod){case"password":return dl(g,{idToken:y,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function aa(w,g){return zr.apply(this,arguments)}(g,{idToken:y,email:C._email,oobCode:C._password});default:re(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function En(w,g){return ls.apply(this,arguments)}function ls(){return(ls=(0,f.Z)(function*(w,g){return sn(w,"POST","/v1/accounts:signInWithIdp",Je(w,g))})).apply(this,arguments)}class At extends nu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new At(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):re("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:M}=y,k=(0,ee._T)(y,["providerId","signInMethod"]);if(!C||!M)return null;const Q=new At(C,M);return Q.idToken=k.idToken||void 0,Q.accessToken=k.accessToken||void 0,Q.secret=k.secret,Q.nonce=k.nonce,Q.pendingToken=k.pendingToken||null,Q}_getIdTokenResponse(g){return En(g,this.buildRequest())}_linkToIdToken(g,y){const C=this.buildRequest();return C.idToken=y,En(g,C)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,En(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,$.xO)(y)}return g}}function fl(){return(fl=(0,f.Z)(function*(w,g){return ot(w,"POST","/v1/accounts:sendVerificationCode",Je(w,g))})).apply(this,arguments)}function Fn(){return(Fn=(0,f.Z)(function*(w,g){return sn(w,"POST","/v1/accounts:signInWithPhoneNumber",Je(w,g))})).apply(this,arguments)}function Vo(){return(Vo=(0,f.Z)(function*(w,g){const y=yield sn(w,"POST","/v1/accounts:signInWithPhoneNumber",Je(w,g));if(y.temporaryProof)throw Er(w,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const bs={USER_NOT_FOUND:"user-not-found"};function gl(){return(gl=(0,f.Z)(function*(w,g){return sn(w,"POST","/v1/accounts:signInWithPhoneNumber",Je(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),bs)})).apply(this,arguments)}class Wr extends nu{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new Wr({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new Wr({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function fo(w,g){return Fn.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function pl(w,g){return Vo.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function ua(w,g){return gl.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:C,verificationCode:M}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:C,code:M}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:C,phoneNumber:M,temporaryProof:k}=g;return C||y||M||k?new Wr({verificationId:y,verificationCode:C,phoneNumber:M,temporaryProof:k}):null}}class cs{constructor(g){var y,C,M,k,Q,fe;const je=(0,$.zd)((0,$.pd)(g)),st=null!==(y=je.apiKey)&&void 0!==y?y:null,Dt=null!==(C=je.oobCode)&&void 0!==C?C:null,Xt=function li(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=je.mode)&&void 0!==M?M:null);ne(st&&Dt&&Xt,"argument-error"),this.apiKey=st,this.operation=Xt,this.code=Dt,this.continueUrl=null!==(k=je.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(Q=je.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(fe=je.tenantId)&&void 0!==fe?fe:null}static parseLink(g){const y=function Dc(w){const g=(0,$.zd)((0,$.pd)(w)).link,y=g?(0,$.zd)((0,$.pd)(g)).deep_link_id:null,C=(0,$.zd)((0,$.pd)(w)).deep_link_id;return(C?(0,$.zd)((0,$.pd)(C)).link:null)||C||y||g||w}(g);try{return new cs(y)}catch{return null}}}let Ep=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(y,C){return qs._fromEmailAndPassword(y,C)}static credentialWithLink(y,C){const M=cs.parseLink(C);return ne(M,"argument-error"),qs._fromEmailAndCode(y,M.code,M.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Ts{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Uo extends Ts{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class xi extends Uo{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return ne("providerId"in y&&"signInMethod"in y,"argument-error"),At._fromParams(y)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ne(g.idToken||g.accessToken,"argument-error"),At._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return xi.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return xi.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:C,oauthTokenSecret:M,pendingToken:k,nonce:Q,providerId:fe}=g;if(!C&&!M&&!y&&!k||!fe)return null;try{return new xi(fe)._credential({idToken:y,accessToken:C,nonce:Q,pendingToken:k})}catch{return null}}}let Bo=(()=>{class w extends Uo{constructor(){super("facebook.com")}static credential(y){return At._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),la=(()=>{class w extends Uo{constructor(){super("google.com"),this.addScope("profile")}static credential(y,C){return At._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:C})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:C,oauthAccessToken:M}=y;if(!C&&!M)return null;try{return w.credential(C,M)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),ca=(()=>{class w extends Uo{constructor(){super("github.com")}static credential(y){return At._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class au extends nu{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return En(g,this.buildRequest())}_linkToIdToken(g,y){const C=this.buildRequest();return C.idToken=y,En(g,C)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,En(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:M,pendingToken:k}=y;return C&&M&&k&&C===M?new au(C,k):null}static _create(g,y){return new au(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ri extends Ts{constructor(g){ne(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return ri.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return ri.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const y=au.fromJSON(g);return ne(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:y,providerId:C}=g;if(!y||!C)return null;try{return au._create(C,y)}catch{return null}}}let bc=(()=>{class w extends Uo{constructor(){super("twitter.com")}static credential(y,C){return At._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:C})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:C,oauthTokenSecret:M}=y;if(!C||!M)return null;try{return w.credential(C,M)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function ds(w,g){return po.apply(this,arguments)}function po(){return(po=(0,f.Z)(function*(w,g){return sn(w,"POST","/v1/accounts:signUp",Je(w,g))})).apply(this,arguments)}class Sn{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,C,M=!1){return(0,f.Z)(function*(){const k=yield sr._fromIdTokenResponse(g,C,M),Q=da(C);return new Sn({user:k,providerId:Q,_tokenResponse:C,operationType:y})})()}static _forOperation(g,y,C){return(0,f.Z)(function*(){yield g._updateTokensIfNecessary(C,!0);const M=da(C);return new Sn({user:g,providerId:M,_tokenResponse:C,operationType:y})})()}}function da(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function ha(w){return sh.apply(this,arguments)}function sh(){return(sh=(0,f.Z)(function*(w){var g;const y=or(w);if(yield y._initializationPromise,null!==(g=y.currentUser)&&void 0!==g&&g.isAnonymous)return new Sn({user:y.currentUser,providerId:null,operationType:"signIn"});const C=yield ds(y,{returnSecureToken:!0}),M=yield Sn._fromIdTokenResponse(y,"signIn",C,!0);return yield y._updateCurrentUser(M.user),M})).apply(this,arguments)}class ml extends $.ZR{constructor(g,y,C,M){var k;super(y.code,y.message),this.operationType=C,this.user=M,Object.setPrototypeOf(this,ml.prototype),this.customData={appName:g.name,tenantId:null!==(k=g.tenantId)&&void 0!==k?k:void 0,_serverResponse:y.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(g,y,C,M){return new ml(g,y,C,M)}}function Tc(w,g,y,C){return("reauthenticate"===g?y._getReauthenticationResolver(w):y._getIdTokenResponse(w)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?ml._fromErrorAndOperation(w,k,g,C):k})}function Ip(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function ry(w,g){return oh.apply(this,arguments)}function oh(){return oh=(0,f.Z)(function*(w,g){const y=(0,$.m9)(w);yield yl(!0,y,g);const{providerUserInfo:C}=yield function qn(w,g){return Ni.apply(this,arguments)}(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),M=Ip(C||[]);return y.providerData=y.providerData.filter(k=>M.has(k.providerId)),M.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y}),oh.apply(this,arguments)}function Ss(w,g){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,f.Z)(function*(w,g,y=!1){const C=yield Zt(w,g._linkToIdToken(w.auth,yield w.getIdToken()),y);return Sn._forOperation(w,"link",C)})).apply(this,arguments)}function yl(w,g,y){return _l.apply(this,arguments)}function _l(){return(_l=(0,f.Z)(function*(w,g,y){yield us(g);const M=!1===w?"provider-already-linked":"no-such-provider";ne(Ip(g.providerData).has(y)===w,g.auth,M)})).apply(this,arguments)}function Cp(w,g){return ah.apply(this,arguments)}function ah(){return(ah=(0,f.Z)(function*(w,g,y=!1){const{auth:C}=w,M="reauthenticate";try{const k=yield Zt(w,Tc(C,M,g,w),y);ne(k.idToken,C,"internal-error");const Q=ht(k.idToken);ne(Q,C,"internal-error");const{sub:fe}=Q;return ne(w.uid===fe,C,"user-mismatch"),Sn._forOperation(w,M,k)}catch(k){throw"auth/user-not-found"===k?.code&&re(C,"user-mismatch"),k}})).apply(this,arguments)}function uh(w,g){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,f.Z)(function*(w,g,y=!1){const C="signIn",M=yield Tc(w,C,g),k=yield Sn._fromIdTokenResponse(w,C,M);return y||(yield w._updateCurrentUser(k.user)),k})).apply(this,arguments)}function Rc(w,g){return vl.apply(this,arguments)}function vl(){return(vl=(0,f.Z)(function*(w,g){return uh(or(w),g)})).apply(this,arguments)}function wl(w,g){return Dp.apply(this,arguments)}function Dp(){return(Dp=(0,f.Z)(function*(w,g){const y=(0,$.m9)(w);return yield yl(!1,y,g.providerId),Ss(y,g)})).apply(this,arguments)}function lh(w,g){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,f.Z)(function*(w,g){return Cp((0,$.m9)(w),g)})).apply(this,arguments)}function Mc(){return(Mc=(0,f.Z)(function*(w,g){return sn(w,"POST","/v1/accounts:signInWithCustomToken",Je(w,g))})).apply(this,arguments)}function pC(w,g){return hs.apply(this,arguments)}function hs(){return hs=(0,f.Z)(function*(w,g){const y=or(w),C=yield function fa(w,g){return Mc.apply(this,arguments)}(y,{token:g,returnSecureToken:!0}),M=yield Sn._fromIdTokenResponse(y,"signIn",C);return yield y._updateCurrentUser(M.user),M}),hs.apply(this,arguments)}class Pi{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?ch._fromServerResponse(g,y):"totpInfo"in y?uu._fromServerResponse(g,y):re(g,"internal-error")}}class ch extends Pi{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new ch(y)}}class uu extends Pi{constructor(g){super("totp",g)}static _fromServerResponse(g,y){return new uu(y)}}function lu(w,g,y){var C;ne((null===(C=y.url)||void 0===C?void 0:C.length)>0,w,"invalid-continue-uri"),ne(typeof y.dynamicLinkDomain>"u"||y.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(ne(y.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=y.iOS.bundleId),y.android&&(ne(y.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function iy(w,g,y){return dh.apply(this,arguments)}function dh(){return dh=(0,f.Z)(function*(w,g,y){var C;const M=or(w),k={requestType:"PASSWORD_RESET",email:g,clientType:"CLIENT_TYPE_WEB"};if(null!==(C=M._getRecaptchaConfig())&&void 0!==C&&C.emailPasswordEnabled){const Q=yield ho(M,k,"getOobCode",!0);y&&lu(M,Q,y),yield oa(M,Q)}else y&&lu(M,k,y),yield oa(M,k).catch(function(){var Q=(0,f.Z)(function*(fe){if("auth/missing-recaptcha-token"!==fe.code)return Promise.reject(fe);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const je=yield ho(M,k,"getOobCode",!0);y&&lu(M,je,y),yield oa(M,je)}});return function(fe){return Q.apply(this,arguments)}}())}),dh.apply(this,arguments)}function Oi(w,g,y){return pa.apply(this,arguments)}function pa(){return(pa=(0,f.Z)(function*(w,g,y){yield ru((0,$.m9)(w),{oobCode:g,newPassword:y})})).apply(this,arguments)}function kr(w,g){return ga.apply(this,arguments)}function ga(){return ga=(0,f.Z)(function*(w,g){yield function wp(w,g){return jt.apply(this,arguments)}((0,$.m9)(w),{oobCode:g})}),ga.apply(this,arguments)}function fs(w,g){return ma.apply(this,arguments)}function ma(){return(ma=(0,f.Z)(function*(w,g){const y=(0,$.m9)(w),C=yield ru(y,{oobCode:g}),M=C.requestType;switch(ne(M,y,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(C.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(C.mfaInfo,y,"internal-error");default:ne(C.email,y,"internal-error")}let k=null;return C.mfaInfo&&(k=Pi._fromServerResponse(or(y),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:k},operation:M}})).apply(this,arguments)}function El(w,g){return go.apply(this,arguments)}function go(){return(go=(0,f.Z)(function*(w,g){const{data:y}=yield fs((0,$.m9)(w),g);return y.email})).apply(this,arguments)}function Il(w,g,y){return Nc.apply(this,arguments)}function Nc(){return Nc=(0,f.Z)(function*(w,g,y){var C;const M=or(w),k={returnSecureToken:!0,email:g,password:y,clientType:"CLIENT_TYPE_WEB"};let Q;if(null!==(C=M._getRecaptchaConfig())&&void 0!==C&&C.emailPasswordEnabled){const st=yield ho(M,k,"signUpPassword");Q=ds(M,st)}else Q=ds(M,k).catch(function(){var st=(0,f.Z)(function*(Dt){if("auth/missing-recaptcha-token"===Dt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Xt=yield ho(M,k,"signUpPassword");return ds(M,Xt)}return Promise.reject(Dt)});return function(Dt){return st.apply(this,arguments)}}());const fe=yield Q.catch(st=>Promise.reject(st)),je=yield Sn._fromIdTokenResponse(M,"signIn",fe);return yield M._updateCurrentUser(je.user),je}),Nc.apply(this,arguments)}function xc(w,g,y){return Rc((0,$.m9)(w),Ep.credential(g,y))}function Pc(w,g,y){return ya.apply(this,arguments)}function ya(){return ya=(0,f.Z)(function*(w,g,y){var C;const M=or(w),k={requestType:"EMAIL_SIGNIN",email:g,clientType:"CLIENT_TYPE_WEB"};function Q(fe,je){ne(je.handleCodeInApp,M,"argument-error"),je&&lu(M,fe,je)}if(null!==(C=M._getRecaptchaConfig())&&void 0!==C&&C.emailPasswordEnabled){const fe=yield ho(M,k,"getOobCode",!0);Q(fe,y),yield ih(M,fe)}else Q(k,y),yield ih(M,k).catch(function(){var fe=(0,f.Z)(function*(je){if("auth/missing-recaptcha-token"!==je.code)return Promise.reject(je);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const st=yield ho(M,k,"getOobCode",!0);Q(st,y),yield ih(M,st)}});return function(je){return fe.apply(this,arguments)}}())}),ya.apply(this,arguments)}function cu(w,g){const y=cs.parseLink(g);return"EMAIL_SIGNIN"===y?.operation}function sy(w,g,y){return qr.apply(this,arguments)}function qr(){return(qr=(0,f.Z)(function*(w,g,y){const C=(0,$.m9)(w),M=Ep.credentialWithLink(g,y||en());return ne(M._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),Rc(C,M)})).apply(this,arguments)}function Cl(){return(Cl=(0,f.Z)(function*(w,g){return ot(w,"POST","/v1/accounts:createAuthUri",Je(w,g))})).apply(this,arguments)}function bp(w,g){return Dl.apply(this,arguments)}function Dl(){return Dl=(0,f.Z)(function*(w,g){const C={identifier:g,continueUri:wr()?en():"http://localhost"},{signinMethods:M}=yield function rw(w,g){return Cl.apply(this,arguments)}((0,$.m9)(w),C);return M||[]}),Dl.apply(this,arguments)}function Tp(w,g){return _a.apply(this,arguments)}function _a(){return _a=(0,f.Z)(function*(w,g){const y=(0,$.m9)(w),M={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&lu(y.auth,M,g);const{email:k}=yield function rh(w,g){return iu.apply(this,arguments)}(y.auth,M);k!==w.email&&(yield w.reload())}),_a.apply(this,arguments)}function Oc(w,g,y){return du.apply(this,arguments)}function du(){return du=(0,f.Z)(function*(w,g,y){const C=(0,$.m9)(w),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};y&&lu(C.auth,k,y);const{email:Q}=yield function nt(w,g){return Ut.apply(this,arguments)}(C.auth,k);Q!==w.email&&(yield w.reload())}),du.apply(this,arguments)}function hu(){return(hu=(0,f.Z)(function*(w,g){return ot(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function fh(w,g){return ph.apply(this,arguments)}function ph(){return ph=(0,f.Z)(function*(w,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const C=(0,$.m9)(w),k={idToken:yield C.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},Q=yield Zt(C,function hh(w,g){return hu.apply(this,arguments)}(C.auth,k));C.displayName=Q.displayName||null,C.photoURL=Q.photoUrl||null;const fe=C.providerData.find(({providerId:je})=>"password"===je);fe&&(fe.displayName=C.displayName,fe.photoURL=C.photoURL),yield C._updateTokensIfNecessary(Q)}),ph.apply(this,arguments)}function bl(w,g){return qi((0,$.m9)(w),g,null)}function Sp(w,g){return qi((0,$.m9)(w),null,g)}function qi(w,g,y){return kc.apply(this,arguments)}function kc(){return(kc=(0,f.Z)(function*(w,g,y){const{auth:C}=w,k={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(k.email=g),y&&(k.password=y);const Q=yield Zt(w,dl(C,k));yield w._updateTokensIfNecessary(Q,!0)})).apply(this,arguments)}class mn{constructor(g,y,C={}){this.isNewUser=g,this.providerId=y,this.profile=C}}class Lc extends mn{constructor(g,y,C,M){super(g,y,C),this.username=M}}class Vc extends mn{constructor(g,y){super(g,"facebook.com",y)}}class ci extends Lc{constructor(g,y){super(g,"github.com",y,"string"==typeof y?.login?y?.login:null)}}class Tl extends mn{constructor(g,y){super(g,"google.com",y)}}class Uc extends Lc{constructor(g,y,C){super(g,"twitter.com",y,C)}}function mo(w){const{user:g,_tokenResponse:y}=w;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function Fc(w){var g,y;if(!w)return null;const{providerId:C}=w,M=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},k=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!C&&w?.idToken){const Q=null===(y=null===(g=ht(w.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(Q)return new mn(k,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!C)return null;switch(C){case"facebook.com":return new Vc(k,M);case"github.com":return new ci(k,M);case"google.com":return new Tl(k,M);case"twitter.com":return new Uc(k,M,w.screenName||null);case"custom":case"anonymous":return new mn(k,null);default:return new mn(k,C,M)}}(y)}class As{constructor(g,y,C){this.type=g,this.credential=y,this.auth=C}static _fromIdtoken(g,y){return new As("enroll",g,y)}static _fromMfaPendingCredential(g){return new As("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,C;if(g?.multiFactorSession){if(null!==(y=g.multiFactorSession)&&void 0!==y&&y.pendingCredential)return As._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(C=g.multiFactorSession)&&void 0!==C&&C.idToken)return As._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Rt{constructor(g,y,C){this.session=g,this.hints=y,this.signInResolver=C}static _fromError(g,y){const C=or(g),M=y.customData._serverResponse,k=(M.mfaInfo||[]).map(fe=>Pi._fromServerResponse(C,fe));ne(M.mfaPendingCredential,C,"internal-error");const Q=As._fromMfaPendingCredential(M.mfaPendingCredential);return new Rt(Q,k,function(){var fe=(0,f.Z)(function*(je){const st=yield je._process(C,Q);delete M.mfaInfo,delete M.mfaPendingCredential;const Dt=Object.assign(Object.assign({},M),{idToken:st.idToken,refreshToken:st.refreshToken});switch(y.operationType){case"signIn":const Xt=yield Sn._fromIdTokenResponse(C,y.operationType,Dt);return yield C._updateCurrentUser(Xt.user),Xt;case"reauthenticate":return ne(y.user,C,"internal-error"),Sn._forOperation(y.user,y.operationType,Dt);default:re(C,"internal-error")}});return function(je){return fe.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,f.Z)(function*(){return y.signInResolver(g)})()}}function wa(w,g){var y;const C=(0,$.m9)(w),M=g;return ne(g.customData.operationType,C,"argument-error"),ne(null===(y=M.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,C,"argument-error"),Rt._fromError(C,M)}class yo{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(C=>Pi._fromServerResponse(g.auth,C)))})}static _fromUser(g){return new yo(g)}getSession(){var g=this;return(0,f.Z)(function*(){return As._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,y){var C=this;return(0,f.Z)(function*(){const M=g,k=yield C.getSession(),Q=yield Zt(C.user,M._process(C.user.auth,k,y));return yield C.user._updateTokensIfNecessary(Q),C.user.reload()})()}unenroll(g){var y=this;return(0,f.Z)(function*(){const C="string"==typeof g?g:g.uid,M=yield y.user.getIdToken();try{const k=yield Zt(y.user,function _h(w,g){return ot(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Je(w,g))}(y.user.auth,{idToken:M,mfaEnrollmentId:C}));y.enrolledFactors=y.enrolledFactors.filter(({uid:Q})=>Q!==C),yield y.user._updateTokensIfNecessary(k),yield y.user.reload()}catch(k){throw k}})()}}const fu=new WeakMap;function Gc(w){const g=(0,$.m9)(w);return fu.has(g)||fu.set(g,yo._fromUser(g)),fu.get(g)}const Ea="__sak";class Al{constructor(g,y){this.storageRetriever=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(Ea,"1"),this.storage.removeItem(Ea),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const pu=(()=>{class w extends Al{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,C)=>this.onStorageEvent(y,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ap(){const w=(0,$.z$)();return V(w)||It(w)}()&&function Nr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Bt(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const C of Object.keys(this.listeners)){const M=this.storage.getItem(C),k=this.localCache[C];M!==k&&y(C,k,M)}}onStorageEvent(y,C=!1){if(!y.key)return void this.forAllChangedKeys((fe,je,st)=>{this.notifyListeners(fe,st)});const M=y.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const fe=this.storage.getItem(M);if(y.newValue!==fe)null!==y.newValue?this.storage.setItem(M,y.newValue):this.storage.removeItem(M);else if(this.localCache[M]===y.newValue&&!C)return}const k=()=>{const fe=this.storage.getItem(M);!C&&this.localCache[M]===fe||this.notifyListeners(M,fe)},Q=this.storage.getItem(M);!function Cn(){return(0,$.w1)()&&10===document.documentMode}()||Q===y.newValue||y.newValue===y.oldValue?k():setTimeout(k,10)}notifyListeners(y,C){this.localCache[y]=C;const M=this.listeners[y];if(M)for(const k of Array.from(M))k(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,C,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:C,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(C)}_removeListener(y,C){this.listeners[y]&&(this.listeners[y].delete(C),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,C){var M=()=>super._set,k=this;return(0,f.Z)(function*(){yield M().call(k,y,C),k.localCache[y]=JSON.stringify(C)})()}_get(y){var C=()=>super._get,M=this;return(0,f.Z)(function*(){const k=yield C().call(M,y);return M.localCache[y]=JSON.stringify(k),k})()}_remove(y){var C=()=>super._remove,M=this;return(0,f.Z)(function*(){yield C().call(M,y),delete M.localCache[y]})()}}return w.type="LOCAL",w})(),Rl=(()=>{class w extends Al{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,C){}_removeListener(y,C){}}return w.type="SESSION",w})();let Ks=(()=>{class w{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const C=this.receivers.find(k=>k.isListeningto(y));if(C)return C;const M=new w(y);return this.receivers.push(M),M}isListeningto(y){return this.eventTarget===y}handleEvent(y){var C=this;return(0,f.Z)(function*(){const M=y,{eventId:k,eventType:Q,data:fe}=M.data,je=C.handlersMap[Q];if(!je?.size)return;M.ports[0].postMessage({status:"ack",eventId:k,eventType:Q});const st=Array.from(je).map(function(){var Xt=(0,f.Z)(function*(gs){return gs(M.origin,fe)});return function(gs){return Xt.apply(this,arguments)}}()),Dt=yield function gu(w){return Promise.all(w.map(function(){var g=(0,f.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(C){return{fulfilled:!1,reason:C}}});return function(y){return g.apply(this,arguments)}}()))}(st);M.ports[0].postMessage({status:"done",eventId:k,eventType:Q,response:Dt})})()}_subscribe(y,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(C)}_unsubscribe(y,C){this.handlersMap[y]&&C&&this.handlersMap[y].delete(C),(!C||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Zs(w="",g=10){let y="";for(let C=0;C<g;C++)y+=Math.floor(10*Math.random());return w+y}class vh{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,C=50){var M=this;return(0,f.Z)(function*(){const k=typeof MessageChannel<"u"?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let Q,fe;return new Promise((je,st)=>{const Dt=Zs("",20);k.port1.start();const Xt=setTimeout(()=>{st(new Error("unsupported_event"))},C);fe={messageChannel:k,onMessage(gs){const Au=gs;if(Au.data.eventId===Dt)switch(Au.data.status){case"ack":clearTimeout(Xt),Q=setTimeout(()=>{st(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),je(Au.data.response);break;default:clearTimeout(Xt),clearTimeout(Q),st(new Error("invalid_response"))}}},M.handlers.add(fe),k.port1.addEventListener("message",fe.onMessage),M.target.postMessage({eventType:g,eventId:Dt,data:y},[k.port2])}).finally(()=>{fe&&M.removeMessageHandler(fe)})})()}}function Fr(){return window}function mu(){return typeof Fr().WorkerGlobalScope<"u"&&"function"==typeof Fr().importScripts}function ps(){return(ps=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Dn="firebaseLocalStorageDb",Cr="firebaseLocalStorage",Wc="fbase_key";class $o{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function Ia(w,g){return w.transaction([Cr],g?"readwrite":"readonly").objectStore(Cr)}function Ml(){const w=indexedDB.open(Dn,1);return new Promise((g,y)=>{w.addEventListener("error",()=>{y(w.error)}),w.addEventListener("upgradeneeded",()=>{const C=w.result;try{C.createObjectStore(Cr,{keyPath:Wc})}catch(M){y(M)}}),w.addEventListener("success",(0,f.Z)(function*(){const C=w.result;C.objectStoreNames.contains(Cr)?g(C):(C.close(),yield function Ih(){const w=indexedDB.deleteDatabase(Dn);return new $o(w).toPromise()}(),g(yield Ml()))}))})}function qc(w,g,y){return yu.apply(this,arguments)}function yu(){return(yu=(0,f.Z)(function*(w,g,y){const C=Ia(w,!0).put({[Wc]:g,value:y});return new $o(C).toPromise()})).apply(this,arguments)}function vo(){return(vo=(0,f.Z)(function*(w,g){const y=Ia(w,!1).get(g),C=yield new $o(y).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function Rs(w,g){const y=Ia(w,!0).delete(g);return new $o(y).toPromise()}const _u=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,f.Z)(function*(){return y.db||(y.db=yield Ml()),y.db})()}_withRetries(y){var C=this;return(0,f.Z)(function*(){let M=0;for(;;)try{const k=yield C._openDb();return yield y(k)}catch(k){if(M++>3)throw k;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,f.Z)(function*(){return mu()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,f.Z)(function*(){y.receiver=Ks._getInstance(function _o(){return mu()?self:null}()),y.receiver._subscribe("keyChanged",function(){var C=(0,f.Z)(function*(M,k){return{keyProcessed:(yield y._poll()).includes(k.key)}});return function(M,k){return C.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var C=(0,f.Z)(function*(M,k){return["keyChanged"]});return function(M,k){return C.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,f.Z)(function*(){var C,M;if(y.activeServiceWorker=yield function wi(){return ps.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new vh(y.activeServiceWorker);const k=yield y.sender._send("ping",{},800);k&&null!==(C=k[0])&&void 0!==C&&C.fulfilled&&null!==(M=k[0])&&void 0!==M&&M.value.includes("keyChanged")&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var C=this;return(0,f.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function Eh(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:y},C.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const y=yield Ml();return yield qc(y,Ea,"1"),yield Rs(y,Ea),!0}catch{}return!1})()}_withPendingWrite(y){var C=this;return(0,f.Z)(function*(){C.pendingWrites++;try{yield y()}finally{C.pendingWrites--}})()}_set(y,C){var M=this;return(0,f.Z)(function*(){return M._withPendingWrite((0,f.Z)(function*(){return yield M._withRetries(k=>qc(k,y,C)),M.localCache[y]=C,M.notifyServiceWorker(y)}))})()}_get(y){var C=this;return(0,f.Z)(function*(){const M=yield C._withRetries(k=>function Kc(w,g){return vo.apply(this,arguments)}(k,y));return C.localCache[y]=M,M})()}_remove(y){var C=this;return(0,f.Z)(function*(){return C._withPendingWrite((0,f.Z)(function*(){return yield C._withRetries(M=>Rs(M,y)),delete C.localCache[y],C.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,f.Z)(function*(){const C=yield y._withRetries(Q=>{const fe=Ia(Q,!1).getAll();return new $o(fe).toPromise()});if(!C)return[];if(0!==y.pendingWrites)return[];const M=[],k=new Set;for(const{fbase_key:Q,value:fe}of C)k.add(Q),JSON.stringify(y.localCache[Q])!==JSON.stringify(fe)&&(y.notifyListeners(Q,fe),M.push(Q));for(const Q of Object.keys(y.localCache))y.localCache[Q]&&!k.has(Q)&&(y.notifyListeners(Q,null),M.push(Q));return M})()}notifyListeners(y,C){this.localCache[y]=C;const M=this.listeners[y];if(M)for(const k of Array.from(M))k(C)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(C)}_removeListener(y,C){this.listeners[y]&&(this.listeners[y].delete(C),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})(),Yc=1e12;class bh{constructor(g){this.auth=g,this.counter=Yc,this._widgets=new Map}render(g,y){const C=this.counter;return this._widgets.set(C,new Np(g,this.auth.name,y||{})),this.counter++,C}reset(g){var y;const C=g||Yc;null===(y=this._widgets.get(C))||void 0===y||y.delete(),this._widgets.delete(C)}getResponse(g){var y;return(null===(y=this._widgets.get(g||Yc))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,f.Z)(function*(){var C;return null===(C=y._widgets.get(g||Yc))||void 0===C||C.execute(),""})()}}class Np{constructor(g,y,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof g?document.getElementById(g):g;ne(M,"argument-error",{appName:y}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Th(w){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<w;C++)g.push(y.charAt(Math.floor(62*Math.random())));return g.join("")}(50);const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Qc=co("rcb"),xp=new Ie(3e4,6e4);class Ms{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=Fr().grecaptcha)||void 0===g||!g.render)}load(g,y=""){return ne(function Sh(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(y),g,"argument-error"),this.shouldResolveImmediately(y)&&xt(Fr().grecaptcha)?Promise.resolve(Fr().grecaptcha):new Promise((C,M)=>{const k=Fr().setTimeout(()=>{M(Ce(g,"network-request-failed"))},xp.get());Fr()[Qc]=()=>{Fr().clearTimeout(k),delete Fr()[Qc];const fe=Fr().grecaptcha;if(!fe||!xt(fe))return void M(Ce(g,"internal-error"));const je=fe.render;fe.render=(st,Dt)=>{const Xt=je(st,Dt);return this.counter++,Xt},this.hostLanguage=y,C(fe)},Yn(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:Qc,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(k),M(Ce(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var y;return!(null===(y=Fr().grecaptcha)||void 0===y||!y.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class vu{load(g){return(0,f.Z)(function*(){return new bh(g)})()}clearedOneInstance(){}}const Nl="recaptcha",wu={theme:"light",type:"image"};class Ah{constructor(g,y=Object.assign({},wu),C){this.parameters=y,this.type=Nl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=or(C),this.isInvisible="invisible"===this.parameters.size,ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof g?document.getElementById(g):g;ne(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new vu:new Ms,this.validateStartingState()}verify(){var g=this;return(0,f.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),C=g.getAssertedRecaptcha();return C.getResponse(y)||new Promise(k=>{const Q=fe=>{fe&&(g.tokenChangeListeners.delete(Q),k(fe))};g.tokenChangeListeners.add(Q),g.isInvisible&&C.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(C=>C(y)),"function"==typeof g)g(y);else if("string"==typeof g){const C=Fr()[g];"function"==typeof C&&C(y)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,f.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const C=document.createElement("div");y.appendChild(C),y=C}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,f.Z)(function*(){ne(wr()&&!mu(),g.auth,"internal-error"),yield function Jc(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function ge(w){return oe.apply(this,arguments)}(g.auth);ne(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ed{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=Wr._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function Rh(w,g,y){return An.apply(this,arguments)}function An(){return(An=(0,f.Z)(function*(w,g,y){const C=or(w),M=yield Ca(C,g,(0,$.m9)(y));return new ed(M,k=>Rc(C,k))})).apply(this,arguments)}function ki(w,g,y){return vt.apply(this,arguments)}function vt(){return(vt=(0,f.Z)(function*(w,g,y){const C=(0,$.m9)(w);yield yl(!1,C,"phone");const M=yield Ca(C.auth,g,(0,$.m9)(y));return new ed(M,k=>wl(C,k))})).apply(this,arguments)}function Fi(w,g,y){return ln.apply(this,arguments)}function ln(){return(ln=(0,f.Z)(function*(w,g,y){const C=(0,$.m9)(w),M=yield Ca(C.auth,g,(0,$.m9)(y));return new ed(M,k=>lh(C,k))})).apply(this,arguments)}function Ca(w,g,y){return zo.apply(this,arguments)}function zo(){return zo=(0,f.Z)(function*(w,g,y){var C;const M=yield y.verify();try{let k;if(ne("string"==typeof M,w,"argument-error"),ne(y.type===Nl,w,"argument-error"),k="string"==typeof g?{phoneNumber:g}:g,"session"in k){const Q=k.session;if("phoneNumber"in k)return ne("enroll"===Q.type,w,"internal-error"),(yield function yh(w,g){return ot(w,"POST","/v2/accounts/mfaEnrollment:start",Je(w,g))}(w,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{ne("signin"===Q.type,w,"internal-error");const fe=(null===(C=k.multiFactorHint)||void 0===C?void 0:C.uid)||k.multiFactorUid;return ne(fe,w,"missing-multi-factor-info"),(yield function uy(w,g){return ot(w,"POST","/v2/accounts/mfaSignIn:start",Je(w,g))}(w,{mfaPendingCredential:Q.credential,mfaEnrollmentId:fe,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield function ou(w,g){return fl.apply(this,arguments)}(w,{phoneNumber:k.phoneNumber,recaptchaToken:M});return Q}}finally{y._reset()}}),zo.apply(this,arguments)}function Eu(w,g){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,f.Z)(function*(w,g){yield Ss((0,$.m9)(w),g)})).apply(this,arguments)}let Zr=(()=>{class w{constructor(y){this.providerId=w.PROVIDER_ID,this.auth=or(y)}verifyPhoneNumber(y,C){return Ca(this.auth,y,(0,$.m9)(C))}static credential(y,C){return Wr._fromVerification(y,C)}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:C,temporaryProof:M}=y;return C&&M?Wr._fromTokenResponse(C,M):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function yn(w,g){return g?pr(g):(ne(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Tt extends nu{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return En(g,this._buildIdpRequest())}_linkToIdToken(g,y){return En(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return En(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function Ns(w){return uh(w.auth,new Tt(w),w.bypassAuthState)}function Iu(w){const{auth:g,user:y}=w;return ne(y,g,"internal-error"),Cp(y,new Tt(w),w.bypassAuthState)}function Cu(w){return xs.apply(this,arguments)}function xs(){return(xs=(0,f.Z)(function*(w){const{auth:g,user:y}=w;return ne(y,g,"internal-error"),Ss(y,new Tt(w),w.bypassAuthState)})).apply(this,arguments)}class Mh{constructor(g,y,C,M,k=!1){this.auth=g,this.resolver=C,this.user=M,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,f.Z)(function*(C,M){g.pendingPromise={resolve:C,reject:M};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(k){g.reject(k)}});return function(C,M){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,f.Z)(function*(){const{urlResponse:C,sessionId:M,postBody:k,tenantId:Q,error:fe,type:je}=g;if(fe)return void y.reject(fe);const st={auth:y.auth,requestUri:C,sessionId:M,tenantId:Q||void 0,postBody:k||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(je)(st))}catch(Dt){y.reject(Dt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Ns;case"linkViaPopup":case"linkViaRedirect":return Cu;case"reauthViaPopup":case"reauthViaRedirect":return Iu;default:re(this.auth,"internal-error")}}resolve(g){$e(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){$e(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Da=new Ie(2e3,1e4);function Xn(w,g,y){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,f.Z)(function*(w,g,y){const C=or(w);me(w,g,Ts);const M=yn(C,y);return new wo(C,"signInViaPopup",g,M).executeNotNull()})).apply(this,arguments)}function Ii(w,g,y){return ba.apply(this,arguments)}function ba(){return(ba=(0,f.Z)(function*(w,g,y){const C=(0,$.m9)(w);me(C.auth,g,Ts);const M=yn(C.auth,y);return new wo(C.auth,"reauthViaPopup",g,M,C).executeNotNull()})).apply(this,arguments)}function Du(w,g,y){return xl.apply(this,arguments)}function xl(){return(xl=(0,f.Z)(function*(w,g,y){const C=(0,$.m9)(w);me(C.auth,g,Ts);const M=yn(C.auth,y);return new wo(C.auth,"linkViaPopup",g,M,C).executeNotNull()})).apply(this,arguments)}let wo=(()=>{class w extends Mh{constructor(y,C,M,k,Q){super(y,C,k,Q),this.provider=M,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var y=this;return(0,f.Z)(function*(){const C=yield y.execute();return ne(C,y.auth,"internal-error"),C})()}onExecution(){var y=this;return(0,f.Z)(function*(){$e(1===y.filter.length,"Popup operations only handle one event");const C=Zs();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],C),y.authWindow.associatedEvent=C,y.resolver._originValidation(y.auth).catch(M=>{y.reject(M)}),y.resolver._isIframeWebStorageSupported(y.auth,M=>{M||y.reject(Ce(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Ce(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const y=()=>{var C,M;this.pollId=null!==(M=null===(C=this.authWindow)||void 0===C?void 0:C.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ce(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(y,Da.get())};y()}}return w.currentPopupAction=null,w})();const Ps="pendingRedirect",Li=new Map;class Pp extends Mh{constructor(g,y,C=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,C),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,f.Z)(function*(){let C=Li.get(y.auth._key());if(!C){try{const k=(yield function td(w,g){return Qt.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;C=()=>Promise.resolve(k)}catch(M){C=()=>Promise.reject(M)}Li.set(y.auth._key(),C)}return y.bypassAuthState||Li.set(y.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,C=this;return(0,f.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(C,g);if("unknown"!==g.type){if(g.eventId){const M=yield C.auth._redirectUserForId(g.eventId);if(M)return C.user=M,y().call(C,g);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function Qt(){return(Qt=(0,f.Z)(function*(w,g){const y=rd(g),C=Eo(w);if(!(yield C._isAvailable()))return!1;const M="true"===(yield C._get(y));return yield C._remove(y),M})).apply(this,arguments)}function Pl(w,g){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,f.Z)(function*(w,g){return Eo(w)._set(rd(g),"true")})).apply(this,arguments)}function ly(){Li.clear()}function nd(w,g){Li.set(w._key(),g)}function Eo(w){return pr(w._redirectPersistence)}function rd(w){return Yt(Ps,w.config.apiKey,w.name)}function Nh(w,g,y){return function xh(w,g,y){return Io.apply(this,arguments)}(w,g,y)}function Io(){return(Io=(0,f.Z)(function*(w,g,y){const C=or(w);me(w,g,Ts),yield C._initializationPromise;const M=yn(C,y);return yield Pl(M,C),M._openRedirect(C,g,"signInViaRedirect")})).apply(this,arguments)}function Op(w,g,y){return function kp(w,g,y){return Ol.apply(this,arguments)}(w,g,y)}function Ol(){return(Ol=(0,f.Z)(function*(w,g,y){const C=(0,$.m9)(w);me(C.auth,g,Ts),yield C.auth._initializationPromise;const M=yn(C.auth,y);yield Pl(M,C.auth);const k=yield Lr(C);return M._openRedirect(C.auth,g,"reauthViaRedirect",k)})).apply(this,arguments)}function cy(w,g,y){return function Fp(w,g,y){return id.apply(this,arguments)}(w,g,y)}function id(){return(id=(0,f.Z)(function*(w,g,y){const C=(0,$.m9)(w);me(C.auth,g,Ts),yield C.auth._initializationPromise;const M=yn(C.auth,y);yield yl(!1,C,g.providerId),yield Pl(M,C.auth);const k=yield Lr(C);return M._openRedirect(C.auth,g,"linkViaRedirect",k)})).apply(this,arguments)}function bu(w,g){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,f.Z)(function*(w,g){return yield or(w)._initializationPromise,Co(w,g,!1)})).apply(this,arguments)}function Co(w,g){return ye.apply(this,arguments)}function ye(){return(ye=(0,f.Z)(function*(w,g,y=!1){const C=or(w),M=yn(C,g),Q=yield new Pp(C,M,y).execute();return Q&&!y&&(delete Q.user._redirectEventId,yield C._persistUserIfCurrent(Q.user),yield C._setRedirectUser(null,g)),Q})).apply(this,arguments)}function Lr(w){return gr.apply(this,arguments)}function gr(){return(gr=(0,f.Z)(function*(w){const g=Zs(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class Ci{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(g,C)&&(y=!0,this.sendToConsumer(g,C),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Ph(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kl(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var C;if(g.error&&!kl(g)){const M=(null===(C=g.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";y.onError(Ce(this.auth,M))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const C=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&C}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tu(g))}saveEventToCache(g){this.cachedEventUids.add(Tu(g)),this.lastProcessedEventTime=Date.now()}}function Tu(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function kl({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===g?.code}function Vn(w){return Lp.apply(this,arguments)}function Lp(){return(Lp=(0,f.Z)(function*(w,g={}){return ot(w,"GET","/v1/projects",g)})).apply(this,arguments)}const Oh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sa=/^https?/;function kh(){return(kh=(0,f.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield Vn(w);for(const y of g)try{if(Un(y))return}catch{}re(w,"unauthorized-domain")})).apply(this,arguments)}function Un(w){const g=en(),{protocol:y,hostname:C}=new URL(g);if(w.startsWith("chrome-extension://")){const Q=new URL(w);return""===Q.hostname&&""===C?"chrome-extension:"===y&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&Q.hostname===C}if(!Sa.test(y))return!1;if(Oh.test(w))return C===w;const M=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(C)}const sd=new Ie(3e4,6e4);function Aa(){const w=Fr().___jsl;if(w?.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let y=0;y<w.CP.length;y++)w.CP[y]=null}let ur=null;const Bn=new Ie(5e3,15e3),qo="__/auth/iframe",Ra="emulator/auth/iframe",Fl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},od=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ll(w){const g=w.config;ne(g.authDomain,w,"auth-domain-config-required");const y=g.emulator?Te(g,Ra):`https://${w.config.authDomain}/${qo}`,C={apiKey:g.apiKey,appName:w.name,v:O.SDK_VERSION},M=od.get(w.config.apiHost);M&&(C.eid=M);const k=w._getFrameworks();return k.length&&(C.fw=k.join(",")),`${y}?${(0,$.xO)(C).slice(1)}`}function I(){return I=(0,f.Z)(function*(w){const g=yield function Su(w){return ur=ur||function Vp(w){return new Promise((g,y)=>{var C,M,k;function Q(){Aa(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Aa(),y(Ce(w,"network-request-failed"))},timeout:sd.get()})}if(null!==(M=null===(C=Fr().gapi)||void 0===C?void 0:C.iframes)&&void 0!==M&&M.Iframe)g(gapi.iframes.getContext());else{if(null===(k=Fr().gapi)||void 0===k||!k.load){const fe=co("iframefcb");return Fr()[fe]=()=>{gapi.load?Q():y(Ce(w,"network-request-failed"))},Yn(`https://apis.google.com/js/api.js?onload=${fe}`).catch(je=>y(je))}Q()}}).catch(g=>{throw ur=null,g})}(w),ur}(w),y=Fr().gapi;return ne(y,w,"internal-error"),g.open({where:document.body,url:Ll(w),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fl,dontclear:!0},C=>new Promise(function(){var M=(0,f.Z)(function*(k,Q){yield C.restyle({setHideOnLeave:!1});const fe=Ce(w,"network-request-failed"),je=Fr().setTimeout(()=>{Q(fe)},Bn.get());function st(){Fr().clearTimeout(je),k(C)}C.ping(st).then(st,()=>{Q(fe)})});return function(k,Q){return M.apply(this,arguments)}}()))}),I.apply(this,arguments)}const T={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class pe{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const pt="__/auth/handler",Lt="emulator/auth/handler",kt=encodeURIComponent("fac");function Yr(w,g,y,C,M,k){return mr.apply(this,arguments)}function mr(){return(mr=(0,f.Z)(function*(w,g,y,C,M,k){ne(w.config.authDomain,w,"auth-domain-config-required"),ne(w.config.apiKey,w,"invalid-api-key");const Q={apiKey:w.config.apiKey,appName:w.name,authType:y,redirectUrl:C,v:O.SDK_VERSION,eventId:M};if(g instanceof Ts){g.setDefaultLanguage(w.languageCode),Q.providerId=g.providerId||"",(0,$.xb)(g.getCustomParameters())||(Q.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Dt,Xt]of Object.entries(k||{}))Q[Dt]=Xt}if(g instanceof Uo){const Dt=g.getScopes().filter(Xt=>""!==Xt);Dt.length>0&&(Q.scopes=Dt.join(","))}w.tenantId&&(Q.tid=w.tenantId);const fe=Q;for(const Dt of Object.keys(fe))void 0===fe[Dt]&&delete fe[Dt];const je=yield w._getAppCheckToken(),st=je?`#${kt}=${encodeURIComponent(je)}`:"";return`${function Ys({config:w}){return w.emulator?Te(w,Lt):`https://${w.authDomain}/${pt}`}(w)}?${(0,$.xO)(fe).slice(1)}${st}`})).apply(this,arguments)}const Ma="webStorageSupport",Vi=class Os{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rl,this._completeRedirectFn=Co,this._overrideRedirectResult=nd}_openPopup(g,y,C,M){var k=this;return(0,f.Z)(function*(){var Q;$e(null===(Q=k.eventManagers[g._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const fe=yield Yr(g,y,C,en(),M);return function Ke(w,g,y,C=500,M=600){const k=Math.max((window.screen.availHeight-M)/2,0).toString(),Q=Math.max((window.screen.availWidth-C)/2,0).toString();let fe="";const je=Object.assign(Object.assign({},T),{width:C.toString(),height:M.toString(),top:k,left:Q}),st=(0,$.z$)().toLowerCase();y&&(fe=P(st)?"_blank":y),F(st)&&(g=g||"http://localhost",je.scrollbars="yes");const Dt=Object.entries(je).reduce((gs,[Au,Wp])=>`${gs}${Au}=${Wp},`,"");if(function Mt(w=(0,$.z$)()){var g;return It(w)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(st)&&"_self"!==fe)return function ze(w,g){const y=document.createElement("a");y.href=w,y.target=g;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(C)}(g||"",fe),new pe(null);const Xt=window.open(g||"",fe,Dt);ne(Xt,w,"popup-blocked");try{Xt.focus()}catch{}return new pe(Xt)}(g,fe,Zs())})()}_openRedirect(g,y,C,M){var k=this;return(0,f.Z)(function*(){return yield k._originValidation(g),function wh(w){Fr().location.href=w}(yield Yr(g,y,C,en(),M)),new Promise(()=>{})})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:M,promise:k}=this.eventManagers[y];return M?Promise.resolve(M):($e(k,"If manager is not set, promise should be"),k)}const C=this.initAndGetManager(g);return this.eventManagers[y]={promise:C},C.catch(()=>{delete this.eventManagers[y]}),C}initAndGetManager(g){var y=this;return(0,f.Z)(function*(){const C=yield function Up(w){return I.apply(this,arguments)}(g),M=new Ci(g);return C.register("authEvent",k=>(ne(k?.authEvent,g,"invalid-auth-event"),{status:M.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:M},y.iframes[g._key()]=C,M})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(Ma,{type:Ma},M=>{var k;const Q=null===(k=M?.[0])||void 0===k?void 0:k[Ma];void 0!==Q&&y(!!Q),re(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function dy(w){return kh.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return Bt()||V()||It()}};class Ui{constructor(g){this.factorId=g}_process(g,y,C){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,C);case"signin":return this._finalizeSignIn(g,y.credential);default:return tt("unexpected MultiFactorSessionType")}}}class Na extends Ui{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Na(g)}_finalizeEnroll(g,y,C){return function Hc(w,g){return ot(w,"POST","/v2/accounts/mfaEnrollment:finalize",Je(w,g))}(g,{idToken:y,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function Mp(w,g){return ot(w,"POST","/v2/accounts/mfaSignIn:finalize",Je(w,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Vl=(()=>{class w{constructor(){}static assertion(y){return Na._fromCredential(y)}}return w.FACTOR_ID="phone",w})();var xa="@firebase/auth";class gC{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,f.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(C=>{g(C?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);y&&(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,$.Pz)("authIdTokenMaxAge"),function iw(w){(0,O._registerComponent)(new _e.wA("auth",(g,{options:y})=>{const C=g.getProvider("app").getImmediate(),M=g.getProvider("heartbeat"),k=g.getProvider("app-check-internal"),{apiKey:Q,authDomain:fe}=C.options;ne(Q&&!Q.includes(":"),"invalid-api-key",{appName:C.name});const je={apiKey:Q,authDomain:fe,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gr(w)},st=new Ic(C,M,k,je);return function ny(w,g){const y=g?.persistence||[],C=(Array.isArray(y)?y:[y]).map(pr);g?.errorMap&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(C,g?.popupRedirectResolver)}(st,y),st},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,C)=>{g.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new _e.wA("auth-internal",g=>{const y=or(g.getProvider("auth").getImmediate());return new gC(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(xa,"0.23.2",function hy(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,O.registerVersion)(xa,"0.23.2","esm2017")}("Browser")},2090:(mt,be,U)=>{U.d(be,{$s:()=>pr,BH:()=>ae,DV:()=>Ni,Dv:()=>us,G6:()=>Te,GJ:()=>rr,L:()=>Ee,LL:()=>xn,Pz:()=>Ce,Sg:()=>me,UG:()=>tt,UI:()=>zi,US:()=>_e,Wj:()=>Ft,Wl:()=>vn,Yr:()=>Ie,ZB:()=>ie,ZR:()=>ot,aH:()=>re,b$:()=>wr,cI:()=>sn,dS:()=>Wi,eu:()=>Ge,g5:()=>O,gK:()=>gn,gQ:()=>wt,h$:()=>Ne,hl:()=>ke,hu:()=>$,jU:()=>$e,lb:()=>Pn,m9:()=>Yt,ne:()=>Zt,p$:()=>q,pd:()=>ht,r3:()=>qn,ru:()=>en,tV:()=>z,uI:()=>ne,ug:()=>Ds,vZ:()=>Hr,w1:()=>zs,w9:()=>hr,xO:()=>Cs,xb:()=>Oo,z$:()=>Pe,zI:()=>Be,zd:()=>Ye});const f={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},$=function(W,G){if(!W)throw O(G)},O=function(W){return new Error("Firebase Database ("+f.SDK_VERSION+") INTERNAL ASSERT FAILED: "+W)},ee=function(W){const G=[];let F=0;for(let V=0;V<W.length;V++){let P=W.charCodeAt(V);P<128?G[F++]=P:P<2048?(G[F++]=P>>6|192,G[F++]=63&P|128):55296==(64512&P)&&V+1<W.length&&56320==(64512&W.charCodeAt(V+1))?(P=65536+((1023&P)<<10)+(1023&W.charCodeAt(++V)),G[F++]=P>>18|240,G[F++]=P>>12&63|128,G[F++]=P>>6&63|128,G[F++]=63&P|128):(G[F++]=P>>12|224,G[F++]=P>>6&63|128,G[F++]=63&P|128)}return G},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,G){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const F=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,V=[];for(let P=0;P<W.length;P+=3){const J=W[P],ve=P+1<W.length,qe=ve?W[P+1]:0,Et=P+2<W.length,It=Et?W[P+2]:0;let Cn=(15&qe)<<2|It>>6,Bt=63&It;Et||(Bt=64,ve||(Cn=64)),V.push(F[J>>2],F[(3&J)<<4|qe>>4],F[Cn],F[Bt])}return V.join("")},encodeString(W,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(W):this.encodeByteArray(ee(W),G)},decodeString(W,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(W):function(W){const G=[];let F=0,V=0;for(;F<W.length;){const P=W[F++];if(P<128)G[V++]=String.fromCharCode(P);else if(P>191&&P<224){const J=W[F++];G[V++]=String.fromCharCode((31&P)<<6|63&J)}else if(P>239&&P<365){const Et=((7&P)<<18|(63&W[F++])<<12|(63&W[F++])<<6|63&W[F++])-65536;G[V++]=String.fromCharCode(55296+(Et>>10)),G[V++]=String.fromCharCode(56320+(1023&Et))}else{const J=W[F++],ve=W[F++];G[V++]=String.fromCharCode((15&P)<<12|(63&J)<<6|63&ve)}}return G.join("")}(this.decodeStringToByteArray(W,G))},decodeStringToByteArray(W,G){this.init_();const F=G?this.charToByteMapWebSafe_:this.charToByteMap_,V=[];for(let P=0;P<W.length;){const J=F[W.charAt(P++)],qe=P<W.length?F[W.charAt(P)]:0;++P;const It=P<W.length?F[W.charAt(P)]:64;++P;const Mt=P<W.length?F[W.charAt(P)]:64;if(++P,null==J||null==qe||null==It||null==Mt)throw new we;V.push(J<<2|qe>>4),64!==It&&(V.push(qe<<4&240|It>>2),64!==Mt&&V.push(It<<6&192|Mt))}return V},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}};class we extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ne=function(W){const G=ee(W);return _e.encodeByteArray(G,!0)},Ee=function(W){return Ne(W).replace(/\./g,"")},z=function(W){try{return _e.decodeString(W,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function q(W){return ie(void 0,W)}function ie(W,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return G}for(const F in G)!G.hasOwnProperty(F)||!Ve(F)||(W[F]=ie(W[F],G[F]));return W}function Ve(W){return"__proto__"!==W}const Oe=()=>{try{return function Re(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const W=process.env.__FIREBASE_DEFAULTS__;return W?JSON.parse(W):void 0})()||(()=>{if(typeof document>"u")return;let W;try{W=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const G=W&&z(W[1]);return G&&JSON.parse(G)})()}catch(W){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${W}`)}},re=()=>{var W;return null===(W=Oe())||void 0===W?void 0:W.config},Ce=W=>{var G;return null===(G=Oe())||void 0===G?void 0:G[`_${W}`]};class ae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,F)=>{this.resolve=G,this.reject=F})}wrapCallback(G){return(F,V)=>{F?this.reject(F):this.resolve(V),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(F):G(F,V))}}}function me(W,G){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const V=G||"demo-project",P=W.iat||0,J=W.sub||W.user_id;if(!J)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ve=Object.assign({iss:`https://securetoken.google.com/${V}`,aud:V,iat:P,exp:P+3600,auth_time:P,sub:J,user_id:J,firebase:{sign_in_provider:"custom",identities:{}}},W);return[Ee(JSON.stringify({alg:"none",type:"JWT"})),Ee(JSON.stringify(ve)),""].join(".")}function Pe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ne(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())}function tt(){var W;const G=null===(W=Oe())||void 0===W?void 0:W.forceEnvironment;if("node"===G)return!0;if("browser"===G)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function $e(){return"object"==typeof self&&self.self===self}function en(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function wr(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function zs(){const W=Pe();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function Ie(){return!0===f.NODE_CLIENT||!0===f.NODE_ADMIN}function Te(){return!tt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ke(){try{return"object"==typeof indexedDB}catch{return!1}}function Ge(){return new Promise((W,G)=>{try{let F=!0;const V="validate-browser-context-for-indexeddb-analytics-module",P=self.indexedDB.open(V);P.onsuccess=()=>{P.result.close(),F||self.indexedDB.deleteDatabase(V),W(!0)},P.onupgradeneeded=()=>{F=!1},P.onerror=()=>{var J;G((null===(J=P.error)||void 0===J?void 0:J.message)||"")}}catch(F){G(F)}})}function Be(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ot extends Error{constructor(G,F,V){super(F),this.code=G,this.customData=V,this.name="FirebaseError",Object.setPrototypeOf(this,ot.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xn.prototype.create)}}class xn{constructor(G,F,V){this.service=G,this.serviceName=F,this.errors=V}create(G,...F){const V=F[0]||{},P=`${this.service}/${G}`,J=this.errors[G],ve=J?function rt(W,G){return W.replace(yt,(F,V)=>{const P=G[V];return null!=P?String(P):`<${V}?>`})}(J,V):"Error";return new ot(P,`${this.serviceName}: ${ve} (${P}).`,V)}}const yt=/\{\$([^}]+)}/g;function sn(W){return JSON.parse(W)}function vn(W){return JSON.stringify(W)}const $n=function(W){let G={},F={},V={},P="";try{const J=W.split(".");G=sn(z(J[0])||""),F=sn(z(J[1])||""),P=J[2],V=F.d||{},delete F.d}catch{}return{header:G,claims:F,data:V,signature:P}},hr=function(W){const F=$n(W).claims;return!!F&&"object"==typeof F&&F.hasOwnProperty("iat")},rr=function(W){const G=$n(W).claims;return"object"==typeof G&&!0===G.admin};function qn(W,G){return Object.prototype.hasOwnProperty.call(W,G)}function Ni(W,G){if(Object.prototype.hasOwnProperty.call(W,G))return W[G]}function Oo(W){for(const G in W)if(Object.prototype.hasOwnProperty.call(W,G))return!1;return!0}function zi(W,G,F){const V={};for(const P in W)Object.prototype.hasOwnProperty.call(W,P)&&(V[P]=G.call(F,W[P],P,W));return V}function Hr(W,G){if(W===G)return!0;const F=Object.keys(W),V=Object.keys(G);for(const P of F){if(!V.includes(P))return!1;const J=W[P],ve=G[P];if(Kn(J)&&Kn(ve)){if(!Hr(J,ve))return!1}else if(J!==ve)return!1}for(const P of V)if(!F.includes(P))return!1;return!0}function Kn(W){return null!==W&&"object"==typeof W}function Cs(W){const G=[];for(const[F,V]of Object.entries(W))Array.isArray(V)?V.forEach(P=>{G.push(encodeURIComponent(F)+"="+encodeURIComponent(P))}):G.push(encodeURIComponent(F)+"="+encodeURIComponent(V));return G.length?"&"+G.join("&"):""}function Ye(W){const G={};return W.replace(/^\?/,"").split("&").forEach(V=>{if(V){const[P,J]=V.split("=");G[decodeURIComponent(P)]=decodeURIComponent(J)}}),G}function ht(W){const G=W.indexOf("?");if(!G)return"";const F=W.indexOf("#",G);return W.substring(G,F>0?F:void 0)}class wt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let G=1;G<this.blockSize;++G)this.pad_[G]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(G,F){F||(F=0);const V=this.W_;if("string"==typeof G)for(let Mt=0;Mt<16;Mt++)V[Mt]=G.charCodeAt(F)<<24|G.charCodeAt(F+1)<<16|G.charCodeAt(F+2)<<8|G.charCodeAt(F+3),F+=4;else for(let Mt=0;Mt<16;Mt++)V[Mt]=G[F]<<24|G[F+1]<<16|G[F+2]<<8|G[F+3],F+=4;for(let Mt=16;Mt<80;Mt++){const Cn=V[Mt-3]^V[Mt-8]^V[Mt-14]^V[Mt-16];V[Mt]=4294967295&(Cn<<1|Cn>>>31)}let It,ft,P=this.chain_[0],J=this.chain_[1],ve=this.chain_[2],qe=this.chain_[3],Et=this.chain_[4];for(let Mt=0;Mt<80;Mt++){Mt<40?Mt<20?(It=qe^J&(ve^qe),ft=1518500249):(It=J^ve^qe,ft=1859775393):Mt<60?(It=J&ve|qe&(J|ve),ft=2400959708):(It=J^ve^qe,ft=3395469782);const Cn=(P<<5|P>>>27)+It+Et+ft+V[Mt]&4294967295;Et=qe,qe=ve,ve=4294967295&(J<<30|J>>>2),J=P,P=Cn}this.chain_[0]=this.chain_[0]+P&4294967295,this.chain_[1]=this.chain_[1]+J&4294967295,this.chain_[2]=this.chain_[2]+ve&4294967295,this.chain_[3]=this.chain_[3]+qe&4294967295,this.chain_[4]=this.chain_[4]+Et&4294967295}update(G,F){if(null==G)return;void 0===F&&(F=G.length);const V=F-this.blockSize;let P=0;const J=this.buf_;let ve=this.inbuf_;for(;P<F;){if(0===ve)for(;P<=V;)this.compress_(G,P),P+=this.blockSize;if("string"==typeof G){for(;P<F;)if(J[ve]=G.charCodeAt(P),++ve,++P,ve===this.blockSize){this.compress_(J),ve=0;break}}else for(;P<F;)if(J[ve]=G[P],++ve,++P,ve===this.blockSize){this.compress_(J),ve=0;break}}this.inbuf_=ve,this.total_+=F}digest(){const G=[];let F=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let P=this.blockSize-1;P>=56;P--)this.buf_[P]=255&F,F/=256;this.compress_(this.buf_);let V=0;for(let P=0;P<5;P++)for(let J=24;J>=0;J-=8)G[V]=this.chain_[P]>>J&255,++V;return G}}function Zt(W,G){const F=new fr(W,G);return F.subscribe.bind(F)}class fr{constructor(G,F){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=F,this.task.then(()=>{G(this)}).catch(V=>{this.error(V)})}next(G){this.forEachObserver(F=>{F.next(G)})}error(G){this.forEachObserver(F=>{F.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,F,V){let P;if(void 0===G&&void 0===F&&void 0===V)throw new Error("Missing Observer.");P=function Wt(W,G){if("object"!=typeof W||null===W)return!1;for(const F of G)if(F in W&&"function"==typeof W[F])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:F,complete:V},void 0===P.next&&(P.next=ir),void 0===P.error&&(P.error=ir),void 0===P.complete&&(P.complete=ir);const J=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?P.error(this.finalError):P.complete()}catch{}}),this.observers.push(P),J}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let F=0;F<this.observers.length;F++)this.sendOne(F,G)}sendOne(G,F){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{F(this.observers[G])}catch(V){typeof console<"u"&&console.error&&console.error(V)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ir(){}const us=function(W,G,F,V){let P;if(V<G?P="at least "+G:V>F&&(P=0===F?"none":"no more than "+F),P)throw new Error(W+" failed: Was called with "+V+(1===V?" argument.":" arguments.")+" Expects "+P+".")};function gn(W,G){return`${W} failed: ${G} argument `}function Ft(W,G,F,V){if((!V||F)&&"function"!=typeof F)throw new Error(gn(W,G)+"must be a valid function.")}function Pn(W,G,F,V){if((!V||F)&&("object"!=typeof F||null===F))throw new Error(gn(W,G)+"must be a valid context object.")}const Wi=function(W){const G=[];let F=0;for(let V=0;V<W.length;V++){let P=W.charCodeAt(V);if(P>=55296&&P<=56319){const J=P-55296;V++,$(V<W.length,"Surrogate pair missing trail surrogate."),P=65536+(J<<10)+(W.charCodeAt(V)-56320)}P<128?G[F++]=P:P<2048?(G[F++]=P>>6|192,G[F++]=63&P|128):P<65536?(G[F++]=P>>12|224,G[F++]=P>>6&63|128,G[F++]=63&P|128):(G[F++]=P>>18|240,G[F++]=P>>12&63|128,G[F++]=P>>6&63|128,G[F++]=63&P|128)}return G},Ds=function(W){let G=0;for(let F=0;F<W.length;F++){const V=W.charCodeAt(F);V<128?G++:V<2048?G+=2:V>=55296&&V<=56319?(G+=4,F++):G+=3}return G},Zn=1e3,Tn=2,sr=144e5,On=.5;function pr(W,G=Zn,F=Tn){const V=G*Math.pow(F,W),P=Math.round(On*V*(Math.random()-.5)*2);return Math.min(sr,V+P)}function Yt(W){return W&&W._delegate?W._delegate:W}},8029:(mt,be,U)=>{var f=U(2223);let $=null;function O(){return $}class ue{}const _e=new f.OlP("DocumentToken");let we=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Ee)},providedIn:"platform"}),n})();const Ne=new f.OlP("Location Initialized");let Ee=(()=>{class n extends we{constructor(){super(),this._doc=(0,f.f3M)(_e),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new n},providedIn:"platform"}),n})();function z(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function q(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ie(n){return n&&"?"!==n[0]?"?"+n:n}let Ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Xe)},providedIn:"root"}),n})();const Re=new f.OlP("appBaseHref");let Xe=(()=>{class n extends Ve{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(_e).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return z(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ie(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+ie(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+ie(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(we),f.LFG(Re,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xe=(()=>{class n extends Ve{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=z(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+ie(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+ie(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(we),f.LFG(Re,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ze=(()=>{class n{constructor(t){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function re(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(q(dt(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ie(r))}normalize(t){return n.stripTrailingSlash(function Ct(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,dt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ie(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ie(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=ie,n.joinWithSlash=z,n.stripTrailingSlash=q,n.\u0275fac=function(t){return new(t||n)(f.LFG(Ve))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Oe(){return new Ze((0,f.LFG)(Ve))}()},providedIn:"root"}),n})();function dt(n){return n.replace(/\/index.html$/,"")}function ko(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}let ia=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new ny,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){th("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){th("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class ny{constructor(){this.$implicit=null,this.ngIf=null}}function th(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let bs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function cs(n){return"server"===n}let Uo=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new xi((0,f.LFG)(_e),window)}),n})();class xi{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function la(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Bo(this.window.history)||Bo(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Bo(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Or{}class Uc extends ue{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class mo extends Uc{static makeCurrent(){!function ee(n){$||($=n)}(new mo)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function oy(){return Kr=Kr||document.querySelector("base"),Kr?Kr.getAttribute("href"):null}();return null==t?null:function gh(n){jo=jo||document.createElement("a"),jo.setAttribute("href",n);const e=jo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Kr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ko(document.cookie,e)}}let jo,Kr=null,Bc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const mh=new f.OlP("EventManagerPlugins");let jc=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(a=>a.supports(t)),!r)throw new f.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(mh),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Sl{constructor(e){this._doc=e}}const va="ng-app-id";let As=(()=>{class n{constructor(t,r,i,a={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=cs(a),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${va}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const a=i.get(t);return a.usage+=r,a.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,a=i?.get(r);if(a?.parentNode===t)return i.delete(r),a.removeAttribute(va),a;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=r,this.platformIsServer&&l.setAttribute(va,this.appId),l}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const a=this.styleRef,l=a.get(r)?.elements;l?l.push(i):a.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(_e),f.LFG(f.AFp),f.LFG(f.Ojb,8),f.LFG(f.Lbi))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Rt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},wa=/%COMP%/g,_h=new f.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Gc(n,e){return e.map(t=>t.replace(wa,n))}let Ea=(()=>{class n{constructor(t,r,i,a,l,h,m,v=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=a,this.doc=l,this.platformId=h,this.ngZone=m,this.nonce=v,this.rendererByCompId=new Map,this.platformIsServer=cs(h),this.defaultRenderer=new Al(t,l,m,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===f.ifc.ShadowDom&&(r={...r,encapsulation:f.ifc.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof Ir?i.applyToHost(t):i instanceof pu&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let a=i.get(r.id);if(!a){const l=this.doc,h=this.ngZone,m=this.eventManager,v=this.sharedStylesHost,b=this.removeStylesOnCompDestory,S=this.platformIsServer;switch(r.encapsulation){case f.ifc.Emulated:a=new Ir(m,v,r,this.appId,b,l,h,S);break;case f.ifc.ShadowDom:return new zc(m,v,t,r,l,h,this.nonce,S);default:a=new pu(m,v,r,b,l,h,S)}a.onDestroy=()=>i.delete(r.id),i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(jc),f.LFG(As),f.LFG(f.AFp),f.LFG(_h),f.LFG(_e),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(f.Ojb))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Al{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Rt[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(nn(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(nn(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new f.vHH(5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Rt[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Rt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,i&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=O().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function nn(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class zc extends Al{constructor(e,t,r,i,a,l,h,m){super(e,a,l,m),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const v=Gc(i.id,i.styles);for(const b of v){const S=document.createElement("style");h&&S.setAttribute("nonce",h),S.textContent=b,this.shadowRoot.appendChild(S)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class pu extends Al{constructor(e,t,r,i,a,l,h,m){super(e,a,l,h),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=m?Gc(m,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Ir extends pu{constructor(e,t,r,i,a,l,h,m){const v=i+"-"+r.id;super(e,t,r,a,l,h,m,v),this.contentAttr=function yo(n){return"_ngcontent-%COMP%".replace(wa,n)}(v),this.hostAttr=function fu(n){return"_nghost-%COMP%".replace(wa,n)}(v)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Rl=(()=>{class n extends Sl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(_e))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const gu=["alt","control","meta","shift"],Ks={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Zs={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let vh=(()=>{class n extends Sl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),l="code."),gu.forEach(v=>{const b=r.indexOf(v);b>-1&&(r.splice(b,1),l+=v+".")}),l+=a,0!=r.length||0===a.length)return null;const m={};return m.domEventName=i,m.fullKey=l,m}static matchEventFullKeyCode(t,r){let i=Ks[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),gu.forEach(l=>{l!==i&&(0,Zs[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(_e))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Rp=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function ps(){mo.makeCurrent()},multi:!0},{provide:_e,useFactory:function _o(){return(0,f.RDi)(document),document},deps:[]}]),Cr=new f.OlP(""),Wc=[{provide:f.rWj,useClass:class Ho{addToWindow(e){f.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new f.vHH(5103,!1);return a},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const i=f.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const h=function(m){l=l||m,a--,0==a&&r(l)};i.forEach(function(m){m.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],$o=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function Eh(){return new f.qLn},deps:[]},{provide:mh,useClass:Rl,multi:!0,deps:[_e,f.R0b,f.Lbi]},{provide:mh,useClass:vh,multi:!0,deps:[_e]},Ea,As,jc,{provide:f.FYo,useExisting:Ea},{provide:Or,useClass:Bc,deps:[]},[]];let Ia=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId}]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Cr,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[...$o,...Wc],imports:[bs,f.hGG]}),n})(),Kc=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(_e))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function yu(){return new Kc((0,f.LFG)(_e))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var An=U(2011),ki=U(7579),vt=U(9646),Fi=U(9751),ln=U(8996),Ca=U(6451),zo=U(5363),Eu=U(8421),Dr=U(4482),Zr=U(5403);function yn(n,e){return(0,Dr.e)((t,r)=>{let i=null,a=0,l=!1;const h=()=>l&&!i&&r.complete();t.subscribe((0,Zr.x)(r,m=>{i?.unsubscribe();let v=0;const b=a++;(0,Eu.Xf)(n(m,b)).subscribe(i=(0,Zr.x)(r,S=>r.next(e?e(m,S,b,v++):S),()=>{i=null,h()}))},()=>{l=!0,h()}))})}var Tt=U(4004),Ns=U(6063);class Iu extends ki.x{constructor(e=1/0,t=1/0,r=Ns.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let h=0;for(let m=1;m<r.length&&r[m]<=l;m+=2)h=m;h&&r.splice(0,h+1)}}}var Cu=U(3099);function xs(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Cu.B)({connector:()=>new Iu(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const Da=(0,U(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Xn(n,e){return(0,Dr.e)((t,r)=>{let i=0;t.subscribe((0,Zr.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Ki=U(515);function Ii(n){return n<=0?()=>Ki.E:(0,Dr.e)((e,t)=>{let r=0;e.subscribe((0,Zr.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ba(n){return(0,Dr.e)((e,t)=>{let r=!1;e.subscribe((0,Zr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Du(n=xl){return(0,Dr.e)((e,t)=>{let r=!1;e.subscribe((0,Zr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function xl(){return new Da}var wo=U(4671);function Ps(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Xn((i,a)=>n(i,a,r)):wo.y,Ii(1),t?ba(e):Du(()=>new Da))}var Li=U(576);function Pp(n,e){return(0,Li.m)(e)?yn(()=>n,e):yn(()=>n)}var td=U(9468),Qt=U(4976);U(259);var ye=U(5861),Lr=U(6881),gr=U(4859),L=U(2090),Ci=U(1877);const Tu=new Map,kl={activated:!1,tokenObservers:[]},Ph={initialized:!1,enabled:!1};function Vn(n){return Tu.get(n)||Object.assign({},kl)}function Oh(){return Ph}const Sa="https://content-firebaseappcheck.googleapis.com/v1",Un="exchangeDebugToken",sd={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Vp{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new L.BH,yield function ur(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new L.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Bn=new L.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ra(n){if(!Vn(n).activated)throw Bn.create("use-before-activation",{appName:n.name})}function Ll(n,e){return Up.apply(this,arguments)}function Up(){return(Up=(0,ye.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,h;try{l=yield fetch(n,a)}catch(S){throw Bn.create("fetch-network-error",{originalErrorMessage:S?.message})}if(200!==l.status)throw Bn.create("fetch-status-error",{httpStatus:l.status});try{h=yield l.json()}catch(S){throw Bn.create("fetch-parse-error",{originalErrorMessage:S?.message})}const m=h.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw Bn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const v=1e3*Number(m[1]),b=Date.now();return{token:h.token,expireTimeMillis:b+v,issuedAtTimeMillis:b}})).apply(this,arguments)}function R(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Sa}/projects/${t}/apps/${r}:${Un}?key=${i}`,body:{debug_token:e}}}const B="firebase-app-check-database",K=1,X="firebase-app-check-store";let Ke=null;function Ys(){return(Ys=(0,ye.Z)(function*(n,e){const r=(yield function ze(){return Ke||(Ke=new Promise((n,e)=>{try{const t=indexedDB.open(B,K);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Bn.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(X,{keyPath:"compositeKey"})}}catch(t){e(Bn.create("storage-open",{originalErrorMessage:t?.message}))}}),Ke)}()).transaction(X,"readwrite"),a=r.objectStore(X).put({compositeKey:n,value:e});return new Promise((l,h)=>{a.onsuccess=m=>{l()},r.onerror=m=>{var v;h(Bn.create("storage-set",{originalErrorMessage:null===(v=m.target.error)||void 0===v?void 0:v.message}))}})})).apply(this,arguments)}const Ui=new Ci.Yd("@firebase/app-check");function Bp(n,e){return(0,L.hl)()?function Lt(n,e){return function mr(n,e){return Ys.apply(this,arguments)}(function Vi(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Ui.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Qs(){return Oh().enabled}function xa(){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,ye.Z)(function*(){const n=Oh();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const hy={error:"UNKNOWN_ERROR"};function iw(n){return L.US.encodeString(JSON.stringify(n),!1)}function Hp(n){return $p.apply(this,arguments)}function $p(){return($p=(0,ye.Z)(function*(n,e=!1){const t=n.app;Ra(t);const r=Vn(t);let a,i=r.token;if(i&&!M(i)&&(r.token=void 0,i=void 0),!i){const m=yield r.cachedTokenPromise;m&&(M(m)?i=m:yield Bp(t,void 0))}if(!e&&i&&M(i))return{token:i.token};let h,l=!1;if(Qs()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Ll(R(t,yield xa()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const m=yield r.exchangeTokenPromise;return yield Bp(t,m),r.token=m,{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield Vn(t).exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?Ui.warn(m.message):Ui.error(m),a=m}return i?a?h=M(i)?{token:i.token,internalError:a}:k(a):(h={token:i.token},r.token=i,yield Bp(t,i)):h=k(a),l&&function C(n,e){const t=Vn(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,h),h})).apply(this,arguments)}function Gp(n){return zp.apply(this,arguments)}function zp(){return(zp=(0,ye.Z)(function*(n){const e=n.app;Ra(e);const{provider:t}=Vn(e);if(Qs()){const r=yield xa(),{token:i}=yield Ll(R(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function w(n,e){const t=Vn(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function g(n){const{app:e}=n,t=Vn(e);let r=t.tokenRefresher;r||(r=function y(n){const{app:e}=n;return new Vp((0,ye.Z)(function*(){let r;if(r=Vn(e).token?yield Hp(n,!0):yield Hp(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Vn(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},sd.RETRIAL_MIN_WAIT,sd.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function M(n){return n.expireTimeMillis-Date.now()>0}function k(n){return{token:iw(hy),error:n}}class Q{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Vn(this.app);for(const t of e)w(this.app,t.next);return Promise.resolve()}}const yC="app-check-internal";!function _C(){(0,Lr._registerComponent)(new gr.wA("app-check",n=>function fe(n,e){return new Q(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(yC).initialize()})),(0,Lr._registerComponent)(new gr.wA(yC,n=>function je(n){return{getToken:e=>Hp(n,e),getLimitedUseToken:()=>Gp(n),addTokenListener:e=>function ad(n,e,t,r){const{app:i}=n,a=Vn(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&M(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),g(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>g(n))}(n,"INTERNAL",e),removeTokenListener:e=>w(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Lr.registerVersion)("@firebase/app-check","0.8.0")}();class Di{constructor(){return(0,Qt.vb)("app-check")}}typeof window<"u"&&window;var Uh=U(9260);const aw=new f.OlP("angularfire2.auth.use-emulator"),dd=new f.OlP("angularfire2.auth.settings"),uw=new f.OlP("angularfire2.auth.tenant-id"),lw=new f.OlP("angularfire2.auth.langugage-code"),Xp=new f.OlP("angularfire2.auth.use-device-language"),Jp=new f.OlP("angularfire.auth.persistence"),my=(n,e,t,r,i,a,l,h)=>(0,An.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),l)for(const[v,b]of Object.entries(l))m.settings[v]=b;return h&&m.setPersistence(h),m},[t,r,i,a,l,h]);let Oa=(()=>{class n{constructor(t,r,i,a,l,h,m,v,b,S,x,H){const Z=new ki.x,se=(0,vt.of)(void 0).pipe((0,zo.Q)(l.outsideAngular),yn(()=>a.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,9568)))),(0,Tt.U)(()=>(0,An.on)(t,a,r)),(0,Tt.U)(ce=>my(ce,a,h,v,b,S,m,x)),xs({bufferSize:1,refCount:!1}));if(cs(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,vt.of)(null);else{se.pipe(Ps()).subscribe();const We=se.pipe(yn(lt=>lt.getRedirectResult().then(Vt=>Vt,()=>null)),Qt.iC,xs({bufferSize:1,refCount:!1})),ut=se.pipe(yn(lt=>new Fi.y(Vt=>({unsubscribe:a.runOutsideAngular(()=>lt.onAuthStateChanged(Kt=>Vt.next(Kt),Kt=>Vt.error(Kt),()=>Vt.complete()))})))),He=se.pipe(yn(lt=>new Fi.y(Vt=>({unsubscribe:a.runOutsideAngular(()=>lt.onIdTokenChanged(Kt=>Vt.next(Kt),Kt=>Vt.error(Kt),()=>Vt.complete()))}))));this.authState=We.pipe(Pp(ut),(0,td.R)(l.outsideAngular),(0,zo.Q)(l.insideAngular)),this.user=We.pipe(Pp(He),(0,td.R)(l.outsideAngular),(0,zo.Q)(l.insideAngular)),this.idToken=this.user.pipe(yn(lt=>lt?(0,ln.D)(lt.getIdToken()):(0,vt.of)(null))),this.idTokenResult=this.user.pipe(yn(lt=>lt?(0,ln.D)(lt.getIdTokenResult()):(0,vt.of)(null))),this.credential=(0,Ca.T)(We,Z,this.authState.pipe(Xn(lt=>!lt))).pipe((0,Tt.U)(lt=>lt?.user?lt:null),(0,td.R)(l.outsideAngular),(0,zo.Q)(l.insideAngular))}return(0,An.pX)(this,se,a,{spy:{apply:(ce,We,ut)=>{(ce.startsWith("signIn")||ce.startsWith("createUser"))&&ut.then(He=>Z.next(He))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(An.Dh),f.LFG(An.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Qt.HU),f.LFG(aw,8),f.LFG(dd,8),f.LFG(uw,8),f.LFG(lw,8),f.LFG(Xp,8),f.LFG(Jp,8),f.LFG(Di,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),yy=(()=>{class n{constructor(){Uh.Z.registerVersion("angularfire",Qt.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[Oa]}),n})();var _y=U(4986),Bh=U(3942);const DC="firebasestorage.googleapis.com",bC="storageBucket";class br extends L.ZR{constructor(e,t,r=0){super(eg(e),`Firebase Storage: ${t} (${eg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,br.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return eg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Pt=(()=>((Pt=Pt||{}).UNKNOWN="unknown",Pt.OBJECT_NOT_FOUND="object-not-found",Pt.BUCKET_NOT_FOUND="bucket-not-found",Pt.PROJECT_NOT_FOUND="project-not-found",Pt.QUOTA_EXCEEDED="quota-exceeded",Pt.UNAUTHENTICATED="unauthenticated",Pt.UNAUTHORIZED="unauthorized",Pt.UNAUTHORIZED_APP="unauthorized-app",Pt.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",Pt.INVALID_CHECKSUM="invalid-checksum",Pt.CANCELED="canceled",Pt.INVALID_EVENT_NAME="invalid-event-name",Pt.INVALID_URL="invalid-url",Pt.INVALID_DEFAULT_BUCKET="invalid-default-bucket",Pt.NO_DEFAULT_BUCKET="no-default-bucket",Pt.CANNOT_SLICE_BLOB="cannot-slice-blob",Pt.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",Pt.NO_DOWNLOAD_URL="no-download-url",Pt.INVALID_ARGUMENT="invalid-argument",Pt.INVALID_ARGUMENT_COUNT="invalid-argument-count",Pt.APP_DELETED="app-deleted",Pt.INVALID_ROOT_OPERATION="invalid-root-operation",Pt.INVALID_FORMAT="invalid-format",Pt.INTERNAL_ERROR="internal-error",Pt.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Pt))();function eg(n){return"storage/"+n}function vy(){return new br(Pt.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Ul(){return new br(Pt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function fw(){return new br(Pt.CANCELED,"User canceled the upload/download.")}function tg(){return new br(Pt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function hd(n){return new br(Pt.INVALID_ARGUMENT,n)}function wy(){return new br(Pt.APP_DELETED,"The Firebase app was deleted.")}function pw(n){return new br(Pt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Bl(n,e){return new br(Pt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function xu(n){throw new br(Pt.INTERNAL_ERROR,"Internal error: "+n)}class Bi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Bi.makeFromUrl(e,t)}catch{return new Bi(e,"")}if(""===r.path)return r;throw function sR(n){return new br(Pt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(lt){lt.path_=decodeURIComponent(lt.path)}const S=t.replace(/[.]/g,"\\."),He=[{regex:h,indices:{bucket:1,path:3},postModify:function a(lt){"/"===lt.path.charAt(lt.path.length-1)&&(lt.path_=lt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===DC?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let lt=0;lt<He.length;lt++){const Vt=He[lt],Kt=Vt.regex.exec(e);if(Kt){let ra=Kt[Vt.indices.path];ra||(ra=""),r=new Bi(Kt[Vt.indices.bucket],ra),Vt.postModify(r);break}}if(null==r)throw function SC(n){return new br(Pt.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class gw{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function rg(n){return"string"==typeof n||n instanceof String}function NC(n){return yw()&&n instanceof Blob}function yw(){return typeof Blob<"u"&&!(0,L.UG)()}function _w(n,e,t,r){if(r<e)throw hd(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw hd(`Invalid value for '${n}'. Expected ${t} or less.`)}function ka(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function vw(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var ji=(()=>((ji=ji||{})[ji.NO_ERROR=0]="NO_ERROR",ji[ji.NETWORK_ERROR=1]="NETWORK_ERROR",ji[ji.ABORT=2]="ABORT",ji))();function Iy(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class jh{constructor(e,t,r,i,a,l,h,m,v,b,S,x=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=m,this.timeout_=v,this.progressCallback_=b,this.connectionFactory_=S,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((H,Z)=>{this.resolve_=H,this.reject_=Z,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());!function mw(n){return void 0!==n}(m)?a():a(m)}catch(m){l(m)}else if(null!==h){const m=vy();m.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,m):m)}else l(i.canceled?this.appDelete_?wy():fw():Ul())};this.canceled_?t(0,new Cy(!1,null,!0)):this.backoffId_=function Ey(n,e,t){let r=1,i=null,a=null,l=!1,h=0;function m(){return 2===h}let v=!1;function b(...ce){v||(v=!0,e.apply(null,ce))}function S(ce){i=setTimeout(()=>{i=null,n(H,m())},ce)}function x(){a&&clearTimeout(a)}function H(ce,...We){if(v)return void x();if(ce)return x(),void b.call(null,ce,...We);if(m()||l)return x(),void b.call(null,ce,...We);let He;r<64&&(r*=2),1===h?(h=2,He=0):He=1e3*(r+Math.random()),S(He)}let Z=!1;function se(ce){Z||(Z=!0,x(),!v&&(null!==i?(ce||(h=2),clearTimeout(i),S(0)):ce||(h=1)))}return S(0),a=setTimeout(()=>{l=!0,se(!0)},t),se}((r,i)=>{if(i)return void r(!1,new Cy(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const h=a.getErrorCode()===ji.NO_ERROR,m=a.getStatus();if(!h||Iy(m,this.additionalRetryCodes_)&&this.retry){const b=a.getErrorCode()===ji.ABORT;return void r(!1,new Cy(!1,null,b))}const v=-1!==this.successCodes_.indexOf(m);r(!0,new Cy(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function MC(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Cy{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Dy(...n){const e=function ig(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(yw())return new Blob(n);throw new br(Pt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const ks={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class by{constructor(e,t){this.data=e,this.contentType=t||null}}function Ty(n,e){switch(n){case ks.RAW:return new by(PC(e));case ks.BASE64:case ks.BASE64URL:return new by(OC(n,e));case ks.DATA_URL:return new by(function hR(n){const e=new kC(n);return e.base64?OC(ks.BASE64,e.rest):function dR(n){let e;try{e=decodeURIComponent(n)}catch{throw Bl(ks.DATA_URL,"Malformed data URL.")}return PC(e)}(e.rest)}(e),function jl(n){return new kC(n).contentType}(e))}throw vy()}function PC(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function OC(n,e){switch(n){case ks.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw Bl(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ks.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw Bl(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function xC(n){if(typeof atob>"u")throw function RC(n){return new br(Pt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:Bl(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class kC{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Bl(ks.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function sg(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Fa{constructor(e,t){let r=0,i="";NC(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(NC(this.data_)){const i=function Ew(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Fa(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Fa(r,!0)}}static getBlob(...e){if(yw()){const t=e.map(r=>r instanceof Fa?r.data_:r);return new Fa(Dy.apply(null,t))}{const t=e.map(l=>rg(l)?Ty(ks.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)i[a++]=l[h]}),new Fa(i,!0)}}uploadData(){return this.data_}}function FC(n){let e;try{e=JSON.parse(n)}catch{return null}return function aR(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function fR(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function _O(n,e){return e}class Yi{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||_O}}let Sy=null;function og(){if(Sy)return Sy;const n=[];n.push(new Yi("bucket")),n.push(new Yi("generation")),n.push(new Yi("metageneration")),n.push(new Yi("name","fullPath",!0));const t=new Yi("name");t.xform=function e(a,l){return function pR(n){return!rg(n)||n.length<2?n:fR(n)}(l)},n.push(t);const i=new Yi("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Yi("timeCreated")),n.push(new Yi("updated")),n.push(new Yi("md5Hash",null,!0)),n.push(new Yi("cacheControl",null,!0)),n.push(new Yi("contentDisposition",null,!0)),n.push(new Yi("contentEncoding",null,!0)),n.push(new Yi("contentLanguage",null,!0)),n.push(new Yi("contentType",null,!0)),n.push(new Yi("metadata","customMetadata",!0)),Sy=n,Sy}function La(n,e,t){const r=FC(e);return null===r?null:function Iw(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function gR(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new Bi(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function Ay(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const Cw="prefixes",Dw="items";class Pu{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Do(n){if(!n)throw vy()}function Hh(n,e){return function t(r,i){const a=La(n,i,e);return Do(null!==a),a}}function fd(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function hw(){return new br(Pt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function iR(){return new br(Pt.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function rR(n){return new br(Pt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function TC(n){return new br(Pt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function ug(n){const e=fd(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function dw(n){return new br(Pt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function LC(n,e,t){const i=ka(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new Pu(i,"GET",Hh(n,t),l);return h.errorHandler=ug(e),h}function mR(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=ka(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,b=new Pu(h,"GET",function EO(n,e){return function t(r,i){const a=function wO(n,e,t){const r=FC(t);return null===r?null:function vO(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Cw])for(const i of t[Cw]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new Bi(e,a));r.prefixes.push(l)}if(t[Dw])for(const i of t[Dw]){const a=n._makeStorageReference(new Bi(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Do(null!==a),a}}(n,e.bucket),v);return b.urlParams=a,b.errorHandler=fd(e),b}function BC(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function bw(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class My{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function Tw(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Do(!1)}return Do(!!t&&-1!==(e||["active"]).indexOf(t)),t}const vR={STATE_CHANGED:"state_changed"},ms={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ny(n){switch(n){case"running":case"pausing":case"canceling":return ms.RUNNING;case"paused":return ms.PAUSED;case"success":return ms.SUCCESS;case"canceled":return ms.CANCELED;default:return ms.ERROR}}class CO{constructor(e,t,r){if(function ng(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function lg(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let $h=null;class bn{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ji.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ji.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ji.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw xu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw xu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw xu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw xu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw xu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class cg extends bn{initXhr(){this.xhr_.responseType="text"}}function bo(){return $h?$h():new cg}class Aw{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=og(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Pt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(Iy(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=Ul()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Pt.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function jC(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=BC(e,r,i),h={name:l.fullPath},m=ka(a,n.host,n._protocol),b={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=Ay(l,t),Z=new Pu(m,"POST",function H(se){let ce;Tw(se);try{ce=se.getResponseHeader("X-Goog-Upload-URL")}catch{Do(!1)}return Do(rg(ce)),ce},n.maxUploadRetryTime);return Z.urlParams=h,Z.headers=b,Z.body=S,Z.errorHandler=fd(e),Z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,bo,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function HC(n,e,t,r){const m=new Pu(t,"POST",function a(v){const b=Tw(v,["active","final"]);let S=null;try{S=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Do(!1)}S||Do(!1);const x=Number(S);return Do(!isNaN(x)),new My(x,r.size(),"final"===b)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=fd(e),m}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,bo,t,r);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new My(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function _R(n,e,t,r,i,a,l,h){const m=new My(0,0);if(l?(m.current=l.current,m.total=l.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function oR(){return new br(Pt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const v=m.total-m.current;let b=v;i>0&&(b=Math.min(b,i));const S=m.current;let H="";H=0===b?"finalize":v===b?"upload, finalize":"upload";const Z={"X-Goog-Upload-Command":H,"X-Goog-Upload-Offset":`${m.current}`},se=r.slice(S,S+b);if(null===se)throw tg();const He=new Pu(t,"POST",function ce(lt,Vt){const Kt=Tw(lt,["active","final"]),Mi=m.current+b,ra=r.size();let nw;return nw="final"===Kt?Hh(e,a)(lt,Vt):null,new My(Mi,ra,"final"===Kt,nw)},e.maxUploadRetryTime);return He.headers=Z,He.body=se.uploadData(),He.progressCallback=h||null,He.errorHandler=fd(n),He}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const h=this._ref.storage._makeRequest(l,bo,i,a,!1);this._request=h,h.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=LC(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,bo,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function Qr(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},m=function h(){let He="";for(let lt=0;lt<2;lt++)He+=Math.random().toString().slice(2);return He}();l["Content-Type"]="multipart/related; boundary="+m;const v=BC(e,r,i),b=Ay(v,t),H=Fa.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+b+"\r\n--"+m+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===H)throw tg();const Z={name:v.fullPath},se=ka(a,n.host,n._protocol),We=n.maxUploadRetryTime,ut=new Pu(se,"POST",Hh(n,t),We);return ut.urlParams=Z,ut.headers=l,ut.body=H.uploadData(),ut.errorHandler=fd(e),ut}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,bo,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=fw(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Ny(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new CO(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Ny(this._state)){case ms.SUCCESS:lg(this._resolve.bind(null,this.snapshot))();break;case ms.CANCELED:case ms.ERROR:lg(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Ny(this._state)){case ms.RUNNING:case ms.PAUSED:e.next&&lg(e.next.bind(e,this.snapshot))();break;case ms.SUCCESS:e.complete&&lg(e.complete.bind(e))();break;default:e.error&&lg(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Hl{constructor(e,t){this._service=e,this._location=t instanceof Bi?t:Bi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Hl(e,t)}get root(){const e=new Bi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fR(this._location.path)}get storage(){return this._service}get parent(){const e=function mO(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Bi(this._location.bucket,e);return new Hl(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw pw(e)}}function Nw(n,e,t){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,ye.Z)(function*(n,e,t){const i=yield qC(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield Nw(n,e,i.nextPageToken))})).apply(this,arguments)}function qC(n,e){null!=e&&"number"==typeof e.maxResults&&_w("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=mR(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,bo)}function IR(n){n._throwIfRoot("getDownloadURL");const e=function UC(n,e,t){const i=ka(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new Pu(i,"GET",function IO(n,e){return function t(r,i){const a=La(n,i,e);return Do(null!==a),function ag(n,e,t,r){const i=FC(e);if(null===i||!rg(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(v=>{const S=n.fullPath;return ka("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+vw({alt:"media",token:v})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return h.errorHandler=ug(e),h}(n.storage,n._location,og());return n.storage.makeRequestWithTokens(e,bo).then(t=>{if(null===t)throw function AC(){return new br(Pt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function dg(n,e){const t=function yO(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Bi(n._location.bucket,t);return new Hl(n.storage,r)}function Oy(n,e){if(n instanceof $l){const t=n;if(null==t._bucket)throw function pO(){return new br(Pt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+bC+"' property when initializing the app?")}();const r=new Hl(t,t._bucket);return null!=e?Oy(r,e):r}return void 0!==e?dg(n,e):n}function CR(n,e){if(e&&function pd(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof $l)return function Ow(n,e){return new Hl(n,e)}(n,e);throw hd("To use ref(service, url), the first argument must be a Storage instance.")}return Oy(n,e)}function KC(n,e){const t=e?.[bC];return null==t?null:Bi.makeFromBucketSpec(t,n)}class $l{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=DC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Bi.makeFromBucketSpec(i,this._host):KC(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Bi.makeFromBucketSpec(this._url,e):KC(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){_w("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){_w("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ye.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ye.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Hl(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new gw(wy());{const l=function cR(n,e,t,r,i,a,l=!0){const h=vw(n.urlParams),m=n.url+h,v=Object.assign({},n.headers);return function lR(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function uR(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function gO(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,a),function ww(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new jh(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,ye.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const YC="@firebase/storage";function SR(n,e){return CR(n=(0,L.m9)(n),e)}function Fw(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new $l(t,r,i,e,Lr.SDK_VERSION)}!function Lw(){(0,Lr._registerComponent)(new gr.wA("storage",Fw,"PUBLIC").setMultipleInstances(!0)),(0,Lr.registerVersion)(YC,"0.11.2",""),(0,Lr.registerVersion)(YC,"0.11.2","esm2017")}();class Gl{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class hg{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Gl(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Gl(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new Gl(l,this,this._ref)):{next:t.next?l=>t.next(new Gl(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class Gh{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Va(e,this._service))}get items(){return this._delegate.items.map(e=>new Va(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Va{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function ky(n,e){return dg(n,e)}(this._delegate,e);return new Va(t,this.storage)}get root(){return new Va(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Va(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new hg(function eD(n,e,t){return function ER(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Aw(n,new Fa(e),t)}(n=(0,L.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ks.RAW,r){this._throwIfRoot("putString");const i=Ty(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new hg(new Aw(this._delegate,new Fa(i.data,!0),a),this)}listAll(){return function bR(n){return function WC(n){const e={prefixes:[],items:[]};return Nw(n,e).then(()=>e)}(n=(0,L.m9)(n))}(this._delegate).then(e=>new Gh(e,this.storage))}list(e){return function SO(n,e){return qC(n=(0,L.m9)(n),e)}(this._delegate,e||void 0).then(t=>new Gh(t,this.storage))}getMetadata(){return function kw(n){return function xw(n){n._throwIfRoot("getMetadata");const e=LC(n.storage,n._location,og());return n.storage.makeRequestWithTokens(e,bo)}(n=(0,L.m9)(n))}(this._delegate)}updateMetadata(e){return function TO(n,e){return function Py(n,e){n._throwIfRoot("updateMetadata");const t=function Ry(n,e,t,r){const a=ka(e.fullServerUrl(),n.host,n._protocol),h=Ay(t,r),v=n.maxOperationRetryTime,b=new Pu(a,"PATCH",Hh(n,r),v);return b.headers={"Content-Type":"application/json; charset=utf-8"},b.body=h,b.errorHandler=ug(e),b}(n.storage,n._location,e,og());return n.storage.makeRequestWithTokens(t,bo)}(n=(0,L.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function TR(n){return IR(n=(0,L.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function AO(n){return function Pw(n){n._throwIfRoot("deleteObject");const e=function yR(n,e){const r=ka(e.fullServerUrl(),n.host,n._protocol),h=new Pu(r,"DELETE",function l(m,v){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=ug(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,bo)}(n=(0,L.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw pw(e)}}class Vy{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(fg(e))throw hd("ref() expected a child path but got a URL, use refFromURL instead.");return new Va(SR(this._delegate,e),this)}refFromURL(e){if(!fg(e))throw hd("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Bi.makeFromUrl(e,this._delegate.host)}catch{throw hd("refFromUrl() expected a valid full URL but got an invalid one.")}return new Va(SR(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function Fy(n,e,t,r={}){!function ZC(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,L.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function fg(n){return/^[A-Za-z]+:\/\//.test(n)}function nD(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new Vy(t,r)}function Bw(n){const e=function RR(n){return new Fi.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function cw(n,e=_y.z){return(0,Dr.e)((t,r)=>{let i=null,a=null,l=null;const h=()=>{if(i){i.unsubscribe(),i=null;const v=a;a=null,r.next(v)}};function m(){const v=l+n,b=e.now();if(b<v)return i=this.schedule(void 0,v-b),void r.add(i);h()}t.subscribe((0,Zr.x)(r,v=>{a=v,l=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Tt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function pg(n){return{getDownloadURL:()=>(0,vt.of)(void 0).pipe(Qt.fc,yn(()=>n.getDownloadURL()),Qt.iC),getMetadata:()=>(0,vt.of)(void 0).pipe(Qt.fc,yn(()=>n.getMetadata()),Qt.iC),delete:()=>(0,ln.D)(n.delete()),child:e=>pg(n.child(e)),updateMetadata:e=>(0,ln.D)(n.updateMetadata(e)),put:(e,t)=>Bw(n.put(e,t)),putString:(e,t,r)=>Bw(n.putString(e,t,r)),list:e=>(0,ln.D)(n.list(e)),listAll:()=>(0,ln.D)(n.listAll())}}!function AR(n){const e={TaskState:ms,TaskEvent:vR,StringFormat:ks,Storage:Vy,Reference:Va};n.INTERNAL.registerComponent(new gr.wA("storage-compat",nD,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(Bh.Z);const MR=new f.OlP("angularfire2.storageBucket"),NR=new f.OlP("angularfire2.storage.maxUploadRetryTime"),NO=new f.OlP("angularfire2.storage.maxOperationRetryTime"),xR=new f.OlP("angularfire2.storage.use-emulator");let jw=(()=>{class n{constructor(t,r,i,a,l,h,m,v,b,S){const x=(0,An.on)(t,l,r);this.storage=(0,An.cc)(`${x.name}.storage.${i}`,"AngularFireStorage",x.name,()=>{const H=l.runOutsideAngular(()=>x.storage(i||void 0)),Z=b;return Z&&H.useEmulator(...Z),m&&H.setMaxUploadRetryTime(m),v&&H.setMaxOperationRetryTime(v),H},[m,v])}ref(t){return pg(this.storage.ref(t))}refFromURL(t){return pg(this.storage.refFromURL(t))}upload(t,r,i){return pg(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(An.Dh),f.LFG(An.xv,8),f.LFG(MR,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Qt.HU),f.LFG(NR,8),f.LFG(NO,8),f.LFG(xR,8),f.LFG(Di,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),PR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),iD=(()=>{class n{constructor(){Uh.Z.registerVersion("angularfire",Qt.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[jw],imports:[PR]}),n})();var gd=U(8189),zh=U(7669);function By(...n){return function Uy(){return(0,gd.J)(1)}()((0,ln.D)(n,(0,zh.yG)(n)))}function jy(...n){const e=(0,zh.yG)(n);return(0,Dr.e)((t,r)=>{(e?By(n,t,e):By(n,t)).subscribe(r)})}function Hy(){return(0,Dr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Zr.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function Wh(n,e){return(0,Dr.e)(function xO(n,e,t,r,i){return(a,l)=>{let h=t,m=e,v=0;a.subscribe((0,Zr.x)(l,b=>{const S=v++;m=h?n(m,b,S):(h=!0,b),r&&l.next(m)},i&&(()=>{h&&l.next(m),l.complete()})))}}(n,e,arguments.length>=2,!0))}var at,gg=U(1884),qh=(U(9568),typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{}),ys={},$y=$y||{},Gt=qh||self;function Gy(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function mg(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var zy="closure_uid_"+(1e9*Math.random()>>>0),Hw=0;function yg(n,e,t){return n.call.apply(n.bind,arguments)}function oD(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function _s(n,e,t){return(_s=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?yg:oD).apply(null,arguments)}function Kh(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Tr(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,a){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function Ko(){this.s=this.s,this.o=this.o}Ko.prototype.s=!1,Ko.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function sD(n){Object.prototype.hasOwnProperty.call(n,zy)&&n[zy]||(n[zy]=++Hw)}(this)},Ko.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const $w=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Gw(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function uD(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Gy(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function Qi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Qi.prototype.h=function(){this.defaultPrevented=!0};var OR=function(){if(!Gt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Gt.addEventListener("test",()=>{},e),Gt.removeEventListener("test",()=>{},e)}catch{}return n}();function _g(n){return/^[\s\xa0]*$/.test(n)}function Wy(){var n=Gt.navigator;return n&&(n=n.userAgent)?n:""}function Zo(n){return-1!=Wy().indexOf(n)}function zl(n){return zl[" "](n),n}zl[" "]=function(){};var fD,n,lD=Zo("Opera"),vg=Zo("Trident")||Zo("MSIE"),cD=Zo("Edge"),dD=cD||vg,kR=Zo("Gecko")&&!(-1!=Wy().toLowerCase().indexOf("webkit")&&!Zo("Edge"))&&!(Zo("Trident")||Zo("MSIE"))&&!Zo("Edge"),hD=-1!=Wy().toLowerCase().indexOf("webkit")&&!Zo("Edge");function zw(){var n=Gt.document;return n?n.documentMode:void 0}e:{var qy="",Zh=(n=Wy(),kR?/rv:([^\);]+)(\)|;)/.exec(n):cD?/Edge\/([\d\.]+)/.exec(n):vg?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):hD?/WebKit\/(\S+)/.exec(n):lD?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Zh&&(qy=Zh?Zh[1]:""),vg){var Ky=zw();if(null!=Ky&&Ky>parseFloat(qy)){fD=String(Ky);break e}}fD=qy}var zt=Gt.document&&vg&&(zw()||parseInt(fD,10))||void 0;function Yh(n,e){if(Qi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(kR){e:{try{zl(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:pD[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Yh.$.h.call(this)}}Tr(Yh,Qi);var pD={2:"touch",3:"pen",4:"mouse"};Yh.prototype.h=function(){Yh.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Yy="closure_listenable_"+(1e6*Math.random()|0),FR=0;function gD(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++FR,this.fa=this.ia=!1}function Qy(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function qw(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function yD(n){const e={};for(const t in n)e[t]=n[t];return e}const Kw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _D(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<Kw.length;a++)t=Kw[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Xy(n){this.src=n,this.g={},this.h=0}function vD(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=$w(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Qy(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Jy(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.fa&&a.listener==e&&a.capture==!!t&&a.la==r)return i}return-1}Xy.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=Jy(n,e,r,i);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new gD(e,this.src,a,!!r,i)).ia=t,n.push(e)),e};var e_="closure_lm_"+(1e6*Math.random()|0),Ua={};function md(n,e,t,r,i){if(r&&r.once)return wg(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)md(n,e[a],t,r,i);return null}return t=Dg(t),n&&n[Yy]?n.O(e,t,mg(r)?!!r.capture:!!r,i):Zw(n,e,t,!1,r,i)}function Zw(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=mg(i)?!!i.capture:!!i,h=Ig(n);if(h||(n[e_]=h=new Xy(n)),(t=h.add(e,t,r,l,a)).proxy)return t;if(r=function LR(){const e=wD;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)OR||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Qh(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function wg(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)wg(n,e[a],t,r,i);return null}return t=Dg(t),n&&n[Yy]?n.P(e,t,mg(r)?!!r.capture:!!r,i):Zw(n,e,t,!0,r,i)}function yd(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)yd(n,e[a],t,r,i);else r=mg(r)?!!r.capture:!!r,t=Dg(t),n&&n[Yy]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Jy(a=n.g[e],t,r,i))&&(Qy(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Ig(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Jy(e,t,r,i)),(t=-1<n?e[n]:null)&&Eg(t))}function Eg(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Yy])vD(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Qh(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Ig(e))?(vD(t,n),0==t.h&&(t.src=null,e[e_]=null)):Qy(n)}}}function Qh(n){return n in Ua?Ua[n]:Ua[n]="on"+n}function wD(n,e){if(n.fa)n=!0;else{e=new Yh(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Eg(n),n=t.call(r,e)}return n}function Ig(n){return(n=n[e_])instanceof Xy?n:null}var Cg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dg(n){return"function"==typeof n?n:(n[Cg]||(n[Cg]=function(e){return n.handleEvent(e)}),n[Cg])}function di(){Ko.call(this),this.i=new Xy(this),this.S=this,this.J=null}function hi(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Qi(e,n);else if(e instanceof Qi)e.target=e.target||n;else{var i=e;_D(e=new Qi(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=t_(l,r,!0,e)&&i}if(i=t_(l=e.g=n,r,!0,e)&&i,i=t_(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=t_(l=e.g=t[a],r,!1,e)&&i}function t_(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.fa&&l.capture==t){var h=l.listener,m=l.la||l.src;l.ia&&vD(n.i,l),i=!1!==h.call(m,r)&&i}}return i&&!r.defaultPrevented}Tr(di,Ko),di.prototype[Yy]=!0,di.prototype.removeEventListener=function(n,e,t,r){yd(this,n,e,t,r)},di.prototype.N=function(){if(di.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Qy(t[r]);delete n.g[e],n.h--}}this.J=null},di.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},di.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Yw=Gt.JSON.stringify;function ED(){var n=Qw;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var ID=new class VR{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new BR,n=>n.reset());class BR{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function jR(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function CD(n){Gt.setTimeout(()=>{throw n},0)}let Xh,bg=!1,Qw=new class UR{constructor(){this.h=this.g=null}add(e,t){const r=ID.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},Fs=()=>{const n=Gt.Promise.resolve(void 0);Xh=()=>{n.then(HR)}};var HR=()=>{for(var n;n=ED();){try{n.h.call(n.g)}catch(t){CD(t)}var e=ID;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}bg=!1};function n_(n,e){di.call(this),this.h=n||1,this.g=e||Gt,this.j=_s(this.qb,this),this.l=Date.now()}function DD(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function Tg(n,e,t){if("function"==typeof n)t&&(n=_s(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=_s(n.handleEvent,n)}return 2147483647<Number(e)?-1:Gt.setTimeout(n,e||0)}function Xw(n){n.g=Tg(()=>{n.g=null,n.i&&(n.i=!1,Xw(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Tr(n_,di),(at=n_.prototype).ga=!1,at.T=null,at.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),hi(this,"tick"),this.ga&&(DD(this),this.start()))}},at.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},at.N=function(){n_.$.N.call(this),DD(this),delete this.g};class $R extends Ko{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Xw(this)}N(){super.N(),this.g&&(Gt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sg(n){Ko.call(this),this.h=n,this.g={}}Tr(Sg,Ko);var bD=[];function Jw(n,e,t,r){Array.isArray(t)||(t&&(bD[0]=t.toString()),t=bD);for(var i=0;i<t.length;i++){var a=md(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function TD(n){qw(n.g,function(e,t){this.g.hasOwnProperty(t)&&Eg(e)},n),n.g={}}function r_(){this.g=!0}function Jh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function WR(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return Yw(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Sg.prototype.N=function(){Sg.$.N.call(this),TD(this)},Sg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},r_.prototype.Ea=function(){this.g=!1},r_.prototype.info=function(){};var _d={},Yo=null;function ef(){return Yo=Yo||new di}function SD(n){Qi.call(this,_d.Ta,n)}function tf(n){const e=ef();hi(e,new SD(e))}function AD(n,e){Qi.call(this,_d.STAT_EVENT,n),this.stat=e}function Xi(n){const e=ef();hi(e,new AD(e,n))}function tE(n,e){Qi.call(this,_d.Ua,n),this.size=e}function Wl(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Gt.setTimeout(function(){n()},e)}_d.Ta="serverreachability",Tr(SD,Qi),_d.STAT_EVENT="statevent",Tr(AD,Qi),_d.Ua="timingevent",Tr(tE,Qi);var nf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},qR={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function i_(){}function rE(){}i_.prototype.h=null;var iE,rf={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ag(){Qi.call(this,"d")}function Qo(){Qi.call(this,"c")}function s_(){}function vd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Sg(this),this.P=KR,this.V=new n_(n=dD?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new RD}function RD(){this.i=null,this.g="",this.h=!1}Tr(Ag,Qi),Tr(Qo,Qi),Tr(s_,i_),s_.prototype.g=function(){return new XMLHttpRequest},s_.prototype.i=function(){return{}},iE=new s_;var KR=45e3,sE={},oE={};function o_(n,e,t){n.L=1,n.v=c_(Fu(e)),n.s=t,n.S=!0,MD(n,null)}function MD(n,e){n.G=Date.now(),u_(n),n.A=Fu(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),UD(t.i,"t",r),n.C=0,t=n.l.J,n.h=new RD,n.g=wE(n.l,t?e:null,!n.s),0<n.O&&(n.M=new $R(_s(n.Pa,n,n.g),n.O)),Jw(n.U,n.g,"readystatechange",n.nb),e=n.I?yD(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),tf(),function eE(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",h=a.split("&"),m=0;m<h.length;m++){var v=h[m].split("=");if(1<v.length){var b=v[0];v=v[1];var S=b.split("_");l=2<=S.length&&"type"==S[1]?l+(b+"=")+v+"&":l+(b+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Rg(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function sf(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=a_(n,t),i==oE){4==e&&(n.o=4,Xi(14),r=!1),Jh(n.j,n.m,null,"[Incomplete Response]");break}if(i==sE){n.o=4,Xi(15),Jh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Jh(n.j,n.m,i,null),aE(n,i)}Rg(n)&&i!=oE&&i!=sE&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Xi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),_E(e),e.M=!0,Xi(11))):(Jh(n.j,n.m,t,"[Invalid Chunked Response]"),Ed(n),Mg(n))}function a_(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?oE:(t=Number(e.substring(t,r)),isNaN(t)?sE:(r+=1)+t>e.length?oE:(e=e.slice(r,r+t),n.C=r+t,e))}function u_(n){n.Y=Date.now()+n.P,ND(n,n.P)}function ND(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Wl(_s(n.lb,n),e)}function wd(n){n.B&&(Gt.clearTimeout(n.B),n.B=null)}function Mg(n){0==n.l.H||n.J||gf(n.l,n)}function Ed(n){wd(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,DD(n.V),TD(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function aE(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||$D(t.i,n)))if(!n.K&&$D(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;pf(t),f_(t)}yE(t),Xi(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=Wl(_s(t.ib,t),6e3));if(1>=HD(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else ja(t,11)}else if((n.K||t.g==n)&&pf(t),!_g(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.V=v[0],v=v[1],2==t.H)if("c"==v[0]){t.K=v[1],t.pa=v[2];const b=v[3];null!=b&&(t.ra=b,t.l.info("VER="+t.ra));const S=v[4];null!=S&&(t.Ga=S,t.l.info("SVER="+t.Ga));const x=v[5];null!=x&&"number"==typeof x&&0<x&&(t.L=r=1.5*x,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const H=n.g;if(H){const Z=H.g?H.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var a=r.i;a.g||-1==Z.indexOf("spdy")&&-1==Z.indexOf("quic")&&-1==Z.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(d_(a,a.h),a.h=null))}if(r.F){const se=H.g?H.g.getResponseHeader("X-HTTP-Session-Id"):null;se&&(r.Da=se,yr(r.I,r.F,se))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=mf(r,r.J?r.pa:null,r.Y),l.K){tM(r.i,l);var h=l,m=r.L;m&&h.setTimeout(m),h.B&&(wd(h),u_(h)),r.g=l}else aM(r);0<t.j.length&&mE(t)}else"stop"!=v[0]&&"close"!=v[0]||ja(t,7);else 3==t.H&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?ja(t,7):Lg(t):"noop"!=v[0]&&t.h&&t.h.Aa(v),t.A=0)}tf()}catch{}}function af(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Gy(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function ZR(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Gy(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function uE(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Gy(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(at=vd.prototype).setTimeout=function(n){this.P=n},at.nb=function(n){n=n.target;const e=this.M;e&&3==Xo(n)?e.l():this.Pa(n)},at.Pa=function(n){try{if(n==this.g)e:{const b=Xo(this.g);var e=this.g.Ia();if(this.g.da(),!(3>b)&&(3!=b||dD||this.g&&(this.h.h||this.g.ja()||fE(this.g)))){this.J||4!=b||7==e||tf(),wd(this);var t=this.g.da();this.ca=t;t:if(Rg(this)){var r=fE(this.g);n="";var i=r.length,a=4==Xo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ed(this),Mg(this);var l="";break t}this.h.i=new Gt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function GR(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.W,b,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var h,m=this.g;if((h=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_g(h)){var v=h;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,Xi(12),Ed(this),Mg(this);break e}Jh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,aE(this,t)}this.S?(sf(this,b,l),dD&&this.i&&3==b&&(Jw(this.U,this.V,"tick",this.mb),this.V.start())):(Jh(this.j,this.m,l,null),aE(this,l)),4==b&&Ed(this),this.i&&!this.J&&(4==b?gf(this.l,this):(this.i=!1,u_(this)))}else(function GD(n){const e={};n=(n.g&&2<=Xo(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(_g(n[r]))continue;var t=jR(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const a=e[i]||[];e[i]=a,a.push(t)}!function mD(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Xi(12)):(this.o=0,Xi(13)),Ed(this),Mg(this)}}}catch{}},at.mb=function(){if(this.g){var n=Xo(this.g),e=this.g.ja();this.C<e.length&&(wd(this),sf(this,n,e),this.i&&4!=n&&u_(this))}},at.cancel=function(){this.J=!0,Ed(this)},at.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function zR(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(tf(),Xi(17)),Ed(this),this.o=2,Mg(this)):ND(this,this.Y-n)};var xD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ql(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof ql){this.h=n.h,l_(this,n.j),this.s=n.s,this.g=n.g,Kl(this,n.m),this.l=n.l;var e=n.i,t=new Pg;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),OD(this,t),this.o=n.o}else n&&(e=String(n).match(xD))?(this.h=!1,l_(this,e[1]||"",!0),this.s=Ng(e[2]||""),this.g=Ng(e[3]||"",!0),Kl(this,e[4]),this.l=Ng(e[5]||"",!0),OD(this,e[6]||"",!0),this.o=Ng(e[7]||"")):(this.h=!1,this.i=new Pg(null,this.h))}function Fu(n){return new ql(n)}function l_(n,e,t){n.j=t?Ng(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Kl(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function OD(n,e,t){e instanceof Pg?(n.i=e,function JR(n,e){e&&!n.j&&(Ba(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(LD(this,r),UD(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=xg(e,FD)),n.i=new Pg(e,n.h))}function yr(n,e,t){n.i.set(e,t)}function c_(n){return yr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Ng(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function xg(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,YR),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function YR(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ql.prototype.toString=function(){var n=[],e=this.j;e&&n.push(xg(e,kD,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(xg(e,kD,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(xg(t,"/"==t.charAt(0)?XR:QR,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",xg(t,lE)),n.join("")};var kD=/[#\/\?@]/g,QR=/[#\?:]/g,XR=/[#\?]/g,FD=/[#\?@]/g,lE=/#/g;function Pg(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ba(n){n.g||(n.g=new Map,n.h=0,n.i&&function PD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function LD(n,e){Ba(n),e=uf(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function VD(n,e){return Ba(n),e=uf(n,e),n.g.has(e)}function UD(n,e,t){LD(n,e),0<t.length&&(n.i=null,n.g.set(uf(n,e),Gw(t)),n.h+=t.length)}function uf(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function BD(n){this.l=n||jD,n=Gt.PerformanceNavigationTiming?0<(n=Gt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Gt.g&&Gt.g.Ka&&Gt.g.Ka()&&Gt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(at=Pg.prototype).add=function(n,e){Ba(this),this.i=null,n=uf(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},at.forEach=function(n,e){Ba(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},at.ta=function(){Ba(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},at.Z=function(n){Ba(this);let e=[];if("string"==typeof n)VD(this,n)&&(e=e.concat(this.g.get(uf(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},at.set=function(n,e){return Ba(this),this.i=null,VD(this,n=uf(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},at.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},at.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var jD=10;function cE(n){return!!n.h||!!n.g&&n.g.size>=n.j}function HD(n){return n.h?1:n.g?n.g.size:0}function $D(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function d_(n,e){n.g?n.g.add(e):n.h=e}function tM(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Og(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Gw(n.i)}BD.prototype.cancel=function(){if(this.i=Og(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var nM=class{stringify(n){return Gt.JSON.stringify(n,void 0)}parse(n){return Gt.JSON.parse(n,void 0)}};function rM(){this.g=new nM}function dE(n,e,t){const r=t||"";try{af(n,function(i,a){let l=i;mg(i)&&(l=Yw(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Xs(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Lu(n){this.l=n.fc||null,this.j=n.ob||!1}function fi(n,e){di.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=Vu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Tr(Lu,i_),Lu.prototype.g=function(){return new fi(this.l,this.j)},Lu.prototype.i=function(n){return function(){return n}}({}),Tr(fi,di);var Vu=0;function kg(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Ji(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Id(n)}function Id(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(at=fi.prototype).open=function(n,e){if(this.readyState!=Vu)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Id(this)},at.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Gt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},at.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ji(this)),this.readyState=Vu},at.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Id(this)),this.g&&(this.readyState=3,Id(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Gt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;kg(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},at.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ji(this):Id(this),3==this.readyState&&kg(this)}},at.Za=function(n){this.g&&(this.response=this.responseText=n,Ji(this))},at.Ya=function(n){this.g&&(this.response=n,Ji(this))},at.ka=function(){this.g&&Ji(this)},at.setRequestHeader=function(n,e){this.v.append(n,e)},at.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},at.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(fi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var lf=Gt.JSON.parse;function zn(n){di.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Cd,this.L=this.M=!1}Tr(zn,di);var Cd="",cf=/^https?$/i,df=["POST","PUT"];function Dd(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,bd(n),Fg(n)}function bd(n){n.F||(n.F=!0,hi(n,"complete"),hi(n,"error"))}function Td(n){if(n.h&&typeof $y<"u"&&(!n.C[1]||4!=Xo(n)||2!=n.da()))if(n.v&&4==Xo(n))Tg(n.La,0,n);else if(hi(n,"readystatechange"),4==Xo(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var i=String(n.I).match(xD)[1]||null;!i&&Gt.self&&Gt.self.location&&(i=Gt.self.location.protocol.slice(0,-1)),r=!cf.test(i?i.toLowerCase():"")}t=r}if(t)hi(n,"complete"),hi(n,"success");else{n.m=6;try{var a=2<Xo(n)?n.g.statusText:""}catch{a=""}n.j=a+" ["+n.da()+"]",bd(n)}}finally{Fg(n)}}}function Fg(n,e){if(n.g){hE(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||hi(n,"ready");try{t.onreadystatechange=r}catch{}}}function hE(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Gt.clearTimeout(n.A),n.A=null)}function Xo(n){return n.g?n.g.readyState:0}function fE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case Cd:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function pE(n){let e="";return qw(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function h_(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=pE(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):yr(n,e,t))}function ff(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function gE(n){this.Ga=0,this.j=[],this.l=new r_,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ff("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ff("baseRetryDelayMs",5e3,n),this.hb=ff("retryDelaySeedMs",1e4,n),this.eb=ff("forwardChannelMaxRetries",2,n),this.xa=ff("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new BD(n&&n.concurrentRequestLimit),this.Ja=new rM,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Lg(n){if(sM(n),3==n.H){var e=n.W++,t=Fu(n.I);if(yr(t,"SID",n.K),yr(t,"RID",e),yr(t,"TYPE","terminate"),p_(n,t),(e=new vd(n,n.l,e)).L=2,e.v=c_(Fu(t)),t=!1,Gt.navigator&&Gt.navigator.sendBeacon)try{t=Gt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Gt.Image&&((new Image).src=e.v,t=!0),t||(e.g=wE(e.l,null),e.g.ha(e.v)),e.G=Date.now(),u_(e)}vE(n)}function f_(n){n.g&&(_E(n),n.g.cancel(),n.g=null)}function sM(n){f_(n),n.u&&(Gt.clearTimeout(n.u),n.u=null),pf(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Gt.clearTimeout(n.m),n.m=null)}function mE(n){if(!cE(n.i)&&!n.m){n.m=!0;var e=n.Na;Xh||Fs(),bg||(Xh(),bg=!0),Qw.add(e,n),n.C=0}}function zD(n,e){var t;t=e?e.m:n.W++;const r=Fu(n.I);yr(r,"SID",n.K),yr(r,"RID",t),yr(r,"AID",n.V),p_(n,r),n.o&&n.s&&h_(r,n.o,n.s),t=new vd(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=WD(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),d_(n.i,t),o_(t,r,e)}function p_(n,e){n.na&&qw(n.na,function(t,r){yr(e,r,t)}),n.h&&af({},function(t,r){yr(e,r,t)})}function WD(n,e,t){t=Math.min(n.j.length,t);var r=n.h?_s(n.h.Va,n.h,n):null;e:{var i=n.j;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].g,l.push("ofs="+a)):a=0:l.push("ofs="+a);let h=!0;for(let m=0;m<t;m++){let v=i[m].g;const b=i[m].map;if(v-=a,0>v)a=Math.max(0,i[m].g-100),h=!1;else try{dE(b,l,"req"+v+"_")}catch{r&&r(b)}}if(h){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function aM(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Xh||Fs(),bg||(Xh(),bg=!0),Qw.add(e,n),n.A=0}}function yE(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Wl(_s(n.Ma,n),g_(n,n.A)),n.A++,0))}function _E(n){null!=n.B&&(Gt.clearTimeout(n.B),n.B=null)}function qD(n){n.g=new vd(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Fu(n.wa);yr(e,"RID","rpc"),yr(e,"SID",n.K),yr(e,"AID",n.V),yr(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&yr(e,"TO",n.qa),yr(e,"TYPE","xmlhttp"),p_(n,e),n.o&&n.s&&h_(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=c_(Fu(e)),t.s=null,t.S=!0,MD(t,n)}function pf(n){null!=n.v&&(Gt.clearTimeout(n.v),n.v=null)}function gf(n,e){var t=null;if(n.g==e){pf(n),_E(n),n.g=null;var r=2}else{if(!$D(n.i,e))return;t=e.F,tM(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;hi(r=ef(),new tE(r,t)),mE(n)}else aM(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function oM(n,e){return!(HD(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Wl(_s(n.Na,n,e),g_(n,n.C)),n.C++,0)))}(n,e)||2==r&&yE(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:ja(n,5);break;case 4:ja(n,10);break;case 3:ja(n,6);break;default:ja(n,2)}}function g_(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function ja(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=_s(n.pb,n);t||(t=new ql("//www.google.com/images/cleardot.gif"),Gt.location&&"http"==Gt.location.protocol||l_(t,"https"),c_(t)),function iM(n,e){const t=new r_;if(Gt.Image){const r=new Image;r.onload=Kh(Xs,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Kh(Xs,t,r,"TestLoadImage: error",!1,e),r.onabort=Kh(Xs,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Kh(Xs,t,r,"TestLoadImage: timeout",!1,e),Gt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Xi(2);n.H=0,n.h&&n.h.za(e),vE(n),sM(n)}function vE(n){if(n.H=0,n.ma=[],n.h){const e=Og(n.i);(0!=e.length||0!=n.j.length)&&(uD(n.ma,e),uD(n.ma,n.j),n.i.i.length=0,Gw(n.j),n.j.length=0),n.h.ya()}}function mf(n,e,t){var r=t instanceof ql?Fu(t):new ql(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Kl(r,r.m);else{var i=Gt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new ql(null);r&&l_(a,r),e&&(a.g=e),i&&Kl(a,i),t&&(a.l=t),r=a}return e=n.Da,(t=n.F)&&e&&yr(r,t,e),yr(r,"VER",n.ra),p_(n,r),r}function wE(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new zn(t&&n.Ha&&!n.va?new Lu({ob:!0}):n.va)).Oa(n.J),e}function KD(){}function Zl(){if(vg&&!(10<=Number(zt)))throw Error("Environmental error: no available transport.")}function Js(n,e){di.call(this),this.g=new gE(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!_g(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!_g(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new yf(this)}function ZD(n){Ag.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function YD(){Qo.call(this),this.status=1}function yf(n){this.g=n}function Ls(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function _f(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var a=n.g[3],l=(e=n.g[0])+(a^(t=n.g[1])&((i=n.g[2])^a))+r[0]+3614090360&4294967295;l=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=t+(l<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(i^a&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(i^(t|~a))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~a))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~a))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((a=(e=t+((l=e+(i^(t|~a))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((i=a+((l=i+(e^(a|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+a&4294967295}function jn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var a=0|n[i];r&&a==e||(t[i]=a,r=!1)}this.g=t}(at=zn.prototype).Oa=function(n){this.M=n},at.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():iE.g(),this.C=function nE(n){return n.h||(n.h=n.i())}(this.u?this.u:iE),this.g.onreadystatechange=_s(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(a){return void Dd(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Gt.FormData&&n instanceof Gt.FormData,!(0<=$w(df,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{hE(this),0<this.B&&((this.L=function hf(n){return vg&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=_s(this.ua,this)):this.A=Tg(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){Dd(this,a)}},at.ua=function(){typeof $y<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,hi(this,"timeout"),this.abort(8))},at.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,hi(this,"complete"),hi(this,"abort"),Fg(this))},at.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Fg(this,!0)),zn.$.N.call(this)},at.La=function(){this.s||(this.G||this.v||this.l?Td(this):this.kb())},at.kb=function(){Td(this)},at.isActive=function(){return!!this.g},at.da=function(){try{return 2<Xo(this)?this.g.status:-1}catch{return-1}},at.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},at.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),lf(e)}},at.Ia=function(){return this.m},at.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(at=gE.prototype).ra=8,at.H=1,at.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new vd(this,this.l,n);let a=this.s;if(this.U&&(a?(a=yD(a),_D(a,this.U)):a=this.U),null!==this.o||this.O||(i.I=a,a=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=WD(this,i,e),yr(t=Fu(this.I),"RID",n),yr(t,"CVER",22),this.F&&yr(t,"X-HTTP-Session-Id",this.F),p_(this,t),a&&(this.O?e="headers="+encodeURIComponent(String(pE(a)))+"&"+e:this.o&&h_(t,this.o,a)),d_(this.i,i),this.bb&&yr(t,"TYPE","init"),this.P?(yr(t,"$req",e),yr(t,"SID","null"),i.aa=!0,o_(i,t,null)):o_(i,t,e),this.H=2}}else 3==this.H&&(n?zD(this,n):0==this.j.length||cE(this.i)||zD(this))},at.Ma=function(){if(this.u=null,qD(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Wl(_s(this.jb,this),n)}},at.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Xi(10),f_(this),qD(this))},at.ib=function(){null!=this.v&&(this.v=null,f_(this),yE(this),Xi(19))},at.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Xi(2)):(this.l.info("Failed to ping google.com"),Xi(1))},at.isActive=function(){return!!this.h&&this.h.isActive(this)},(at=KD.prototype).Ba=function(){},at.Aa=function(){},at.za=function(){},at.ya=function(){},at.isActive=function(){return!0},at.Va=function(){},Zl.prototype.g=function(n,e){return new Js(n,e)},Tr(Js,di),Js.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Xi(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=mf(n,null,n.Y),mE(n)},Js.prototype.close=function(){Lg(this.g)},Js.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Yw(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&mE(e)},Js.prototype.N=function(){this.g.h=null,delete this.j,Lg(this.g),delete this.g,Js.$.N.call(this)},Tr(ZD,Ag),Tr(YD,Qo),Tr(yf,KD),yf.prototype.Ba=function(){hi(this.g,"a")},yf.prototype.Aa=function(n){hi(this.g,new ZD(n))},yf.prototype.za=function(n){hi(this.g,new YD)},yf.prototype.ya=function(){hi(this.g,"b")},Tr(Ls,function EE(){this.blockSize=-1}),Ls.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ls.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,a=0;a<e;){if(0==i)for(;a<=t;)_f(this,n,a),a+=this.blockSize;if("string"==typeof n){for(;a<e;)if(r[i++]=n.charCodeAt(a++),i==this.blockSize){_f(this,r),i=0;break}}else for(;a<e;)if(r[i++]=n[a++],i==this.blockSize){_f(this,r),i=0;break}}this.h=i,this.i+=e},Ls.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var uM={};function IE(n){return-128<=n&&128>n?function ku(n,e){var t=uM;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new jn([0|e],0>e?-1:0)}):new jn([0|n],0>n?-1:0)}function To(n){if(isNaN(n)||!isFinite(n))return vf;if(0>n)return Hi(To(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=m_;return new jn(e,0)}var m_=4294967296,vf=IE(0),CE=IE(1),DE=IE(16777216);function Ha(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function eo(n){return-1==n.h}function Hi(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new jn(t,~n.h).add(CE)}function y_(n,e){return n.add(Hi(e))}function __(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function wf(n,e){this.g=n,this.h=e}function Ef(n,e){if(Ha(e))throw Error("division by zero");if(Ha(n))return new wf(vf,vf);if(eo(n))return e=Ef(Hi(n),e),new wf(Hi(e.g),Hi(e.h));if(eo(e))return e=Ef(n,Hi(e)),new wf(Hi(e.g),e.h);if(30<n.g.length){if(eo(n)||eo(e))throw Error("slowDivide_ only works with positive integers.");for(var t=CE,r=e;0>=r.X(n);)t=v_(t),r=v_(r);var i=If(t,1),a=If(r,1);for(r=If(r,2),t=If(t,2);!Ha(r);){var l=a.add(r);0>=l.X(n)&&(i=i.add(t),a=l),r=If(r,1),t=If(t,1)}return e=y_(n,i.R(e)),new wf(i,e)}for(i=vf;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(a=To(t)).R(e);eo(l)||0<l.X(n);)l=(a=To(t-=r)).R(e);Ha(a)&&(a=CE),i=i.add(a),n=y_(n,l)}return new wf(i,n)}function v_(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new jn(t,n.h)}function If(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],a=0;a<r;a++)i[a]=0<e?n.D(a+t)>>>e|n.D(a+t+1)<<32-e:n.D(a+t);return new jn(i,n.h)}(at=jn.prototype).ea=function(){if(eo(this))return-Hi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:m_+r)*e,e*=m_}return n},at.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Ha(this))return"0";if(eo(this))return"-"+Hi(this).toString(n);for(var e=To(Math.pow(n,6)),t=this,r="";;){var i=Ef(t,e).g,a=((0<(t=y_(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Ha(t=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},at.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},at.X=function(n){return eo(n=y_(this,n))?-1:Ha(n)?0:1},at.abs=function(){return eo(this)?Hi(this):this},at.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var a=r+(65535&this.D(i))+(65535&n.D(i)),l=(a>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=l>>>16,t[i]=(l&=65535)<<16|(a&=65535)}return new jn(t,-2147483648&t[t.length-1]?-1:0)},at.R=function(n){if(Ha(this)||Ha(n))return vf;if(eo(this))return eo(n)?Hi(this).R(Hi(n)):Hi(Hi(this).R(n));if(eo(n))return Hi(this.R(Hi(n)));if(0>this.X(DE)&&0>n.X(DE))return To(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var a=this.D(r)>>>16,l=65535&this.D(r),h=n.D(i)>>>16,m=65535&n.D(i);t[2*r+2*i]+=l*m,__(t,2*r+2*i),t[2*r+2*i+1]+=a*m,__(t,2*r+2*i+1),t[2*r+2*i+1]+=l*h,__(t,2*r+2*i+1),t[2*r+2*i+2]+=a*h,__(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new jn(t,0)},at.gb=function(n){return Ef(this,n).h},at.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new jn(t,this.h&n.h)},at.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new jn(t,this.h|n.h)},at.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new jn(t,this.h^n.h)},Zl.prototype.createWebChannel=Zl.prototype.g,Js.prototype.send=Js.prototype.u,Js.prototype.open=Js.prototype.m,Js.prototype.close=Js.prototype.close,nf.NO_ERROR=0,nf.TIMEOUT=8,nf.HTTP_ERROR=6,qR.COMPLETE="complete",rE.EventType=rf,rf.OPEN="a",rf.CLOSE="b",rf.ERROR="c",rf.MESSAGE="d",di.prototype.listen=di.prototype.O,zn.prototype.listenOnce=zn.prototype.P,zn.prototype.getLastError=zn.prototype.Sa,zn.prototype.getLastErrorCode=zn.prototype.Ia,zn.prototype.getStatus=zn.prototype.da,zn.prototype.getResponseJson=zn.prototype.Wa,zn.prototype.getResponseText=zn.prototype.ja,zn.prototype.send=zn.prototype.ha,zn.prototype.setWithCredentials=zn.prototype.Oa,Ls.prototype.digest=Ls.prototype.l,Ls.prototype.reset=Ls.prototype.reset,Ls.prototype.update=Ls.prototype.j,jn.prototype.add=jn.prototype.add,jn.prototype.multiply=jn.prototype.R,jn.prototype.modulo=jn.prototype.gb,jn.prototype.compare=jn.prototype.X,jn.prototype.toNumber=jn.prototype.ea,jn.prototype.toString=jn.prototype.toString,jn.prototype.getBits=jn.prototype.D,jn.fromNumber=To,jn.fromString=function QD(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Hi(QD(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=To(Math.pow(e,8)),r=vf,i=0;i<n.length;i+=8){var a=Math.min(8,n.length-i),l=parseInt(n.substring(i,i+a),e);8>a?(a=To(Math.pow(e,a)),r=r.R(a).add(To(l))):r=(r=r.R(t)).add(To(l))}return r};var w_=ys.createWebChannelTransport=function(){return new Zl},E_=ys.getStatEventTarget=function(){return ef()},Vg=ys.ErrorCode=nf,XD=ys.EventType=qR,lM=ys.Event=_d,JD=ys.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},cM=ys.FetchXmlHttpFactory=Lu,Cf=ys.WebChannel=rE,bE=ys.XhrIo=zn,eb=ys.Md5=Ls,Sd=ys.Integer=jn;const tb="@firebase/firestore";class bi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bi.UNAUTHENTICATED=new bi(null),bi.GOOGLE_CREDENTIALS=new bi("google-credentials-uid"),bi.FIRST_PARTY=new bi("first-party-uid"),bi.MOCK_USER=new bi("mock-user");let Ad="9.22.1";const $a=new Ci.Yd("@firebase/firestore");function I_(){return $a.logLevel}function Ue(n,...e){if($a.logLevel<=Ci.in.DEBUG){const t=e.map(C_);$a.debug(`Firestore (${Ad}): ${n}`,...t)}}function Xr(n,...e){if($a.logLevel<=Ci.in.ERROR){const t=e.map(C_);$a.error(`Firestore (${Ad}): ${n}`,...t)}}function to(n,...e){if($a.logLevel<=Ci.in.WARN){const t=e.map(C_);$a.warn(`Firestore (${Ad}): ${n}`,...t)}}function C_(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ct(n="Unexpected state"){const e=`FIRESTORE (${Ad}) INTERNAL ASSERTION FAILED: `+n;throw Xr(e),new Error(e)}function bt(n,e){n||ct()}function it(n,e){return n}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends L.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Jr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class SE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(bi.UNAUTHENTICATED))}shutdown(){}}class rb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ib{constructor(e){this.t=e,this.currentUser=bi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let l=new Jr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Jr,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const v=l;e.enqueueRetryable((0,ye.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},m=v=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(v=>m(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Jr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(bt("string"==typeof r.accessToken),new SE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return bt(null===e||"string"==typeof e),new bi(e)}}class sb{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=bi.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class ob{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new sb(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(bi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ab{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=a=>{null!=a.error&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.T;return this.T=a.token,Ue("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.I.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.I.getImmediate({optional:!0});a?i(a):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(bt("string"==typeof t.token),this.T=t.token,new AE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Yl(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class ub{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Yl(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[a]%62))}return r}}function $t(n,e){return n<e?-1:n>e?1:0}function Ql(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Xl(n){return n+"\0"}class Jn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Se(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Se(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Se(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Jn.fromMillis(Date.now())}static fromDate(e){return Jn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Jn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$t(this.nanoseconds,e.nanoseconds):$t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class St{constructor(e){this.timestamp=e}static fromTimestamp(e){return new St(e)}static min(){return new St(new Jn(0,0))}static max(){return new St(new Jn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Rd{constructor(e,t,r){void 0===t?t=0:t>e.length&&ct(),void 0===r?r=e.length-t:r>e.length-t&&ct(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Rd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Rd?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class In extends Rd{construct(e,t,r){return new In(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Se(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new In(t)}static emptyPath(){return new In([])}}const OO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vr extends Rd{construct(e,t,r){return new Vr(e,t,r)}static isValidIdentifier(e){return OO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Vr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Se(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Se(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Se(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new Se(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vr(t)}static emptyPath(){return new Vr([])}}class et{constructor(e){this.path=e}static fromPath(e){return new et(In.fromString(e))}static fromName(e){return new et(In.fromString(e).popFirst(5))}static empty(){return new et(In.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===In.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return In.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new et(new In(e.slice()))}}class Ug{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function ME(n){return n.fields.find(e=>2===e.kind)}function lr(n){return n.fields.filter(e=>2!==e.kind)}Ug.UNKNOWN_ID=-1;class D_{constructor(e,t){this.fieldPath=e,this.kind=t}}class Df{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Df(0,Vs.min())}}function cb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=St.fromTimestamp(1e9===r?new Jn(t+1,0):new Jn(t,r));return new Vs(i,et.empty(),e)}function NE(n){return new Vs(n.readTime,n.key,-1)}class Vs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Vs(St.min(),et.empty(),-1)}static max(){return new Vs(St.max(),et.empty(),-1)}}function Jl(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=et.comparator(n.documentKey,e.documentKey),0!==t?t:$t(n.largestBatchId,e.largestBatchId))}const db="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Uu(n){return xE.apply(this,arguments)}function xE(){return xE=(0,ye.Z)(function*(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==db)throw n;Ue("LocalStore","Unexpectedly lost primary lease")}),xE.apply(this,arguments)}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let i=0,a=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++a,l&&a===i&&t()},m=>r(m))}),l=!0,a===i&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(i=>i?le.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new le((r,i)=>{const a=e.length,l=new Array(a);let h=0;for(let m=0;m<a;m++){const v=m;t(e[v]).next(b=>{l[v]=b,++h,h===a&&r(l)},b=>i(b))}})}static doWhile(e,t){return new le((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class PE{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Jr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Us(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=no(r.target.error);this.v.reject(new Us(e,i))}}static open(e,t,r,i){try{return new PE(t,e.transaction(i,r))}catch(a){throw new Us(t,a)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ue("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new fM(t)}}class So{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===So.S((0,L.z$)())&&Xr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ue("SimpleDb","Removing database:",e),es(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,L.hl)())return!1;if(So.C())return!0;const e=(0,L.z$)(),t=So.S(e),r=0<t&&t<10,i=So.N(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Ue("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new Us(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new Se(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Se(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Us(e,h))},a.onupgradeneeded=l=>{Ue("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Ue("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,ye.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.$(e);const m=PE.open(a.db,e,l?"readonly":"readwrite",r),v=i(m).next(b=>(m.P(),b)).catch(b=>(m.abort(b),le.reject(b))).toPromise();return v.catch(()=>{}),yield m.R,v}catch(m){const v=m,b="FirebaseError"!==v.name&&h<3;if(Ue("SimpleDb","Transaction failed with error:",v.message,"Retrying:",b),a.close(),!b)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class OE{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return es(this.L.delete())}}class Us extends Se{constructor(e,t){super(he.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ec(n){return"IndexedDbTransactionError"===n.name}class fM{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ue("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ue("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),es(r)}add(e){return Ue("SimpleDb","ADD",this.store.name,e,e),es(this.store.add(e))}get(e){return es(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ue("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ue("SimpleDb","DELETE",this.store.name,e),es(this.store.delete(e))}count(){return Ue("SimpleDb","COUNT",this.store.name),es(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.W(i,(l,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new le((a,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new le((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}J(e,t){Ue("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(a,l,h)=>h.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new le((r,i)=>{t.onerror=a=>{const l=no(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}W(e,t){const r=[];return new le((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const m=new OE(h),v=t(h.primaryKey,h.value,m);if(v instanceof le){const b=v.catch(S=>(m.done(),le.reject(S)));r.push(b)}m.isDone?i():null===m.K?h.continue():h.continue(m.K)}}).next(()=>le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function es(n){return new le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=no(r.target.error);t(i)}})}let Ao=!1;function no(n){const e=So.S((0,L.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ao||(Ao=!0,setTimeout(()=>{throw r},0)),r}}return n}class fb{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Ue("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ye.Z)(function*(){t.task=null;try{Ue("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){ec(r)?Ue("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Uu(r)}yield t.et(6e4)}))}}class pb{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ye.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,a=!0;return le.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Ue("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,i).next(h=>{i-=h,r.add(l)});a=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(i,a)).next(h=>(Ue("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=NE(a);Jl(l,r)>0&&(r=l)}),new Vs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ro=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Bg(n){return null==n}function jg(n){return 0===n&&1/n==-1/0}function gb(n){return"number"==typeof n&&Number.isInteger(n)&&!jg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Ti(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=mb(e)),e=Hg(n.get(t),e);return mb(e)}function Hg(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function mb(n){return n+"\x01\x01"}function Jo(n){const e=n.length;if(bt(e>=2),2===e)return bt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),In.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&ct(),n.charAt(l+1)){case"\x01":const h=n.substring(a,l);let m;0===i.length?m=h:(i+=h,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:ct()}a=l+2}return new In(r)}const yb=["userId","batchId"];function b_(n,e){return[n,Ti(e)]}function kE(n,e,t){return[n,Ti(e),t]}const _b={},T_=["prefixPath","collectionGroup","readTime","documentId"],pM=["prefixPath","collectionGroup","documentId"],vb=["collectionGroup","readTime","prefixPath","documentId"],wb=["canonicalId","targetId"],Eb=["targetId","path"],gM=["path","targetId"],mM=["collectionId","parent"],FE=["indexId","uid"],LE=["uid","sequenceNumber"],Ib=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Cb=["indexId","uid","orderedDocumentKey"],Db=["userId","collectionPath","documentId"],bb=["userId","collectionPath","largestBatchId"],Tb=["userId","collectionGroup","largestBatchId"],VE=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Sb=[...VE,"documentOverlays"],UE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ab=UE,yM=[...Ab,"indexConfiguration","indexState","indexEntries"];class BE extends hb{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Si(n,e){const t=it(n);return So.M(t.ht,e)}function Rb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function tc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Mb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class er{constructor(e,t){this.comparator=e,this.root=t||$i.EMPTY}insert(e,t){return new er(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$i.BLACK,null,null))}remove(e){return new er(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$i.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new S_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new S_(this.root,e,this.comparator,!1)}getReverseIterator(){return new S_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new S_(this.root,e,this.comparator,!0)}}class S_{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $i{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??$i.RED,this.left=i??$i.EMPTY,this.right=a??$i.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new $i(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return $i.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return $i.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ct();const e=this.left.check();if(e!==this.right.check())throw ct();return e+(this.isRed()?0:1)}}$i.EMPTY=null,$i.RED=!0,$i.BLACK=!1,$i.EMPTY=new class{constructor(){this.size=0}get key(){throw ct()}get value(){throw ct()}get color(){throw ct()}get left(){throw ct()}get right(){throw ct()}copy(n,e,t,r,i){return this}insert(n,e,t){return new $i(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class cr{constructor(e){this.comparator=e,this.data=new er(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Nb(this.data.getIterator())}getIteratorFrom(e){return new Nb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof cr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new cr(this.comparator);return t.data=e,t}}class Nb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function bf(n){return n.hasNext()?n.getNext():void 0}class Bs{constructor(e){this.fields=e,e.sort(Vr.comparator)}static empty(){return new Bs([])}unionWith(e){let t=new cr(Vr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Bs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ql(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class xb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class pi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new xb("Invalid base64 string: "+i):i}}(e);return new pi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new pi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pi.EMPTY_BYTE_STRING=new pi("");const vM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bu(n){if(bt(!!n),"string"==typeof n){let e=0;const t=vM.exec(n);if(bt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Sr(n.seconds),nanos:Sr(n.nanos)}}function Sr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ga(n){return"string"==typeof n?pi.fromBase64String(n):pi.fromUint8Array(n)}function $g(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Gg(n){const e=n.mapValue.fields.__previous_value__;return $g(e)?Gg(e):e}function Tf(n){const e=Bu(n.mapValue.fields.__local_write_time__.timestampValue);return new Jn(e.seconds,e.nanos)}class Pb{constructor(e,t,r,i,a,l,h,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=v}}class ju{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ju("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ju&&e.projectId===this.projectId&&e.database===this.database}}const Hu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zg={nullValue:"NULL_VALUE"};function $u(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?$g(n)?4:Nd(n)?9007199254740991:10:ct()}function ts(n,e){if(n===e)return!0;const t=$u(n);if(t!==$u(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Tf(n).isEqual(Tf(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Bu(r.timestampValue),l=Bu(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Ga(n.bytesValue).isEqual(Ga(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Sr(r.geoPointValue.latitude)===Sr(i.geoPointValue.latitude)&&Sr(r.geoPointValue.longitude)===Sr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Sr(r.integerValue)===Sr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Sr(r.doubleValue),l=Sr(i.doubleValue);return a===l?jg(a)===jg(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Ql(n.arrayValue.values||[],e.arrayValue.values||[],ts);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Rb(a)!==Rb(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===l[h]||!ts(a[h],l[h])))return!1;return!0}(n,e);default:return ct()}var i}function Wg(n,e){return void 0!==(n.values||[]).find(t=>ts(t,e))}function nc(n,e){if(n===e)return 0;const t=$u(n),r=$u(e);if(t!==r)return $t(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return $t(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Sr(i.integerValue||i.doubleValue),h=Sr(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return Md(n.timestampValue,e.timestampValue);case 4:return Md(Tf(n),Tf(e));case 5:return $t(n.stringValue,e.stringValue);case 6:return function(i,a){const l=Ga(i),h=Ga(a);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),h=a.split("/");for(let m=0;m<l.length&&m<h.length;m++){const v=$t(l[m],h[m]);if(0!==v)return v}return $t(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=$t(Sr(i.latitude),Sr(a.latitude));return 0!==l?l:$t(Sr(i.longitude),Sr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],h=a.values||[];for(let m=0;m<l.length&&m<h.length;++m){const v=nc(l[m],h[m]);if(v)return v}return $t(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Hu.mapValue&&a===Hu.mapValue)return 0;if(i===Hu.mapValue)return 1;if(a===Hu.mapValue)return-1;const l=i.fields||{},h=Object.keys(l),m=a.fields||{},v=Object.keys(m);h.sort(),v.sort();for(let b=0;b<h.length&&b<v.length;++b){const S=$t(h[b],v[b]);if(0!==S)return S;const x=nc(l[h[b]],m[v[b]]);if(0!==x)return x}return $t(h.length,v.length)}(n.mapValue,e.mapValue);default:throw ct()}}function Md(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return $t(n,e);const t=Bu(n),r=Bu(e),i=$t(t.seconds,r.seconds);return 0!==i?i:$t(t.nanos,r.nanos)}function qg(n){return Kg(n)}function Kg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Bu(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ga(n.bytesValue).toBase64():"referenceValue"in n?et.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=Kg(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const h of i)l?l=!1:a+=",",a+=`${h}:${Kg(r.fields[h])}`;return a+"}"}(n.mapValue):ct();var e}function rc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function A_(n){return!!n&&"integerValue"in n}function R_(n){return!!n&&"arrayValue"in n}function Nt(n){return!!n&&"nullValue"in n}function Ob(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function M_(n){return!!n&&"mapValue"in n}function Zg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return tc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Zg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Nd(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function wM(n){return"nullValue"in n?zg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?rc(ju.empty(),et.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ct()}function N_(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?rc(ju.empty(),et.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Hu:ct()}function Yg(n,e){const t=nc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Ar(n,e){const t=nc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ns{constructor(e){this.value=e}static empty(){return new ns({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!M_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zg(t)}setAll(e){let t=Vr.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=Zg(l):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());M_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ts(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];M_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){tc(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new ns(Zg(this.value))}}function HE(n){const e=[];return tc(n.fields,(t,r)=>{const i=new Vr([t]);if(M_(r)){const a=HE(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Bs(e)}class tr{constructor(e,t,r,i,a,l,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=h}static newInvalidDocument(e){return new tr(e,0,St.min(),St.min(),St.min(),ns.empty(),0)}static newFoundDocument(e,t,r,i){return new tr(e,1,t,St.min(),r,i,0)}static newNoDocument(e,t){return new tr(e,2,t,St.min(),St.min(),ns.empty(),0)}static newUnknownDocument(e,t){return new tr(e,3,t,St.min(),St.min(),ns.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(St.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ns.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ns.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=St.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof tr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ic{constructor(e,t){this.position=e,this.inclusive=t}}function $E(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?et.comparator(et.fromName(l.referenceValue),t.key):nc(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function GE(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ts(n.position[t],e.position[t]))return!1;return!0}class xd{constructor(e,t="asc"){this.field=e,this.dir=t}}function kb(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Fb{}class hn extends Fb{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new EM(e,t,r):"array-contains"===t?new IM(e,r):"in"===t?new Ub(e,r):"not-in"===t?new Bb(e,r):"array-contains-any"===t?new jb(e,r):new hn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Qg(e,r):new Xg(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(nc(t,this.value)):null!==t&&$u(this.value)===$u(t)&&this.matchesComparison(nc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ct()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Nn extends Fb{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Nn(e,t)}matches(e){return za(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function za(n){return"and"===n.op}function zE(n){return"or"===n.op}function WE(n){return Lb(n)&&za(n)}function Lb(n){for(const e of n.filters)if(e instanceof Nn)return!1;return!0}function Sf(n){if(n instanceof hn)return n.field.canonicalString()+n.op.toString()+qg(n.value);if(WE(n))return n.filters.map(e=>Sf(e)).join(",");{const e=n.filters.map(t=>Sf(t)).join(",");return`${n.op}(${e})`}}function qE(n,e){return n instanceof hn?(t=n,(r=e)instanceof hn&&t.op===r.op&&t.field.isEqual(r.field)&&ts(t.value,r.value)):n instanceof Nn?function(t,r){return r instanceof Nn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,l)=>i&&qE(a,r.filters[l]),!0)}(n,e):void ct();var t,r}function KE(n,e){const t=n.filters.concat(e);return Nn.create(t,n.op)}function ZE(n){return n instanceof hn?`${(e=n).field.canonicalString()} ${e.op} ${qg(e.value)}`:n instanceof Nn?function(e){return e.op.toString()+" {"+e.getFilters().map(ZE).join(" ,")+"}"}(n):"Filter";var e}class EM extends hn{constructor(e,t,r){super(e,t,r),this.key=et.fromName(r.referenceValue)}matches(e){const t=et.comparator(e.key,this.key);return this.matchesComparison(t)}}class Qg extends hn{constructor(e,t){super(e,"in",t),this.keys=Vb(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Xg extends hn{constructor(e,t){super(e,"not-in",t),this.keys=Vb(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Vb(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>et.fromName(r.referenceValue))}class IM extends hn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return R_(t)&&Wg(t.arrayValue,this.value)}}class Ub extends hn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Wg(this.value.arrayValue,t)}}class Bb extends hn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Wg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Wg(this.value.arrayValue,t)}}class jb extends hn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!R_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Wg(this.value.arrayValue,r))}}class Hb{constructor(e,t=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.dt=null}}function YE(n,e=null,t=[],r=[],i=null,a=null,l=null){return new Hb(n,e,t,r,i,a,l)}function sc(n){const e=it(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Sf(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Bg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>qg(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>qg(r)).join(",")),e.dt=t}return e.dt}function Jg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!kb(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!qE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!GE(n.startAt,e.startAt)&&GE(n.endAt,e.endAt)}function x_(n){return et.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function QE(n,e){return n.filters.filter(t=>t instanceof hn&&t.field.isEqual(e))}function CM(n,e,t){let r=zg,i=!0;for(const a of QE(n,e)){let l=zg,h=!0;switch(a.op){case"<":case"<=":l=wM(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,h=!1;break;case"!=":case"not-in":l=zg}Yg({value:r,inclusive:i},{value:l,inclusive:h})<0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];Yg({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function DM(n,e,t){let r=Hu,i=!0;for(const a of QE(n,e)){let l=Hu,h=!0;switch(a.op){case">=":case">":l=N_(a.value),h=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,h=!1;break;case"!=":case"not-in":l=Hu}Ar({value:r,inclusive:i},{value:l,inclusive:h})>0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];Ar({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class oc{constructor(e,t=null,r=[],i=[],a=null,l="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=m,this.wt=null,this._t=null}}function XE(n,e,t,r,i,a,l,h){return new oc(n,e,t,r,i,a,l,h)}function Gu(n){return new oc(n)}function $b(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function JE(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function em(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Pd(n){return null!==n.collectionGroup}function Od(n){const e=it(n);if(null===e.wt){e.wt=[];const t=em(e),r=JE(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new xd(t)),e.wt.push(new xd(Vr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new xd(Vr.keyField(),a))}}}return e.wt}function vs(n){const e=it(n);if(!e._t)if("F"===e.limitType)e._t=YE(e.path,e.collectionGroup,Od(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Od(e))t.push(new xd(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new ic(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ic(e.startAt.position,e.startAt.inclusive):null;e._t=YE(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function e0(n,e){e.getFirstInequalityField(),em(n);const t=n.filters.concat([e]);return new oc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function P_(n,e,t){return new oc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function O_(n,e){return Jg(vs(n),vs(e))&&n.limitType===e.limitType}function Gb(n){return`${sc(vs(n))}|lt:${n.limitType}`}function k_(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>ZE(r)).join(", ")}]`),Bg(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>qg(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>qg(r)).join(",")),`Target(${t})`}(vs(n))}; limitType=${n.limitType})`}function tm(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):et.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Od(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const h=$E(i,a,l);return i.inclusive?h<=0:h<0}(t.startAt,Od(t),r)||t.endAt&&!function(i,a,l){const h=$E(i,a,l);return i.inclusive?h>=0:h>0}(t.endAt,Od(t),r)));var t,r}function zb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Af(n){return(e,t)=>{let r=!1;for(const i of Od(n)){const a=bM(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function bM(n,e,t){const r=n.field.isKeyField()?et.comparator(e.key,t.key):function(i,a,l){const h=a.data.field(i),m=l.data.field(i);return null!==h&&null!==m?nc(h,m):ct()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ct()}}class Wa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){tc(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return Mb(this.inner)}size(){return this.innerSize}}const TM=new er(et.comparator);function ws(){return TM}const Wb=new er(et.comparator);function Rf(...n){let e=Wb;for(const t of n)e=e.insert(t.key,t);return e}function qb(n){let e=Wb;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ro(){return Mf()}function Kb(){return Mf()}function Mf(){return new Wa(n=>n.toString(),(n,e)=>n.isEqual(e))}const Zb=new er(et.comparator),SM=new cr(et.comparator);function qt(...n){let e=SM;for(const t of n)e=e.add(t);return e}const AM=new cr($t);function nm(){return AM}function Yb(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jg(e)?"-0":e}}function t0(n){return{integerValue:""+n}}function Qb(n,e){return gb(e)?t0(e):Yb(n,e)}class F_{constructor(){this._=void 0}}function RM(n,e,t){return n instanceof Nf?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&$g(i)&&(i=Gg(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof kd?Jb(n,e):n instanceof ac?n0(n,e):function(r,i){const a=Xb(r,i),l=eT(a)+eT(r.gt);return A_(a)&&A_(r.gt)?t0(l):Yb(r.serializer,l)}(n,e)}function MM(n,e,t){return n instanceof kd?Jb(n,e):n instanceof ac?n0(n,e):t}function Xb(n,e){return n instanceof xf?A_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Nf extends F_{}class kd extends F_{constructor(e){super(),this.elements=e}}function Jb(n,e){const t=r0(e);for(const r of n.elements)t.some(i=>ts(i,r))||t.push(r);return{arrayValue:{values:t}}}class ac extends F_{constructor(e){super(),this.elements=e}}function n0(n,e){let t=r0(e);for(const r of n.elements)t=t.filter(i=>!ts(i,r));return{arrayValue:{values:t}}}class xf extends F_{constructor(e,t){super(),this.serializer=e,this.gt=t}}function eT(n){return Sr(n.integerValue||n.doubleValue)}function r0(n){return R_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class rm{constructor(e,t){this.field=e,this.transform=t}}class xM{constructor(e,t){this.version=e,this.transformResults=t}}class nr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new nr}static exists(e){return new nr(void 0,e)}static updateTime(e){return new nr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pf(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class im{}function L_(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new uc(n.key,nr.none()):new Fd(n.key,n.data,nr.none());{const t=n.data,r=ns.empty();let i=new cr(Vr.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new js(n.key,r,new Bs(i.toArray()),nr.none())}}function PM(n,e,t){n instanceof Fd?function(r,i,a){const l=r.value.clone(),h=nT(r.fieldTransforms,i,a.transformResults);l.setAll(h),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof js?function(r,i,a){if(!Pf(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=nT(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(o0(r)),h.setAll(l),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function sm(n,e,t,r){return n instanceof Fd?function(i,a,l,h){if(!Pf(i.precondition,a))return l;const m=i.value.clone(),v=OM(i.fieldTransforms,h,a);return m.setAll(v),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof js?function(i,a,l,h){if(!Pf(i.precondition,a))return l;const m=OM(i.fieldTransforms,h,a),v=a.data;return v.setAll(o0(i)),v.setAll(m),a.convertToFoundDocument(a.version,v).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(b=>b.field))}(n,e,t,r):(l=t,Pf(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function s0(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=Xb(r.transform,i||null);null!=a&&(null===t&&(t=ns.empty()),t.set(r.field,a))}return t||null}function tT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Ql(t,r,(i,a)=>function NM(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof kd&&r instanceof kd||t instanceof ac&&r instanceof ac?Ql(t.elements,r.elements,ts):t instanceof xf&&r instanceof xf?ts(t.gt,r.gt):t instanceof Nf&&r instanceof Nf);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Fd extends im{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class js extends im{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function o0(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function nT(n,e,t){const r=new Map;bt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,MM(l,h,t[i]))}return r}function OM(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,RM(a,l,e))}return r}class uc extends im{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class om extends im{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class a0{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&PM(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=sm(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=sm(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Kb();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=t.has(i.key)?null:h;const m=L_(l,h);null!==m&&r.set(i.key,m),l.isValidDocument()||l.convertToNoDocument(St.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),qt())}isEqual(e){return this.batchId===e.batchId&&Ql(this.mutations,e.mutations,(t,r)=>tT(t,r))&&Ql(this.baseMutations,e.baseMutations,(t,r)=>tT(t,r))}}class V_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){bt(e.mutations.length===r.length);let i=Zb;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new V_(e,t,r,i)}}class U_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class rT{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ur,pn;function u0(n){switch(n){default:return ct();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function l0(n){if(void 0===n)return Xr("GRPC error has no .code"),he.UNKNOWN;switch(n){case Ur.OK:return he.OK;case Ur.CANCELLED:return he.CANCELLED;case Ur.UNKNOWN:return he.UNKNOWN;case Ur.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case Ur.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case Ur.INTERNAL:return he.INTERNAL;case Ur.UNAVAILABLE:return he.UNAVAILABLE;case Ur.UNAUTHENTICATED:return he.UNAUTHENTICATED;case Ur.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case Ur.NOT_FOUND:return he.NOT_FOUND;case Ur.ALREADY_EXISTS:return he.ALREADY_EXISTS;case Ur.PERMISSION_DENIED:return he.PERMISSION_DENIED;case Ur.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case Ur.ABORTED:return he.ABORTED;case Ur.OUT_OF_RANGE:return he.OUT_OF_RANGE;case Ur.UNIMPLEMENTED:return he.UNIMPLEMENTED;case Ur.DATA_LOSS:return he.DATA_LOSS;default:return ct()}}(pn=Ur||(Ur={}))[pn.OK=0]="OK",pn[pn.CANCELLED=1]="CANCELLED",pn[pn.UNKNOWN=2]="UNKNOWN",pn[pn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pn[pn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pn[pn.NOT_FOUND=5]="NOT_FOUND",pn[pn.ALREADY_EXISTS=6]="ALREADY_EXISTS",pn[pn.PERMISSION_DENIED=7]="PERMISSION_DENIED",pn[pn.UNAUTHENTICATED=16]="UNAUTHENTICATED",pn[pn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pn[pn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pn[pn.ABORTED=10]="ABORTED",pn[pn.OUT_OF_RANGE=11]="OUT_OF_RANGE",pn[pn.UNIMPLEMENTED=12]="UNIMPLEMENTED",pn[pn.INTERNAL=13]="INTERNAL",pn[pn.UNAVAILABLE=14]="UNAVAILABLE",pn[pn.DATA_LOSS=15]="DATA_LOSS";class B_{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return j_}static getOrCreateInstance(){return null===j_&&(j_=new B_),j_}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let j_=null;function iT(){return new TextEncoder}const FM=new Sd([4294967295,4294967295],0);function sT(n){const e=iT().encode(n),t=new eb;return t.update(e),new Uint8Array(t.digest())}function c0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Sd([t,r],0),new Sd([i,a],0)]}class oT{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Of(`Invalid padding: ${t}`);if(r<0)throw new Of(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Of(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Of(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Sd.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(Sd.fromNumber(r)));return 1===i.compare(FM)&&(i=new Sd([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=sT(e),[r,i]=c0(t);for(let a=0;a<this.hashCount;a++){const l=this.Et(r,i,a);if(!this.At(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new oT(a,i,t);return r.forEach(h=>l.insert(h)),l}insert(e){if(0===this.It)return;const t=sT(e),[r,i]=c0(t);for(let a=0;a<this.hashCount;a++){const l=this.Et(r,i,a);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Of extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class am{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,um.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new am(St.min(),i,new er($t),ws(),qt())}}class um{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new um(r,t,qt(),qt(),qt())}}class d0{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class aT{constructor(e,t){this.targetId=e,this.Vt=t}}class uT{constructor(e,t,r=pi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class lT{constructor(){this.St=0,this.Dt=dT(),this.Ct=pi.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=qt(),t=qt(),r=qt();return this.Dt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ct()}}),new um(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=dT()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class LM{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=ws(),this.zt=cT(),this.Wt=new er($t)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:ct()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,a=this.se(r);if(a){const l=a.target;if(x_(l))if(0===i){const h=new et(l.path);this.Yt(r,h,tr.newNoDocument(h,St.min()))}else bt(1===i);else{const h=this.ie(r);if(h!==i){const m=this.re(e,h);0!==m&&(this.ee(r),this.Wt=this.Wt.insert(r,2===m?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=B_.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(v,b,S){var x,H,Z,se,ce,We;const ut={localCacheCount:b,existenceFilterCount:S.count},He=S.unchangedNames;return He&&(ut.bloomFilter={applied:0===v,hashCount:null!==(x=He?.hashCount)&&void 0!==x?x:0,bitmapLength:null!==(se=null===(Z=null===(H=He?.bits)||void 0===H?void 0:H.bitmap)||void 0===Z?void 0:Z.length)&&void 0!==se?se:0,padding:null!==(We=null===(ce=He?.bits)||void 0===ce?void 0:ce.padding)&&void 0!==We?We:0}),ut}(m,h,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:a="",padding:l=0},hashCount:h=0}=r;let m,v;try{m=Ga(a).toUint8Array()}catch(b){if(b instanceof xb)return to("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw b}try{v=new oT(m,l,h)}catch(b){return to(b instanceof Of?"BloomFilter error: ":"Applying bloom filter failed: ",b),1}return 0===v.It?1:i!==t-this.oe(e.targetId,v)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(a=>{const l=this.Gt.ue(),h=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;t.vt(h)||(this.Yt(e,a,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((a,l)=>{const h=this.se(l);if(h){if(a.current&&x_(h.target)){const m=new et(h.target.path);null!==this.jt.get(m)||this.ae(l,m)||this.Yt(l,m,tr.newNoDocument(m,e))}a.Mt&&(t.set(l,a.Ot()),a.Ft())}});let r=qt();this.zt.forEach((a,l)=>{let h=!0;l.forEachWhile(m=>{const v=this.se(m);return!v||"TargetPurposeLimboResolution"===v.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.jt.forEach((a,l)=>l.setReadTime(e));const i=new am(e,t,this.Wt,this.jt,r);return this.jt=ws(),this.zt=cT(),this.Wt=new er($t),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new lT,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new cr($t),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ue("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new lT),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function cT(){return new er(et.comparator)}function dT(){return new er(et.comparator)}const VM={asc:"ASCENDING",desc:"DESCENDING"},UM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BM={and:"AND",or:"OR"};class jM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function h0(n,e){return n.useProto3Json||Bg(e)?e:{value:e}}function kf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ff(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function hT(n,e){return kf(n,e.toTimestamp())}function Br(n){return bt(!!n),St.fromTimestamp(function(e){const t=Bu(e);return new Jn(t.seconds,t.nanos)}(n))}function H_(n,e){return(t=n,new In(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function f0(n){const e=In.fromString(n);return bt(vT(e)),e}function Lf(n,e){return H_(n.databaseId,e.path)}function qa(n,e){const t=f0(e);if(t.get(1)!==n.databaseId.projectId)throw new Se(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Se(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new et(fT(t))}function p0(n,e){return H_(n.databaseId,e)}function HM(n){const e=f0(n);return 4===e.length?In.emptyPath():fT(e)}function lm(n){return new In(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function fT(n){return bt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function pT(n,e,t){return{name:Lf(n,e),fields:t.value.mapValue.fields}}function gT(n,e,t){const r=qa(n,e.name),i=Br(e.updateTime),a=e.createTime?Br(e.createTime):St.min(),l=new ns({mapValue:{fields:e.fields}}),h=tr.newFoundDocument(r,i,a,l);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function dm(n,e){let t;if(e instanceof Fd)t={update:pT(n,e.key,e.value)};else if(e instanceof uc)t={delete:Lf(n,e.key)};else if(e instanceof js)t={update:pT(n,e.key,e.data),updateMask:WM(e.fieldMask)};else{if(!(e instanceof om))return ct();t={verify:Lf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Nf)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof kd)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ac)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof xf)return{fieldPath:a.field.canonicalString(),increment:l.gt};throw ct()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:hT(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ct()),t;var i}function hm(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?nr.updateTime(Br(i.updateTime)):void 0!==i.exists?nr.exists(i.exists):nr.none():nr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let h=null;"setToServerValue"in l?(bt("REQUEST_TIME"===l.setToServerValue),h=new Nf):"appendMissingElements"in l?h=new kd(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new ac(l.removeAllFromArray.values||[]):"increment"in l?h=new xf(a,l.increment):ct();const m=Vr.fromServerFormat(l.fieldPath);return new rm(m,h)}(n,i)):[];var i;if(e.update){const i=qa(n,e.update.name),a=new ns({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Bs((e.updateMask.fieldPaths||[]).map(v=>Vr.fromServerFormat(v)));return new js(i,a,l,t,r)}return new Fd(i,a,t,r)}if(e.delete){const i=qa(n,e.delete);return new uc(i,t)}if(e.verify){const i=qa(n,e.verify);return new om(i,t)}return ct()}function mT(n,e){return{documents:[p0(n,e.path)]}}function fm(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=p0(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=p0(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0!==m.length)return G_(Nn.create(m,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(v=>{return{field:lc((b=v).field),direction:zM(b.dir)};var b})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=h0(n,e.limit);var h,m;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function Vf(n){let e=HM(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){bt(1===r);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let a=[];t.where&&(a=function(b){const S=yT(b);return S instanceof Nn&&WE(S)?S.getFilters():[S]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(b=>{return new xd(Uf((S=b).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(b){let S;return S="object"==typeof b?b.value:b,Bg(S)?null:S}(t.limit));let m=null;var b;t.startAt&&(m=new ic((b=t.startAt).values||[],!!b.before));let v=null;return t.endAt&&(v=function(b){return new ic(b.values||[],!b.before)}(t.endAt)),XE(e,i,l,a,h,"F",m,v)}function yT(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Uf(e.unaryFilter.field);return hn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Uf(e.unaryFilter.field);return hn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Uf(e.unaryFilter.field);return hn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Uf(e.unaryFilter.field);return hn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ct()}}(n):void 0!==n.fieldFilter?hn.create(Uf((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ct()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Nn.create(e.compositeFilter.filters.map(t=>yT(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ct()}}(e.compositeFilter.op))}(n):ct();var e}function zM(n){return VM[n]}function $_(n){return UM[n]}function _T(n){return BM[n]}function lc(n){return{fieldPath:n.canonicalString()}}function Uf(n){return Vr.fromServerFormat(n.fieldPath)}function G_(n){return n instanceof hn?function(e){if("=="===e.op){if(Ob(e.value))return{unaryFilter:{field:lc(e.field),op:"IS_NAN"}};if(Nt(e.value))return{unaryFilter:{field:lc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ob(e.value))return{unaryFilter:{field:lc(e.field),op:"IS_NOT_NAN"}};if(Nt(e.value))return{unaryFilter:{field:lc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lc(e.field),op:$_(e.op),value:e.value}}}(n):n instanceof Nn?function(e){const t=e.getFilters().map(r=>G_(r));return 1===t.length?t[0]:{compositeFilter:{op:_T(e.op),filters:t}}}(n):ct()}function WM(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function vT(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Za{constructor(e,t,r,i,a=St.min(),l=St.min(),h=pi.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new Za(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class wT{constructor(e){this.fe=e}}function g0(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ld(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Lf(i=n.fe,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:kf(i,a.version.toTimestamp()),createTime:kf(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Vd(e.version)};else{if(!e.isUnknownDocument())return ct();r.unknownDocument={path:t.path.toArray(),version:Vd(e.version)}}var i,a;return r}function Ld(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Vd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ud(n){const e=new Jn(n.seconds,n.nanoseconds);return St.fromTimestamp(e)}function cc(n,e){const t=(e.baseMutations||[]).map(a=>hm(n.fe,a));for(let a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);const r=e.mutations.map(a=>hm(n.fe,a)),i=Jn.fromMillis(e.localWriteTimeMs);return new a0(e.batchId,i,t,r)}function Bf(n){const e=Ud(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ud(n.lastLimboFreeSnapshotVersion):St.min();let r;var i;return void 0!==n.query.documents?(bt(1===(i=n.query).documents.length),r=vs(Gu(HM(i.documents[0])))):r=vs(Vf(n.query)),new Za(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,pi.fromBase64String(n.resumeToken))}function z_(n,e){const t=Vd(e.snapshotVersion),r=Vd(e.lastLimboFreeSnapshotVersion);let i;i=x_(e.target)?mT(n.fe,e.target):fm(n.fe,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:sc(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function W_(n){const e=Vf({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?P_(e,e.limit,"L"):e}function m0(n,e){return new U_(e.largestBatchId,hm(n.fe,e.overlayMutation))}function y0(n,e){const t=e.path.lastSegment();return[n,Ti(e.path.popLast()),t]}function _0(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Vd(r.readTime),documentKey:Ti(r.documentKey.path),largestBatchId:r.largestBatchId}}class KM{getBundleMetadata(e,t){return ET(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Ud(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return ET(e).put({bundleId:(r=t).id,createTime:Vd(Br(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return q_(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:W_(i.bundledQuery),readTime:Ud(i.readTime)};var i})}saveNamedQuery(e,t){return q_(e).put({name:(r=t).name,readTime:Vd(Br(r.readTime)),bundledQuery:r.bundledQuery});var r}}function ET(n){return Si(n,"bundles")}function q_(n){return Si(n,"namedQueries")}class jf{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new jf(e,t.uid||"")}getOverlay(e,t){return Hf(e).get(y0(this.userId,t)).next(r=>r?m0(this.serializer,r):null)}getOverlays(e,t){const r=Ro();return le.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const h=new U_(t,l);i.push(this.we(e,h))}),le.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Ti(l.getCollectionPath())));const a=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(Hf(e).J("collectionPathOverlayIndex",h))}),le.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Ro(),a=Ti(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Hf(e).j("collectionPathOverlayIndex",l).next(h=>{for(const m of h){const v=m0(this.serializer,m);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Ro();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Hf(e).X({index:"collectionGroupOverlayIndex",range:h},(m,v,b)=>{const S=m0(this.serializer,v);a.size()<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):b.done()}).next(()=>a)}we(e,t){return Hf(e).put(function(r,i,a){const[l,h,m]=y0(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:m,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:dm(r.fe,a.mutation)}}(this.serializer,this.userId,t))}}function Hf(n){return Si(n,"documentOverlays")}class zu{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Sr(e.integerValue));else if("doubleValue"in e){const r=Sr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),jg(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Ga(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?Nd(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):ct()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),et.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function v0(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function IT(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=v0(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}zu.Ve=new zu;class ZM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=IT(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=IT(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class YM{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class QM{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class $f{constructor(){this.je=new ZM,this.ze=new YM(this.je),this.We=new QM(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Wu{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Wu(this.indexId,this.documentKey,this.arrayValue,r)}}function qu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=CT(n.arrayValue,e.arrayValue),0!==t?t:(t=CT(n.directionalValue,e.directionalValue),0!==t?t:et.comparator(n.documentKey,e.documentKey)))}function CT(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class DT{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){bt(e.collectionGroup===this.collectionId);const t=ME(e);if(void 0!==t&&!this.en(t))return!1;const r=lr(e);let i=0,a=0;for(;i<r.length&&this.en(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ze){const l=r[i];if(!this.nn(this.Ze,l)||!this.sn(this.Ye[a++],l))return!1;++i}for(;i<r.length;++i)if(a>=this.Ye.length||!this.sn(this.Ye[a++],r[i]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function w0(n){var e,t;if(bt(n instanceof hn||n instanceof Nn),n instanceof hn){if(n instanceof Ub){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>hn.create(n.field,"==",a)))||[];return Nn.create(i,"or")}return n}const r=n.filters.map(i=>w0(i));return Nn.create(r,n.op)}function XM(n){if(0===n.getFilters().length)return[];const e=Y_(w0(n));return bt(bT(e)),K_(e)||Z_(e)?[e]:e.getFilters()}function K_(n){return n instanceof hn}function Z_(n){return n instanceof Nn&&WE(n)}function bT(n){return K_(n)||Z_(n)||function(e){if(e instanceof Nn&&zE(e)){for(const t of e.getFilters())if(!K_(t)&&!Z_(t))return!1;return!0}return!1}(n)}function Y_(n){if(bt(n instanceof hn||n instanceof Nn),n instanceof hn)return n;if(1===n.filters.length)return Y_(n.filters[0]);const e=n.filters.map(r=>Y_(r));let t=Nn.create(e,n.op);return t=Ku(t),bT(t)?t:(bt(t instanceof Nn),bt(za(t)),bt(t.filters.length>1),t.filters.reduce((r,i)=>E0(r,i)))}function E0(n,e){let t;return bt(n instanceof hn||n instanceof Nn),bt(e instanceof hn||e instanceof Nn),t=n instanceof hn?e instanceof hn?Nn.create([n,e],"and"):rs(n,e):e instanceof hn?rs(e,n):function(r,i){if(bt(r.filters.length>0&&i.filters.length>0),za(r)&&za(i))return KE(r,i.getFilters());const a=zE(r)?r:i,l=zE(r)?i:r,h=a.filters.map(m=>E0(m,l));return Nn.create(h,"or")}(n,e),Ku(t)}function rs(n,e){if(za(e))return KE(e,n.getFilters());{const t=e.filters.map(r=>E0(n,r));return Nn.create(t,"or")}}function Ku(n){if(bt(n instanceof hn||n instanceof Nn),n instanceof hn)return n;const e=n.getFilters();if(1===e.length)return Ku(e[0]);if(Lb(n))return n;const t=e.map(i=>Ku(i)),r=[];return t.forEach(i=>{i instanceof hn?r.push(i):i instanceof Nn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Nn.create(r,n.op)}class JM{constructor(){this.rn=new I0}addToCollectionParentIndex(e,t){return this.rn.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(Vs.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(Vs.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class I0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new cr(In.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new cr(In.comparator)).toArray()}}const C0=new Uint8Array(0);class kO{constructor(e,t){this.user=e,this.databaseId=t,this.on=new I0,this.un=new Wa(r=>sc(r),(r,i)=>Jg(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const a={collectionId:r,parent:Ti(i)};return D0(e).put(a)}return le.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Xl(t),""],!1,!0);return D0(e).j(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(Jo(l.parent))}return r})}addFieldIndex(e,t){const r=dc(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=pm(e);return a.next(h=>{l.put(_0(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=dc(e),i=pm(e),a=Bd(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Bd(e);let i=!0;const a=new Map;return le.forEach(this.cn(t),l=>this.an(e,l).next(h=>{i&&(i=!!h),a.set(l,h)})).next(()=>{if(i){let l=qt();const h=[];return le.forEach(a,(m,v)=>{var b;Ue("IndexedDbIndexManager",`Using index ${b=m,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(He=>`${He.fieldPath}:${He.kind}`).join(",")}`} to execute ${sc(t)}`);const S=function(He,lt){const Vt=ME(lt);if(void 0===Vt)return null;for(const Kt of QE(He,Vt.fieldPath))switch(Kt.op){case"array-contains-any":return Kt.value.arrayValue.values||[];case"array-contains":return[Kt.value]}return null}(v,m),x=function(He,lt){const Vt=new Map;for(const Kt of lr(lt))for(const Mi of QE(He,Kt.fieldPath))switch(Mi.op){case"==":case"in":Vt.set(Kt.fieldPath.canonicalString(),Mi.value);break;case"not-in":case"!=":return Vt.set(Kt.fieldPath.canonicalString(),Mi.value),Array.from(Vt.values())}return null}(v,m),H=function(He,lt){const Vt=[];let Kt=!0;for(const Mi of lr(lt)){const ra=0===Mi.kind?CM(He,Mi.fieldPath,He.startAt):DM(He,Mi.fieldPath,He.startAt);Vt.push(ra.value),Kt&&(Kt=ra.inclusive)}return new ic(Vt,Kt)}(v,m),Z=function(He,lt){const Vt=[];let Kt=!0;for(const Mi of lr(lt)){const ra=0===Mi.kind?DM(He,Mi.fieldPath,He.endAt):CM(He,Mi.fieldPath,He.endAt);Vt.push(ra.value),Kt&&(Kt=ra.inclusive)}return new ic(Vt,Kt)}(v,m),se=this.hn(m,v,H),ce=this.hn(m,v,Z),We=this.ln(m,v,x),ut=this.fn(m.indexId,S,se,H.inclusive,ce,Z.inclusive,We);return le.forEach(ut,He=>r.H(He,t.limit).next(lt=>{lt.forEach(Vt=>{const Kt=et.fromSegments(Vt.documentKey);l.has(Kt)||(l=l.add(Kt),h.push(Kt))})}))}).next(()=>h)}return le.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:XM(Nn.create(e.filters,"and")).map(r=>YE(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,a,l,h){const m=(null!=t?t.length:1)*Math.max(r.length,a.length),v=m/(null!=t?t.length:1),b=[];for(let S=0;S<m;++S){const x=t?this.dn(t[S/v]):C0,H=this.wn(e,x,r[S%v],i),Z=this._n(e,x,a[S%v],l),se=h.map(ce=>this.wn(e,x,ce,!0));b.push(...this.createRange(H,Z,se))}return b}wn(e,t,r,i){const a=new Wu(e,et.empty(),t,r);return i?a:a.Je()}_n(e,t,r,i){const a=new Wu(e,et.empty(),t,r);return i?a.Je():a}an(e,t){const r=new DT(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const h of a)r.tn(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(e,t){let r=2;const i=this.cn(t);return le.forEach(i,a=>this.an(e,a).next(l=>{l?0!==r&&l.fields.length<function(h){let m=new cr(Vr.comparator),v=!1;for(const b of h.filters)for(const S of b.getFlattenedFilters())S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?v=!0:m=m.add(S.field));for(const b of h.orderBy)b.field.isKeyField()||(m=m.add(b.field));return m.size+(v?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new $f;for(const i of lr(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.He(i.kind);zu.Ve._e(a,l)}return r.Qe()}dn(e){const t=new $f;return zu.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new $f;return zu.Ve._e(rc(this.databaseId,t),r.He(function(i){const a=lr(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new $f);let a=0;for(const l of lr(e)){const h=r[a++];for(const m of i)if(this.yn(t,l.fieldPath)&&R_(h))i=this.pn(i,l,h);else{const v=m.He(l.kind);zu.Ve._e(h,v)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const h of i){const m=new $f;m.seed(h.Qe()),zu.Ve._e(l,m.He(t.kind)),a.push(m)}return a}yn(e,t){return!!e.filters.find(r=>r instanceof hn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=dc(e),i=pm(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(a=>{const l=[];return le.forEach(a,h=>i.get([h.indexId,this.uid]).next(m=>{l.push(function(v,b){const S=b?new Df(b.sequenceNumber,new Vs(Ud(b.readTime),new et(Jo(b.documentKey)),b.largestBatchId)):Df.empty(),x=v.fields.map(([H,Z])=>new D_(Vr.fromServerFormat(H),Z));return new Ug(v.indexId,v.collectionGroup,x,S)}(h,m))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:$t(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=dc(e),a=pm(e);return this.Tn(e).next(l=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>le.forEach(h,m=>a.put(_0(m.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return le.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?le.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),le.forEach(h,m=>this.En(e,i,m).next(v=>{const b=this.An(a,m);return v.isEqual(b)?le.resolve():this.vn(e,a,m,v,b)}))))})}Rn(e,t,r,i){return Bd(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return Bd(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=Bd(e);let a=new cr(qu);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,h)=>{a=a.add(new Wu(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}An(e,t){let r=new cr(qu);const i=this.mn(t,e);if(null==i)return r;const a=ME(t);if(null!=a){const l=e.data.field(a.fieldPath);if(R_(l))for(const h of l.arrayValue.values||[])r=r.add(new Wu(t.indexId,e.key,this.dn(h),i))}else r=r.add(new Wu(t.indexId,e.key,C0,i));return r}vn(e,t,r,i,a){Ue("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,m,v,b,S){const x=h.getIterator(),H=m.getIterator();let Z=bf(x),se=bf(H);for(;Z||se;){let ce=!1,We=!1;if(Z&&se){const ut=v(Z,se);ut<0?We=!0:ut>0&&(ce=!0)}else null!=Z?We=!0:ce=!0;ce?(b(se),se=bf(H)):We?(S(Z),Z=bf(x)):(Z=bf(x),se=bf(H))}}(i,a,qu,h=>{l.push(this.Rn(e,t,r,h))},h=>{l.push(this.Pn(e,t,r,h))}),le.waitFor(l)}Tn(e){let t=1;return pm(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,h)=>qu(l,h)).filter((l,h,m)=>!h||0!==qu(l,m[h-1]));const i=[];i.push(e);for(const l of r){const h=qu(l,e),m=qu(l,t);if(0===h)i[0]=e.Je();else if(h>0&&m<0)i.push(l),i.push(l.Je());else if(m>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2){if(this.bn(i[l],i[l+1]))return[];a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,C0,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,C0,[]]))}return a}bn(e,t){return qu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Q_)}getMinOffset(e,t){return le.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||ct())).next(Q_)}}function D0(n){return Si(n,"collectionParents")}function Bd(n){return Si(n,"indexEntries")}function dc(n){return Si(n,"indexConfiguration")}function pm(n){return Si(n,"indexState")}function Q_(n){bt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Jl(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Vs(e.readTime,e.documentKey,t)}const TT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Gi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Gi(e,Gi.DEFAULT_COLLECTION_PERCENTILE,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ST(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const m=r.X({range:l},(b,S,x)=>(h++,x.delete()));a.push(m.next(()=>{bt(1===h)}));const v=[];for(const b of t.mutations){const S=kE(e,b.key.path,t.batchId);a.push(i.delete(S)),v.push(b.key)}return le.waitFor(a).next(()=>v)}function X_(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ct();e=n.noDocument}return JSON.stringify(e).length}Gi.DEFAULT_COLLECTION_PERCENTILE=10,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gi.DEFAULT=new Gi(41943040,Gi.DEFAULT_COLLECTION_PERCENTILE,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gi.DISABLED=new Gi(-1,0,0);class J_{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){bt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new J_(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zu(e).X({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Gf(e),l=Zu(e);return l.add({}).next(h=>{bt("number"==typeof h);const m=new a0(h,t,r,i),v=function(x,H,Z){const se=Z.baseMutations.map(We=>dm(x.fe,We)),ce=Z.mutations.map(We=>dm(x.fe,We));return{userId:H,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:se,mutations:ce}}(this.serializer,this.userId,m),b=[];let S=new cr((x,H)=>$t(x.canonicalString(),H.canonicalString()));for(const x of i){const H=kE(this.userId,x.key.path,h);S=S.add(x.key.path.popLast()),b.push(l.put(v)),b.push(a.put(H,_b))}return S.forEach(x=>{b.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.Vn[h]=m.keys()}),le.waitFor(b).next(()=>m)})}lookupMutationBatch(e,t){return Zu(e).get(t).next(r=>r?(bt(r.userId===this.userId),cc(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?le.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Zu(e).X({index:"userMutationsIndex",range:i},(l,h,m)=>{h.userId===this.userId&&(bt(h.batchId>=r),a=cc(this.serializer,h)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Zu(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Zu(e).j("userMutationsIndex",t).next(r=>r.map(i=>cc(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=b_(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Gf(e).X({range:i},(l,h,m)=>{const[v,b,S]=l,x=Jo(b);if(v===this.userId&&t.path.isEqual(x))return Zu(e).get(S).next(H=>{if(!H)throw ct();bt(H.userId===this.userId),a.push(cc(this.serializer,H))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cr($t);const i=[];return t.forEach(a=>{const l=b_(this.userId,a.path),h=IDBKeyRange.lowerBound(l),m=Gf(e).X({range:h},(v,b,S)=>{const[x,H,Z]=v,se=Jo(H);x===this.userId&&a.path.isEqual(se)?r=r.add(Z):S.done()});i.push(m)}),le.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=b_(this.userId,r),l=IDBKeyRange.lowerBound(a);let h=new cr($t);return Gf(e).X({range:l},(m,v,b)=>{const[S,x,H]=m,Z=Jo(x);S===this.userId&&r.isPrefixOf(Z)?Z.length===i&&(h=h.add(H)):b.done()}).next(()=>this.Dn(e,h))}Dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Zu(e).get(a).next(l=>{if(null===l)throw ct();bt(l.userId===this.userId),r.push(cc(this.serializer,l))}))}),le.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return ST(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),le.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Gf(e).X({range:r},(a,l,h)=>{if(a[0]===this.userId){const m=Jo(a[1]);i.push(m)}else h.done()}).next(()=>{bt(0===i.length)})})}containsKey(e,t){return ev(e,this.userId,t)}xn(e){return gm(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ev(n,e,t){const r=b_(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return Gf(n).X({range:a,Y:!0},(h,m,v)=>{const[b,S,x]=h;b===e&&S===i&&(l=!0),v.done()}).next(()=>l)}function Zu(n){return Si(n,"mutations")}function Gf(n){return Si(n,"documentMutations")}function gm(n){return Si(n,"mutationQueues")}class Yu{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Yu(0)}static Mn(){return new Yu(-1)}}class FO{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Yu(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>St.fromTimestamp(new Jn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>jd(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(bt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return jd(e).X((l,h)=>{const m=Bf(h);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(e,m)))}).next(()=>le.waitFor(a)).next(()=>i)}forEachTarget(e,t){return jd(e).X((r,i)=>{const a=Bf(i);t(a)})}$n(e){return AT(e).get("targetGlobalKey").next(t=>(bt(null!==t),t))}On(e,t){return AT(e).put("targetGlobalKey",t)}Fn(e,t){return jd(e).put(z_(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=sc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return jd(e).X({range:i,index:"queryTargetsIndex"},(l,h,m)=>{const v=Bf(h);Jg(t,v.target)&&(a=v,m.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Qu(e);return t.forEach(l=>{const h=Ti(l.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))}),le.waitFor(i)}removeMatchingKeys(e,t,r){const i=Qu(e);return le.forEach(t,a=>{const l=Ti(a.path);return le.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Qu(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Qu(e);let a=qt();return i.X({range:r,Y:!0},(l,h,m)=>{const v=Jo(l[1]),b=new et(v);a=a.add(b)}).next(()=>a)}containsKey(e,t){const r=Ti(t.path),i=IDBKeyRange.bound([r],[Xl(r)],!1,!0);let a=0;return Qu(e).X({index:"documentTargetsIndex",Y:!0,range:i},([l,h],m,v)=>{0!==l&&(a++,v.done())}).next(()=>a>0)}le(e,t){return jd(e).get(t).next(r=>r?Bf(r):null)}}function jd(n){return Si(n,"targets")}function AT(n){return Si(n,"targetGlobal")}function Qu(n){return Si(n,"targetDocuments")}function Hd([n,e],[t,r]){const i=$t(n,t);return 0===i?$t(e,r):i}class eN{constructor(e){this.Ln=e,this.buffer=new cr(Hd),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Hd(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class b0{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Ue("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ye.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){ec(r)?Ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Uu(r)}yield t.Qn(3e5)}))}}class T0{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return le.resolve(ro.ct);const r=new eN(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(TT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),TT):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,a,l,h,m,v;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(v=Date.now(),I_()<=Ci.in.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-b}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${a} targets in `+(m-h)+`ms\n\tRemoved ${S} documents in `+(v-m)+`ms\nTotal Duration: ${v-b}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class nN{constructor(e,t){this.db=e,this.garbageCollector=function tN(n,e){return new T0(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return S0(e,r)}removeReference(e,t,r){return S0(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return S0(e,t)}Xn(e,t){return function(r,i){let a=!1;return gm(r).Z(l=>ev(r,l,i).next(h=>(h&&(a=!0),le.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Yn(e,(l,h)=>{if(h<=t){const m=this.Xn(e,l).next(v=>{if(!v)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,St.min()),Qu(e).delete([0,Ti(l.path)])))});i.push(m)}}).next(()=>le.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return S0(e,t)}Yn(e,t){const r=Qu(e);let i,a=ro.ct;return r.X({index:"documentTargetsIndex"},([l,h],{path:m,sequenceNumber:v})=>{0===l?(a!==ro.ct&&t(new et(Jo(i)),a),a=v,i=m):a=ro.ct}).next(()=>{a!==ro.ct&&t(new et(Jo(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function S0(n,e){return Qu(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ti(e.path),sequenceNumber:r}));var r}class RT{constructor(){this.changes=new Wa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class rN{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return $d(e).put(r)}removeEntry(e,t,r){return $d(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Ld(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=tr.newInvalidDocument(t);return $d(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(zf(t))},(i,a)=>{r=this.ts(t,a)}).next(()=>r)}es(e,t){let r={size:0,document:tr.newInvalidDocument(t)};return $d(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(zf(t))},(i,a)=>{r={document:this.ts(t,a),size:X_(a)}}).next(()=>r)}getEntries(e,t){let r=ws();return this.ns(e,t,(i,a)=>{const l=this.ts(i,a);r=r.insert(i,l)}).next(()=>r)}ss(e,t){let r=ws(),i=new er(et.comparator);return this.ns(e,t,(a,l)=>{const h=this.ts(a,l);r=r.insert(a,h),i=i.insert(a,X_(l))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return le.resolve();let i=new cr(xT);t.forEach(m=>i=i.add(m));const a=IDBKeyRange.bound(zf(i.first()),zf(i.last())),l=i.getIterator();let h=l.getNext();return $d(e).X({index:"documentKeyIndex",range:a},(m,v,b)=>{const S=et.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;h&&xT(h,S)<0;)r(h,null),h=l.getNext();h&&h.isEqual(S)&&(r(h,v),h=l.hasNext()?l.getNext():null),h?b.G(zf(h)):b.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,l=[a.popLast().toArray(),a.lastSegment(),Ld(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return $d(e).j(IDBKeyRange.bound(l,h,!0)).next(m=>{let v=ws();for(const b of m){const S=this.ts(et.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);S.isFoundDocument()&&(tm(t,S)||i.has(S.key))&&(v=v.insert(S.key,S))}return v})}getAllFromCollectionGroup(e,t,r,i){let a=ws();const l=R0(t,r),h=R0(t,Vs.max());return $d(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(m,v,b)=>{const S=this.ts(et.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(S.key,S),a.size===i&&b.done()}).next(()=>a)}newChangeBuffer(e){return new NT(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return A0(e).get("remoteDocumentGlobalKey").next(t=>(bt(!!t),t))}Zn(e,t){return A0(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function qM(n,e){let t;if(e.document)t=gT(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=et.fromSegments(e.noDocument.path),i=Ud(e.noDocument.readTime);t=tr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ct();{const r=et.fromSegments(e.unknownDocument.path),i=Ud(e.unknownDocument.version);t=tr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Jn(r[0],r[1]);return St.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(St.min()))return r}return tr.newInvalidDocument(e)}}function MT(n){return new rN(n)}class NT extends RT{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Wa(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new cr((a,l)=>$t(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const h=this.us.get(a);if(t.push(this.os.removeEntry(e,a,h.readTime)),l.isValidDocument()){const m=g0(this.os.serializer,l);i=i.add(a.path.popLast());const v=X_(m);r+=v-h.size,t.push(this.os.addEntry(e,a,m))}else if(r-=h.size,this.trackRemovals){const m=g0(this.os.serializer,l.convertToNoDocument(St.min()));t.push(this.os.addEntry(e,a,m))}}),i.forEach(a=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.os.updateMetadata(e,r)),le.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((a,l)=>{this.us.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function A0(n){return Si(n,"remoteDocumentGlobal")}function $d(n){return Si(n,"remoteDocumentsV14")}function zf(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function R0(n,e){const t=e.documentKey.path.toArray();return[n,Ld(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function xT(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=$t(t[a],r[a]),i)return i;return i=$t(t.length,r.length),i||(i=$t(t[t.length-2],r[r.length-2]),i||$t(t[t.length-1],r[r.length-1]))}class iN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class M0{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&sm(r.mutation,i,Bs.empty(),Jn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,qt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=qt()){const i=Ro();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=Rf();return a.forEach((h,m)=>{l=l.insert(h,m.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Ro();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,qt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,r,i){let a=ws();const l=Mf(),h=Mf();return t.forEach((m,v)=>{const b=r.get(v.key);i.has(v.key)&&(void 0===b||b.mutation instanceof js)?a=a.insert(v.key,v):void 0!==b?(l.set(v.key,b.mutation.getFieldMask()),sm(b.mutation,v,b.mutation.getFieldMask(),Jn.now())):l.set(v.key,Bs.empty())}),this.recalculateAndSaveOverlays(e,a).next(m=>(m.forEach((v,b)=>l.set(v,b)),t.forEach((v,b)=>{var S;return h.set(v,new iN(b,null!==(S=l.get(v))&&void 0!==S?S:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Mf();let i=new er((l,h)=>l-h),a=qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const h of l)h.keys().forEach(m=>{const v=t.get(m);if(null===v)return;let b=r.get(m)||Bs.empty();b=h.applyToLocalView(v,b),r.set(m,b);const S=(i.get(h.batchId)||qt()).add(m);i=i.insert(h.batchId,S)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),v=m.key,b=m.value,S=Kb();b.forEach(x=>{if(!a.has(x)){const H=L_(t.get(x),r.get(x));null!==H&&S.set(x,H),a=a.add(x)}}),l.push(this.documentOverlayCache.saveOverlays(e,v,S))}return le.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return et.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Pd(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):le.resolve(Ro());let h=-1,m=a;return l.next(v=>le.forEach(v,(b,S)=>(h<S.largestBatchId&&(h=S.largestBatchId),a.get(b)?le.resolve():this.remoteDocumentCache.getEntry(e,b).next(x=>{m=m.insert(b,x)}))).next(()=>this.populateOverlays(e,v,a)).next(()=>this.computeViews(e,m,v,qt())).next(b=>({batchId:h,changes:qb(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new et(t)).next(r=>{let i=Rf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=Rf();return this.indexManager.getCollectionParents(e,i).next(l=>le.forEach(l,h=>{const m=(v=t,b=h.child(i),new oc(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,b;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(v=>{v.forEach((b,S)=>{a=a.insert(b,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((h,m)=>{const v=m.getKey();null===a.get(v)&&(a=a.insert(v,tr.newInvalidDocument(v)))});let l=Rf();return a.forEach((h,m)=>{const v=i.get(h);void 0!==v&&sm(v.mutation,m,Bs.empty(),Jn.now()),tm(t,m)&&(l=l.insert(h,m))}),l})}}class sN{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return le.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Br(r.createTime)}),le.resolve()}getNamedQuery(e,t){return le.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:W_(r.bundledQuery),readTime:Br(r.readTime)}),le.resolve();var r}}class PT{constructor(){this.overlays=new er(et.comparator),this.ls=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ro();return le.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.we(e,t,a)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ls.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const i=Ro(),a=t.length+1,l=new et(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const m=h.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return le.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new er((v,b)=>v-b);const l=this.overlays.getIterator();for(;l.hasNext();){const v=l.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let b=a.get(v.largestBatchId);null===b&&(b=Ro(),a=a.insert(v.largestBatchId,b)),b.set(v.getKey(),v)}}const h=Ro(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,b)=>h.set(v,b)),!(h.size()>=i)););return le.resolve(h)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new U_(t,r));let a=this.ls.get(t);void 0===a&&(a=qt(),this.ls.set(t,a)),this.ls.set(t,a.add(r.key))}}class tv{constructor(){this.fs=new cr(gi.ds),this.ws=new cr(gi._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new gi(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new gi(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new et(new In([])),r=new gi(t,e),i=new gi(t,e+1),a=[];return this.ws.forEachInRange([r,i],l=>{this.ys(l),a.push(l.key)}),a}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new et(new In([])),r=new gi(t,e),i=new gi(t,e+1);let a=qt();return this.ws.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new gi(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class gi{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return et.comparator(e.key,t.key)||$t(e.As,t.As)}static _s(e,t){return $t(e.As,t.As)||et.comparator(e.key,t.key)}}class OT{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new cr(gi.ds)}checkEmpty(e){return le.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.vs;this.vs++;const l=new a0(a,t,r,i);this.mutationQueue.push(l);for(const h of i)this.Rs=this.Rs.add(new gi(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return le.resolve(l)}lookupMutationBatch(e,t){return le.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),a=i<0?0:i;return le.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new gi(t,0),i=new gi(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],l=>{const h=this.Ps(l.As);a.push(h)}),le.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cr($t);return t.forEach(i=>{const a=new gi(i,0),l=new gi(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([a,l],h=>{r=r.add(h.As)})}),le.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;et.isDocumentKey(a)||(a=a.child(""));const l=new gi(new et(a),0);let h=new cr($t);return this.Rs.forEachWhile(m=>{const v=m.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(h=h.add(m.As)),!0)},l),le.resolve(this.Vs(h))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){bt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return le.forEach(t.mutations,i=>{const a=new gi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new gi(t,0),i=this.Rs.firstAfterOrEqual(r);return le.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return le.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class oN{constructor(e){this.Ds=e,this.docs=new er(et.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():tr.newInvalidDocument(t))}getEntries(e,t){let r=ws();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():tr.newInvalidDocument(i))}),le.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=ws();const l=t.path,h=new et(l.child("")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:v,value:{document:b}}=m.getNext();if(!l.isPrefixOf(v.path))break;v.path.length>l.length+1||Jl(NE(b),r)<=0||(i.has(b.key)||tm(t,b))&&(a=a.insert(b.key,b.mutableCopy()))}return le.resolve(a)}getAllFromCollectionGroup(e,t,r,i){ct()}Cs(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new aN(this)}getSize(e){return le.resolve(this.size)}}class aN extends RT{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class LO{constructor(e){this.persistence=e,this.xs=new Wa(t=>sc(t),Jg),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.Ns=0,this.ks=new tv,this.targetCount=0,this.Ms=Yu.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),le.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Yu(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Fn(t),le.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.xs.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.xs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),le.waitFor(a).next(()=>i)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),le.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.ks.containsKey(t))}}class nv{constructor(e,t){this.$s={},this.overlays={},this.Os=new ro(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new LO(this),this.indexManager=new JM,this.remoteDocumentCache=new oN(r=>this.referenceDelegate.Ls(r)),this.serializer=new wT(t),this.qs=new sN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new PT,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new OT(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Ue("MemoryPersistence","Starting transaction:",e);const i=new VO(this.Os.next());return this.referenceDelegate.Us(),r(i).next(a=>this.referenceDelegate.Ks(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Gs(e,t){return le.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class VO extends hb{constructor(e){super(),this.currentSequenceNumber=e}}class N0{constructor(e){this.persistence=e,this.Qs=new tv,this.js=null}static zs(e){return new N0(e)}get Ws(){if(this.js)return this.js;throw ct()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),le.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ws.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Ws,r=>{const i=et.fromPath(r);return this.Hs(e,i).next(a=>{a||t.removeEntry(i,St.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return le.or([()=>le.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class UO{constructor(e){this.serializer=e}O(e,t,r,i){const a=new PE("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yb,{unique:!0}),h.createObjectStore("documentMutations"),uN(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=le.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),uN(e)),l=l.next(()=>function(h){const m=h.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:St.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,m){return m.store("mutations").j().next(v=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yb,{unique:!0});const b=m.store("mutations"),S=v.map(x=>b.put(x));return le.waitFor(S)})}(e,a))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Ys(a))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(a)))),r<7&&i>=7&&(l=l.next(()=>this.Zs(a))),r<8&&i>=8&&(l=l.next(()=>this.ti(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.ei(a))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const m=h.createObjectStore("documentOverlays",{keyPath:Db});m.createIndex("collectionPathOverlayIndex",bb,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",Tb,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const m=h.createObjectStore("remoteDocumentsV14",{keyPath:T_});m.createIndex("documentKeyIndex",pM),m.createIndex("collectionGroupIndex",vb)}(e)).next(()=>this.ni(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.si(e,a))),r<15&&i>=15&&(l=l.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:FE}).createIndex("sequenceNumberIndex",LE,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:Ib}).createIndex("documentKeyIndex",Cb,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=X_(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>le.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(h=>le.forEach(h,m=>{bt(m.userId===a.userId);const v=cc(this.serializer,m);return ST(e,a.userId,v).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.X((l,h)=>{const m=new In(l),v=[0,Ti(m)];a.push(t.get(v).next(b=>b?le.resolve():t.put({targetId:0,path:Ti(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>le.waitFor(a))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:mM});const r=t.store("collectionParents"),i=new I0,a=l=>{if(i.add(l)){const h=l.lastSegment(),m=l.popLast();return r.put({collectionId:h,parent:Ti(m)})}};return t.store("remoteDocuments").X({Y:!0},(l,h)=>{const m=new In(l);return a(m.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,h,m],v)=>{const b=Jo(h);return a(b.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const a=Bf(i),l=z_(this.serializer,a);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((a,l)=>{const h=t.store("remoteDocumentsV14"),m=(v=l,v.document?new et(In.fromString(v.document.name).popFirst(5)):v.noDocument?et.fromSegments(v.noDocument.path):v.unknownDocument?et.fromSegments(v.unknownDocument.path):ct()).path.toArray();var v;const b={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(b))}).next(()=>le.waitFor(i))}si(e,t){const r=t.store("mutations"),i=MT(this.serializer),a=new nv(N0.zs,this.serializer.fe);return r.j().next(l=>{const h=new Map;return l.forEach(m=>{var v;let b=null!==(v=h.get(m.userId))&&void 0!==v?v:qt();cc(this.serializer,m).keys().forEach(S=>b=b.add(S)),h.set(m.userId,b)}),le.forEach(h,(m,v)=>{const b=new bi(v),S=jf.de(this.serializer,b),x=a.getIndexManager(b),H=J_.de(b,this.serializer,x,a.referenceDelegate);return new M0(i,H,S,x).recalculateAndSaveOverlaysForDocumentKeys(new BE(t,ro.ct),m).next()})})}}function uN(n){n.createObjectStore("targetDocuments",{keyPath:Eb}).createIndex("documentTargetsIndex",gM,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",wb,{unique:!0}),n.createObjectStore("targetGlobal")}const kT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class FT{constructor(e,t,r,i,a,l,h,m,v,b,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=a,this.window=l,this.document=h,this.ri=v,this.oi=b,this.ui=S,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=x=>Promise.resolve(),!FT.D())throw new Se(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nN(this,i),this.di=t+"main",this.serializer=new wT(m),this.wi=new So(this.di,this.ui,new UO(this.serializer)),this.Bs=new FO(this.referenceDelegate,this.serializer),this.remoteDocumentCache=MT(this.serializer),this.qs=new KM,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===b&&Xr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Se(he.FAILED_PRECONDITION,kT);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new ro(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,ye.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>P0(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(ec(e))return Ue("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ue("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return rv(e).get("owner").next(t=>le.resolve(this.Ri(t)))}Pi(e){return P0(e).delete(this.clientId)}bi(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Si(r,"clientMetadata");return i.j().next(a=>{const l=e.Si(a,18e5),h=a.filter(m=>-1===l.indexOf(m));return le.forEach(h,m=>i.delete(m.clientId)).next(()=>h)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?le.resolve(!0):rv(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Se(he.FAILED_PRECONDITION,kT);return!1}}return!(!this.networkEnabled||!this.inForeground)||P0(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ue("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new BE(t,ro.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>P0(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return J_.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new kO(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return jf.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Ue("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.ui)?yM:14===l?Ab:13===l?UE:12===l?Sb:11===l?VE:void ct();var l;let h;return this.wi.runTransaction(e,i,a,m=>(h=new BE(m,this.Os?this.Os.next():ro.ct),"readwrite-primary"===t?this.Ti(h).next(v=>!!v||this.Ei(h)).next(v=>{if(!v)throw Xr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Se(he.FAILED_PRECONDITION,db);return r(h)}).next(v=>this.vi(h).next(()=>v)):this.Oi(h).next(()=>r(h)))).then(m=>(h.raiseOnCommittedEvent(),m))}Oi(e){return rv(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Se(he.FAILED_PRECONDITION,kT)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return rv(e).put("owner",t)}static D(){return So.D()}Ai(e){const t=rv(e);return t.get("owner").next(r=>this.Ri(r)?(Ue("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Xr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,L.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Ue("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Xr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Xr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function rv(n){return Si(n,"owner")}function P0(n){return Si(n,"clientMetadata")}function iv(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class mm{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=qt(),i=qt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new mm(e,t.fromCache,r,i)}}class O0{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(a=>a||this.Gi(e,t,i,r)).next(a=>a||this.Qi(e,t))}Ki(e,t){if($b(t))return le.resolve(null);let r=vs(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=P_(t,null,"F"),r=vs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=qt(...a);return this.Ui.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(m=>{const v=this.ji(t,h);return this.zi(t,v,l,m.readTime)?this.Ki(e,P_(t,null,"F")):this.Wi(e,v,t,m)}))})))}Gi(e,t,r,i){return $b(t)||i.isEqual(St.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(a=>{const l=this.ji(t,a);return this.zi(t,l,r,i)?this.Qi(e,t):(I_()<=Ci.in.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),k_(t)),this.Wi(e,l,t,cb(i,-1)))})}ji(e,t){let r=new cr(Af(e));return t.forEach((i,a)=>{tm(e,a)&&(r=r.add(a))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Qi(e,t){return I_()<=Ci.in.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",k_(t)),this.Ui.getDocumentsMatchingQuery(e,t,Vs.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class lN{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new er($t),this.Yi=new Wa(a=>sc(a),Jg),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new M0(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function ym(n,e,t,r){return new lN(n,e,t,r)}function LT(n,e){return VT.apply(this,arguments)}function VT(){return VT=(0,ye.Z)(function*(n,e){const t=it(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],h=[];let m=qt();for(const v of i){l.push(v.batchId);for(const b of v.mutations)m=m.add(b.key)}for(const v of a){h.push(v.batchId);for(const b of v.mutations)m=m.add(b.key)}return t.localDocuments.getDocuments(r,m).next(v=>({er:v,removedBatchIds:l,addedBatchIds:h}))})})}),VT.apply(this,arguments)}function cN(n){const e=it(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function BT(n,e,t){let r=qt(),i=qt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=ws();return t.forEach((h,m)=>{const v=a.get(h);m.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(h)),m.isNoDocument()&&m.version.isEqual(St.min())?(e.removeEntry(h,m.readTime),l=l.insert(h,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||0===m.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(m),l=l.insert(h,m)):Ue("LocalStore","Ignoring outdated watch update for ",h,". Current version:",v.version," Watch version:",m.version)}),{nr:l,sr:i}})}function dN(n,e){const t=it(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Wf(n,e){const t=it(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(a=>a?(i=a,le.resolve(i)):t.Bs.allocateTargetId(r).next(l=>(i=new Za(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function _m(n,e,t){return k0.apply(this,arguments)}function k0(){return k0=(0,ye.Z)(function*(n,e,t){const r=it(n),i=r.Ji.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!ec(l))throw l;Ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),k0.apply(this,arguments)}function vm(n,e,t){const r=it(n);let i=St.min(),a=qt();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,m,v){const b=it(h),S=b.Yi.get(v);return void 0!==S?le.resolve(b.Ji.get(S)):b.Bs.getTargetData(m,v)}(r,l,vs(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,h.targetId).next(m=>{a=m})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?i:St.min(),t?a:qt())).next(h=>(Mo(r,zb(e),h),{documents:h,ir:a})))}function F0(n,e){const t=it(n),r=it(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.le(a,e).next(l=>l?l.target:null))}function hN(n,e){const t=it(n),r=t.Xi.get(e)||St.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,cb(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Mo(t,e,i),i))}function Mo(n,e,t){let r=n.Xi.get(e)||St.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Xi.set(e,r)}function wm(){return wm=(0,ye.Z)(function*(n,e,t,r){const i=it(n);let a=qt(),l=ws();for(const v of t){const b=e.rr(v.metadata.name);v.document&&(a=a.add(b));const S=e.ur(v);S.setReadTime(e.cr(v.metadata.readTime)),l=l.insert(b,S)}const h=i.Zi.newChangeBuffer({trackRemovals:!0}),m=yield Wf(i,(v=r,vs(Gu(In.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>BT(v,h,l).next(b=>(h.apply(v),b)).next(b=>i.Bs.removeMatchingKeysForTargetId(v,m.targetId).next(()=>i.Bs.addMatchingKeys(v,a,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,b.nr,b.sr)).next(()=>b.nr)))}),wm.apply(this,arguments)}function jT(n,e){return L0.apply(this,arguments)}function L0(){return L0=(0,ye.Z)(function*(n,e,t=qt()){const r=yield Wf(n,vs(W_(e.bundledQuery))),i=it(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=Br(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.qs.saveNamedQuery(a,e);const h=r.withResumeToken(pi.EMPTY_BYTE_STRING,l);return i.Ji=i.Ji.insert(h.targetId,h),i.Bs.updateTargetData(a,h).next(()=>i.Bs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Bs.addMatchingKeys(a,t,r.targetId)).next(()=>i.qs.saveNamedQuery(a,e))})}),L0.apply(this,arguments)}function pN(n,e){return`firestore_clients_${n}_${e}`}function is(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function V0(n,e){return`firestore_targets_${n}_${e}`}class qf{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Se(i.error.code,i.error.message))),l?new qf(e,t,i.state,a):(Xr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Em{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Se(r.error.code,r.error.message))),a?new Em(e,r.state,i):(Xr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=nm();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=gb(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new sv(e,a):(Xr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Im{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Im(t.clientId,t.onlineState):(Xr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ov{constructor(){this.activeTargetIds=nm()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class av{constructor(e,t,r,i,a){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new er($t),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=pN(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new ov),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const a=e.getItem(pN(e.persistenceKey,i));if(a){const l=sv.ar(i,a);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(V0(this.persistenceKey,e));if(r){const i=Em.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(V0(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ue("SharedClientState","READ",e,t),t}setItem(e,t){Ue("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ue("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ue("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Xr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(a){let l=ro.ct;if(null!=a)try{const h=JSON.parse(a);bt("number"==typeof h),l=h}catch(h){Xr("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==ro.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Qr(a)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new qf(this.currentUser,e,t,r),a=is(this.persistenceKey,this.currentUser,e);this.setItem(a,i.hr())}Cr(e){const t=is(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=V0(this.persistenceKey,e),a=new Em(e,t,r);this.setItem(i,a.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return sv.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return qf.ar(new bi(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return Em.ar(i,t)}br(e){return Im.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Ue("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),l=[],h=[];return a.forEach(m=>{i.has(m)||l.push(m)}),i.forEach(m=>{a.has(m)||h.push(m)}),this.syncEngine.Wr(l,h).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=nm();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class HT{constructor(){this.Hr=new ov,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new ov,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class $T{Yr(e){}shutdown(){}}class U0{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Cm=null;function uv(){return null===Cm?Cm=268435456+Math.round(2147483648*Math.random()):Cm++,"0x"+Cm.toString(16)}const gN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class GT{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const ss="WebChannelConnection";class B0 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,a){const l=uv(),h=this.To(e,t);Ue("RestConnection",`Sending RPC '${e}' ${l}:`,h,r);const m={};return this.Eo(m,i,a),this.Ao(e,h,m,r).then(v=>(Ue("RestConnection",`Received RPC '${e}' ${l}: `,v),v),v=>{throw to("RestConnection",`RPC '${e}' ${l} failed with error: `,v,"url: ",h,"request:",r),v})}vo(e,t,r,i,a,l){return this.Io(e,t,r,i,a)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ad,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}To(e,t){return`${this.mo}/v1/${t}:${gN[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const a=uv();return new Promise((l,h)=>{const m=new bE;m.setWithCredentials(!0),m.listenOnce(XD.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Vg.NO_ERROR:const b=m.getResponseJson();Ue(ss,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(b)),l(b);break;case Vg.TIMEOUT:Ue(ss,`RPC '${e}' ${a} timed out`),h(new Se(he.DEADLINE_EXCEEDED,"Request time out"));break;case Vg.HTTP_ERROR:const S=m.getStatus();if(Ue(ss,`RPC '${e}' ${a} failed with status:`,S,"response text:",m.getResponseText()),S>0){let x=m.getResponseJson();Array.isArray(x)&&(x=x[0]);const H=x?.error;if(H&&H.status&&H.message){const Z=function(se){const ce=se.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(ce)>=0?ce:he.UNKNOWN}(H.status);h(new Se(Z,H.message))}else h(new Se(he.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new Se(he.UNAVAILABLE,"Connection failed."));break;default:ct()}}finally{Ue(ss,`RPC '${e}' ${a} completed.`)}});const v=JSON.stringify(i);Ue(ss,`RPC '${e}' ${a} sending request:`,i),m.send(t,"POST",v,r,15)})}Ro(e,t,r){const i=uv(),a=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=w_(),h=E_(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;void 0!==v&&(m.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(m.xmlHttpFactory=new cM({})),this.Eo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const b=a.join("");Ue(ss,`Creating RPC '${e}' stream ${i}: ${b}`,m);const S=l.createWebChannel(b,m);let x=!1,H=!1;const Z=new GT({ro:ce=>{H?Ue(ss,`Not sending because RPC '${e}' stream ${i} is closed:`,ce):(x||(Ue(ss,`Opening RPC '${e}' stream ${i} transport.`),S.open(),x=!0),Ue(ss,`RPC '${e}' stream ${i} sending:`,ce),S.send(ce))},oo:()=>S.close()}),se=(ce,We,ut)=>{ce.listen(We,He=>{try{ut(He)}catch(lt){setTimeout(()=>{throw lt},0)}})};return se(S,Cf.EventType.OPEN,()=>{H||Ue(ss,`RPC '${e}' stream ${i} transport opened.`)}),se(S,Cf.EventType.CLOSE,()=>{H||(H=!0,Ue(ss,`RPC '${e}' stream ${i} transport closed`),Z.wo())}),se(S,Cf.EventType.ERROR,ce=>{H||(H=!0,to(ss,`RPC '${e}' stream ${i} transport errored:`,ce),Z.wo(new Se(he.UNAVAILABLE,"The operation could not be completed")))}),se(S,Cf.EventType.MESSAGE,ce=>{var We;if(!H){const ut=ce.data[0];bt(!!ut);const lt=ut.error||(null===(We=ut[0])||void 0===We?void 0:We.error);if(lt){Ue(ss,`RPC '${e}' stream ${i} received error:`,lt);const Vt=lt.status;let Kt=function(ra){const nw=Ur[ra];if(void 0!==nw)return l0(nw)}(Vt),Mi=lt.message;void 0===Kt&&(Kt=he.INTERNAL,Mi="Unknown error status: "+Vt+" with message "+lt.message),H=!0,Z.wo(new Se(Kt,Mi)),S.close()}else Ue(ss,`RPC '${e}' stream ${i} received:`,ut),Z._o(ut)}}),se(h,lM.STAT_EVENT,ce=>{ce.stat===JD.PROXY?Ue(ss,`RPC '${e}' stream ${i} detected buffering proxy`):ce.stat===JD.NOPROXY&&Ue(ss,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{Z.fo()},0),Z}}function Xu(){return typeof window<"u"?window:null}function Dm(){return typeof document<"u"?document:null}function Gd(n){return new jM(n,!0)}class bm{constructor(e,t,r=1e3,i=1.5,a=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class zT{constructor(e,t,r,i,a,l,h,m){this.ii=e,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new bm(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,ye.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,ye.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(Xr(t.toString()),Xr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===he.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Se(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,ye.Z)(function*(){e.state=0,e.start()}))}tu(e){return Ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jO extends zT{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function cm(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:ct(),i=e.targetChange.targetIds||[],a=function(m,v){return m.useProto3Json?(bt(void 0===v||"string"==typeof v),pi.fromBase64String(v||"")):(bt(void 0===v||v instanceof Uint8Array),pi.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(m){const v=void 0===m.code?he.UNKNOWN:l0(m.code);return new Se(v,m.message||"")}(l);t=new uT(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=qa(n,r.document.name),a=Br(r.document.updateTime),l=r.document.createTime?Br(r.document.createTime):St.min(),h=new ns({mapValue:{fields:r.document.fields}}),m=tr.newFoundDocument(i,a,l,h);t=new d0(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,i=qa(n,r.document),a=r.readTime?Br(r.readTime):St.min(),l=tr.newNoDocument(i,a);t=new d0([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=qa(n,r.document);t=new d0([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ct();{const r=e.filter,{count:i=0,unchangedNames:a}=r,l=new rT(i,a);t=new aT(r.targetId,l)}}var m;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return St.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?St.min():a.readTime?Br(a.readTime):St.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=lm(this.serializer),t.addTarget=function(i,a){let l;const h=a.target;if(l=x_(h)?{documents:mT(i,h)}:{query:fm(i,h)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=Ff(i,a.resumeToken);const m=h0(i,a.expectedCount);null!==m&&(l.expectedCount=m)}else if(a.snapshotVersion.compareTo(St.min())>0){l.readTime=kf(i,a.snapshotVersion.toTimestamp());const m=h0(i,a.expectedCount);null!==m&&(l.expectedCount=m)}return l}(this.serializer,e);const r=function GM(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ct()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=lm(this.serializer),t.removeTarget=e,this.Wo(t)}}class WT extends zT{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function Ka(n,e){return n&&n.length>0?(bt(void 0!==e),n.map(t=>function(r,i){let a=Br(r.updateTime?r.updateTime:i);return a.isEqual(St.min())&&(a=Br(i)),new xM(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Br(e.commitTime);return this.listener.cu(r,t)}return bt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=lm(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>dm(this.serializer,r))};this.Wo(t)}}class mN extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Se(he.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Io(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Se(he.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.vo(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Se(he.UNKNOWN,a.toString())})}terminate(){this.lu=!0}}class _N{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Xr(t),this.mu=!1):Ue("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class qT{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr(h=>{r.enqueueAndForget((0,ye.Z)(function*(){var m;Ju(l)&&(Ue("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,ye.Z)(function*(v){const b=it(v);b.vu.add(4),yield Kf(b),b.bu.set("Unknown"),b.vu.delete(4),yield lv(b)}),function(v){return m.apply(this,arguments)})(l))}))}),this.bu=new _N(r,i)}}function lv(n){return cv.apply(this,arguments)}function cv(){return cv=(0,ye.Z)(function*(n){if(Ju(n))for(const e of n.Ru)yield e(!0)}),cv.apply(this,arguments)}function Kf(n){return dv.apply(this,arguments)}function dv(){return dv=(0,ye.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),dv.apply(this,arguments)}function H0(n,e){const t=it(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),fv(t)?G0(t):qd(t).Ko()&&hv(t,e))}function zd(n,e){const t=it(n),r=qd(t);t.Au.delete(e),r.Ko()&&$0(t,e),0===t.Au.size&&(r.Ko()?r.jo():Ju(t)&&t.bu.set("Unknown"))}function hv(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(St.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}qd(n).su(e)}function $0(n,e){n.Vu.qt(e),qd(n).iu(e)}function G0(n){n.Vu=new LM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),qd(n).start(),n.bu.gu()}function fv(n){return Ju(n)&&!qd(n).Uo()&&n.Au.size>0}function Ju(n){return 0===it(n).vu.size}function Wd(n){n.Vu=void 0}function pv(n){return gv.apply(this,arguments)}function gv(){return gv=(0,ye.Z)(function*(n){n.Au.forEach((e,t)=>{hv(n,e)})}),gv.apply(this,arguments)}function KT(n,e){return z0.apply(this,arguments)}function z0(){return z0=(0,ye.Z)(function*(n,e){Wd(n),fv(n)?(n.bu.Iu(e),G0(n)):n.bu.set("Unknown")}),z0.apply(this,arguments)}function vN(n,e,t){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,ye.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof uT&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(i,a){const l=a.cause;for(const h of a.targetIds)i.Au.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i.Au.delete(h),i.Vu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Tm(n,r)}else if(e instanceof d0?n.Vu.Ht(e):e instanceof aT?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(St.min()))try{const r=yield cN(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.Vu.ce(a);return l.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const v=i.Au.get(m);v&&i.Au.set(m,v.withResumeToken(h.resumeToken,a))}}),l.targetMismatches.forEach((h,m)=>{const v=i.Au.get(h);if(!v)return;i.Au.set(h,v.withResumeToken(pi.EMPTY_BYTE_STRING,v.snapshotVersion)),$0(i,h);const b=new Za(v.target,h,m,v.sequenceNumber);hv(i,b)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Ue("RemoteStore","Failed to raise snapshot:",r),yield Tm(n,r)}var r}),ZT.apply(this,arguments)}function Tm(n,e,t){return W0.apply(this,arguments)}function W0(){return W0=(0,ye.Z)(function*(n,e,t){if(!ec(e))throw e;n.vu.add(1),yield Kf(n),n.bu.set("Offline"),t||(t=()=>cN(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Ue("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield lv(n)}))}),W0.apply(this,arguments)}function YT(n,e){return e().catch(t=>Tm(n,t,e))}function Zf(n){return QT.apply(this,arguments)}function QT(){return QT=(0,ye.Z)(function*(n){const e=it(n),t=Ya(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;HO(e);)try{const i=yield dN(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,XT(e,i)}catch(i){yield Tm(e,i)}JT(e)&&eS(e)}),QT.apply(this,arguments)}function HO(n){return Ju(n)&&n.Eu.length<10}function XT(n,e){n.Eu.push(e);const t=Ya(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function JT(n){return Ju(n)&&!Ya(n).Uo()&&n.Eu.length>0}function eS(n){Ya(n).start()}function wN(n){return tS.apply(this,arguments)}function tS(){return tS=(0,ye.Z)(function*(n){Ya(n).hu()}),tS.apply(this,arguments)}function $O(n){return nS.apply(this,arguments)}function nS(){return nS=(0,ye.Z)(function*(n){const e=Ya(n);for(const t of n.Eu)e.uu(t.mutations)}),nS.apply(this,arguments)}function GO(n,e,t){return rS.apply(this,arguments)}function rS(){return rS=(0,ye.Z)(function*(n,e,t){const r=n.Eu.shift(),i=V_.from(r,e,t);yield YT(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Zf(n)}),rS.apply(this,arguments)}function EN(n,e){return Yf.apply(this,arguments)}function Yf(){return Yf=(0,ye.Z)(function*(n,e){var t;e&&Ya(n).ou&&(yield(t=(0,ye.Z)(function*(r,i){if(u0(a=i.code)&&a!==he.ABORTED){const l=r.Eu.shift();Ya(r).Qo(),yield YT(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield Zf(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),JT(n)&&eS(n)}),Yf.apply(this,arguments)}function iS(n,e){return q0.apply(this,arguments)}function q0(){return q0=(0,ye.Z)(function*(n,e){const t=it(n);t.asyncQueue.verifyOperationInProgress(),Ue("RemoteStore","RemoteStore received new credentials");const r=Ju(t);t.vu.add(3),yield Kf(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield lv(t)}),q0.apply(this,arguments)}function mv(n,e){return el.apply(this,arguments)}function el(){return el=(0,ye.Z)(function*(n,e){const t=it(n);e?(t.vu.delete(2),yield lv(t)):e||(t.vu.add(2),yield Kf(t),t.bu.set("Unknown"))}),el.apply(this,arguments)}function qd(n){return n.Su||(n.Su=function(e,t,r){const i=it(e);return i.fu(),new jO(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:pv.bind(null,n),ao:KT.bind(null,n),nu:vN.bind(null,n)}),n.Ru.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Su.Qo(),fv(n)?G0(n):n.bu.set("Unknown")):(yield n.Su.stop(),Wd(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Ya(n){return n.Du||(n.Du=function(e,t,r){const i=it(e);return i.fu(),new WT(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:wN.bind(null,n),ao:EN.bind(null,n),au:$O.bind(null,n),cu:GO.bind(null,n)}),n.Ru.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Du.Qo(),yield Zf(n)):(yield n.Du.stop(),n.Eu.length>0&&(Ue("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class Sm{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,h=new Sm(e,t,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Se(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qf(n,e){if(Xr("AsyncQueue",`${e}: ${n}`),ec(n))return new Se(he.UNAVAILABLE,`${e}: ${n}`);throw n}class hc{constructor(e){this.comparator=e?(t,r)=>e(t,r)||et.comparator(t.key,r.key):(t,r)=>et.comparator(t.key,r.key),this.keyedMap=Rf(),this.sortedSet=new er(this.comparator)}static emptySet(e){return new hc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof hc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new hc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class yv{constructor(){this.Cu=new er(et.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):ct():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class tl{constructor(e,t,r,i,a,l,h,m,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(h=>{l.push({type:0,doc:h})}),new tl(e,t,hc.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&O_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class zO{constructor(){this.Nu=void 0,this.listeners=[]}}class WO{constructor(){this.queries=new Wa(e=>Gb(e),O_),this.onlineState="Unknown",this.ku=new Set}}function sS(n,e){return _v.apply(this,arguments)}function _v(){return _v=(0,ye.Z)(function*(n,e){const t=it(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new zO),i)try{a.Nu=yield t.onListen(r)}catch(l){const h=Qf(l,`Initialization of query '${k_(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.Mu(t.onlineState),a.Nu&&e.$u(a.Nu)&&vv(t)}),_v.apply(this,arguments)}function K0(n,e){return Z0.apply(this,arguments)}function Z0(){return Z0=(0,ye.Z)(function*(n,e){const t=it(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),Z0.apply(this,arguments)}function IN(n,e){const t=it(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.$u(i)&&(r=!0);l.Nu=i}}r&&vv(t)}function CN(n,e,t){const r=it(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function vv(n){n.ku.forEach(e=>{e.next()})}class wv{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new tl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=tl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class oS{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class aS{constructor(e){this.serializer=e}rr(e){return qa(this.serializer,e)}ur(e){return e.metadata.exists?gT(this.serializer,e.document,!1):tr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Br(e)}}class DN{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Y0(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=In.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new aS(this.serializer);for(const i of e)if(i.metadata.queries){const a=r.rr(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||qt()).add(a);t.set(l,h)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function fN(n,e,t,r){return wm.apply(this,arguments)}(e.localStore,new aS(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield jT(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function Y0(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Ev{constructor(e){this.key=e}}class bN{constructor(e){this.key=e}}class Q0{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=qt(),this.mutatedKeys=qt(),this.tc=Af(e),this.ec=new hc(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new yv,i=t?t.ec:this.ec;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,S)=>{const x=i.get(b),H=tm(this.query,S)?S:null,Z=!!x&&this.mutatedKeys.has(x.key),se=!!H&&(H.hasLocalMutations||this.mutatedKeys.has(H.key)&&H.hasCommittedMutations);let ce=!1;x&&H?x.data.isEqual(H.data)?Z!==se&&(r.track({type:3,doc:H}),ce=!0):this.rc(x,H)||(r.track({type:2,doc:H}),ce=!0,(m&&this.tc(H,m)>0||v&&this.tc(H,v)<0)&&(h=!0)):!x&&H?(r.track({type:0,doc:H}),ce=!0):x&&!H&&(r.track({type:1,doc:x}),ce=!0,(m||v)&&(h=!0)),ce&&(H?(l=l.add(H),a=se?a.add(b):a.delete(b)):(l=l.delete(b),a=a.delete(b)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const b="F"===this.query.limitType?l.last():l.first();l=l.delete(b.key),a=a.delete(b.key),r.track({type:1,doc:b})}return{ec:l,ic:r,zi:h,mutatedKeys:a}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const a=e.ic.xu();a.sort((v,b)=>function(S,x){const H=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ct()}};return H(S)-H(x)}(v.type,b.type)||this.tc(v.doc,b.doc)),this.oc(r);const l=t?this.uc():[],h=0===this.Zu.size&&this.current?1:0,m=h!==this.Xu;return this.Xu=h,0!==a.length||m?{snapshot:new tl(this.query,e.ec,i,a,e.mutatedKeys,0===h,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new yv,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=qt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new bN(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new Ev(r))}),t}hc(e){this.Yu=e.ir,this.Zu=qt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return tl.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class X0{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class TN{constructor(e){this.key=e,this.fc=!1}}class SN{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new Wa(h=>Gb(h),O_),this._c=new Map,this.mc=new Set,this.gc=new er(et.comparator),this.yc=new Map,this.Ic=new tv,this.Tc={},this.Ec=new Map,this.Ac=Yu.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function qO(n,e){return uS.apply(this,arguments)}function uS(){return uS=(0,ye.Z)(function*(n,e){const t=D(n);let r,i;const a=t.wc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.lc();else{const l=yield Wf(t.localStore,vs(e)),h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield J0(t,e,r,"current"===h,l.resumeToken),t.isPrimaryClient&&H0(t.remoteStore,l)}return i}),uS.apply(this,arguments)}function J0(n,e,t,r,i){return eI.apply(this,arguments)}function eI(){return eI=(0,ye.Z)(function*(n,e,t,r,i){n.Rc=(S,x,H)=>{return(Z=(0,ye.Z)(function*(se,ce,We,ut){let He=ce.view.sc(We);He.zi&&(He=yield vm(se.localStore,ce.query,!1).then(({documents:Kt})=>ce.view.sc(Kt,He)));const lt=ut&&ut.targetChanges.get(ce.targetId),Vt=ce.view.applyChanges(He,se.isPrimaryClient,lt);return sI(se,ce.targetId,Vt.cc),Vt.snapshot}),function(se,ce,We,ut){return Z.apply(this,arguments)})(n,S,x,H);var Z};const a=yield vm(n.localStore,e,!0),l=new Q0(e,a.ir),h=l.sc(a.documents),m=um.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=l.applyChanges(h,n.isPrimaryClient,m);sI(n,t,v.cc);const b=new X0(e,t,l);return n.wc.set(e,b),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),v.snapshot}),eI.apply(this,arguments)}function AN(n,e){return tI.apply(this,arguments)}function tI(){return tI=(0,ye.Z)(function*(n,e){const t=it(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(a=>!O_(a,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield _m(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),zd(t.remoteStore,r.targetId),nl(t,r.targetId)}).catch(Uu))):(nl(t,r.targetId),yield _m(t.localStore,r.targetId,!0))}),tI.apply(this,arguments)}function Iv(){return Iv=(0,ye.Z)(function*(n,e,t){const r=A(n);try{const i=yield function(a,l){const h=it(a),m=Jn.now(),v=l.reduce((x,H)=>x.add(H.key),qt());let b,S;return h.persistence.runTransaction("Locally write mutations","readwrite",x=>{let H=ws(),Z=qt();return h.Zi.getEntries(x,v).next(se=>{H=se,H.forEach((ce,We)=>{We.isValidDocument()||(Z=Z.add(ce))})}).next(()=>h.localDocuments.getOverlayedDocuments(x,H)).next(se=>{b=se;const ce=[];for(const We of l){const ut=s0(We,b.get(We.key).overlayedDocument);null!=ut&&ce.push(new js(We.key,ut,HE(ut.value.mapValue),nr.exists(!0)))}return h.mutationQueue.addMutationBatch(x,m,ce,l)}).next(se=>{S=se;const ce=se.applyToLocalDocumentSet(b,Z);return h.documentOverlayCache.saveOverlays(x,se.batchId,ce)})}).then(()=>({batchId:S.batchId,changes:qb(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,h){let m=a.Tc[a.currentUser.toKey()];m||(m=new er($t)),m=m.insert(l,h),a.Tc[a.currentUser.toKey()]=m}(r,i.batchId,t),yield rl(r,i.changes),yield Zf(r.remoteStore)}catch(i){const a=Qf(i,"Failed to persist write");t.reject(a)}}),Iv.apply(this,arguments)}function RN(n,e){return nI.apply(this,arguments)}function nI(){return nI=(0,ye.Z)(function*(n,e){const t=it(n);try{const r=yield function UT(n,e){const t=it(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const h=[];e.targetChanges.forEach((b,S)=>{const x=i.get(S);if(!x)return;h.push(t.Bs.removeMatchingKeys(a,b.removedDocuments,S).next(()=>t.Bs.addMatchingKeys(a,b.addedDocuments,S)));let H=x.withSequenceNumber(a.currentSequenceNumber);var Z,se,ce;null!==e.targetMismatches.get(S)?H=H.withResumeToken(pi.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):b.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(b.resumeToken,r)),i=i.insert(S,H),se=H,ce=b,(0===(Z=x).resumeToken.approximateByteSize()||se.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||ce.addedDocuments.size+ce.modifiedDocuments.size+ce.removedDocuments.size>0)&&h.push(t.Bs.updateTargetData(a,H))});let m=ws(),v=qt();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,b))}),h.push(BT(a,l,e.documentUpdates).next(b=>{m=b.nr,v=b.sr})),!r.isEqual(St.min())){const b=t.Bs.getLastRemoteSnapshotVersion(a).next(S=>t.Bs.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(b)}return le.waitFor(h).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,m,v)).next(()=>m)}).then(a=>(t.Ji=i,a))}(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.yc.get(a);l&&(bt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.fc=!0:i.modifiedDocuments.size>0?bt(l.fc):i.removedDocuments.size>0&&(bt(l.fc),l.fc=!1))}),yield rl(t,r,e)}catch(r){yield Uu(r)}}),nI.apply(this,arguments)}function Cv(n,e,t){const r=it(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((a,l)=>{const h=l.view.Mu(e);h.snapshot&&i.push(h.snapshot)}),function(a,l){const h=it(a);h.onlineState=l;let m=!1;h.queries.forEach((v,b)=>{for(const S of b.listeners)S.Mu(l)&&(m=!0)}),m&&vv(h)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function cS(n,e,t){return Dv.apply(this,arguments)}function Dv(){return Dv=(0,ye.Z)(function*(n,e,t){const r=it(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),a=i&&i.key;if(a){let l=new er(et.comparator);l=l.insert(a,tr.newNoDocument(a,St.min()));const h=qt().add(a),m=new am(St.min(),new Map,new er($t),l,h);yield RN(r,m),r.gc=r.gc.remove(a),r.yc.delete(e),fS(r)}else yield _m(r.localStore,e,!1).then(()=>nl(r,e,t)).catch(Uu)}),Dv.apply(this,arguments)}function MN(n,e){return Am.apply(this,arguments)}function Am(){return Am=(0,ye.Z)(function*(n,e){const t=it(n),r=e.batch.batchId;try{const i=yield function BO(n,e){const t=it(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,h,m,v){const b=m.batch,S=b.keys();let x=le.resolve();return S.forEach(H=>{x=x.next(()=>v.getEntry(h,H)).next(Z=>{const se=m.docVersions.get(H);bt(null!==se),Z.version.compareTo(se)<0&&(b.applyToRemoteDocument(Z,m),Z.isValidDocument()&&(Z.setReadTime(m.commitVersion),v.addEntry(Z)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(h,b))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let h=qt();for(let m=0;m<l.mutationResults.length;++m)l.mutationResults[m].transformResults.length>0&&(h=h.add(l.batch.mutations[m].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);iI(t,r,null),hS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield rl(t,i)}catch(i){yield Uu(i)}}),Am.apply(this,arguments)}function NN(n,e,t){return rI.apply(this,arguments)}function rI(){return rI=(0,ye.Z)(function*(n,e,t){const r=it(n);try{const i=yield function(a,l){const h=it(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return h.mutationQueue.lookupMutationBatch(m,l).next(b=>(bt(null!==b),v=b.keys(),h.mutationQueue.removeMutationBatch(m,b))).next(()=>h.mutationQueue.performConsistencyCheck(m)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(m,v,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>h.localDocuments.getDocuments(m,v))})}(r.localStore,e);iI(r,e,t),hS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield rl(r,i)}catch(i){yield Uu(i)}}),rI.apply(this,arguments)}function bv(){return bv=(0,ye.Z)(function*(n,e){const t=it(n);Ju(t.remoteStore)||Ue("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=it(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=Qf(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),bv.apply(this,arguments)}function hS(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function iI(n,e,t){const r=it(n);let i=r.Tc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function nl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||xN(n,r)})}function xN(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(zd(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),fS(n))}function sI(n,e,t){for(const r of t)r instanceof Ev?(n.Ic.addReference(r.key,e),KO(n,r)):r instanceof bN?(Ue("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||xN(n,r.key)):ct()}function KO(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Ue("SyncEngine","New document in limbo: "+t),n.mc.add(r),fS(n))}function fS(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new et(In.fromString(e)),r=n.Ac.next();n.yc.set(r,new TN(t)),n.gc=n.gc.insert(t,r),H0(n.remoteStore,new Za(vs(Gu(t.path)),r,"TargetPurposeLimboResolution",ro.ct))}}function rl(n,e,t){return pS.apply(this,arguments)}function pS(){return pS=(0,ye.Z)(function*(n,e,t){const r=it(n),i=[],a=[],l=[];var h;r.wc.isEmpty()||(r.wc.forEach((h,m)=>{l.push(r.Rc(m,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,v?.fromCache?"not-current":"current"),v){i.push(v);const b=mm.Li(m.targetId,v);a.push(b)}}))}),yield Promise.all(l),r.dc.nu(i),yield(h=(0,ye.Z)(function*(m,v){const b=it(m);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>le.forEach(v,x=>le.forEach(x.Fi,H=>b.persistence.referenceDelegate.addReference(S,x.targetId,H)).next(()=>le.forEach(x.Bi,H=>b.persistence.referenceDelegate.removeReference(S,x.targetId,H)))))}catch(S){if(!ec(S))throw S;Ue("LocalStore","Failed to update sequence numbers: "+S)}for(const S of v){const x=S.targetId;if(!S.fromCache){const H=b.Ji.get(x),se=H.withLastLimboFreeSnapshotVersion(H.snapshotVersion);b.Ji=b.Ji.insert(x,se)}}}),function(m,v){return h.apply(this,arguments)})(r.localStore,a))}),pS.apply(this,arguments)}function ZO(n,e){return gS.apply(this,arguments)}function gS(){return gS=(0,ye.Z)(function*(n,e){const t=it(n);if(!t.currentUser.isEqual(e)){Ue("SyncEngine","User change. New user:",e.toKey());const r=yield LT(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(l=>{l.forEach(h=>{h.reject(new Se(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield rl(t,r.er)}var i}),gS.apply(this,arguments)}function YO(n,e){const t=it(n),r=t.yc.get(e);if(r&&r.fc)return qt().add(r.key);{let i=qt();const a=t._c.get(e);if(!a)return i;for(const l of a){const h=t.wc.get(l);i=i.unionWith(h.view.nc)}return i}}function PN(n,e){return mS.apply(this,arguments)}function mS(){return mS=(0,ye.Z)(function*(n,e){const t=it(n),r=yield vm(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&sI(t,e.targetId,i.cc),i}),mS.apply(this,arguments)}function QO(n,e){return yS.apply(this,arguments)}function yS(){return yS=(0,ye.Z)(function*(n,e){const t=it(n);return hN(t.localStore,e).then(r=>rl(t,r))}),yS.apply(this,arguments)}function XO(n,e,t,r){return _S.apply(this,arguments)}function _S(){return _S=(0,ye.Z)(function*(n,e,t,r){const i=it(n),a=yield function(l,h){const m=it(l),v=it(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",b=>v.Sn(b,h).next(S=>S?m.localDocuments.getDocuments(b,S):le.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield Zf(i.remoteStore):"acknowledged"===t||"rejected"===t?(iI(i,e,r||null),hS(i,e),h=e,it(it(i.localStore).mutationQueue).Cn(h)):ct(),yield rl(i,a)):Ue("SyncEngine","Cannot apply mutation batch with id: "+e)}),_S.apply(this,arguments)}function vS(){return vS=(0,ye.Z)(function*(n,e){const t=it(n);if(D(t),A(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield s(t,r.toArray());t.vc=!0,yield mv(t.remoteStore,!0);for(const a of i)H0(t.remoteStore,a)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(nl(t,l),_m(t.localStore,l,!0))),zd(t.remoteStore,l)}),yield i,yield s(t,r),function(a){const l=it(a);l.yc.forEach((h,m)=>{zd(l.remoteStore,m)}),l.Ic.Ts(),l.yc=new Map,l.gc=new er(et.comparator)}(t),t.vc=!1,yield mv(t.remoteStore,!1)}}),vS.apply(this,arguments)}function s(n,e,t){return o.apply(this,arguments)}function o(){return o=(0,ye.Z)(function*(n,e,t){const r=it(n),i=[],a=[];for(const l of e){let h;const m=r._c.get(l);if(m&&0!==m.length){h=yield Wf(r.localStore,vs(m[0]));for(const v of m){const b=r.wc.get(v),S=yield PN(r,b);S.snapshot&&a.push(S.snapshot)}}else{const v=yield F0(r.localStore,l);h=yield Wf(r.localStore,v),yield J0(r,u(v),l,!1,h.resumeToken)}i.push(h)}return r.dc.nu(a),i}),o.apply(this,arguments)}function u(n){return XE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function c(n){const e=it(n);return it(it(e.localStore).persistence).$i()}function d(n,e,t,r){return p.apply(this,arguments)}function p(){return p=(0,ye.Z)(function*(n,e,t,r){const i=it(n);if(i.vc)return void Ue("SyncEngine","Ignoring unexpected query state notification.");const a=i._c.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield hN(i.localStore,zb(a[0])),h=am.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,pi.EMPTY_BYTE_STRING);yield rl(i,l,h);break}case"rejected":yield _m(i.localStore,e,!0),nl(i,e,r);break;default:ct()}}),p.apply(this,arguments)}function _(n,e,t){return E.apply(this,arguments)}function E(){return E=(0,ye.Z)(function*(n,e,t){const r=D(n);if(r.vc){for(const i of e){if(r._c.has(i)){Ue("SyncEngine","Adding an already active target "+i);continue}const a=yield F0(r.localStore,i),l=yield Wf(r.localStore,a);yield J0(r,u(a),l.targetId,!1,l.resumeToken),H0(r.remoteStore,l)}for(const i of t)r._c.has(i)&&(yield _m(r.localStore,i,!1).then(()=>{zd(r.remoteStore,i),nl(r,i)}).catch(Uu))}}),E.apply(this,arguments)}function D(n){const e=it(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=RN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cS.bind(null,e),e.dc.nu=IN.bind(null,e.eventManager),e.dc.Pc=CN.bind(null,e.eventManager),e}function A(n){const e=it(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=MN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NN.bind(null,e),e}class j{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.serializer=Gd(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return ym(this.persistence,new O0,e.initialUser,this.serializer)}createPersistence(e){return new nv(N0.zs,this.serializer)}createSharedClientState(e){return new HT}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class te extends j{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield A(r.Vc.syncEngine),yield Zf(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return ym(this.persistence,new O0,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new b0(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new pb(t,this.persistence);return new fb(e.asyncQueue,r)}createPersistence(e){const t=iv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Gi.withCacheSize(this.cacheSizeBytes):Gi.DEFAULT;return new FT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Xu(),Dm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new HT}}class De extends te{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof av&&(r.sharedClientState.syncEngine={jr:XO.bind(null,i),zr:d.bind(null,i),Wr:_.bind(null,i),$i:c.bind(null,i),Qr:QO.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var a=(0,ye.Z)(function*(l){yield function ON(n,e){return vS.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}createSharedClientState(e){const t=Xu();if(!av.D(t))throw new Se(he.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=iv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new av(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Fe{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Cv(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=ZO.bind(null,r.syncEngine),yield mv(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new WO}createDatastore(e){const t=Gd(e.databaseInfo.databaseId),r=new B0(e.databaseInfo);return new mN(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>Cv(this.syncEngine,h,0),l=U0.D()?new U0:new $T,new qT(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,h,m,v){const b=new SN(r,i,a,l,h,m);return v&&(b.vc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=it(t);Ue("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Kf(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Qe(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class _t{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Xr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Ae{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Jr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const a=yield e.$c(i);return new oS(JSON.parse(a),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,ye.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Ot{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Se(he.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ye.Z)(function*(a,l){const h=it(a),m=lm(h.serializer)+"/documents",v={documents:l.map(H=>Lf(h.serializer,H))},b=yield h.vo("BatchGetDocuments",m,v,l.length),S=new Map;b.forEach(H=>{const Z=function $M(n,e){return"found"in e?function(t,r){bt(!!r.found);const i=qa(t,r.found.name),a=Br(r.found.updateTime),l=r.found.createTime?Br(r.found.createTime):St.min(),h=new ns({mapValue:{fields:r.found.fields}});return tr.newFoundDocument(i,a,l,h)}(n,e):"missing"in e?function(t,r){bt(!!r.missing),bt(!!r.readTime);const i=qa(t,r.missing),a=Br(r.readTime);return tr.newNoDocument(i,a)}(n,e):ct()}(h.serializer,H);S.set(Z.key.toString(),Z)});const x=[];return l.forEach(H=>{const Z=S.get(H.toString());bt(!!Z),x.push(Z)}),x}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new uc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=et.fromPath(i);e.mutations.push(new om(a,e.precondition(a)))}),yield(r=(0,ye.Z)(function*(i,a){const l=it(i),h=lm(l.serializer)+"/documents",m={writes:a.map(v=>dm(l.serializer,v))};yield l.Io("Commit",h,m)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ct();t=St.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Se(he.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(St.min())?nr.exists(!1):nr.updateTime(t):nr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(St.min()))throw new Se(he.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return nr.updateTime(t)}return nr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class an{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new bm(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,ye.Z)(function*(){const t=new Ot(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Uc(a)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!Bg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!u0(t)}return!1}}class Rn{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=bi.UNAUTHENTICATED,this.clientId=ub.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ye.Z)(function*(h){Ue("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ue("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Se(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Qf(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Hs(n,e){return Tv.apply(this,arguments)}function Tv(){return Tv=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ue("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ye.Z)(function*(a){r.isEqual(a)||(yield LT(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),Tv.apply(this,arguments)}function kN(n,e){return FN.apply(this,arguments)}function FN(){return FN=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield LN(n);Ue("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>iS(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>iS(e.remoteStore,a)),n._onlineComponents=e}),FN.apply(this,arguments)}function JO(n){return"FirebaseError"===n.name?n.code===he.FAILED_PRECONDITION||n.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function LN(n){return VN.apply(this,arguments)}function VN(){return VN=(0,ye.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ue("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Hs(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!JO(t))throw t;to("Error using user provided cache. Falling back to memory cache: "+t),yield Hs(n,new j)}}else Ue("FirestoreClient","Using default OfflineComponentProvider"),yield Hs(n,new j);return n._offlineComponents}),VN.apply(this,arguments)}function wS(n){return UN.apply(this,arguments)}function UN(){return UN=(0,ye.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ue("FirestoreClient","Using user provided OnlineComponentProvider"),yield kN(n,n._uninitializedComponentsProvider._online)):(Ue("FirestoreClient","Using default OnlineComponentProvider"),yield kN(n,new Fe))),n._onlineComponents}),UN.apply(this,arguments)}function ek(n){return LN(n).then(e=>e.persistence)}function ES(n){return LN(n).then(e=>e.localStore)}function tk(n){return wS(n).then(e=>e.remoteStore)}function BN(n){return wS(n).then(e=>e.syncEngine)}function Sv(n){return jN.apply(this,arguments)}function jN(){return jN=(0,ye.Z)(function*(n){const e=yield wS(n),t=e.eventManager;return t.onListen=qO.bind(null,e.syncEngine),t.onUnlisten=AN.bind(null,e.syncEngine),t}),jN.apply(this,arguments)}function rk(n,e,t={}){const r=new Jr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,a,l,h,m){const v=new _t({next:S=>{a.enqueueAndForget(()=>K0(i,b));const x=S.docs.has(l);!x&&S.fromCache?m.reject(new Se(he.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&S.fromCache&&h&&"server"===h.source?m.reject(new Se(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),b=new wv(Gu(l.path),v,{includeMetadataChanges:!0,Ku:!0});return sS(i,b)}(yield Sv(n),n.asyncQueue,e,t,r)})),r.promise}function ik(n,e,t={}){const r=new Jr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,a,l,h,m){const v=new _t({next:S=>{a.enqueueAndForget(()=>K0(i,b)),S.fromCache&&"server"===h.source?m.reject(new Se(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),b=new wv(l,v,{includeMetadataChanges:!0,Ku:!0});return sS(i,b)}(yield Sv(n),n.asyncQueue,e,t,r)})),r.promise}function sk(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const ok=new Map;function HN(n,e,t){if(!t)throw new Se(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ak(n,e,t,r){if(!0===e&&!0===r)throw new Se(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function uk(n){if(!et.isDocumentKey(n))throw new Se(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function lk(n){if(et.isDocumentKey(n))throw new Se(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function IS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ct()}function _n(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Se(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=IS(n);throw new Se(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ck(n,e){if(e<=0)throw new Se(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class dk{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Se(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Se(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ak("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=sk(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Se(he.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Se(he.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Se(he.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class oI{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dk({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Se(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Se(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dk(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new nb;switch(t.type){case"firstParty":return new ob(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Se(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ok.get(e);t&&(Ue("ComponentProvider","Removing Datastore"),ok.delete(e),t.terminate())}(this),Promise.resolve()}}class Rr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rr(this.firestore,e,this._key)}}class Es{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Es(this.firestore,e,this._query)}}class fc extends Es{constructor(e,t,r){super(e,t,Gu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rr(this.firestore,null,new et(e))}withConverter(e){return new fc(this.firestore,e,this._path)}}function fk(n,e,...t){if(n=(0,L.m9)(n),HN("collection","path",e),n instanceof oI){const r=In.fromString(e,...t);return lk(r),new fc(n,null,r)}{if(!(n instanceof Rr||n instanceof fc))throw new Se(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(In.fromString(e,...t));return lk(r),new fc(n.firestore,null,r)}}function CS(n,e,...t){if(n=(0,L.m9)(n),1===arguments.length&&(e=ub.A()),HN("doc","path",e),n instanceof oI){const r=In.fromString(e,...t);return uk(r),new Rr(n,null,new et(r))}{if(!(n instanceof Rr||n instanceof fc))throw new Se(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(In.fromString(e,...t));return uk(r),new Rr(n.firestore,n instanceof fc?n.converter:null,new et(r))}}function pk(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),(n instanceof Rr||n instanceof fc)&&(e instanceof Rr||e instanceof fc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function $N(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),n instanceof Es&&e instanceof Es&&n.firestore===e.firestore&&O_(n._query,e._query)&&n.converter===e.converter}class nU{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new bm(this,"async_queue_retry"),this.Xc=()=>{const t=Dm();t&&Ue("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=Dm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Dm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Jr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,ye.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!ec(t))throw t;Ue("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Xr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=Sm.createAndSchedule(this,e,t,r,a=>this.na(a));return this.zc.push(i),i}Zc(){this.Wc&&ct()}verifyOperationInProgress(){}sa(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function GN(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class rU{constructor(){this._progressObserver={},this._taskCompletionResolver=new Jr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Mr extends oI{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new nU,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||gk(this),this._firestoreClient.terminate()}}function mi(n){return n._firestoreClient||gk(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function gk(n){var e,t,r;const i=n._freezeSettings(),a=(h=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Pb(n._databaseId,h,n._persistenceKey,(v=i).host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,sk(v.experimentalLongPollingOptions),v.useFetchStreams));var h,v;n._firestoreClient=new Rn(n._authCredentials,n._appCheckCredentials,n._queue,a),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function mk(n,e,t){const r=new Jr;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield Hs(n,t),yield kN(n,e),r.resolve()}catch(i){const a=i;if(!JO(a))throw a;to("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a)}})).then(()=>r.promise)}function yk(n){if(n._initialized||n._terminated)throw new Se(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class pc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pc(pi.fromBase64String(e))}catch(t){throw new Se(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new pc(pi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Kd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Se(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Rm{constructor(e){this._methodName=e}}class DS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Se(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Se(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $t(this._lat,e._lat)||$t(this._long,e._long)}}const pU=/^__.*__$/;class gU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new js(e,this.data,this.fieldMask,t,this.fieldTransforms):new Fd(e,this.data,t,this.fieldTransforms)}}class _k{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new js(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function vk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ct()}}class bS{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new bS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return AS(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(vk(this.ca)&&pU.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class mU{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Gd(e)}ya(e,t,r,i=!1){return new bS({ca:e,methodName:t,ga:r,path:Vr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mm(n){const e=n._freezeSettings(),t=Gd(n._databaseId);return new mU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function TS(n,e,t,r,i,a={}){const l=n.ya(a.merge||a.mergeFields?2:0,e,t,i);KN("Data must be an object, but it was:",l,r);const h=Ik(r,l);let m,v;if(a.merge)m=new Bs(l.fieldMask),v=l.fieldTransforms;else if(a.mergeFields){const b=[];for(const S of a.mergeFields){const x=lI(e,S,t);if(!l.contains(x))throw new Se(he.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);Dk(b,x)||b.push(x)}m=new Bs(b),v=l.fieldTransforms.filter(S=>m.covers(S.field))}else m=null,v=l.fieldTransforms;return new gU(new ns(h),m,v)}class uI extends Rm{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof uI}}function wk(n,e,t){return new bS({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class zN extends Rm{_toFieldTransform(e){return new rm(e.path,new Nf)}isEqual(e){return e instanceof zN}}class yU extends Rm{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=wk(this,e,!0),r=this.pa.map(a=>Nm(a,t)),i=new kd(r);return new rm(e.path,i)}isEqual(e){return this===e}}class _U extends Rm{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=wk(this,e,!0),r=this.pa.map(a=>Nm(a,t)),i=new ac(r);return new rm(e.path,i)}isEqual(e){return this===e}}class vU extends Rm{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new xf(e.serializer,Qb(e.serializer,this.Ia));return new rm(e.path,t)}isEqual(e){return this===e}}function WN(n,e,t,r){const i=n.ya(1,e,t);KN("Data must be an object, but it was:",i,r);const a=[],l=ns.empty();tc(r,(m,v)=>{const b=SS(e,m,t);v=(0,L.m9)(v);const S=i.da(b);if(v instanceof uI)a.push(b);else{const x=Nm(v,S);null!=x&&(a.push(b),l.set(b,x))}});const h=new Bs(a);return new _k(l,h,i.fieldTransforms)}function qN(n,e,t,r,i,a){const l=n.ya(1,e,t),h=[lI(e,r,t)],m=[i];if(a.length%2!=0)throw new Se(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)h.push(lI(e,a[x])),m.push(a[x+1]);const v=[],b=ns.empty();for(let x=h.length-1;x>=0;--x)if(!Dk(v,h[x])){const H=h[x];let Z=m[x];Z=(0,L.m9)(Z);const se=l.da(H);if(Z instanceof uI)v.push(H);else{const ce=Nm(Z,se);null!=ce&&(v.push(H),b.set(H,ce))}}const S=new Bs(v);return new _k(b,S,l.fieldTransforms)}function Ek(n,e,t,r=!1){return Nm(t,n.ya(r?4:3,e))}function Nm(n,e){if(Ck(n=(0,L.m9)(n)))return KN("Unsupported field value:",e,n),Ik(n,e);if(n instanceof Rm)return function(t,r){if(!vk(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let h=Nm(l,r.wa(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,L.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Qb(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Jn.fromDate(t);return{timestampValue:kf(r.serializer,i)}}if(t instanceof Jn){const i=new Jn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:kf(r.serializer,i)}}if(t instanceof DS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof pc)return{bytesValue:Ff(r.serializer,t._byteString)};if(t instanceof Rr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r._a(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:H_(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${IS(t)}`)}(n,e)}function Ik(n,e){const t={};return Mb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):tc(n,(r,i)=>{const a=Nm(i,e.ha(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function Ck(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Jn||n instanceof DS||n instanceof pc||n instanceof Rr||n instanceof Rm)}function KN(n,e,t){if(!Ck(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=IS(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function lI(n,e,t){if((e=(0,L.m9)(e))instanceof Kd)return e._internalPath;if("string"==typeof e)return SS(n,e);throw AS("Field path arguments must be of type string or ",n,!1,void 0,t)}const wU=new RegExp("[~\\*/\\[\\]]");function SS(n,e,t){if(e.search(wU)>=0)throw AS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Kd(...e.split("."))._internalPath}catch{throw AS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function AS(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(a||l)&&(m+=" (found",a&&(m+=` in field ${r}`),l&&(m+=` in document ${i}`),m+=")"),new Se(he.INVALID_ARGUMENT,h+n+m)}function Dk(n,e){return n.some(t=>t.isEqual(e))}class cI{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Rr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new EU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(RS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class EU extends cI{data(){return super.data()}}function RS(n,e){return"string"==typeof e?SS(n,e):e instanceof Kd?e._internalPath:e._delegate._internalPath}function bk(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Se(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ZN{}class dI extends ZN{}function Xf(n,e,...t){let r=[];e instanceof ZN&&r.push(e),r=r.concat(t),function(i){const a=i.filter(h=>h instanceof Av).length,l=i.filter(h=>h instanceof hI).length;if(a>1||a>0&&l>0)throw new Se(he.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class hI extends dI{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new hI(e,t,r)}_apply(e){const t=this._parse(e);return Rk(e._query,t),new Es(e.firestore,e.converter,e0(e._query,t))}_parse(e){const t=Mm(e.firestore);return function(i,a,l,h,m,v,b){let S;if(m.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Se(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){Ak(b,v);const x=[];for(const H of b)x.push(Sk(h,i,H));S={arrayValue:{values:x}}}else S=Sk(h,i,b)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||Ak(b,v),S=Ek(l,"where",b,"in"===v||"not-in"===v);return hn.create(m,v,S)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Av extends ZN{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Av(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Nn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const l=i.getFlattenedFilters();for(const h of l)Rk(a,h),a=e0(a,h)}(e._query,t),new Es(e.firestore,e.converter,e0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class YN extends dI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new YN(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Se(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Se(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new xd(i,a);return function(h,m){if(null===JE(h)){const v=em(h);null!==v&&Mk(0,v,m.field)}}(r,l),l}(e._query,this._field,this._direction);return new Es(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new oc(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class MS extends dI{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new MS(e,t,r)}_apply(e){return new Es(e.firestore,e.converter,P_(e._query,this._limit,this._limitType))}}class NS extends dI{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new NS(e,t,r)}_apply(e){const t=Tk(e,this.type,this._docOrFields,this._inclusive);return new Es(e.firestore,e.converter,(i=t,new oc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class xS extends dI{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new xS(e,t,r)}_apply(e){const t=Tk(e,this.type,this._docOrFields,this._inclusive);return new Es(e.firestore,e.converter,(i=t,new oc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function Tk(n,e,t,r){if(t[0]=(0,L.m9)(t[0]),t[0]instanceof cI)return function(i,a,l,h,m){if(!h)throw new Se(he.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const v=[];for(const b of Od(i))if(b.field.isKeyField())v.push(rc(a,h.key));else{const S=h.data.field(b.field);if($g(S))throw new Se(he.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const x=b.field.canonicalString();throw new Se(he.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}v.push(S)}return new ic(v,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Mm(n.firestore);return function(a,l,h,m,v,b){const S=a.explicitOrderBy;if(v.length>S.length)throw new Se(he.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let H=0;H<v.length;H++){const Z=v[H];if(S[H].field.isKeyField()){if("string"!=typeof Z)throw new Se(he.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof Z}`);if(!Pd(a)&&-1!==Z.indexOf("/"))throw new Se(he.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${Z}' contains a slash.`);const se=a.path.child(In.fromString(Z));if(!et.isDocumentKey(se))throw new Se(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${se}' is not because it contains an odd number of segments.`);const ce=new et(se);x.push(rc(l,ce))}else{const se=Ek(h,m,Z);x.push(se)}}return new ic(x,b)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Sk(n,e,t){if("string"==typeof(t=(0,L.m9)(t))){if(""===t)throw new Se(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Pd(e)&&-1!==t.indexOf("/"))throw new Se(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(In.fromString(t));if(!et.isDocumentKey(r))throw new Se(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return rc(n,new et(r))}if(t instanceof Rr)return rc(n,t._key);throw new Se(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${IS(t)}.`)}function Ak(n,e){if(!Array.isArray(n)||0===n.length)throw new Se(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Rk(n,e){if(e.isInequality()){const r=em(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Se(he.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=JE(n);null!==a&&Mk(0,i,a)}const t=function(r,i){for(const a of r)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Se(he.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Mk(n,e,t){if(!t.isEqual(e))throw new Se(he.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class QN{convertValue(e,t="none"){switch($u(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Sr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ga(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ct()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return tc(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new DS(Sr(e.latitude),Sr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Gg(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Tf(e));default:return null}}convertTimestamp(e){const t=Bu(e);return new Jn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=In.fromString(e);bt(vT(r));const i=new ju(r.get(1),r.get(3)),a=new et(r.popFirst(5));return i.isEqual(t)||Xr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function PS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class MU extends QN{constructor(e){super(),this.firestore=e}convertBytes(e){return new pc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rr(this.firestore,null,t)}}class xm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zd extends cI{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new fI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(RS("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class fI extends Zd{data(e={}){return super.data(e)}}class Jf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new xm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new fI(this._firestore,this._userDataWriter,r.key,r,new xm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Se(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new fI(r._firestore,r._userDataWriter,l.doc.key,l.doc,new xm(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new fI(r._firestore,r._userDataWriter,l.doc.key,l.doc,new xm(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return 0!==l.type&&(m=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),v=a.indexOf(l.doc.key)),{type:xU(l.type),doc:h,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function xU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ct()}}function xk(n,e){return n instanceof Zd&&e instanceof Zd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Jf&&e instanceof Jf&&n._firestore===e._firestore&&$N(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class ep extends QN{constructor(e){super(),this.firestore=e}convertBytes(e){return new pc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rr(this.firestore,null,t)}}function Pk(n,e,t){n=_n(n,Rr);const r=_n(n.firestore,Mr),i=PS(n.converter,e,t);return Rv(r,[TS(Mm(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,nr.none())])}function Ok(n,e,t,...r){n=_n(n,Rr);const i=_n(n.firestore,Mr),a=Mm(i);let l;return l="string"==typeof(e=(0,L.m9)(e))||e instanceof Kd?qN(a,"updateDoc",n._key,e,t,r):WN(a,"updateDoc",n._key,e),Rv(i,[l.toMutation(n._key,nr.exists(!0))])}function kk(n,...e){var t,r,i;n=(0,L.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||GN(e[l])||(a=e[l],l++);const h={includeMetadataChanges:a.includeMetadataChanges};if(GN(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let m,v,b;if(n instanceof Rr)v=_n(n.firestore,Mr),b=Gu(n._key.path),m={next:S=>{e[l]&&e[l](XN(v,n,S))},error:e[l+1],complete:e[l+2]};else{const S=_n(n,Es);v=_n(S.firestore,Mr),b=S._query;const x=new ep(v);m={next:H=>{e[l]&&e[l](new Jf(v,x,S,H))},error:e[l+1],complete:e[l+2]},bk(n._query)}return function(S,x,H,Z){const se=new _t(Z),ce=new wv(x,se,H);return S.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return sS(yield Sv(S),ce)})),()=>{se.Dc(),S.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return K0(yield Sv(S),ce)}))}}(mi(v),b,h,m)}function Rv(n,e){return function(t,r){const i=new Jr;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function lS(n,e,t){return Iv.apply(this,arguments)}(yield BN(t),r,i)})),i.promise}(mi(n),e)}function XN(n,e,t){const r=t.docs.get(e._key),i=new ep(n);return new Zd(n,i,e._key,r,new xm(t.hasPendingWrites,t.fromCache),e.converter)}const YU={maxAttempts:5};class Fk{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Mm(e)}set(e,t,r){this._verifyNotCommitted();const i=tp(e,this._firestore),a=PS(i.converter,t,r),l=TS(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,nr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=tp(e,this._firestore);let l;return l="string"==typeof(t=(0,L.m9)(t))||t instanceof Kd?qN(this._dataReader,"WriteBatch.update",a._key,t,r,i):WN(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,nr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=tp(e,this._firestore);return this._mutations=this._mutations.concat(new uc(t._key,nr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Se(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function tp(n,e){if((n=(0,L.m9)(n)).firestore!==e)throw new Se(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class QU extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Mm(e)}get(e){const t=tp(e,this._firestore),r=new MU(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ct();const a=i[0];if(a.isFoundDocument())return new cI(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new cI(this._firestore,r,t._key,null,t.converter);throw ct()})}set(e,t,r){const i=tp(e,this._firestore),a=PS(i.converter,t,r),l=TS(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=tp(e,this._firestore);let l;return l="string"==typeof(t=(0,L.m9)(t))||t instanceof Kd?qN(this._dataReader,"Transaction.update",a._key,t,r,i):WN(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=tp(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=tp(e,this._firestore),r=new ep(this._firestore);return super.get(e).then(i=>new Zd(this._firestore,r,t._key,i._document,new xm(!1,!1),t.converter))}}function JN(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Se("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Vk(){if(typeof Uint8Array>"u")throw new Se("unimplemented","Uint8Arrays are not available in this environment.")}function Uk(){if(!function _M(){return typeof atob<"u"}())throw new Se("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Ad=Lr.SDK_VERSION,(0,Lr._registerComponent)(new gr.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new Mr(new ib(t.getProvider("auth-internal")),new ab(t.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Se(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ju(h.options.projectId,m)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,Lr.registerVersion)(tb,"3.12.1",n),(0,Lr.registerVersion)(tb,"3.12.1","esm2017")}();class pI{constructor(e){this._delegate=e}static fromBase64String(e){return Uk(),new pI(pc.fromBase64String(e))}static fromUint8Array(e){return Vk(),new pI(pc.fromUint8Array(e))}toBase64(){return Uk(),this._delegate.toBase64()}toUint8Array(){return Vk(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ex(n){return function oB(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class aB{enableIndexedDbPersistence(e,t){return function sU(n,e){yk(n=_n(n,Mr));const t=mi(n);if(t._uninitializedComponentsProvider)throw new Se(he.FAILED_PRECONDITION,"SDK cache is already specified.");to("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Fe;return mk(t,i,new te(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function oU(n){yk(n=_n(n,Mr));const e=mi(n);if(e._uninitializedComponentsProvider)throw new Se(he.FAILED_PRECONDITION,"SDK cache is already specified.");to("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Fe;return mk(e,r,new De(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function aU(n){if(n._initialized&&!n._terminated)throw new Se(he.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Jr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!So.D())return Promise.resolve();const i=r+"main";yield So.delete(i)}),function(r){return t.apply(this,arguments)})(iv(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Bk{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ju||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&to("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function hk(n,e,t,r={}){var i;const a=(n=_n(n,oI))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&to("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,h;if("string"==typeof r.mockUserToken)l=r.mockUserToken,h=bi.MOCK_USER;else{l=(0,L.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Se(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new bi(m)}n._authCredentials=new rb(new SE(l,h))}}(this._delegate,e,t,r)}enableNetwork(){return function lU(n){return function q2(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield ek(n),t=yield tk(n);return e.setNetworkEnabled(!0),function(r){const i=it(r);return i.vu.delete(0),lv(i)}(t)}))}(mi(n=_n(n,Mr)))}(this._delegate)}disableNetwork(){return function cU(n){return function K2(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield ek(n),t=yield tk(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(i){const a=it(i);a.vu.add(0),yield Kf(a),a.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(mi(n=_n(n,Mr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,ak("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function uU(n){return function(e){const t=new Jr;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function dS(n,e){return bv.apply(this,arguments)}(yield BN(e),t)})),t.promise}(mi(n=_n(n,Mr)))}(this._delegate)}onSnapshotsInSync(e){return function jU(n,e){return function Q2(n,e){const t=new _t(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield Sv(n),i=t,it(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield Sv(n),i=t,void it(r).ku.delete(i);var r,i}))}}(mi(n=_n(n,Mr)),GN(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Se("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Mv(this,fk(this._delegate,e))}catch(t){throw io(t,"collection()","Firestore.collection()")}}doc(e){try{return new Qa(this,CS(this._delegate,e))}catch(t){throw io(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new so(this,function tU(n,e){if(n=_n(n,oI),HN("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Se(he.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Es(n,null,(t=e,new oc(In.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw io(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function XU(n,e,t){n=_n(n,Mr);const r=Object.assign(Object.assign({},YU),t);return function(i){if(i.maxAttempts<1)throw new Se(he.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const h=new Jr;return i.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const m=yield function nk(n){return wS(n).then(e=>e.datastore)}(i);new an(i.asyncQueue,m,l,a,h).run()})),h.promise}(mi(n),i=>e(new QU(n,i)),r)}(this._delegate,t=>e(new jk(this,t)))}batch(){return mi(this._delegate),new Hk(new Fk(this._delegate,e=>Rv(this._delegate,e)))}loadBundle(e){return function dU(n,e){const t=mi(n=_n(n,Mr)),r=new rU;return function X2(n,e,t,r){const i=function(a,l){let h;return h="string"==typeof a?iT().encode(a):a,m=function(m,v){if(m instanceof Uint8Array)return Qe(m,v);if(m instanceof ArrayBuffer)return Qe(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new Ae(m,l);var m}(t,Gd(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function N(n,e,t){const r=it(n);var i;(i=(0,ye.Z)(function*(a,l,h){try{const m=yield l.getMetadata();if(yield function(x,H){const Z=it(x),se=Br(H.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",ce=>Z.qs.getBundleMetadata(ce,H.id)).then(ce=>!!ce&&ce.createTime.compareTo(se)>=0)}(a.localStore,m))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(x=m).totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}),Promise.resolve(new Set);h._updateProgress(Y0(m));const v=new DN(m,a.localStore,l.serializer);let b=yield l.bc();for(;b;){const x=yield v.zu(b);x&&h._updateProgress(x),b=yield l.bc()}const S=yield v.complete();return yield rl(a,S.Ju,void 0),yield function(x,H){const Z=it(x);return Z.persistence.runTransaction("Save bundle","readwrite",se=>Z.qs.saveBundleMetadata(se,H))}(a.localStore,m),h._completeWith(S.progress),Promise.resolve(S.Hu)}catch(m){return to("SyncEngine",`Loading bundle failed with ${m}`),h._failWith(m),Promise.resolve(new Set)}var x}),function(a,l,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield BN(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function hU(n,e){return function J2(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const i=it(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.qs.getNamedQuery(a,r))}(yield ES(n),e)}))}(mi(n=_n(n,Mr)),e).then(t=>t?new Es(n,null,t.query):null)}(this._delegate,e).then(t=>t?new so(this,t):null)}}class OS extends QN{constructor(e){super(),this.firestore=e}convertBytes(e){return new pI(new pc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Qa.forKey(t,this.firestore,null)}}class jk{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new OS(e)}get(e){const t=Om(e);return this._delegate.get(t).then(r=>new gI(this._firestore,new Zd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Om(e);return r?(JN("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Om(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Om(e);return this._delegate.delete(t),this}}class Hk{constructor(e){this._delegate=e}set(e,t,r){const i=Om(e);return r?(JN("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Om(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Om(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Pm{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new fI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new mI(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Pm.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Pm(e,new OS(e),t),i.set(t,a)),a}}Pm.INSTANCES=new WeakMap;class Qa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new OS(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Se("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Qa(t,new Rr(t._delegate,r,new et(e)))}static forKey(e,t,r){return new Qa(t,new Rr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Mv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Mv(this.firestore,fk(this._delegate,e))}catch(t){throw io(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,L.m9)(e))instanceof Rr&&pk(this._delegate,e)}set(e,t){t=JN("DocumentReference.set",t);try{return t?Pk(this._delegate,e,t):Pk(this._delegate,e)}catch(r){throw io(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Ok(this._delegate,e):Ok(this._delegate,e,t,...r)}catch(i){throw io(i,"updateDoc()","DocumentReference.update()")}}delete(){return function UU(n){return Rv(_n(n.firestore,Mr),[new uc(n._key,nr.none())])}(this._delegate)}onSnapshot(...e){const t=$k(e),r=Gk(e,i=>new gI(this.firestore,new Zd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return kk(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function OU(n){n=_n(n,Rr);const e=_n(n.firestore,Mr),t=mi(e),r=new ep(e);return function Z2(n,e){const t=new Jr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,a,l){try{const h=yield function(m,v){const b=it(m);return b.persistence.runTransaction("read document","readonly",S=>b.localDocuments.getDocument(S,v))}(i,a);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Se(he.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const m=Qf(h,`Failed to get document '${a} from cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield ES(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Zd(e,r,n._key,i,new xm(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function kU(n){n=_n(n,Rr);const e=_n(n.firestore,Mr);return rk(mi(e),n._key,{source:"server"}).then(t=>XN(e,n,t))}(this._delegate):function PU(n){n=_n(n,Rr);const e=_n(n.firestore,Mr);return rk(mi(e),n._key).then(t=>XN(e,n,t))}(this._delegate),t.then(r=>new gI(this.firestore,new Zd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Qa(this.firestore,this._delegate.withConverter(e?Pm.getInstance(this.firestore,e):null))}}function io(n,e,t){return n.message=n.message.replace(e,t),n}function $k(n){for(const e of n)if("object"==typeof e&&!ex(e))return e;return{}}function Gk(n,e){var t,r;let i;return i=ex(n[0])?n[0]:ex(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class gI{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Qa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return xk(this._delegate,e._delegate)}}class mI extends gI{data(e){const t=this._delegate.data(e);return function dM(n,e){n||ct()}(void 0!==t),t}}class so{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new OS(e)}where(e,t,r){try{return new so(this.firestore,Xf(this._delegate,function IU(n,e,t){const r=e,i=RS("where",n);return hI._create(i,r,t)}(e,t,r)))}catch(i){throw io(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new so(this.firestore,Xf(this._delegate,function CU(n,e="asc"){const t=e,r=RS("orderBy",n);return YN._create(r,t)}(e,t)))}catch(r){throw io(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new so(this.firestore,Xf(this._delegate,function DU(n){return ck("limit",n),MS._create("limit",n,"F")}(e)))}catch(t){throw io(t,"limit()","Query.limit()")}}limitToLast(e){try{return new so(this.firestore,Xf(this._delegate,function bU(n){return ck("limitToLast",n),MS._create("limitToLast",n,"L")}(e)))}catch(t){throw io(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new so(this.firestore,Xf(this._delegate,function TU(...n){return NS._create("startAt",n,!0)}(...e)))}catch(t){throw io(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new so(this.firestore,Xf(this._delegate,function SU(...n){return NS._create("startAfter",n,!1)}(...e)))}catch(t){throw io(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new so(this.firestore,Xf(this._delegate,function AU(...n){return xS._create("endBefore",n,!1)}(...e)))}catch(t){throw io(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new so(this.firestore,Xf(this._delegate,function RU(...n){return xS._create("endAt",n,!0)}(...e)))}catch(t){throw io(t,"endAt()","Query.endAt()")}}isEqual(e){return $N(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function LU(n){n=_n(n,Es);const e=_n(n.firestore,Mr),t=mi(e),r=new ep(e);return function Y2(n,e){const t=new Jr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,a,l){try{const h=yield vm(i,a,!0),m=new Q0(a,h.ir),v=m.sc(h.documents),b=m.applyChanges(v,!1);l.resolve(b.snapshot)}catch(h){const m=Qf(h,`Failed to execute query '${a} against cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield ES(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Jf(e,r,n,i))}(this._delegate):"server"===e?.source?function VU(n){n=_n(n,Es);const e=_n(n.firestore,Mr),t=mi(e),r=new ep(e);return ik(t,n._query,{source:"server"}).then(i=>new Jf(e,r,n,i))}(this._delegate):function FU(n){n=_n(n,Es);const e=_n(n.firestore,Mr),t=mi(e),r=new ep(e);return bk(n._query),ik(t,n._query).then(i=>new Jf(e,r,n,i))}(this._delegate),t.then(r=>new tx(this.firestore,new Jf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=$k(e),r=Gk(e,i=>new tx(this.firestore,new Jf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return kk(this._delegate,t,r)}withConverter(e){return new so(this.firestore,this._delegate.withConverter(e?Pm.getInstance(this.firestore,e):null))}}class lB{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new mI(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class tx{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new so(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new mI(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new lB(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new mI(this._firestore,r))})}isEqual(e){return xk(this._delegate,e._delegate)}}class Mv extends so{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Qa(this.firestore,e):null}doc(e){try{return new Qa(this.firestore,void 0===e?CS(this._delegate):CS(this._delegate,e))}catch(t){throw io(t,"doc()","CollectionReference.doc()")}}add(e){return function BU(n,e){const t=_n(n.firestore,Mr),r=CS(n),i=PS(n.converter,e);return Rv(t,[TS(Mm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,nr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Qa(this.firestore,t))}isEqual(e){return pk(this._delegate,e._delegate)}withConverter(e){return new Mv(this.firestore,this._delegate.withConverter(e?Pm.getInstance(this.firestore,e):null))}}function Om(n){return _n(n,Rr)}class nx{constructor(...e){this._delegate=new Kd(...e)}static documentId(){return new nx(Vr.keyField().canonicalString())}isEqual(e){return(e=(0,L.m9)(e))instanceof Kd&&this._delegate._internalPath.isEqual(e._internalPath)}}class km{constructor(e){this._delegate=e}static serverTimestamp(){const e=function eB(){return new zN("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new km(e)}static delete(){const e=function JU(){return new uI("deleteField")}();return e._methodName="FieldValue.delete",new km(e)}static arrayUnion(...e){const t=function tB(...n){return new yU("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new km(t)}static arrayRemove(...e){const t=function nB(...n){return new _U("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new km(t)}static increment(e){const t=function rB(n){return new vU("increment",n)}(e);return t._methodName="FieldValue.increment",new km(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const cB={Firestore:Bk,GeoPoint:DS,Timestamp:Jn,Blob:pI,Transaction:jk,WriteBatch:Hk,DocumentReference:Qa,DocumentSnapshot:gI,Query:so,QueryDocumentSnapshot:mI,QuerySnapshot:tx,CollectionReference:Mv,FieldPath:nx,FieldValue:km,setLogLevel:function uB(n){!function TE(n){$a.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function zk(n,e){return function fB(n,e=_y.z){return new Fi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function rx(n,e){return zk(n,e).pipe((0,Tt.U)(t=>({payload:t,type:"query"})))}function kS(n,e){return rx(n,e).pipe(jy(void 0),Hy(),(0,Tt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const m=i.find(b=>b.doc.ref.isEqual(l.ref)),v=t?.payload.docs.find(b=>b.ref.isEqual(l.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(l.metadata)||!m&&v&&JSON.stringify(v.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),a}))}function Wk(n,e,t){return kS(n,t).pipe(Wh((r,i)=>function gB(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function mB(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return ix(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return ix(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ix(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),(0,gg.x)(),(0,Tt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function ix(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function qk(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function hB(n){(function dB(n,e){n.INTERNAL.registerComponent(new gr.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},cB)))})(n,(e,t)=>new Bk(e,t,new aB)),n.registerVersion("@firebase/firestore-compat","0.3.10")}(Bh.Z);class Kk{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=kS(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Tt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(jy(void 0),Hy(),Xn(([r,i])=>i.length>0||!r),(0,Tt.U)(([r,i])=>i),Qt.iC)}auditTrail(e){return this.stateChanges(e).pipe(Wh((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=qk(e);return Wk(this.query,t,this.afs.schedulers.outsideAngular).pipe(Qt.iC)}valueChanges(e={}){return rx(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Qt.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(Qt.iC)}add(e){return this.ref.add(e)}doc(e){return new Zk(this.ref.doc(e),this.afs)}}class Zk{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=Xk(r,t);return new Kk(i,a,this.afs)}snapshotChanges(){return function pB(n,e){return zk(n,e).pipe(jy(void 0),Hy(),(0,Tt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Qt.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Tt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ln.D)(this.ref.get(e)).pipe(Qt.iC)}}class yB{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?kS(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Xn(t=>t.length>0),Qt.iC):kS(this.query,this.afs.schedulers.outsideAngular).pipe(Qt.iC)}auditTrail(e){return this.stateChanges(e).pipe(Wh((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=qk(e);return Wk(this.query,t,this.afs.schedulers.outsideAngular).pipe(Qt.iC)}valueChanges(e={}){return rx(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Qt.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(Qt.iC)}}const Yk=new f.OlP("angularfire2.enableFirestorePersistence"),Qk=new f.OlP("angularfire2.firestore.persistenceSettings"),_B=new f.OlP("angularfire2.firestore.settings"),vB=new f.OlP("angularfire2.firestore.use-emulator");function Xk(n,e=(t=>t)){return{query:e(n),ref:n}}let Jk=(()=>{class n{constructor(t,r,i,a,l,h,m,v,b,S,x,H,Z,se,ce,We,ut){this.schedulers=m;const He=(0,An.on)(t,h,r),lt=b;S&&my(He,h,x,Z,se,ce,H,We),[this.firestore,this.persistenceEnabled$]=(0,An.cc)(`${He.name}.firestore`,"AngularFirestore",He.name,()=>{const Vt=h.runOutsideAngular(()=>He.firestore());if(a&&Vt.settings(a),lt&&Vt.useEmulator(...lt),i&&!cs(l)){const Kt=()=>{try{return(0,ln.D)(Vt.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(Mi){return typeof console<"u"&&console.warn(Mi),(0,vt.of)(!1)}};return[Vt,h.runOutsideAngular(Kt)]}return[Vt,(0,vt.of)(!1)]},[a,lt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=Xk(i,r),h=this.schedulers.ngZone.run(()=>a);return new Kk(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new yB(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new Zk(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(An.Dh),f.LFG(An.xv,8),f.LFG(Yk,8),f.LFG(_B,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Qt.HU),f.LFG(Qk,8),f.LFG(vB,8),f.LFG(Oa,8),f.LFG(aw,8),f.LFG(dd,8),f.LFG(uw,8),f.LFG(lw,8),f.LFG(Xp,8),f.LFG(Jp,8),f.LFG(Di,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),wB=(()=>{class n{constructor(){Uh.Z.registerVersion("angularfire",Qt.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Yk,useValue:!0},{provide:Qk,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[Jk]}),n})();var EB=U(5032);const e1="@firebase/database";let sx="";function n1(n){sx=n}class DB{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,L.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,L.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class bB{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,L.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const r1=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new DB(e)}}catch{}return new bB},Fm=r1("localStorage"),ox=r1("sessionStorage"),Nv=new Ci.Yd("@firebase/database"),i1=function(){let n=1;return function(){return n++}}(),s1=function(n){const e=(0,L.dS)(n),t=new L.gQ;t.update(e);const r=t.digest();return L.US.encodeByteArray(r)},yI=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=yI.apply(null,r):e+="object"==typeof r?(0,L.Wl)(r):r,e+=" "}return e};let Lm=null,o1=!0;const a1=function(n,e){(0,L.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Nv.logLevel=Ci.in.VERBOSE,Lm=Nv.log.bind(Nv),e&&ox.set("logging_enabled",!0)):"function"==typeof n?Lm=n:(Lm=null,ox.remove("logging_enabled"))},os=function(...n){if(!0===o1&&(o1=!1,null===Lm&&!0===ox.get("logging_enabled")&&a1(!0)),Lm){const e=yI.apply(null,n);Lm(e)}},_I=function(n){return function(...e){os(n,...e)}},ax=function(...n){const e="FIREBASE INTERNAL ERROR: "+yI(...n);Nv.error(e)},gc=function(...n){const e=`FIREBASE FATAL ERROR: ${yI(...n)}`;throw Nv.error(e),new Error(e)},$s=function(...n){const e="FIREBASE WARNING: "+yI(...n);Nv.warn(e)},FS=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},np="[MIN_NAME]",Yd="[MAX_NAME]",Vm=function(n,e){if(n===e)return 0;if(n===np||e===Yd)return-1;if(e===np||n===Yd)return 1;{const t=c1(n),r=c1(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},AB=function(n,e){return n===e?0:n<e?-1:1},vI=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,L.Wl)(e))},ux=function(n){if("object"!=typeof n||null===n)return(0,L.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,L.Wl)(e[r]),t+=":",t+=ux(n[e[r]]);return t+="}",t},u1=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function as(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const l1=function(n){(0,L.hu)(!FS(n),"Invalid JSON number");const r=1023;let i,a,l,h,m;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const v=[];for(m=52;m;m-=1)v.push(l%2?1:0),l=Math.floor(l/2);for(m=11;m;m-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const b=v.join("");let S="";for(m=0;m<64;m+=8){let x=parseInt(b.substr(m,8),2).toString(16);1===x.length&&(x="0"+x),S+=x}return S.toLowerCase()},xB=new RegExp("^-?(0*)\\d{1,10}$"),c1=function(n){if(xB.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},xv=function(n){try{n()}catch(e){setTimeout(()=>{throw $s("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},wI=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class FB{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){$s(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class LB{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(os("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',$s(e)}}let EI=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const g1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,_1="websocket",v1="long_polling";class cx{constructor(e,t,r,i,a=!1,l="",h=!1,m=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Fm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Fm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function w1(n,e,t){let r;if((0,L.hu)("string"==typeof e,"typeof type must == string"),(0,L.hu)("object"==typeof t,"typeof params must == object"),e===_1)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==v1)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function VB(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return as(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class UB{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,L.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,L.p$)(this.counters_)}}const dx={},hx={};function fx(n){const e=n.toString();return dx[e]||(dx[e]=new UB),dx[e]}class jB{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&xv(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class rp{constructor(e,t,r,i,a,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=_I(e),this.stats_=fx(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),w1(t,v1,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new jB(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,L.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new px((...a)=>{const[l,h,m,v,b]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=m;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&g1.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){rp.forceAllow_=!0}static forceDisallow(){rp.forceDisallow_=!0}static isAvailable(){return!((0,L.Yr)()||!rp.forceAllow_&&(rp.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,L.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,L.h$)(t),i=u1(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,L.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,L.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class px{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=i1(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=px.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){os("frame writing exception"),h.stack&&os(h.stack),os(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||os("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,L.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{os("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let VS=null;typeof MozWebSocket<"u"?VS=MozWebSocket:typeof WebSocket<"u"&&(VS=WebSocket);let Pv=(()=>{class n{constructor(t,r,i,a,l,h,m){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=_I(this.connId),this.stats_=fx(r),this.connURL=n.connectionURL_(r,h,m,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const h={v:"5"};return!(0,L.Yr)()&&typeof location<"u"&&location.hostname&&g1.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),a&&(h.ac=a),l&&(h.p=l),w1(t,_1,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Fm.set("previous_websocket_failure",!0);try{let i;if((0,L.Yr)()){i={headers:{"User-Agent":`Firebase/5/${sx}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new VS(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==VS&&!n.forceDisallow_}static previouslyFailed(){return Fm.isInMemoryStorage||!0===Fm.get("previous_websocket_failure")}markConnectionHealthy(){Fm.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,L.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,L.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,L.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=u1(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),S1=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[rp,Pv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Pv&&Pv.isAvailable();let i=r&&!Pv.previouslyFailed();if(t.webSocketOnly&&(r||$s("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Pv];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class O1{constructor(e,t,r,i,a,l,h,m,v,b){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=m,this.onKill_=v,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=_I("c:"+this.id+":"),this.transportManager_=new S1(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=wI(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=vI("t",e),r=vI("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=vI("t",e),r=vI("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=vI("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?ax("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ax("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&$s("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),wI(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):wI(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Fm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class k1{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class F1{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,L.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,L.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class US extends F1{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,L.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new US}getInitialEvent(e){return(0,L.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Hn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Mn(){return new Hn("")}function cn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ip(n){return n.pieces_.length-n.pieceNum_}function dr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Hn(n.pieces_,e)}function mx(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function II(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function U1(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Hn(e,0)}function jr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Hn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Hn(t,0)}function dn(n){return n.pieceNum_>=n.pieces_.length}function oo(n,e){const t=cn(n),r=cn(e);if(null===t)return e;if(t===r)return oo(dr(n),dr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function lj(n,e){const t=II(n,0),r=II(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Vm(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function yx(n,e){if(ip(n)!==ip(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Xa(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(ip(n)>ip(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class cj{constructor(e,t){this.errorPrefix_=t,this.parts_=II(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,L.ug)(this.parts_[r]);B1(this)}}function B1(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Um(n))}function Um(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class _x extends F1{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new _x}getInitialEvent(e){return(0,L.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const CI=1e3;let jS,Bm=(()=>{class n extends k1{constructor(t,r,i,a,l,h,m,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=_I("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=CI,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,L.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");_x.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&US.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,L.Wl)(l)),(0,L.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new L.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const m=h.d;"ok"===h.s?r.resolve(m):r.reject(m)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,m=>{const v=m.d,b=m.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",m),"ok"!==b&&this.removeListen_(i,a),t.onComplete&&t.onComplete(b,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,L.r3)(t,"w")){const i=(0,L.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();$s(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,L.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,L.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,h=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,L.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):ax("Unrecognized action received from server: "+(0,L.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,L.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=CI,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=CI,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=CI),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ye.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let m=!1,v=null;const b=function(){v?v.close():(m=!0,a())};t.realtime_={close:b,sendRequest:function(H){(0,L.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(H)}};const x=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[H,Z]=yield Promise.all([t.authTokenProvider_.getToken(x),t.appCheckTokenProvider_.getToken(x)]);m?os("getToken() completed but was canceled"):(os("getToken() completed. Creating connection."),t.authToken_=H&&H.accessToken,t.appCheckToken_=Z&&Z.token,v=new O1(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,se=>{$s(se+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(H){t.log_("Failed to get token: "+H),m||(t.repoInfo_.nodeAdmin&&$s(H),b())}}})()}interrupt(t){os("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){os("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,L.xb)(this.interruptReasons_)&&(this.reconnectDelay_=CI,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>ux(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Hn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){os("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){os("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,L.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+sx.replace(/\./g,"-")]=1,(0,L.uI)()?t["framework.cordova"]=1:(0,L.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=US.getInstance().currentlyOnline();return(0,L.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class fn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new fn(e,t)}}class BS{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new fn(np,e),i=new fn(np,t);return 0!==this.compare(r,i)}minPost(){return fn.MIN}}class $1 extends BS{static get __EMPTY_NODE(){return jS}static set __EMPTY_NODE(e){jS=e}compare(e,t){return Vm(e.name,t.name)}isDefinedOn(e){throw(0,L.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return fn.MIN}maxPost(){return new fn(Yd,jS)}makePost(e,t){return(0,L.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new fn(e,jS)}toString(){return".key"}}const mc=new $1;class HS{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let wx,il=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??No.EMPTY_NODE,this.right=l??No.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return No.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return No.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class No{constructor(e,t=No.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new No(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,il.BLACK,null,null))}remove(e){return new No(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,il.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new HS(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new HS(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new HS(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new HS(this.root_,null,this.comparator_,!0,e)}}function _j(n,e){return Vm(n.name,e.name)}function vx(n,e){return Vm(n,e)}No.EMPTY_NODE=new class yj{copy(e,t,r,i,a){return this}insert(e,t,r){return new il(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const G1=function(n){return"number"==typeof n?"number:"+l1(n):"string:"+n},z1=function(n){if(n.isLeafNode()){const e=n.val();(0,L.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,L.r3)(e,".sv"),"Priority must be a string or number.")}else(0,L.hu)(n===wx||n.isEmpty(),"priority of unexpected type.");(0,L.hu)(n===wx||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let W1,q1,K1,Ov=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,L.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),z1(this.priorityNode_)}static set __childrenNodeConstructor(t){W1=t}static get __childrenNodeConstructor(){return W1}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return dn(t)?this:".priority"===cn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=cn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,L.hu)(".priority"!==i||1===ip(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(dr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+G1(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?l1(this.value_):this.value_,this.lazyHash_=s1(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,L.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,L.hu)(a>=0,"Unknown leaf type: "+r),(0,L.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const _r=new class Ij extends BS{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Vm(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return fn.MIN}maxPost(){return new fn(Yd,new Ov("[PRIORITY-POST]",K1))}makePost(e,t){const r=q1(e);return new fn(t,new Ov("[PRIORITY-POST]",r))}toString(){return".priority"}},Cj=Math.log(2);class Dj{constructor(e){this.count=parseInt(Math.log(e+1)/Cj,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const $S=function(n,e,t,r){n.sort(e);const i=function(m,v){const b=v-m;let S,x;if(0===b)return null;if(1===b)return S=n[m],x=t?t(S):S,new il(x,S.node,il.BLACK,null,null);{const H=parseInt(b/2,10)+m,Z=i(m,H),se=i(H+1,v);return S=n[H],x=t?t(S):S,new il(x,S.node,il.BLACK,Z,se)}},h=function(m){let v=null,b=null,S=n.length;const x=function(Z,se){const ce=S-Z,We=S;S-=Z;const ut=i(ce+1,We),He=n[ce],lt=t?t(He):He;H(new il(lt,He.node,se,null,ut))},H=function(Z){v?(v.left=Z,v=Z):(b=Z,v=Z)};for(let Z=0;Z<m.count;++Z){const se=m.nextBitIsOne(),ce=Math.pow(2,m.count-(Z+1));se?x(ce,il.BLACK):(x(ce,il.BLACK),x(ce,il.RED))}return b}(new Dj(n.length));return new No(r||e,h)};let Ex;const kv={};class Qd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,L.hu)(kv&&_r,"ChildrenNode.ts has not been loaded"),Ex=Ex||new Qd({".priority":kv},{".priority":_r}),Ex}get(e){const t=(0,L.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof No?t:null}hasIndex(e){return(0,L.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,L.hu)(e!==mc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(fn.Wrap);let h,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();h=i?$S(r,e.getCompare()):kv;const m=e.toString(),v=Object.assign({},this.indexSet_);v[m]=e;const b=Object.assign({},this.indexes_);return b[m]=h,new Qd(b,v)}addToIndexes(e,t){const r=(0,L.UI)(this.indexes_,(i,a)=>{const l=(0,L.DV)(this.indexSet_,a);if((0,L.hu)(l,"Missing index implementation for "+a),i===kv){if(l.isDefinedOn(e.node)){const h=[],m=t.getIterator(fn.Wrap);let v=m.getNext();for(;v;)v.name!==e.name&&h.push(v),v=m.getNext();return h.push(e),$S(h,l.getCompare())}return kv}{const h=t.get(e.name);let m=i;return h&&(m=m.remove(new fn(e.name,h))),m.insert(e,e.node)}});return new Qd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,L.UI)(this.indexes_,i=>{if(i===kv)return i;{const a=t.get(e.name);return a?i.remove(new fn(e.name,a)):i}});return new Qd(r,this.indexSet_)}}let DI,Jt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&z1(this.priorityNode_),this.children_.isEmpty()&&(0,L.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return DI||(DI=new n(new No(vx),null,Qd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||DI}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?DI:r}}getChild(t){const r=cn(t);return null===r?this:this.getImmediateChild(r).getChild(dr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,L.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new fn(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?DI:this.priorityNode_;return new n(a,h,l)}}updateChild(t,r){const i=cn(t);if(null===i)return r;{(0,L.hu)(".priority"!==cn(t)||1===ip(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(dr(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(_r,(h,m)=>{r[h]=m.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):l=!1}),!t&&l&&a<2*i){const h=[];for(const m in r)h[m]=r[m];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+G1(this.getPriority().val())+":"),this.forEachChild(_r,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":s1(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new fn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new fn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new fn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,fn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,fn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===bI?-1:0}withIndex(t){if(t===mc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===mc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(_r),a=r.getIterator(_r);let l=i.getNext(),h=a.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=a.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===mc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const bI=new class bj extends Jt{constructor(){super(new No(vx),Jt.EMPTY_NODE,Qd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Jt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(fn,{MIN:{value:new fn(np,Jt.EMPTY_NODE)},MAX:{value:new fn(Yd,bI)}}),$1.__EMPTY_NODE=Jt.EMPTY_NODE,Ov.__childrenNodeConstructor=Jt,function vj(n){wx=n}(bI),function Ej(n){K1=n}(bI);const Tj=!0;function ei(n,e=null){if(null===n)return Jt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,L.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Ov(n,ei(e));if(n instanceof Array||!Tj){let t=Jt.EMPTY_NODE;return as(n,(r,i)=>{if((0,L.r3)(n,r)&&"."!==r.substring(0,1)){const a=ei(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(ei(e))}{const t=[];let r=!1;if(as(n,(l,h)=>{if("."!==l.substring(0,1)){const m=ei(h);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new fn(l,m)))}}),0===t.length)return Jt.EMPTY_NODE;const a=$S(t,_j,l=>l.name,vx);if(r){const l=$S(t,_r.getCompare());return new Jt(a,ei(e),new Qd({".priority":l},{".priority":_r}))}return new Jt(a,ei(e),Qd.Default)}}!function wj(n){q1=n}(ei);class Ix extends BS{constructor(e){super(),this.indexPath_=e,(0,L.hu)(!dn(e)&&".priority"!==cn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Vm(e.name,t.name):a}makePost(e,t){const r=ei(e),i=Jt.EMPTY_NODE.updateChild(this.indexPath_,r);return new fn(t,i)}maxPost(){const e=Jt.EMPTY_NODE.updateChild(this.indexPath_,bI);return new fn(Yd,e)}toString(){return II(this.indexPath_,0).join("/")}}const Cx=new class Sj extends BS{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Vm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return fn.MIN}maxPost(){return fn.MAX}makePost(e,t){const r=ei(e);return new fn(t,r)}toString(){return".value"}};function Z1(n){return{type:"value",snapshotNode:n}}function Fv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function TI(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function SI(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Dx{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,L.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(TI(t,h)):(0,L.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(Fv(t,r)):l.trackChildChange(SI(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(_r,(i,a)=>{t.hasChild(i)||r.trackChildChange(TI(i,a))}),t.isLeafNode()||t.forEachChild(_r,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(SI(i,a,l))}else r.trackChildChange(Fv(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Jt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class AI{constructor(e){this.indexedFilter_=new Dx(e.getIndex()),this.index_=e.getIndex(),this.startPost_=AI.getStartPost_(e),this.endPost_=AI.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,a,l){return this.matches(new fn(t,r))||(r=Jt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Jt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Jt.EMPTY_NODE);const a=this;return t.forEachChild(_r,(l,h)=>{a.matches(new fn(l,h))||(i=i.updateImmediateChild(l,Jt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Rj{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new AI(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new fn(t,r))||(r=Jt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Jt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Jt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const h=a.getNext();if(this.withinDirectionalStart(h)){if(!this.withinDirectionalEnd(h))break;i=i.updateImmediateChild(h.name,h.node),l++}}}else{let a;i=t.withIndex(this.index_),i=i.updatePriority(Jt.EMPTY_NODE),a=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let l=0;for(;a.hasNext();){const h=a.getNext();l<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?l++:i=i.updateImmediateChild(h.name,Jt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const S=this.index_.getCompare();l=(x,H)=>S(H,x)}else l=this.index_.getCompare();const h=e;(0,L.hu)(h.numChildren()===this.limit_,"");const m=new fn(t,r),v=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),b=this.rangedFilter_.matches(m);if(h.hasChild(t)){const S=h.getImmediateChild(t);let x=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=x&&(x.name===t||h.hasChild(x.name));)x=i.getChildAfterChild(this.index_,x,this.reverse_);const H=null==x?1:l(x,m);if(b&&!r.isEmpty()&&H>=0)return a?.trackChildChange(SI(t,r,S)),h.updateImmediateChild(t,r);{a?.trackChildChange(TI(t,S));const se=h.updateImmediateChild(t,Jt.EMPTY_NODE);return null!=x&&this.rangedFilter_.matches(x)?(a?.trackChildChange(Fv(x.name,x.node)),se.updateImmediateChild(x.name,x.node)):se}}return r.isEmpty()?e:b&&l(v,m)>=0?(null!=a&&(a.trackChildChange(TI(v.name,v.node)),a.trackChildChange(Fv(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(v.name,Jt.EMPTY_NODE)):e}}class GS{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=_r}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:np}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Yd}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===_r}copy(){const e=new GS;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function bx(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Tx(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function zS(n,e){const t=n.copy();return t.index_=e,t}function Y1(n){const e={};if(n.isDefault())return e;let t;if(n.index_===_r?t="$priority":n.index_===Cx?t="$value":n.index_===mc?t="$key":((0,L.hu)(n.index_ instanceof Ix,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,L.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,L.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,L.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,L.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,L.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Q1(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==_r&&(e.i=n.index_.toString()),e}class WS extends k1{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=_I("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,L.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=WS.getListenId_(e,r),h={};this.listens_[l]=h;const m=Y1(e._queryParams);this.restRequest_(a+".json",m,(v,b)=>{let S=b;if(404===v&&(S=null,v=null),null===v&&this.onDataUpdate_(a,S,!1,r),(0,L.DV)(this.listens_,l)===h){let x;x=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(x,null)}})}unlisten(e,t){const r=WS.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Y1(e._queryParams),r=e._path.toString(),i=new L.BH;return this.restRequest_(r+".json",t,(a,l)=>{let h=l;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,L.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let m=null;if(h.status>=200&&h.status<300){try{m=(0,L.cI)(h.responseText)}catch{$s("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,m)}else 401!==h.status&&404!==h.status&&$s("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class kj{constructor(){this.rootNode_=Jt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function qS(){return{value:null,children:new Map}}function Lv(n,e,t){if(dn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=cn(e);n.children.has(r)||n.children.set(r,qS()),Lv(n.children.get(r),e=dr(e),t)}}function Sx(n,e){if(dn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(_r,(r,i)=>{Lv(n,new Hn(r),i)}),Sx(n,e)}}if(n.children.size>0){const t=cn(e);return e=dr(e),n.children.has(t)&&Sx(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Ax(n,e,t){null!==n.value?t(e,n.value):function Fj(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Ax(i,new Hn(e.toString()+"/"+r),t)})}class Lj{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&as(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class Bj{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Lj(e);const r=1e4+2e4*Math.random();wI(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;as(e,(i,a)=>{a>0&&(0,L.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),wI(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ai=(()=>((Ai=Ai||{})[Ai.OVERWRITE=0]="OVERWRITE",Ai[Ai.MERGE=1]="MERGE",Ai[Ai.ACK_USER_WRITE=2]="ACK_USER_WRITE",Ai[Ai.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Ai))();function Nx(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class KS{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ai.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(dn(this.path)){if(null!=this.affectedTree.value)return(0,L.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Hn(e));return new KS(Mn(),t,this.revert)}}return(0,L.hu)(cn(this.path)===e,"operationForChild called for unrelated child."),new KS(dr(this.path),this.affectedTree,this.revert)}}class RI{constructor(e,t){this.source=e,this.path=t,this.type=Ai.LISTEN_COMPLETE}operationForChild(e){return dn(this.path)?new RI(this.source,Mn()):new RI(this.source,dr(this.path))}}class jm{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ai.OVERWRITE}operationForChild(e){return dn(this.path)?new jm(this.source,Mn(),this.snap.getImmediateChild(e)):new jm(this.source,dr(this.path),this.snap)}}class Vv{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ai.MERGE}operationForChild(e){if(dn(this.path)){const t=this.children.subtree(new Hn(e));return t.isEmpty()?null:t.value?new jm(this.source,Mn(),t.value):new Vv(this.source,Mn(),t)}return(0,L.hu)(cn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Vv(this.source,dr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class sp{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(dn(e))return this.isFullyInitialized()&&!this.filtered_;const t=cn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class jj{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function MI(n,e,t,r,i,a){const l=r.filter(h=>h.type===t);l.sort((h,m)=>function Gj(n,e,t){if(null==e.childName||null==t.childName)throw(0,L.g5)("Should only compare child_ events.");const r=new fn(e.childName,e.snapshotNode),i=new fn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,m)),l.forEach(h=>{const m=function $j(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(v=>{v.respondsTo(h.type)&&e.push(v.createEvent(m,n.query_))})})}function ZS(n,e){return{eventCache:n,serverCache:e}}function NI(n,e,t,r){return ZS(new sp(e,t,r),n.serverCache)}function J1(n,e,t,r){return ZS(n.eventCache,new sp(e,t,r))}function YS(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Hm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let xx;class vr{constructor(e,t=(()=>(xx||(xx=new No(AB)),xx))()){this.value=e,this.children=t}static fromObject(e){let t=new vr(null);return as(e,(r,i)=>{t=t.set(new Hn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Mn(),value:this.value};if(dn(e))return null;{const r=cn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(dr(e),t);return null!=a?{path:jr(new Hn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(dn(e))return this;{const t=cn(e),r=this.children.get(t);return null!==r?r.subtree(dr(e)):new vr(null)}}set(e,t){if(dn(e))return new vr(t,this.children);{const r=cn(e),a=(this.children.get(r)||new vr(null)).set(dr(e),t),l=this.children.insert(r,a);return new vr(this.value,l)}}remove(e){if(dn(e))return this.children.isEmpty()?new vr(null):new vr(null,this.children);{const t=cn(e),r=this.children.get(t);if(r){const i=r.remove(dr(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new vr(null):new vr(this.value,a)}return this}}get(e){if(dn(e))return this.value;{const t=cn(e),r=this.children.get(t);return r?r.get(dr(e)):null}}setTree(e,t){if(dn(e))return t;{const r=cn(e),a=(this.children.get(r)||new vr(null)).setTree(dr(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new vr(this.value,l)}}fold(e){return this.fold_(Mn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(jr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Mn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(dn(e))return null;{const a=cn(e),l=this.children.get(a);return l?l.findOnPath_(dr(e),jr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Mn(),t)}foreachOnPath_(e,t,r){if(dn(e))return this;{this.value&&r(t,this.value);const i=cn(e),a=this.children.get(i);return a?a.foreachOnPath_(dr(e),jr(t,i),r):new vr(null)}}foreach(e){this.foreach_(Mn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(jr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class sl{constructor(e){this.writeTree_=e}static empty(){return new sl(new vr(null))}}function xI(n,e,t){if(dn(e))return new sl(new vr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=oo(i,e);return a=a.updateChild(l,t),new sl(n.writeTree_.set(i,a))}{const i=new vr(t),a=n.writeTree_.setTree(e,i);return new sl(a)}}}function Px(n,e,t){let r=n;return as(t,(i,a)=>{r=xI(r,jr(e,i),a)}),r}function eF(n,e){if(dn(e))return sl.empty();{const t=n.writeTree_.setTree(e,new vr(null));return new sl(t)}}function Ox(n,e){return null!=$m(n,e)}function $m(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(oo(t.path,e)):null}function tF(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(_r,(r,i)=>{e.push(new fn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new fn(r,i.value))}),e}function op(n,e){if(dn(e))return n;{const t=$m(n,e);return new sl(null!=t?new vr(t):n.writeTree_.subtree(e))}}function kx(n){return n.writeTree_.isEmpty()}function Uv(n,e){return nF(Mn(),n.writeTree_,e)}function nF(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,L.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=nF(jr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(jr(n,".priority"),r)),t}}function QS(n,e){return aF(e,n)}function Yj(n,e){if(n.snap)return Xa(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Xa(jr(n.path,t),e))return!0;return!1}function Xj(n){return n.visible}function rF(n,e,t){let r=sl.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let h;if(a.snap)Xa(t,l)?(h=oo(t,l),r=xI(r,h,a.snap)):Xa(l,t)&&(h=oo(l,t),r=xI(r,Mn(),a.snap.getChild(h)));else{if(!a.children)throw(0,L.g5)("WriteRecord should have .snap or .children");if(Xa(t,l))h=oo(t,l),r=Px(r,h,a.children);else if(Xa(l,t))if(h=oo(l,t),dn(h))r=Px(r,Mn(),a.children);else{const m=(0,L.DV)(a.children,cn(h));if(m){const v=m.getChild(dr(h));r=xI(r,Mn(),v)}}}}}return r}function iF(n,e,t,r,i){if(r||i){const a=op(n.visibleWrites,e);return!i&&kx(a)?t:i||null!=t||Ox(a,Mn())?Uv(rF(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(Xa(v.path,e)||Xa(e,v.path))},e),t||Jt.EMPTY_NODE):null}{const a=$m(n.visibleWrites,e);if(null!=a)return a;{const l=op(n.visibleWrites,e);return kx(l)?t:null!=t||Ox(l,Mn())?Uv(l,t||Jt.EMPTY_NODE):null}}}function XS(n,e,t,r){return iF(n.writeTree,n.treePath,e,t,r)}function Fx(n,e){return function Jj(n,e,t){let r=Jt.EMPTY_NODE;const i=$m(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(_r,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=op(n.visibleWrites,e);return t.forEachChild(_r,(l,h)=>{const m=Uv(op(a,new Hn(l)),h);r=r.updateImmediateChild(l,m)}),tF(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return tF(op(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function sF(n,e,t,r){return function eH(n,e,t,r,i){(0,L.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=jr(e,t);if(Ox(n.visibleWrites,a))return null;{const l=op(n.visibleWrites,a);return kx(l)?i.getChild(t):Uv(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function JS(n,e){return function nH(n,e){return $m(n.visibleWrites,e)}(n.writeTree,jr(n.treePath,e))}function Lx(n,e,t){return function tH(n,e,t,r){const i=jr(e,t),a=$m(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Uv(op(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function oF(n,e){return aF(jr(n.treePath,e),n.writeTree)}function aF(n,e){return{treePath:n,writeTree:e}}class oH{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,L.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,L.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,SI(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,TI(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,Fv(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,L.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,SI(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const uF=new class aH{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Vx{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new sp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Lx(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Hm(this.viewCache_),a=function sH(n,e,t,r,i,a){return function rH(n,e,t,r,i,a,l){let h;const m=op(n.visibleWrites,e),v=$m(m,Mn());if(null!=v)h=v;else{if(null==t)return[];h=Uv(m,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const b=[],S=l.getCompare(),x=a?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let H=x.getNext();for(;H&&b.length<i;)0!==S(H,r)&&b.push(H),H=x.getNext();return b}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function lF(n,e,t,r,i,a){const l=e.eventCache;if(null!=JS(r,t))return e;{let h,m;if(dn(t))if((0,L.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=Hm(e),S=Fx(r,v instanceof Jt?v:Jt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const v=XS(r,Hm(e));h=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=cn(t);if(".priority"===v){(0,L.hu)(1===ip(t),"Can't have a priority with additional path components");const b=l.getNode();m=e.serverCache.getNode();const S=sF(r,t,b,m);h=null!=S?n.filter.updatePriority(b,S):l.getNode()}else{const b=dr(t);let S;if(l.isCompleteForChild(v)){m=e.serverCache.getNode();const x=sF(r,t,l.getNode(),m);S=null!=x?l.getNode().getImmediateChild(v).updateChild(b,x):l.getNode().getImmediateChild(v)}else S=Lx(r,v,e.serverCache);h=null!=S?n.filter.updateChild(l.getNode(),v,S,b,i,a):l.getNode()}}return NI(e,h,l.isFullyInitialized()||dn(t),n.filter.filtersNodes())}}function eA(n,e,t,r,i,a,l,h){const m=e.serverCache;let v;const b=l?n.filter:n.filter.getIndexedFilter();if(dn(t))v=b.updateFullNode(m.getNode(),r,null);else if(b.filtersNodes()&&!m.isFiltered()){const H=m.getNode().updateChild(t,r);v=b.updateFullNode(m.getNode(),H,null)}else{const H=cn(t);if(!m.isCompleteForPath(t)&&ip(t)>1)return e;const Z=dr(t),ce=m.getNode().getImmediateChild(H).updateChild(Z,r);v=".priority"===H?b.updatePriority(m.getNode(),ce):b.updateChild(m.getNode(),H,ce,Z,uF,null)}const S=J1(e,v,m.isFullyInitialized()||dn(t),b.filtersNodes());return lF(n,S,t,i,new Vx(i,S,a),h)}function Ux(n,e,t,r,i,a,l){const h=e.eventCache;let m,v;const b=new Vx(i,e,a);if(dn(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,l),m=NI(e,v,!0,n.filter.filtersNodes());else{const S=cn(t);if(".priority"===S)v=n.filter.updatePriority(e.eventCache.getNode(),r),m=NI(e,v,h.isFullyInitialized(),h.isFiltered());else{const x=dr(t),H=h.getNode().getImmediateChild(S);let Z;if(dn(x))Z=r;else{const se=b.getCompleteChild(S);Z=null!=se?".priority"===mx(x)&&se.getChild(U1(x)).isEmpty()?se:se.updateChild(x,r):Jt.EMPTY_NODE}m=H.equals(Z)?e:NI(e,n.filter.updateChild(h.getNode(),S,Z,x,b,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return m}function cF(n,e){return n.eventCache.isCompleteForChild(e)}function dF(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Bx(n,e,t,r,i,a,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,m=e;v=dn(t)?r:new vr(null).setTree(t,r);const b=e.serverCache.getNode();return v.children.inorderTraversal((S,x)=>{if(b.hasChild(S)){const Z=dF(0,e.serverCache.getNode().getImmediateChild(S),x);m=eA(n,m,new Hn(S),Z,i,a,l,h)}}),v.children.inorderTraversal((S,x)=>{const H=!e.serverCache.isCompleteForChild(S)&&null===x.value;if(!b.hasChild(S)&&!H){const se=dF(0,e.serverCache.getNode().getImmediateChild(S),x);m=eA(n,m,new Hn(S),se,i,a,l,h)}}),m}class mH{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Dx(r.getIndex()),a=function Mj(n){return n.loadsAllData()?new Dx(n.getIndex()):n.hasLimit()?new Rj(n):new AI(n)}(r);this.processor_=function uH(n){return{filter:n}}(a);const l=t.serverCache,h=t.eventCache,m=i.updateFullNode(Jt.EMPTY_NODE,l.getNode(),null),v=a.updateFullNode(Jt.EMPTY_NODE,h.getNode(),null),b=new sp(m,l.isFullyInitialized(),i.filtersNodes()),S=new sp(v,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=ZS(S,b),this.eventGenerator_=new jj(this.query_)}get query(){return this.query_}}function vH(n,e){const t=Hm(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!dn(e)&&!t.getImmediateChild(cn(e)).isEmpty())?t.getChild(e):null}function hF(n){return 0===n.eventRegistrations_.length}function fF(n,e,t){const r=[];if(t){(0,L.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function pF(n,e,t,r){e.type===Ai.MERGE&&null!==e.source.queryId&&((0,L.hu)(Hm(n.viewCache_),"We should always have a full cache before handling merges"),(0,L.hu)(YS(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function cH(n,e,t,r,i){const a=new oH;let l,h;if(t.type===Ai.OVERWRITE){const v=t;v.source.fromUser?l=Ux(n,e,v.path,v.snap,r,i,a):((0,L.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered()&&!dn(v.path),l=eA(n,e,v.path,v.snap,r,i,h,a))}else if(t.type===Ai.MERGE){const v=t;v.source.fromUser?l=function hH(n,e,t,r,i,a,l){let h=e;return r.foreach((m,v)=>{const b=jr(t,m);cF(e,cn(b))&&(h=Ux(n,h,b,v,i,a,l))}),r.foreach((m,v)=>{const b=jr(t,m);cF(e,cn(b))||(h=Ux(n,h,b,v,i,a,l))}),h}(n,e,v.path,v.children,r,i,a):((0,L.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered(),l=Bx(n,e,v.path,v.children,r,i,h,a))}else if(t.type===Ai.ACK_USER_WRITE){const v=t;l=v.revert?function gH(n,e,t,r,i,a){let l;if(null!=JS(r,t))return e;{const h=new Vx(r,e,i),m=e.eventCache.getNode();let v;if(dn(t)||".priority"===cn(t)){let b;if(e.serverCache.isFullyInitialized())b=XS(r,Hm(e));else{const S=e.serverCache.getNode();(0,L.hu)(S instanceof Jt,"serverChildren would be complete if leaf node"),b=Fx(r,S)}v=n.filter.updateFullNode(m,b,a)}else{const b=cn(t);let S=Lx(r,b,e.serverCache);null==S&&e.serverCache.isCompleteForChild(b)&&(S=m.getImmediateChild(b)),v=null!=S?n.filter.updateChild(m,b,S,dr(t),h,a):e.eventCache.getNode().hasChild(b)?n.filter.updateChild(m,b,Jt.EMPTY_NODE,dr(t),h,a):m,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=XS(r,Hm(e)),l.isLeafNode()&&(v=n.filter.updateFullNode(v,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=JS(r,Mn()),NI(e,v,l,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function fH(n,e,t,r,i,a,l){if(null!=JS(i,t))return e;const h=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(dn(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return eA(n,e,t,m.getNode().getChild(t),i,a,h,l);if(dn(t)){let v=new vr(null);return m.getNode().forEachChild(mc,(b,S)=>{v=v.set(new Hn(b),S)}),Bx(n,e,t,v,i,a,h,l)}return e}{let v=new vr(null);return r.foreach((b,S)=>{const x=jr(t,b);m.isCompleteForPath(x)&&(v=v.set(b,m.getNode().getChild(x)))}),Bx(n,e,t,v,i,a,h,l)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==Ai.LISTEN_COMPLETE)throw(0,L.g5)("Unknown operation type: "+t.type);l=function pH(n,e,t,r,i){const a=e.serverCache;return lF(n,J1(e,a.getNode(),a.isFullyInitialized()||dn(t),a.isFiltered()),t,r,uF,i)}(n,e,t.path,r,a)}const m=a.getChanges();return function dH(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=YS(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(Z1(YS(e)))}}(e,l,m),{viewCache:l,changes:m}}(n.processor_,i,e,t,r);return function lH(n,e){(0,L.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,L.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,L.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,gF(n,a.changes,a.viewCache.eventCache.getNode(),null)}function gF(n,e,t,r){return function Hj(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function Aj(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),MI(n,i,"child_removed",e,r,t),MI(n,i,"child_added",e,r,t),MI(n,i,"child_moved",a,r,t),MI(n,i,"child_changed",e,r,t),MI(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let tA,rA;class mF{constructor(){this.views=new Map}}function jx(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,L.hu)(null!=a,"SyncTree gave us an op for an invalid query."),pF(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(pF(l,e,t,r));return a}}function yF(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=XS(t,i?r:null),m=!1;h?m=!0:r instanceof Jt?(h=Fx(t,r),m=!1):(h=Jt.EMPTY_NODE,m=!1);const v=ZS(new sp(h,m,!1),new sp(r,i,!1));return new mH(e,v)}return l}function _F(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function ap(n,e){let t=null;for(const r of n.views.values())t=t||vH(r,e);return t}function vF(n,e){return e._queryParams.loadsAllData()?nA(n):n.views.get(e._queryIdentifier)}function wF(n,e){return null!=vF(n,e)}function up(n){return null!=nA(n)}function nA(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let RH=1;class EF{constructor(e){this.listenProvider_=e,this.syncPointTree_=new vr(null),this.pendingWriteTree_=function iH(){return{visibleWrites:sl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Hx(n,e,t,r,i){return function Wj(n,e,t,r,i){(0,L.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=xI(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Bv(n,new jm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function lp(n,e,t=!1){const r=function Kj(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Zj(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,L.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&Yj(h,r.path)?i=!1:Xa(r.path,h.path)&&(a=!0)),l--}return!!i&&(a?(function Qj(n){n.visibleWrites=rF(n.allWrites,Xj,Mn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=eF(n.visibleWrites,r.path):as(r.children,m=>{n.visibleWrites=eF(n.visibleWrites,jr(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new vr(null);return null!=r.snap?a=a.set(Mn(),!0):as(r.children,l=>{a=a.set(new Hn(l),!0)}),Bv(n,new KS(r.path,a,t))}return[]}function PI(n,e,t){return Bv(n,new jm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function iA(n,e,t,r,i=!1){const a=e._path,l=n.syncPointTree_.get(a);let h=[];if(l&&("default"===e._queryIdentifier||wF(l,e))){const m=function TH(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const h=up(n);if("default"===i)for(const[m,v]of n.views.entries())l=l.concat(fF(v,t,r)),hF(v)&&(n.views.delete(m),v.query._queryParams.loadsAllData()||a.push(v.query));else{const m=n.views.get(i);m&&(l=l.concat(fF(m,t,r)),hF(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||a.push(m.query)))}return h&&!up(n)&&a.push(new(function CH(){return(0,L.hu)(tA,"Reference.ts has not been loaded"),tA}())(e._repo,e._path)),{removed:a,events:l}}(l,e,t,r);(function DH(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const v=m.removed;if(h=m.events,!i){const b=-1!==v.findIndex(x=>x._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(a,(x,H)=>up(H));if(b&&!S){const x=n.syncPointTree_.subtree(a);if(!x.isEmpty()){const H=function FH(n){return n.fold((e,t,r)=>{if(t&&up(t))return[nA(t)];{let i=[];return t&&(i=_F(t)),as(r,(a,l)=>{i=i.concat(l)}),i}})}(x);for(let Z=0;Z<H.length;++Z){const se=H[Z],ce=se.query,We=bF(n,se);n.listenProvider_.startListening(kI(ce),OI(n,ce),We.hashFn,We.onComplete)}}}!S&&v.length>0&&!r&&(b?n.listenProvider_.stopListening(kI(e),null):v.forEach(x=>{const H=n.queryToTagMap.get(oA(x));n.listenProvider_.stopListening(kI(x),H)}))}!function LH(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=oA(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,v)}return h}function IF(n,e,t,r){const i=Gx(n,r);if(null!=i){const a=zx(i),l=a.path,h=a.queryId,m=oo(l,e);return Wx(n,l,new jm(Nx(h),m,t))}return[]}function $x(n,e,t,r=!1){const i=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(i,(x,H)=>{const Z=oo(x,i);a=a||ap(H,Z),l=l||up(H)});let m,h=n.syncPointTree_.get(i);h?(l=l||up(h),a=a||ap(h,Mn())):(h=new mF,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=a?m=!0:(m=!1,a=Jt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((H,Z)=>{const se=ap(Z,Mn());se&&(a=a.updateImmediateChild(H,se))}));const v=wF(h,e);if(!v&&!e._queryParams.loadsAllData()){const x=oA(e);(0,L.hu)(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const H=function VH(){return RH++}();n.queryToTagMap.set(x,H),n.tagToQueryMap.set(H,x)}let S=function bH(n,e,t,r,i,a){const l=yF(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function wH(n,e){n.eventRegistrations_.push(e)}(l,t),function EH(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(_r,(a,l)=>{r.push(Fv(a,l))}),t.isFullyInitialized()&&r.push(Z1(t.getNode())),gF(n,r,t.getNode(),e)}(l,t)}(h,e,t,QS(n.pendingWriteTree_,i),a,m);if(!v&&!l&&!r){const x=vF(h,e);S=S.concat(function UH(n,e,t){const r=e._path,i=OI(n,e),a=bF(n,t),l=n.listenProvider_.startListening(kI(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,L.hu)(!up(h.value),"If we're adding a query, it shouldn't be shadowed");else{const m=h.fold((v,b,S)=>{if(!dn(v)&&b&&up(b))return[nA(b).query];{let x=[];return b&&(x=x.concat(_F(b).map(H=>H.query))),as(S,(H,Z)=>{x=x.concat(Z)}),x}});for(let v=0;v<m.length;++v){const b=m[v];n.listenProvider_.stopListening(kI(b),OI(n,b))}}return l}(n,e,x))}return S}function sA(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,h)=>{const v=ap(h,oo(l,e));if(v)return v});return iF(i,e,a,t,!0)}function Bv(n,e){return CF(e,n.syncPointTree_,null,QS(n.pendingWriteTree_,Mn()))}function CF(n,e,t,r){if(dn(n.path))return DF(n,e,t,r);{const i=e.get(Mn());null==t&&null!=i&&(t=ap(i,Mn()));let a=[];const l=cn(n.path),h=n.operationForChild(l),m=e.children.get(l);if(m&&h){const v=t?t.getImmediateChild(l):null,b=oF(r,l);a=a.concat(CF(h,m,v,b))}return i&&(a=a.concat(jx(i,n,r,t))),a}}function DF(n,e,t,r){const i=e.get(Mn());null==t&&null!=i&&(t=ap(i,Mn()));let a=[];return e.children.inorderTraversal((l,h)=>{const m=t?t.getImmediateChild(l):null,v=oF(r,l),b=n.operationForChild(l);b&&(a=a.concat(DF(b,h,m,v)))}),i&&(a=a.concat(jx(i,n,r,t))),a}function bF(n,e){const t=e.query,r=OI(n,t);return{hashFn:()=>(function yH(n){return n.viewCache_.serverCache.getNode()}(e)||Jt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function PH(n,e,t){const r=Gx(n,t);if(r){const i=zx(r),a=i.path,l=i.queryId,h=oo(a,e);return Wx(n,a,new RI(Nx(l),h))}return[]}(n,t._path,r):function xH(n,e){return Bv(n,new RI({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function NB(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return iA(n,t,null,a)}}}}function OI(n,e){const t=oA(e);return n.queryToTagMap.get(t)}function oA(n){return n._path.toString()+"$"+n._queryIdentifier}function Gx(n,e){return n.tagToQueryMap.get(e)}function zx(n){const e=n.indexOf("$");return(0,L.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Hn(n.substr(0,e))}}function Wx(n,e,t){const r=n.syncPointTree_.get(e);return(0,L.hu)(r,"Missing sync point for query tag that we're tracking"),jx(r,t,QS(n.pendingWriteTree_,e),null)}function kI(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function AH(){return(0,L.hu)(rA,"Reference.ts has not been loaded"),rA}())(n._repo,n._path):n}class qx{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new qx(t)}node(){return this.node_}}class Kx{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=jr(this.path_,e);return new Kx(this.syncTree_,t)}node(){return sA(this.syncTree_,this.path_)}}const BH=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},TF=function(n,e,t){return n&&"object"==typeof n?((0,L.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?jH(n[".sv"],e,t):"object"==typeof n[".sv"]?HH(n[".sv"],e):void(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},jH=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,L.hu)(!1,"Unexpected server value: "+n)},HH=function(n,e,t){n.hasOwnProperty("increment")||(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,L.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,L.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},SF=function(n,e,t,r){return Yx(e,new Kx(t,n),r)},Zx=function(n,e,t){return Yx(n,new qx(e),t)};function Yx(n,e,t){const r=n.getPriority().val(),i=TF(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,h=TF(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new Ov(h,ei(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new Ov(i))),l.forEachChild(_r,(h,m)=>{const v=Yx(m,e.getImmediateChild(h),t);v!==m&&(a=a.updateImmediateChild(h,v))}),a}}class Qx{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function aA(n,e){let t=e instanceof Hn?e:new Hn(e),r=n,i=cn(t);for(;null!==i;){const a=(0,L.DV)(r.node.children,i)||{children:{},childCount:0};r=new Qx(i,r,a),t=dr(t),i=cn(t)}return r}function Gm(n){return n.node.value}function Xx(n,e){n.node.value=e,Jx(n)}function AF(n){return n.node.childCount>0}function uA(n,e){as(n.node.children,(t,r)=>{e(new Qx(t,n,r))})}function RF(n,e,t,r){t&&!r&&e(n),uA(n,i=>{RF(i,e,!0,r)}),t&&r&&e(n)}function FI(n){return new Hn(null===n.parent?n.name:FI(n.parent)+"/"+n.name)}function Jx(n){null!==n.parent&&function zH(n,e,t){const r=function $H(n){return void 0===Gm(n)&&!AF(n)}(t),i=(0,L.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Jx(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Jx(n))}(n.parent,n.name,n)}const WH=/[\[\].#$\/\u0000-\u001F\u007F]/,qH=/[\[\].#$\u0000-\u001F\u007F]/,eP=10485760,lA=function(n){return"string"==typeof n&&0!==n.length&&!WH.test(n)},MF=function(n){return"string"==typeof n&&0!==n.length&&!qH.test(n)},LI=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!FS(n)||n&&"object"==typeof n&&(0,L.r3)(n,".sv")},yc=function(n,e,t,r){r&&void 0===e||VI((0,L.gK)(n,"value"),e,t)},VI=function(n,e,t){const r=t instanceof Hn?new cj(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Um(r));if("function"==typeof e)throw new Error(n+"contains a function "+Um(r)+" with contents = "+e.toString());if(FS(e))throw new Error(n+"contains "+e.toString()+" "+Um(r));if("string"==typeof e&&e.length>eP/3&&(0,L.ug)(e)>eP)throw new Error(n+"contains a string greater than "+eP+" utf8 bytes "+Um(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(as(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!lA(l)))throw new Error(n+" contains an invalid key ("+l+") "+Um(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function dj(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,L.ug)(e),B1(n)})(r,l),VI(n,h,r),function hj(n){const e=n.parts_.pop();n.byteLength_-=(0,L.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Um(r)+" in addition to actual children.")}},NF=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,L.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];as(e,(l,h)=>{const m=new Hn(l);if(VI(i,h,jr(t,m)),".priority"===mx(m)&&!LI(h))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=II(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!lA(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(lj);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Xa(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},tP=function(n,e,t){if(!t||void 0!==e){if(FS(e))throw new Error((0,L.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!LI(e))throw new Error((0,L.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},UI=function(n,e,t,r){if(!(r&&void 0===t||lA(t)))throw new Error((0,L.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},BI=function(n,e,t,r){if(!(r&&void 0===t||MF(t)))throw new Error((0,L.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},YH=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),BI(n,e,t,r)},Ja=function(n,e){if(".info"===cn(e))throw new Error(n+" failed = Can't modify data under /.info/")},xF=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!lA(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),MF(n)}(t))throw new Error((0,L.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class QH{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function cA(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!yx(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function PF(n,e,t){cA(n,t),OF(n,r=>yx(r,e))}function ea(n,e,t){cA(n,t),OF(n,r=>Xa(r,e)||Xa(e,r))}function OF(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(XH(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function XH(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Lm&&os("event: "+t.toString()),xv(r)}}}const kF="repo_interrupt",JH=25;class e${constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new QH,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=qS(),this.transactionQueueTree_=new Qx,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function FF(n){const t=n.infoData_.getNode(new Hn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function jI(n){return BH({timestamp:FF(n)})}function LF(n,e,t,r,i){n.dataUpdateCount++;const a=new Hn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const m=(0,L.UI)(t,v=>ei(v));l=function OH(n,e,t,r){const i=Gx(n,r);if(i){const a=zx(i),l=a.path,h=a.queryId,m=oo(l,e),v=vr.fromObject(t);return Wx(n,l,new Vv(Nx(h),m,v))}return[]}(n.serverSyncTree_,a,m,i)}else{const m=ei(t);l=IF(n.serverSyncTree_,a,m,i)}else if(r){const m=(0,L.UI)(t,v=>ei(v));l=function NH(n,e,t){const r=vr.fromObject(t);return Bv(n,new Vv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,m)}else{const m=ei(t);l=PI(n.serverSyncTree_,a,m)}let h=a;l.length>0&&(h=Hv(n,a)),ea(n.eventQueue_,h,l)}function VF(n,e){nP(n,"connected",e),!1===e&&function s$(n){jv(n,"onDisconnectEvents");const e=jI(n),t=qS();Ax(n.onDisconnect_,Mn(),(i,a)=>{const l=SF(i,a,n.serverSyncTree_,e);Lv(t,i,l)});let r=[];Ax(t,Mn(),(i,a)=>{r=r.concat(PI(n.serverSyncTree_,i,a));const l=oP(n,i);Hv(n,l)}),n.onDisconnect_=qS(),ea(n.eventQueue_,Mn(),r)}(n)}function nP(n,e,t){const r=new Hn("/.info/"+e),i=ei(t);n.infoData_.updateSnapshot(r,i);const a=PI(n.infoSyncTree_,r,i);ea(n.eventQueue_,r,a)}function dA(n){return n.nextWriteId_++}function rP(n,e,t,r,i){jv(n,"set",{path:e.toString(),value:t,priority:r});const a=jI(n),l=ei(t,r),h=sA(n.serverSyncTree_,e),m=Zx(l,h,a),v=dA(n),b=Hx(n.serverSyncTree_,e,m,v,!0);cA(n.eventQueue_,b),n.server_.put(e.toString(),l.val(!0),(x,H)=>{const Z="ok"===x;Z||$s("set at "+e+" failed: "+x);const se=lp(n.serverSyncTree_,v,!Z);ea(n.eventQueue_,e,se),cp(0,i,x,H)});const S=oP(n,e);Hv(n,S),ea(n.eventQueue_,S,[])}function o$(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Sx(n.onDisconnect_,e),cp(0,t,r,i)})}function UF(n,e,t,r){const i=ei(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&Lv(n.onDisconnect_,e,i),cp(0,r,a,l)})}function iP(n,e,t){let r;r=".info"===cn(e._path)?iA(n.infoSyncTree_,e,t):iA(n.serverSyncTree_,e,t),PF(n.eventQueue_,e._path,r)}function BF(n){n.persistentConnection_&&n.persistentConnection_.interrupt(kF)}function jv(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),os(t,...e)}function cp(n,e,t,r){e&&xv(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function sP(n,e,t){return sA(n.serverSyncTree_,e,t)||Jt.EMPTY_NODE}function hA(n,e=n.transactionQueueTree_){if(e||fA(n,e),Gm(e)){const t=HF(n,e);(0,L.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function h$(n,e,t){const r=t.map(v=>v.currentWriteId),i=sP(n,e,r);let a=i;const l=i.hash();for(let v=0;v<t.length;v++){const b=t[v];(0,L.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const S=oo(e,b.path);a=a.updateChild(S,b.currentOutputSnapshotRaw)}const h=a.val(!0),m=e;n.server_.put(m.toString(),h,v=>{jv(n,"transaction put response",{path:m.toString(),status:v});let b=[];if("ok"===v){const S=[];for(let x=0;x<t.length;x++)t[x].status=2,b=b.concat(lp(n.serverSyncTree_,t[x].currentWriteId)),t[x].onComplete&&S.push(()=>t[x].onComplete(null,!0,t[x].currentOutputSnapshotResolved)),t[x].unwatcher();fA(n,aA(n.transactionQueueTree_,e)),hA(n,n.transactionQueueTree_),ea(n.eventQueue_,e,b);for(let x=0;x<S.length;x++)xv(S[x])}else{if("datastale"===v)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{$s("transaction at "+m.toString()+" failed: "+v);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=v}Hv(n,e)}},l)}(n,FI(e),t)}else AF(e)&&uA(e,t=>{hA(n,t)})}function Hv(n,e){const t=jF(n,e),r=FI(t);return function f$(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const m=e[h],v=oo(t,m.path);let S,b=!1;if((0,L.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)b=!0,S=m.abortReason,i=i.concat(lp(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=JH)b=!0,S="maxretry",i=i.concat(lp(n.serverSyncTree_,m.currentWriteId,!0));else{const x=sP(n,m.path,l);m.currentInputSnapshot=x;const H=e[h].update(x.val());if(void 0!==H){VI("transaction failed: Data returned ",H,m.path);let Z=ei(H);"object"==typeof H&&null!=H&&(0,L.r3)(H,".priority")||(Z=Z.updatePriority(x.getPriority()));const ce=m.currentWriteId,We=jI(n),ut=Zx(Z,x,We);m.currentOutputSnapshotRaw=Z,m.currentOutputSnapshotResolved=ut,m.currentWriteId=dA(n),l.splice(l.indexOf(ce),1),i=i.concat(Hx(n.serverSyncTree_,m.path,ut,m.currentWriteId,m.applyLocally)),i=i.concat(lp(n.serverSyncTree_,ce,!0))}else b=!0,S="nodata",i=i.concat(lp(n.serverSyncTree_,m.currentWriteId,!0))}ea(n.eventQueue_,t,i),i=[],b&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}fA(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)xv(r[h]);hA(n,n.transactionQueueTree_)}(n,HF(n,t),r),r}function jF(n,e){let t,r=n.transactionQueueTree_;for(t=cn(e);null!==t&&void 0===Gm(r);)r=aA(r,t),t=cn(e=dr(e));return r}function HF(n,e){const t=[];return $F(n,e,t),t.sort((r,i)=>r.order-i.order),t}function $F(n,e,t){const r=Gm(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);uA(e,i=>{$F(n,i,t)})}function fA(n,e){const t=Gm(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,Xx(e,t.length>0?t:void 0)}uA(e,r=>{fA(n,r)})}function oP(n,e){const t=FI(jF(n,e)),r=aA(n.transactionQueueTree_,e);return function GH(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{aP(n,i)}),aP(n,r),RF(r,i=>{aP(n,i)}),t}function aP(n,e){const t=Gm(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,L.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,L.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(lp(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Xx(e,void 0):t.length=a+1,ea(n.eventQueue_,FI(e),i);for(let l=0;l<r.length;l++)xv(r[l])}}const uP=function(n,e){const t=m$(n),r=t.namespace;return"firebase.com"===t.domain&&gc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&gc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&$s("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new cx(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Hn(t.pathString)}},m$=function(n){let e="",t="",r="",i="",a="",l=!0,h="https",m=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(h=n.substring(0,v-1),n=n.substring(v+2));let b=n.indexOf("/");-1===b&&(b=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(b,S)),b<S&&(i=function p$(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(b,S)));const x=function g$(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):$s(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));v=e.indexOf(":"),v>=0?(l="https"===h||"wss"===h,m=parseInt(e.substring(v+1),10)):v=e.length;const H=e.slice(0,v);if("localhost"===H.toLowerCase())t="localhost";else if(H.split(".").length<=2)t=H;else{const Z=e.indexOf(".");r=e.substring(0,Z).toLowerCase(),t=e.substring(Z+1),a=r}"ns"in x&&(a=x.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:a}},GF="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",y$=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=GF.charAt(t%64),t=Math.floor(t/64);(0,L.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=GF.charAt(e[i]);return(0,L.hu)(20===l.length,"nextPushId: Length should be 20."),l}}();class zF{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.Wl)(this.snapshot.exportVal())}}class WF{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class lP{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,L.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class qF{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new L.BH;return o$(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ja("OnDisconnect.remove",this._path);const e=new L.BH;return UF(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ja("OnDisconnect.set",this._path),yc("OnDisconnect.set",e,this._path,!1);const t=new L.BH;return UF(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ja("OnDisconnect.setWithPriority",this._path),yc("OnDisconnect.setWithPriority",e,this._path,!1),tP("OnDisconnect.setWithPriority",t,!1);const r=new L.BH;return function a$(n,e,t,r,i){const a=ei(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,h)=>{"ok"===l&&Lv(n.onDisconnect_,e,a),cp(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Ja("OnDisconnect.update",this._path),NF("OnDisconnect.update",e,this._path,!1);const t=new L.BH;return function u$(n,e,t,r){if((0,L.xb)(t))return os("onDisconnect().update() called with empty data.  Don't do anything."),void cp(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&as(t,(l,h)=>{const m=ei(h);Lv(n.onDisconnect_,jr(e,l),m)}),cp(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class xo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return dn(this._path)?null:mx(this._path)}get ref(){return new eu(this._repo,this._path)}get _queryIdentifier(){const e=Q1(this._queryParams),t=ux(e);return"{}"===t?"default":t}get _queryObject(){return Q1(this._queryParams)}isEqual(e){if(!((e=(0,L.m9)(e))instanceof xo))return!1;const t=this._repo===e._repo,r=yx(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function uj(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function pA(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function dp(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===mc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==np)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Yd)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===_r){if(null!=e&&!LI(e)||null!=t&&!LI(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.hu)(n.getIndex()instanceof Ix||n.getIndex()===Cx,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function gA(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class eu extends xo{constructor(e,t){super(e,t,new GS,!1)}get parent(){const e=U1(this._path);return null===e?null:new eu(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class zm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Hn(e),r=Wm(this.ref,e);return new zm(this._node.getChild(t),r,_r)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new zm(i,Wm(this.ref,r),_r)))}hasChild(e){const t=new Hn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function KF(n,e){return(n=(0,L.m9)(n))._checkNotDeleted("ref"),void 0!==e?Wm(n._root,e):n._root}function ZF(n,e){(n=(0,L.m9)(n))._checkNotDeleted("refFromURL");const t=uP(e,n._repo.repoInfo_.nodeAdmin);xF("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&gc("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),KF(n,t.path.toString())}function Wm(n,e){return null===cn((n=(0,L.m9)(n))._path)?YH("child","path",e,!1):BI("child","path",e,!1),new eu(n._repo,jr(n._path,e))}function cP(n,e){n=(0,L.m9)(n),Ja("set",n._path),yc("set",e,n._path,!1);const t=new L.BH;return rP(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function I$(n,e){NF("update",e,n._path,!1);const t=new L.BH;return function i$(n,e,t,r){jv(n,"update",{path:e.toString(),value:t});let i=!0;const a=jI(n),l={};if(as(t,(h,m)=>{i=!1,l[h]=SF(jr(e,h),ei(m),n.serverSyncTree_,a)}),i)os("update() called with empty data.  Don't do anything."),cp(0,r,"ok",void 0);else{const h=dA(n),m=function MH(n,e,t,r){!function qj(n,e,t,r){(0,L.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Px(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=vr.fromObject(t);return Bv(n,new Vv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);cA(n.eventQueue_,m),n.server_.merge(e.toString(),t,(v,b)=>{const S="ok"===v;S||$s("update at "+e+" failed: "+v);const x=lp(n.serverSyncTree_,h,!S),H=x.length>0?Hv(n,e):e;ea(n.eventQueue_,H,x),cp(0,r,v,b)}),as(t,v=>{const b=oP(n,jr(e,v));Hv(n,b)}),ea(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function C$(n){n=(0,L.m9)(n);const e=new lP(()=>{}),t=new HI(e);return function r$(n,e,t){const r=function kH(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,b)=>{const S=oo(v,t);r=r||ap(b,S)});let i=n.syncPointTree_.get(t);i?r=r||ap(i,Mn()):(i=new mF,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new sp(r,!0,!1):null;return function _H(n){return YS(n.viewCache_)}(yF(i,e,QS(n.pendingWriteTree_,e._path),a?l.getNode():Jt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=ei(i).withIndex(e._queryParams.getIndex());let l;if($x(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=PI(n.serverSyncTree_,e._path,a);else{const h=OI(n.serverSyncTree_,e);l=IF(n.serverSyncTree_,e._path,a,h)}return ea(n.eventQueue_,e._path,l),iA(n.serverSyncTree_,e,t,null,!0),a},i=>(jv(n,"get for query "+(0,L.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new zm(r,new eu(n._repo,n._path),n._queryParams.getIndex()))}class HI{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new zF("value",this,new zm(e.snapshotNode,new eu(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new WF(this,e,t):null}matches(e){return e instanceof HI&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class mA{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new WF(this,e,t):null}createEvent(e,t){(0,L.hu)(null!=e.childName,"Child events should have a childName.");const r=Wm(new eu(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new zF(e.type,this,new zm(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof mA&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function $I(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const m=t,v=(b,S)=>{iP(n._repo,n,h),m(b,S)};v.userCallback=t.userCallback,v.context=t.context,t=v}const l=new lP(t,a||void 0),h="value"===e?new HI(l):new mA(e,l);return function l$(n,e,t){let r;r=".info"===cn(e._path)?$x(n.infoSyncTree_,e,t):$x(n.serverSyncTree_,e,t),PF(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>iP(n._repo,n,h)}function dP(n,e,t,r){return $I(n,"value",e,t,r)}function YF(n,e,t,r){return $I(n,"child_added",e,t,r)}function QF(n,e,t,r){return $I(n,"child_changed",e,t,r)}function XF(n,e,t,r){return $I(n,"child_moved",e,t,r)}function JF(n,e,t,r){return $I(n,"child_removed",e,t,r)}function eL(n,e,t){let r=null;const i=t?new lP(t):null;"value"===e?r=new HI(i):e&&(r=new mA(e,i)),iP(n._repo,n,r)}class ol{}class tL extends ol{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){yc("endAt",this._value,e._path,!0);const t=Tx(e._queryParams,this._value,this._key);if(gA(t),dp(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new xo(e._repo,e._path,t,e._orderByCalled)}}class b$ extends ol{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){yc("endBefore",this._value,e._path,!1);const t=function Oj(n,e,t){let r;return r=Tx(n,e,n.index_===mc||t?t:np),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(gA(t),dp(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new xo(e._repo,e._path,t,e._orderByCalled)}}class nL extends ol{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){yc("startAt",this._value,e._path,!0);const t=bx(e._queryParams,this._value,this._key);if(gA(t),dp(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new xo(e._repo,e._path,t,e._orderByCalled)}}class A$ extends ol{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){yc("startAfter",this._value,e._path,!1);const t=function Pj(n,e,t){let r;return r=bx(n,e,n.index_===mc||t?t:Yd),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(gA(t),dp(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new xo(e._repo,e._path,t,e._orderByCalled)}}class M$ extends ol{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new xo(e._repo,e._path,function Nj(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class x$ extends ol{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new xo(e._repo,e._path,function xj(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class O$ extends ol{constructor(e){super(),this._path=e}_apply(e){pA(e,"orderByChild");const t=new Hn(this._path);if(dn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Ix(t),i=zS(e._queryParams,r);return dp(i),new xo(e._repo,e._path,i,!0)}}class F$ extends ol{_apply(e){pA(e,"orderByKey");const t=zS(e._queryParams,mc);return dp(t),new xo(e._repo,e._path,t,!0)}}class V$ extends ol{_apply(e){pA(e,"orderByPriority");const t=zS(e._queryParams,_r);return dp(t),new xo(e._repo,e._path,t,!0)}}class B$ extends ol{_apply(e){pA(e,"orderByValue");const t=zS(e._queryParams,Cx);return dp(t),new xo(e._repo,e._path,t,!0)}}class H$ extends ol{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(yc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new tL(this._value,this._key)._apply(new nL(this._value,this._key)._apply(e))}}function al(n,...e){let t=(0,L.m9)(n);for(const r of e)t=r._apply(t);return t}(function IH(n){(0,L.hu)(!tA,"__referenceConstructor has already been defined"),tA=n})(eu),function SH(n){(0,L.hu)(!rA,"__referenceConstructor has already been defined"),rA=n}(eu);const hP={};function iL(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||gc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),os("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,v,l=uP(a,i),h=l.repoInfo;typeof process<"u"&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(m=!0,a=`http://${v}?ns=${h.namespace}`,l=uP(a,i),h=l.repoInfo):m=!l.repoInfo.secure;const b=i&&m?new EI(EI.OWNER):new LB(n.name,n.options,e);xF("Invalid Firebase Database URL",l),dn(l.path)||gc("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function q$(n,e,t,r){let i=hP[e.name];i||(i={},hP[e.name]=i);let a=i[n.toURLString()];return a&&gc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new e$(n,false,t,r),i[n.toURLString()]=a,a}(h,n,b,new FB(n.name,t));return new Z$(S,n)}class Z${constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function t$(n,e,t){if(n.stats_=fx(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new WS(n.repoInfo_,(r,i,a,l)=>{LF(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>VF(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Bm(n.repoInfo_,e,(r,i,a,l)=>{LF(n,r,i,a,l)},r=>{VF(n,r)},r=>{!function n$(n,e){as(e,(t,r)=>{nP(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function BB(n,e){const t=n.toString();return hx[t]||(hx[t]=e()),hx[t]}(n.repoInfo_,()=>new Bj(n.stats_,n.server_)),n.infoData_=new kj,n.infoSyncTree_=new EF({startListening:(r,i,a,l)=>{let h=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(h=PI(n.infoSyncTree_,r._path,m),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),nP(n,"connected",!1),n.serverSyncTree_=new EF({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(h,m)=>{const v=l(h,m);ea(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new eu(this._repo,Mn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function W$(n,e){const t=hP[e];(!t||t[n.key]!==n)&&gc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),BF(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&gc("Cannot call "+e+" on a deleted database.")}}function sL(){S1.IS_TRANSPORT_INITIALIZED&&$s("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Y$(){sL(),rp.forceDisallow()}function Q$(){sL(),Pv.forceDisallow(),rp.forceAllow()}function eG(n,e){a1(n,e)}const nG={".sv":"timestamp"};class sG{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Bm.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Bm.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function tG(n){n1(Lr.SDK_VERSION),(0,Lr._registerComponent)(new gr.wA("database",(e,{instanceIdentifier:t})=>iL(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Lr.registerVersion)(e1,"0.14.4",n),(0,Lr.registerVersion)(e1,"0.14.4","esm2017")}();const lG=new Ci.Yd("@firebase/database-compat"),aL=function(n){lG.warn("FIREBASE WARNING: "+n)};class hG{constructor(e){this._delegate=e}cancel(e){(0,L.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,L.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,L.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,L.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,L.Dv)("OnDisconnect.set",1,2,arguments.length),(0,L.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,L.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,L.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,L.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,aL("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,L.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class fG{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,L.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class hp{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,L.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,L.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,L.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,L.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,L.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),BI("DataSnapshot.child","path",e,!1),new hp(this._database,this._delegate.child(e))}hasChild(e){return(0,L.Dv)("DataSnapshot.hasChild",1,1,arguments.length),BI("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,L.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,L.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,L.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new hp(this._database,t)))}hasChildren(){return(0,L.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,L.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,L.Dv)("DataSnapshot.ref",0,0,arguments.length),new ta(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Is{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,L.Dv)("Query.on",2,4,arguments.length),(0,L.Wj)("Query.on","callback",t,!1);const l=Is.getCancelAndContextArgs_("Query.on",r,i),h=(v,b)=>{t.call(l.context,new hp(this.database,v),b)};h.userCallback=t,h.context=l.context;const m=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return dP(this._delegate,h,m),t;case"child_added":return YF(this._delegate,h,m),t;case"child_removed":return JF(this._delegate,h,m),t;case"child_changed":return QF(this._delegate,h,m),t;case"child_moved":return XF(this._delegate,h,m),t;default:throw new Error((0,L.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,L.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,L.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,L.Wj)("Query.off","callback",t,!0),(0,L.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,eL(this._delegate,e,i)}else eL(this._delegate,e)}get(){return C$(this._delegate).then(e=>new hp(this.database,e))}once(e,t,r,i){(0,L.Dv)("Query.once",1,4,arguments.length),(0,L.Wj)("Query.once","callback",t,!0);const a=Is.getCancelAndContextArgs_("Query.once",r,i),l=new L.BH,h=(v,b)=>{const S=new hp(this.database,v);t&&t.call(a.context,S,b),l.resolve(S)};h.userCallback=t,h.context=a.context;const m=v=>{a.cancel&&a.cancel.call(a.context,v),l.reject(v)};switch(e){case"value":dP(this._delegate,h,m,{onlyOnce:!0});break;case"child_added":YF(this._delegate,h,m,{onlyOnce:!0});break;case"child_removed":JF(this._delegate,h,m,{onlyOnce:!0});break;case"child_changed":QF(this._delegate,h,m,{onlyOnce:!0});break;case"child_moved":XF(this._delegate,h,m,{onlyOnce:!0});break;default:throw new Error((0,L.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,L.Dv)("Query.limitToFirst",1,1,arguments.length),new Is(this.database,al(this._delegate,function N$(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new M$(n)}(e)))}limitToLast(e){return(0,L.Dv)("Query.limitToLast",1,1,arguments.length),new Is(this.database,al(this._delegate,function P$(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new x$(n)}(e)))}orderByChild(e){return(0,L.Dv)("Query.orderByChild",1,1,arguments.length),new Is(this.database,al(this._delegate,function k$(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return BI("orderByChild","path",n,!1),new O$(n)}(e)))}orderByKey(){return(0,L.Dv)("Query.orderByKey",0,0,arguments.length),new Is(this.database,al(this._delegate,function L$(){return new F$}()))}orderByPriority(){return(0,L.Dv)("Query.orderByPriority",0,0,arguments.length),new Is(this.database,al(this._delegate,function U$(){return new V$}()))}orderByValue(){return(0,L.Dv)("Query.orderByValue",0,0,arguments.length),new Is(this.database,al(this._delegate,function j$(){return new B$}()))}startAt(e=null,t){return(0,L.Dv)("Query.startAt",0,2,arguments.length),new Is(this.database,al(this._delegate,function S$(n=null,e){return UI("startAt","key",e,!0),new nL(n,e)}(e,t)))}startAfter(e=null,t){return(0,L.Dv)("Query.startAfter",0,2,arguments.length),new Is(this.database,al(this._delegate,function R$(n,e){return UI("startAfter","key",e,!0),new A$(n,e)}(e,t)))}endAt(e=null,t){return(0,L.Dv)("Query.endAt",0,2,arguments.length),new Is(this.database,al(this._delegate,function D$(n,e){return UI("endAt","key",e,!0),new tL(n,e)}(e,t)))}endBefore(e=null,t){return(0,L.Dv)("Query.endBefore",0,2,arguments.length),new Is(this.database,al(this._delegate,function T$(n,e){return UI("endBefore","key",e,!0),new b$(n,e)}(e,t)))}equalTo(e,t){return(0,L.Dv)("Query.equalTo",1,2,arguments.length),new Is(this.database,al(this._delegate,function $$(n,e){return UI("equalTo","key",e,!0),new H$(n,e)}(e,t)))}toString(){return(0,L.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,L.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,L.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Is))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,L.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,L.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,L.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new ta(this.database,new eu(this._delegate._repo,this._delegate._path))}}class ta extends Is{constructor(e,t){super(e,new xo(t._repo,t._path,new GS,!1)),this.database=e,this._delegate=t}getKey(){return(0,L.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,L.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ta(this.database,Wm(this._delegate,e))}getParent(){(0,L.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ta(this.database,e):null}getRoot(){return(0,L.Dv)("Reference.root",0,0,arguments.length),new ta(this.database,this._delegate.root)}set(e,t){(0,L.Dv)("Reference.set",1,2,arguments.length),(0,L.Wj)("Reference.set","onComplete",t,!0);const r=cP(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,L.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,aL("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ja("Reference.update",this._delegate._path),(0,L.Wj)("Reference.update","onComplete",t,!0);const r=I$(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,L.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,L.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function E$(n,e,t){if(Ja("setWithPriority",n._path),yc("setWithPriority",e,n._path,!1),tP("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new L.BH;return rP(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,L.Dv)("Reference.remove",0,1,arguments.length),(0,L.Wj)("Reference.remove","onComplete",e,!0);const t=function v$(n){return Ja("remove",n._path),cP(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,L.Dv)("Reference.transaction",1,3,arguments.length),(0,L.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,L.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,L.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function oG(n,e,t){var r;if(n=(0,L.m9)(n),Ja("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new L.BH,h=dP(n,()=>{});return function d$(n,e,t,r,i,a){jv(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:i1(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=sP(n,e,void 0);l.currentInputSnapshot=h;const m=l.update(h.val());if(void 0===m)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{VI("transaction failed: Data returned ",m,l.path),l.status=0;const v=aA(n.transactionQueueTree_,e),b=Gm(v)||[];let S;b.push(l),Xx(v,b),"object"==typeof m&&null!==m&&(0,L.r3)(m,".priority")?(S=(0,L.DV)(m,".priority"),(0,L.hu)(LI(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(sA(n.serverSyncTree_,e)||Jt.EMPTY_NODE).getPriority().val();const x=jI(n),H=ei(m,S),Z=Zx(H,h,x);l.currentOutputSnapshotRaw=H,l.currentOutputSnapshotResolved=Z,l.currentWriteId=dA(n);const se=Hx(n.serverSyncTree_,e,Z,l.currentWriteId,l.applyLocally);ea(n.eventQueue_,e,se),hA(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,v,b)=>{let S=null;m?a.reject(m):(S=new zm(b,new eu(n._repo,n._path),_r),a.resolve(new sG(v,S)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new fG(a.committed,new hp(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,L.Dv)("Reference.setPriority",1,2,arguments.length),(0,L.Wj)("Reference.setPriority","onComplete",t,!0);const r=function w$(n,e){n=(0,L.m9)(n),Ja("setPriority",n._path),tP("setPriority",e,!1);const t=new L.BH;return rP(n._repo,jr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,L.Dv)("Reference.push",0,2,arguments.length),(0,L.Wj)("Reference.push","onComplete",t,!0);const r=function _$(n,e){n=(0,L.m9)(n),Ja("push",n._path),yc("push",e,n._path,!0);const t=FF(n._repo),r=y$(t),i=Wm(n,r),a=Wm(n,r);let l;return l=null!=e?cP(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new ta(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new ta(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Ja("Reference.onDisconnect",this._delegate._path),new hG(new qF(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class GI{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Y$,forceLongPolling:Q$}}useEmulator(e,t,r={}){!function oL(n,e,t,r={}){(n=(0,L.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&gc("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&gc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new EI(EI.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,L.Sg)(r.mockUserToken,n.app.options.projectId);a=new EI(l)}!function z$(n,e,t,r){n.repoInfo_=new cx(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,L.Dv)("database.ref",0,1,arguments.length),e instanceof ta){const t=ZF(this._delegate,e.toString());return new ta(this,t)}{const t=KF(this._delegate,e);return new ta(this,t)}}refFromURL(e){(0,L.Dv)("database.refFromURL",1,1,arguments.length);const r=ZF(this._delegate,e);return new ta(this,r)}goOffline(){return(0,L.Dv)("database.goOffline",0,0,arguments.length),function X$(n){(n=(0,L.m9)(n))._checkNotDeleted("goOffline"),BF(n._repo)}(this._delegate)}goOnline(){return(0,L.Dv)("database.goOnline",0,0,arguments.length),function J$(n){(n=(0,L.m9)(n))._checkNotDeleted("goOnline"),function c$(n){n.persistentConnection_&&n.persistentConnection_.resume(kF)}(n._repo)}(this._delegate)}}GI.ServerValue={TIMESTAMP:function rG(){return nG}(),increment:n=>function iG(n){return{".sv":{increment:n}}}(n)};var gG=Object.freeze({__proto__:null,initStandalone:function pG({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){n1(t);const l=new gr.zt("auth-internal",new gr.H0("database-standalone"));return l.setComponent(new gr.wA("auth-internal",()=>r,"PRIVATE")),{instance:new GI(iL(n,l,void 0,e,a),n),namespace:i}}});const mG=GI.ServerValue;function uL(n){return null==n}function lL(n){return"function"==typeof n.set}function cL(n,e){return lL(e)?e:n.ref(e)}function dL(n,e){if(function _G(n){return"string"==typeof n}(n))return e.stringCase();if(lL(n))return e.firebaseCase();if(function vG(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function zI(n,e,t="on",r=_y.z){return new Fi.y(i=>{let a=null;return a=n[t](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,Tt.U)(i=>{const{snapshot:a,prevKey:l}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:l,key:h}}),(0,Cu.B)())}function hL(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function IG(n,e){const{payload:t,prevKey:r,key:i}=e,a=hL(n,i),l=function EG(n,e){if(uL(e))return 0;{const t=hL(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(m=>{const v={payload:m,type:"value",prevKey:h,key:m.key};return h=m.key,n=[...n,v],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function fL(n){return(uL(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function pL(n,e,t){return function wG(n,e,t){return zI(n,"value","once",t).pipe(yn(r=>{const i=[(0,vt.of)(r)];return e.forEach(a=>i.push(zI(n,a,"on",t))),(0,Ca.T)(...i).pipe(Wh(IG,[]))}),(0,gg.x)())}(n,e=fL(e),t)}function gL(n,e,t){const r=(e=fL(e)).map(i=>zI(n,i,"on",t));return(0,Ca.T)(...r)}function mL(n,e){return function(r,i){return dL(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function TG(n){return function(t){return t?dL(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function yL(n,e){return function(){return zI(n,"value","on",e)}}!function yG(n){n.INTERNAL.registerComponent(new gr.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new GI(i,r)},"PUBLIC").setServiceProps({Reference:ta,Query:Is,Database:GI,DataSnapshot:hp,enableLogging:eG,INTERNAL:gG,ServerValue:mG}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(Bh.Z);const RG=new f.OlP("angularfire2.realtimeDatabaseURL"),MG=new f.OlP("angularfire2.database.use-emulator");let NG=(()=>{class n{constructor(t,r,i,a,l,h,m,v,b,S,x,H,Z,se,ce){this.schedulers=h;const We=m,ut=(0,An.on)(t,l,r);v&&my(ut,l,b,x,H,Z,S,se),this.database=(0,An.cc)(`${ut.name}.database.${i}`,"AngularFireDatabase",ut.name,()=>{const He=l.runOutsideAngular(()=>ut.database(i||void 0));return We&&He.useEmulator(...We),He},[We])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>cL(this.database,t));let a=i;return r&&(a=r(i)),function SG(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:mL(r,"update"),set:mL(r,"set"),push:i=>r.push(i),remove:TG(r),snapshotChanges:i=>pL(n,i,t).pipe(Qt.iC),stateChanges:i=>gL(n,i,t).pipe(Qt.iC),auditTrail:i=>function CG(n,e,t){return function bG(n,e,t){return function DG(n,e){return zI(n,"value","on",e).pipe((0,Tt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function IB(...n){const e=(0,zh.jO)(n);return(0,Dr.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),h=!1;for(let m=0;m<i;m++)(0,Eu.Xf)(n[m]).subscribe((0,Zr.x)(r,v=>{a[m]=v,!h&&!l[m]&&(l[m]=!0,(h=l.every(wo.y))&&(l=null))},EB.Z));t.subscribe((0,Zr.x)(r,m=>{if(h){const v=[m,...a];r.next(e?e(...v):v)}}))})}(e),(0,Tt.U)(([i,a])=>{const l=i.lastKeyToLoad,h=a.map(m=>m.key);return{actions:a,lastKeyToLoad:l,loadedKeys:h}}),function CB(n){return(0,Dr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Zr.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,Tt.U)(i=>i.actions))}(n,gL(n,e).pipe(Wh((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(Qt.iC),valueChanges:(i,a)=>pL(n,i,t).pipe((0,Tt.U)(h=>h.map(m=>a&&a.idField?Object.assign(Object.assign({},m.payload.val()),{[a.idField]:m.key}):m.payload.val())),Qt.iC)}}(a,this)}object(t){return function AG(n,e){return{query:n,snapshotChanges:()=>yL(n,e.schedulers.outsideAngular)().pipe(Qt.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>yL(n,e.schedulers.outsideAngular)().pipe(Qt.iC,(0,Tt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>cL(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(An.Dh),f.LFG(An.xv,8),f.LFG(RG,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Qt.HU),f.LFG(MG,8),f.LFG(Oa,8),f.LFG(aw,8),f.LFG(dd,8),f.LFG(uw,8),f.LFG(lw,8),f.LFG(Xp,8),f.LFG(Jp,8),f.LFG(Di,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),xG=(()=>{class n{constructor(){Uh.Z.registerVersion("angularfire",Qt.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[NG]}),n})();var ul=U(1135);const{isArray:OG}=Array,{getPrototypeOf:kG,prototype:FG,keys:LG}=Object;function _L(n){if(1===n.length){const e=n[0];if(OG(e))return{args:e,keys:null};if(function VG(n){return n&&"object"==typeof n&&kG(n)===FG}(e)){const t=LG(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:UG}=Array;function vL(n){return(0,Tt.U)(e=>function BG(n,e){return UG(e)?n(...e):n(e)}(n,e))}function wL(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var jG=U(9672);function fP(...n){const e=(0,zh.yG)(n),t=(0,zh.jO)(n),{args:r,keys:i}=_L(n);if(0===r.length)return(0,ln.D)([],e);const a=new Fi.y(function HG(n,e,t=wo.y){return r=>{EL(e,()=>{const{length:i}=n,a=new Array(i);let l=i,h=i;for(let m=0;m<i;m++)EL(e,()=>{const v=(0,ln.D)(n[m],e);let b=!1;v.subscribe((0,Zr.x)(r,S=>{a[m]=S,b||(b=!0,h--),h||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>wL(i,l):wo.y));return t?a.pipe(vL(t)):a}function EL(n,e,t){n?(0,jG.f)(t,n,e):e()}function IL(n){return new Fi.y(e=>{(0,Eu.Xf)(n()).subscribe(e)})}var $G=U(9635);function WI(n,e){const t=(0,Li.m)(n)?n:()=>n,r=i=>i.error(t());return new Fi.y(e?i=>e.schedule(r,0,i):r)}var CL=U(727);function pP(){return(0,Dr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Zr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class DL extends Fi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Dr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new CL.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Zr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=CL.w0.EMPTY)}return e}refCount(){return pP()(this)}}var ao=U(5577);function $v(n,e){return(0,Li.m)(e)?(0,ao.z)(n,e,1):(0,ao.z)(n,1)}var uo=U(8505);function qm(n){return(0,Dr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Zr.x)(t,void 0,void 0,l=>{a=(0,Eu.Xf)(n(l,qm(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function gP(n){return n<=0?()=>Ki.E:(0,Dr.e)((e,t)=>{let r=[];e.subscribe((0,Zr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function qI(n){return(0,Dr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const rn="primary",KI=Symbol("RouteTitle");class WG{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Gv(n){return new WG(n)}function qG(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],h=n[a];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function _c(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!bL(n[i],e[i]))return!1;return!0}function bL(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function TL(n){return n.length>0?n[n.length-1]:null}function fp(n){return function PG(n){return!!n&&(n instanceof Fi.y||(0,Li.m)(n.lift)&&(0,Li.m)(n.subscribe))}(n)?n:(0,f.QGY)(n)?(0,ln.D)(Promise.resolve(n)):(0,vt.of)(n)}const ZG={exact:function RL(n,e,t){if(!Km(n.segments,e.segments)||!yA(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!RL(n.children[r],e.children[r],t))return!1;return!0},subset:ML},SL={exact:function YG(n,e){return _c(n,e)},subset:function QG(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>bL(n[t],e[t]))},ignored:()=>!0};function AL(n,e,t){return ZG[t.paths](n.root,e.root,t.matrixParams)&&SL[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function ML(n,e,t){return NL(n,e,e.segments,t)}function NL(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Km(i,t)||e.hasChildren()||!yA(i,t,r))}if(n.segments.length===t.length){if(!Km(n.segments,t)||!yA(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!ML(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Km(n.segments,i)&&yA(n.segments,i,r)&&n.children[rn])&&NL(n.children[rn],e,a,r)}}function yA(n,e,t){return e.every((r,i)=>SL[t](n[i].parameters,r.parameters))}class zv{constructor(e=new Wn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gv(this.queryParams)),this._queryParamMap}toString(){return e4.serialize(this)}}class Wn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _A(this)}}class ZI{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Gv(this.parameters)),this._parameterMap}toString(){return OL(this)}}function Km(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let YI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new mP},providedIn:"root"}),n})();class mP{parse(e){const t=new d4(e);return new zv(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${QI(e.root,!0)}`,r=function r4(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${vA(t)}=${vA(i)}`).join("&"):`${vA(t)}=${vA(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function t4(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const e4=new mP;function _A(n){return n.segments.map(e=>OL(e)).join("/")}function QI(n,e){if(!n.hasChildren())return _A(n);if(e){const t=n.children[rn]?QI(n.children[rn],!1):"",r=[];return Object.entries(n.children).forEach(([i,a])=>{i!==rn&&r.push(`${i}:${QI(a,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function JG(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===rn&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==rn&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===rn?[QI(n.children[rn],!1)]:[`${i}:${QI(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[rn]?`${_A(n)}/${t[0]}`:`${_A(n)}/(${t.join("//")})`}}function xL(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function vA(n){return xL(n).replace(/%3B/gi,";")}function yP(n){return xL(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wA(n){return decodeURIComponent(n)}function PL(n){return wA(n.replace(/\+/g,"%20"))}function OL(n){return`${yP(n.path)}${function n4(n){return Object.keys(n).map(e=>`;${yP(e)}=${yP(n[e])}`).join("")}(n.parameters)}`}const i4=/^[^\/()?;#]+/;function _P(n){const e=n.match(i4);return e?e[0]:""}const s4=/^[^\/()?;=#]+/,a4=/^[^=?&#]+/,l4=/^[^&#]+/;class d4{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Wn([],{}):new Wn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[rn]=new Wn(e,t)),r}parseSegment(){const e=_P(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new f.vHH(4009,!1);return this.capture(e),new ZI(wA(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function o4(n){const e=n.match(s4);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=_P(this.remaining);i&&(r=i,this.capture(r))}e[wA(t)]=wA(r)}parseQueryParam(e){const t=function u4(n){const e=n.match(a4);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function c4(n){const e=n.match(l4);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=PL(t),a=PL(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=_P(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new f.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=rn);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[rn]:new Wn([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new f.vHH(4011,!1)}}function kL(n){return n.segments.length>0?new Wn([],{[rn]:n}):n}function FL(n){const e={};for(const r of Object.keys(n.children)){const a=FL(n.children[r]);if(r===rn&&0===a.segments.length&&a.hasChildren())for(const[l,h]of Object.entries(a.children))e[l]=h;else(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function h4(n){if(1===n.numberOfChildren&&n.children[rn]){const e=n.children[rn];return new Wn(n.segments.concat(e.segments),e.children)}return n}(new Wn(n.segments,e))}function Zm(n){return n instanceof zv}function LL(n){let e;const i=kL(function t(a){const l={};for(const m of a.children){const v=t(m);l[m.outlet]=v}const h=new Wn(a.url,l);return a===n&&(e=h),h}(n.root));return e??i}function VL(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return vP(i,i,i,t,r);const a=function p4(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new BL(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return Object.entries(a.outlets).forEach(([m,v])=>{h[m]="string"==typeof v?v.split("/"):v}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((h,m)=>{0==m&&"."===h||(0==m&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new BL(t,e,r)}(e);if(a.toRoot())return vP(i,i,new Wn([],{}),t,r);const l=function g4(n,e,t){if(n.isAbsolute)return new IA(e,!0,0);if(!t)return new IA(e,!1,NaN);if(null===t.parent)return new IA(t,!0,0);const r=EA(n.commands[0])?0:1;return function m4(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new f.vHH(4005,!1);i=r.segments.length}return new IA(r,!1,i-a)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(a,i,n),h=l.processChildren?JI(l.segmentGroup,l.index,a.commands):jL(l.segmentGroup,l.index,a.commands);return vP(i,l.segmentGroup,h,t,r)}function EA(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function XI(n){return"object"==typeof n&&null!=n&&n.outlets}function vP(n,e,t,r,i){let l,a={};r&&Object.entries(r).forEach(([m,v])=>{a[m]=Array.isArray(v)?v.map(b=>`${b}`):`${v}`}),l=n===e?t:UL(n,e,t);const h=kL(FL(l));return new zv(h,a,i)}function UL(n,e,t){const r={};return Object.entries(n.children).forEach(([i,a])=>{r[i]=a===e?t:UL(a,e,t)}),new Wn(n.segments,r)}class BL{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&EA(r[0]))throw new f.vHH(4003,!1);const i=r.find(XI);if(i&&i!==TL(r))throw new f.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class IA{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function jL(n,e,t){if(n||(n=new Wn([],{})),0===n.segments.length&&n.hasChildren())return JI(n,e,t);const r=function _4(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],h=t[r];if(XI(h))break;const m=`${h}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!$L(m,v,l))return a;r+=2}else{if(!$L(m,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Wn(n.segments.slice(0,r.pathIndex),{});return a.children[rn]=new Wn(n.segments.slice(r.pathIndex),n.children),JI(a,0,i)}return r.match&&0===i.length?new Wn(n.segments,{}):r.match&&!n.hasChildren()?wP(n,e,t):r.match?JI(n,0,i):wP(n,e,t)}function JI(n,e,t){if(0===t.length)return new Wn(n.segments,{});{const r=function y4(n){return XI(n[0])?n[0].outlets:{[rn]:n}}(t),i={};if(!r[rn]&&n.children[rn]&&1===n.numberOfChildren&&0===n.children[rn].segments.length){const a=JI(n.children[rn],e,t);return new Wn(n.segments,a.children)}return Object.entries(r).forEach(([a,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(i[a]=jL(n.children[a],e,l))}),Object.entries(n.children).forEach(([a,l])=>{void 0===r[a]&&(i[a]=l)}),new Wn(n.segments,i)}}function wP(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(XI(a)){const m=v4(a.outlets);return new Wn(r,m)}if(0===i&&EA(t[0])){r.push(new ZI(n.segments[e].path,HL(t[0]))),i++;continue}const l=XI(a)?a.outlets[rn]:`${a}`,h=i<t.length-1?t[i+1]:null;l&&h&&EA(h)?(r.push(new ZI(l,HL(h))),i+=2):(r.push(new ZI(l,{})),i++)}return new Wn(r,{})}function v4(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=wP(new Wn([],{}),0,r))}),e}function HL(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function $L(n,e,t){return n==t.path&&_c(e,t.parameters)}const eC="imperative";class vc{constructor(e,t){this.id=e,this.url=t}}class EP extends vc{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ym extends vc{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class CA extends vc{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class tC extends vc{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class IP extends vc{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class w4 extends vc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class E4 extends vc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class I4 extends vc{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class C4 extends vc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class D4 extends vc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class b4{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class T4{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class S4{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class A4{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class R4{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class M4{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class GL{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class N4{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new nC,this.attachRef=null}}let nC=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new N4,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class zL{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=CP(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=CP(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=DP(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return DP(e,this._root).map(t=>t.value)}}function CP(n,e){if(n===e.value)return e;for(const t of e.children){const r=CP(n,t);if(r)return r}return null}function DP(n,e){if(n===e.value)return[e];for(const t of e.children){const r=DP(n,t);if(r.length)return r.unshift(e),r}return[]}class Xd{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Wv(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class WL extends zL{constructor(e,t){super(e),this.snapshot=t,bP(this,e)}toString(){return this.snapshot.toString()}}function qL(n,e){const t=function x4(n,e){const l=new DA([],{},{},"",{},rn,e,null,{});return new ZL("",new Xd(l,[]))}(0,e),r=new ul.X([new ZI("",{})]),i=new ul.X({}),a=new ul.X({}),l=new ul.X({}),h=new ul.X(""),m=new qv(r,i,l,h,a,rn,e,t.root);return m.snapshot=t.root,new WL(new Xd(m,[]),t)}class qv{constructor(e,t,r,i,a,l,h,m){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=a,this.outlet=l,this.component=h,this._futureSnapshot=m,this.title=this.dataSubject?.pipe((0,Tt.U)(v=>v[KI]))??(0,vt.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Tt.U)(e=>Gv(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Tt.U)(e=>Gv(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function KL(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function P4(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class DA{get title(){return this.data?.[KI]}constructor(e,t,r,i,a,l,h,m,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.routeConfig=m,this._resolve=v}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Gv(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gv(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ZL extends zL{constructor(e,t){super(t),this.url=e,bP(this,t)}toString(){return YL(this._root)}}function bP(n,e){e.value._routerState=n,e.children.forEach(t=>bP(n,t))}function YL(n){const e=n.children.length>0?` { ${n.children.map(YL).join(", ")} } `:"";return`${n.value}${e}`}function TP(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,_c(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),_c(e.params,t.params)||n.paramsSubject.next(t.params),function KG(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!_c(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),_c(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function SP(n,e){const t=_c(n.params,e.params)&&function XG(n,e){return Km(n,e)&&n.every((t,r)=>_c(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||SP(n.parent,e.parent))}let AP=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=rn,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.parentContexts=(0,f.f3M)(nC),this.location=(0,f.f3M)(f.s_b),this.changeDetector=(0,f.f3M)(f.sBO),this.environmentInjector=(0,f.f3M)(f.lqb),this.inputBinder=(0,f.f3M)(bA,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new f.vHH(4013,!1);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,m=new O4(t,h,i.injector);this.activated=i.createComponent(l,{index:i.length,injector:m,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[f.TTD]}),n})();class O4{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===qv?this.route:e===nC?this.childContexts:this.parent.get(e,t)}}const bA=new f.OlP("");let QL=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=fP([r.queryParams,r.params,r.data]).pipe(yn(([a,l,h],m)=>(h={...a,...l,...h},0===m?(0,vt.of)(h):Promise.resolve(h)))).subscribe(a=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const l=(0,f.qFp)(r.component);if(l)for(const{templateName:h}of l.inputs)t.activatedComponentRef.setInput(h,a[h]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function rC(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function F4(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return rC(n,r,i);return rC(n,r)})}(n,e,t);return new Xd(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>rC(n,h)),l}}const r=function L4(n){return new qv(new ul.X(n.url),new ul.X(n.params),new ul.X(n.queryParams),new ul.X(n.fragment),new ul.X(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>rC(n,a));return new Xd(r,i)}}const RP="ngNavigationCancelingError";function XL(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Zm(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=JL(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function JL(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[RP]=!0,r.cancellationCode=e,t&&(r.url=t),r}function eV(n){return tV(n)&&Zm(n.url)}function tV(n){return n&&n[RP]}let nV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[AP],encapsulation:2}),n})();function MP(n){const e=n.children&&n.children.map(MP),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==rn&&(t.component=nV),t}function ll(n){return n.outlet||rn}function iC(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class G4{constructor(e,t,r,i,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=a}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),TP(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Wv(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),Object.values(i).forEach(a=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Wv(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Wv(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Wv(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new M4(a.value.snapshot))}),e.children.length&&this.forwardEvent(new A4(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(TP(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),TP(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=iC(i.snapshot);l.attachRef=null,l.route=i,l.injector=h,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class rV{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class TA{constructor(e,t){this.component=e,this.route=t}}function z4(n,e,t){const r=n._root;return sC(r,e?e._root:null,t,[r.value])}function Kv(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,f.Z0I)(n)?e.get(n):n:r}function sC(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Wv(e);return n.children.forEach(l=>{(function q4(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const m=function K4(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Km(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Km(n.url,e.url)||!_c(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!SP(n,e)||!_c(n.queryParams,e.queryParams);default:return!SP(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new rV(r)):(a.data=l.data,a._resolvedData=l._resolvedData),sC(n,e,a.component?h?h.children:null:t,r,i),m&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new TA(h.outlet.component,l))}else l&&oC(e,h,i),i.canActivateChecks.push(new rV(r)),sC(n,null,a.component?h?h.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),Object.entries(a).forEach(([l,h])=>oC(h,t.getContext(l),i)),i}function oC(n,e,t){const r=Wv(n),i=n.value;Object.entries(r).forEach(([a,l])=>{oC(l,i.component?e?e.children.getContext(a):null:e,t)}),t.canDeactivateChecks.push(new TA(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function aC(n){return"function"==typeof n}function iV(n){return n instanceof Da||"EmptyError"===n?.name}const SA=Symbol("INITIAL_VALUE");function Zv(){return yn(n=>fP(n.map(e=>e.pipe(Ii(1),jy(SA)))).pipe((0,Tt.U)(e=>{for(const t of e)if(!0!==t){if(t===SA)return SA;if(!1===t||t instanceof zv)return t}return!0}),Xn(e=>e!==SA),Ii(1)))}function sV(n){return(0,$G.z)((0,uo.b)(e=>{if(Zm(e))throw XL(0,e)}),(0,Tt.U)(e=>!0===e))}class AA{constructor(e){this.segmentGroup=e||null}}class oV{constructor(e){this.urlTree=e}}function Yv(n){return WI(new AA(n))}function aV(n){return WI(new oV(n))}class pz{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new f.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,vt.of)(r);if(i.numberOfChildren>1||!i.children[rn])return WI(new f.vHH(4e3,!1));i=i.children[rn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new zv(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,a])=>{if("string"==typeof a&&a.startsWith(":")){const h=a.substring(1);r[i]=t[h]}else r[i]=a}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return Object.entries(t.children).forEach(([h,m])=>{l[h]=this.createSegmentGroup(e,m,r,i)}),new Wn(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new f.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const NP={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gz(n,e,t,r,i){const a=xP(n,e,t);return a.matched?(r=function V4(n,e){return n.providers&&!n._injector&&(n._injector=(0,f.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function dz(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,vt.of)(!0);const a=i.map(l=>{const h=Kv(l,n);return fp(function ez(n){return n&&aC(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))});return(0,vt.of)(a).pipe(Zv(),sV())}(r,e,t).pipe((0,Tt.U)(l=>!0===l?a:{...NP}))):(0,vt.of)(a)}function xP(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...NP}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||qG)(t,n,e);if(!i)return{...NP};const a={};Object.entries(i.posParams??{}).forEach(([h,m])=>{a[h]=m.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function uV(n,e,t,r){return t.length>0&&function _z(n,e,t){return t.some(r=>RA(n,e,r)&&ll(r)!==rn)}(n,t,r)?{segmentGroup:new Wn(e,yz(r,new Wn(t,n.children))),slicedSegments:[]}:0===t.length&&function vz(n,e,t){return t.some(r=>RA(n,e,r))}(n,t,r)?{segmentGroup:new Wn(n.segments,mz(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Wn(n.segments,n.children),slicedSegments:t}}function mz(n,e,t,r,i){const a={};for(const l of r)if(RA(n,t,l)&&!i[ll(l)]){const h=new Wn([],{});a[ll(l)]=h}return{...i,...a}}function yz(n,e){const t={};t[rn]=e;for(const r of n)if(""===r.path&&ll(r)!==rn){const i=new Wn([],{});t[ll(r)]=i}return t}function RA(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class Cz{constructor(e,t,r,i,a,l,h){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=a,this.paramsInheritanceStrategy=l,this.urlSerializer=h,this.allowRedirects=!0,this.applyRedirects=new pz(this.urlSerializer,this.urlTree)}noMatchError(e){return new f.vHH(4002,!1)}recognize(){const e=uV(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,rn).pipe(qm(t=>{if(t instanceof oV)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof AA?this.noMatchError(t):t}),(0,Tt.U)(t=>{const r=new DA([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},rn,this.rootComponentType,null,{}),i=new Xd(r,t),a=new ZL("",i),l=function f4(n,e,t=null,r=null){return VL(LL(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,a.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(a._root),{state:a,tree:l}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,rn).pipe(qm(r=>{throw r instanceof AA?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=KL(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,ln.D)(i).pipe($v(a=>{const l=r.children[a],h=function H4(n,e){const t=n.filter(r=>ll(r)===e);return t.push(...n.filter(r=>ll(r)!==e)),t}(t,a);return this.processSegmentGroup(e,h,l,a)}),Wh((a,l)=>(a.push(...l),a)),ba(null),function GG(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Xn((i,a)=>n(i,a,r)):wo.y,gP(1),t?ba(e):Du(()=>new Da))}(),(0,ao.z)(a=>{if(null===a)return Yv(r);const l=lV(a);return function Dz(n){n.sort((e,t)=>e.value.outlet===rn?-1:t.value.outlet===rn?1:e.value.outlet.localeCompare(t.value.outlet))}(l),(0,vt.of)(l)}))}processSegment(e,t,r,i,a,l){return(0,ln.D)(t).pipe($v(h=>this.processSegmentAgainstRoute(h._injector??e,t,h,r,i,a,l).pipe(qm(m=>{if(m instanceof AA)return(0,vt.of)(null);throw m}))),Ps(h=>!!h),qm(h=>{if(iV(h))return function Ez(n,e,t){return 0===e.length&&!n.children[t]}(r,i,a)?(0,vt.of)([]):Yv(r);throw h}))}processSegmentAgainstRoute(e,t,r,i,a,l,h){return function wz(n,e,t,r){return!!(ll(n)===r||r!==rn&&RA(e,t,n))&&("**"===n.path||xP(e,n,t).matched)}(r,i,a,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,a,l,h):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,a,l):Yv(i):Yv(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?aV(a):this.applyRedirects.lineralizeSegments(r,a).pipe((0,ao.z)(l=>{const h=new Wn(l,{});return this.processSegment(e,t,h,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:h,consumedSegments:m,remainingSegments:v,positionalParamSegments:b}=xP(t,i,a);if(!h)return Yv(t);const S=this.applyRedirects.applyRedirectCommands(m,i.redirectTo,b);return i.redirectTo.startsWith("/")?aV(S):this.applyRedirects.lineralizeSegments(i,S).pipe((0,ao.z)(x=>this.processSegment(e,r,t,x.concat(v),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a,l){let h;if("**"===r.path){const m=i.length>0?TL(i).parameters:{},v=new DA(i,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,cV(r),ll(r),r.component??r._loadedComponent??null,r,dV(r));h=(0,vt.of)({snapshot:v,consumedSegments:[],remainingSegments:[]}),t.children={}}else h=gz(t,r,i,e).pipe((0,Tt.U)(({matched:m,consumedSegments:v,remainingSegments:b,parameters:S})=>m?{snapshot:new DA(v,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,cV(r),ll(r),r.component??r._loadedComponent??null,r,dV(r)),consumedSegments:v,remainingSegments:b}:null));return h.pipe(yn(m=>null===m?Yv(t):this.getChildConfig(e=r._injector??e,r,i).pipe(yn(({routes:v})=>{const b=r._loadedInjector??e,{snapshot:S,consumedSegments:x,remainingSegments:H}=m,{segmentGroup:Z,slicedSegments:se}=uV(t,x,H,v);if(0===se.length&&Z.hasChildren())return this.processChildren(b,v,Z).pipe((0,Tt.U)(We=>null===We?null:[new Xd(S,We)]));if(0===v.length&&0===se.length)return(0,vt.of)([new Xd(S,[])]);const ce=ll(r)===a;return this.processSegment(b,v,Z,se,ce?rn:a,!0).pipe((0,Tt.U)(We=>[new Xd(S,We)]))}))))}getChildConfig(e,t,r){return t.children?(0,vt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,vt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function cz(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,vt.of)(!0);const a=i.map(l=>{const h=Kv(l,n);return fp(function Y4(n){return n&&aC(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))});return(0,vt.of)(a).pipe(Zv(),sV())}(e,t,r).pipe((0,ao.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,uo.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function fz(n){return WI(JL(!1,3))}())):(0,vt.of)({routes:[],injector:e})}}function bz(n){const e=n.value.routeConfig;return e&&""===e.path}function lV(n){const e=[],t=new Set;for(const r of n){if(!bz(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=lV(r.children);e.push(new Xd(r.value,i))}return e.filter(r=>!t.has(r))}function cV(n){return n.data||{}}function dV(n){return n.resolve||{}}function hV(n){return"string"==typeof n.title||null===n.title}function PP(n){return yn(e=>{const t=n(e);return t?(0,ln.D)(t).pipe((0,Tt.U)(()=>e)):(0,vt.of)(e)})}const Qv=new f.OlP("ROUTES");let OP=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,f.f3M)(f.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,vt.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=fp(t.loadComponent()).pipe((0,Tt.U)(fV),(0,uo.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),qI(()=>{this.componentLoaders.delete(t)})),i=new DL(r,()=>new ki.x).pipe(pP());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,vt.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Tt.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let m,v;return Array.isArray(h)?v=h:(m=h.create(t).injector,v=m.get(Qv,[],f.XFs.Self|f.XFs.Optional).flat()),{routes:v.map(MP),injector:m}}),qI(()=>{this.childrenLoaders.delete(r)})),l=new DL(a,()=>new ki.x).pipe(pP());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return fp(t()).pipe((0,Tt.U)(fV),(0,ao.z)(r=>r instanceof f.YKP||Array.isArray(r)?(0,vt.of)(r):(0,ln.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function fV(n){return function xz(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let MA=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new ki.x,this.configLoader=(0,f.f3M)(OP),this.environmentInjector=(0,f.f3M)(f.lqb),this.urlSerializer=(0,f.f3M)(YI),this.rootContexts=(0,f.f3M)(nC),this.inputBindingEnabled=null!==(0,f.f3M)(bA,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,vt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new T4(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new b4(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new ul.X({id:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:eC,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Xn(r=>0!==r.id),(0,Tt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),yn(r=>{let i=!1,a=!1;return(0,vt.of)(r).pipe((0,uo.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),yn(l=>{const h=t.browserUrlTree.toString(),m=!t.navigated||l.extractedUrl.toString()!==h||h!==t.currentUrlTree.toString();if(!m&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const b="";return this.events.next(new tC(l.id,t.serializeUrl(r.rawUrl),b,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Ki.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return pV(l.source)&&(t.browserUrlTree=l.extractedUrl),(0,vt.of)(l).pipe(yn(b=>{const S=this.transitions?.getValue();return this.events.next(new EP(b.id,this.urlSerializer.serialize(b.extractedUrl),b.source,b.restoredState)),S!==this.transitions?.getValue()?Ki.E:Promise.resolve(b)}),function Tz(n,e,t,r,i,a){return(0,ao.z)(l=>function Iz(n,e,t,r,i,a,l="emptyOnly"){return new Cz(n,e,t,r,i,l,a).recognize()}(n,e,t,r,l.extractedUrl,i,a).pipe((0,Tt.U)(({state:h,tree:m})=>({...l,targetSnapshot:h,urlAfterRedirects:m}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,uo.b)(b=>{if(r.targetSnapshot=b.targetSnapshot,r.urlAfterRedirects=b.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:b.urlAfterRedirects},"eager"===t.urlUpdateStrategy){if(!b.extras.skipLocationChange){const x=t.urlHandlingStrategy.merge(b.urlAfterRedirects,b.rawUrl);t.setBrowserUrl(x,b)}t.browserUrlTree=b.urlAfterRedirects}const S=new w4(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(S)}));if(m&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:b,extractedUrl:S,source:x,restoredState:H,extras:Z}=l,se=new EP(b,this.urlSerializer.serialize(S),x,H);this.events.next(se);const ce=qL(0,this.rootComponentType).snapshot;return r={...l,targetSnapshot:ce,urlAfterRedirects:S,extras:{...Z,skipLocationChange:!1,replaceUrl:!1}},(0,vt.of)(r)}{const b="";return this.events.next(new tC(l.id,t.serializeUrl(r.extractedUrl),b,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Ki.E}}),(0,uo.b)(l=>{const h=new E4(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),(0,Tt.U)(l=>r={...l,guards:z4(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function nz(n,e){return(0,ao.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?(0,vt.of)({...t,guardsResult:!0}):function rz(n,e,t,r){return(0,ln.D)(n).pipe((0,ao.z)(i=>function lz(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!a||0===a.length)return(0,vt.of)(!0);const l=a.map(h=>{const m=iC(e)??i,v=Kv(h,m);return fp(function J4(n){return n&&aC(n.canDeactivate)}(v)?v.canDeactivate(n,e,t,r):m.runInContext(()=>v(n,e,t,r))).pipe(Ps())});return(0,vt.of)(l).pipe(Zv())}(i.component,i.route,t,e,r)),Ps(i=>!0!==i,!0))}(l,r,i,n).pipe((0,ao.z)(h=>h&&function Z4(n){return"boolean"==typeof n}(h)?function iz(n,e,t,r){return(0,ln.D)(e).pipe($v(i=>By(function oz(n,e){return null!==n&&e&&e(new S4(n)),(0,vt.of)(!0)}(i.route.parent,r),function sz(n,e){return null!==n&&e&&e(new R4(n)),(0,vt.of)(!0)}(i.route,r),function uz(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function W4(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>IL(()=>{const h=l.guards.map(m=>{const v=iC(l.node)??t,b=Kv(m,v);return fp(function X4(n){return n&&aC(n.canActivateChild)}(b)?b.canActivateChild(r,n):v.runInContext(()=>b(r,n))).pipe(Ps())});return(0,vt.of)(h).pipe(Zv())}));return(0,vt.of)(a).pipe(Zv())}(n,i.path,t),function az(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,vt.of)(!0);const i=r.map(a=>IL(()=>{const l=iC(e)??t,h=Kv(a,l);return fp(function Q4(n){return n&&aC(n.canActivate)}(h)?h.canActivate(e,n):l.runInContext(()=>h(e,n))).pipe(Ps())}));return(0,vt.of)(i).pipe(Zv())}(n,i.route,t))),Ps(i=>!0!==i,!0))}(r,a,n,e):(0,vt.of)(h)),(0,Tt.U)(h=>({...t,guardsResult:h})))})}(this.environmentInjector,l=>this.events.next(l)),(0,uo.b)(l=>{if(r.guardsResult=l.guardsResult,Zm(l.guardsResult))throw XL(0,l.guardsResult);const h=new I4(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),Xn(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),PP(l=>{if(l.guards.canActivateChecks.length)return(0,vt.of)(l).pipe((0,uo.b)(h=>{const m=new C4(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}),yn(h=>{let m=!1;return(0,vt.of)(h).pipe(function Sz(n,e){return(0,ao.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,vt.of)(t);let a=0;return(0,ln.D)(i).pipe($v(l=>function Az(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!hV(i)&&(a[KI]=i.title),function Rz(n,e,t,r){const i=function Mz(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,vt.of)({});const a={};return(0,ln.D)(i).pipe((0,ao.z)(l=>function Nz(n,e,t,r){const i=iC(e)??r,a=Kv(n,i);return fp(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(Ps(),(0,uo.b)(h=>{a[l]=h}))),gP(1),function zG(n){return(0,Tt.U)(()=>n)}(a),qm(l=>iV(l)?Ki.E:WI(l)))}(a,n,e,r).pipe((0,Tt.U)(l=>(n._resolvedData=l,n.data=KL(n,t).resolve,i&&hV(i)&&(n.data[KI]=i.title),null)))}(l.route,r,n,e)),(0,uo.b)(()=>a++),gP(1),(0,ao.z)(l=>a===i.length?(0,vt.of)(t):Ki.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,uo.b)({next:()=>m=!0,complete:()=>{m||(t.restoreHistory(h),this.cancelNavigationTransition(h,"",2))}}))}),(0,uo.b)(h=>{const m=new D4(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}))}),PP(l=>{const h=m=>{const v=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&v.push(this.configLoader.loadComponent(m.routeConfig).pipe((0,uo.b)(b=>{m.component=b}),(0,Tt.U)(()=>{})));for(const b of m.children)v.push(...h(b));return v};return fP(h(l.targetSnapshot.root)).pipe(ba(),Ii(1))}),PP(()=>this.afterPreactivation()),(0,Tt.U)(l=>{const h=function k4(n,e,t){const r=rC(n,e._root,t?t._root:void 0);return new WL(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:h}}),(0,uo.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t,r)=>(0,Tt.U)(i=>(new G4(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Ii(1),(0,uo.b)({next:l=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Ym(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{i=!0}}),qI(()=>{i||a||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),qm(l=>{if(a=!0,tV(l)){eV(l)||(t.navigated=!0,t.restoreHistory(r,!0));const h=new CA(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(h),eV(l)){const m=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),v={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||pV(r.source)};t.scheduleNavigation(m,eC,null,v,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const h=new IP(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(h);try{r.resolve(t.errorHandler(l))}catch(m){r.reject(m)}}return Ki.E}))}))}cancelNavigationTransition(t,r,i){const a=new CA(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function pV(n){return n!==eC}let gV=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===rn);return r}getResolvedTitleForRoute(t){return t.data[KI]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Pz)},providedIn:"root"}),n})(),Pz=(()=>{class n extends gV{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Kc))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Oz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Fz)},providedIn:"root"}),n})();class kz{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Fz=(()=>{class n extends kz{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const NA=new f.OlP("",{providedIn:"root",factory:()=>({})});let Lz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Vz)},providedIn:"root"}),n})(),Vz=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var na=(()=>((na=na||{})[na.COMPLETE=0]="COMPLETE",na[na.FAILED=1]="FAILED",na[na.REDIRECTING=2]="REDIRECTING",na))();function mV(n,e){n.events.pipe(Xn(t=>t instanceof Ym||t instanceof CA||t instanceof IP||t instanceof tC),(0,Tt.U)(t=>t instanceof Ym||t instanceof tC?na.COMPLETE:t instanceof CA&&(0===t.code||1===t.code)?na.REDIRECTING:na.FAILED),Xn(t=>t!==na.REDIRECTING),Ii(1)).subscribe(()=>{e()})}function Uz(n){throw n}function Bz(n,e,t){return e.parse("/")}const jz={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Hz={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Po=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,f.f3M)(f.c2e),this.isNgZoneEnabled=!1,this.options=(0,f.f3M)(NA,{optional:!0})||{},this.pendingTasks=(0,f.f3M)(f.HDt),this.errorHandler=this.options.errorHandler||Uz,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Bz,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,f.f3M)(Lz),this.routeReuseStrategy=(0,f.f3M)(Oz),this.titleStrategy=(0,f.f3M)(gV),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,f.f3M)(Qv,{optional:!0})?.flat()??[],this.navigationTransitions=(0,f.f3M)(MA),this.urlSerializer=(0,f.f3M)(YI),this.location=(0,f.f3M)(Ze),this.componentInputBindingEnabled=!!(0,f.f3M)(bA,{optional:!0}),this.isNgZoneEnabled=(0,f.f3M)(f.R0b)instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new zv,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=qL(0,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),eC,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const m={...i};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(a.state=m)}const h=this.parseUrl(t);this.scheduleNavigation(h,r,l,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(MP),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:h,preserveFragment:m}=r,v=m?this.currentUrlTree.fragment:l;let S,b=null;switch(h){case"merge":b={...this.currentUrlTree.queryParams,...a};break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=a||null}null!==b&&(b=this.removeEmptyProps(b));try{S=LL(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),S=this.currentUrlTree.root}return VL(S,t,b,v??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Zm(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,eC,null,r)}navigate(t,r={skipLocationChange:!1}){return function $z(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new f.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...jz}:!1===r?{...Hz}:r,Zm(t))return AL(this.currentUrlTree,t,i);const a=this.parseUrl(t);return AL(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let h,m,v;l?(h=l.resolve,m=l.reject,v=l.promise):v=new Promise((S,x)=>{h=S,m=x});const b=this.pendingTasks.add();return mV(this,()=>{Promise.resolve().then(()=>this.pendingTasks.remove(b))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:a,resolve:h,reject:m,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(S=>Promise.reject(S))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",l)}else{const a={...r.extras.state,...this.generateNgRouterState(r.id,(this.browserPageId??0)+1)};this.location.go(i,"",a)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-(this.browserPageId??this.currentPageId);0!==a?this.location.historyGo(a):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===a&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Qm=(()=>{class n{constructor(t,r,i,a,l,h){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this.locationStrategy=h,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new ki.x;const m=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===m||"area"===m,this.isAnchorElement?this.subscription=t.events.subscribe(v=>{v instanceof Ym&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,f.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,f.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,f.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,a,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,f.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,t,r):i.removeAttribute(a,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Po),f.Y36(qv),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(Ve))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&f.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&f.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[f.TTD]}),n})();class yV{}let Wz=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Xn(t=>t instanceof Ym),$v(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,f.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,h=a._loadedInjector??l;(a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent)&&i.push(this.preloadConfig(l,a)),(a.children||a._loadedRoutes)&&i.push(this.processRoutes(h,a.children??a._loadedRoutes))}return(0,ln.D)(i).pipe((0,gd.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,vt.of)(null);const a=i.pipe((0,ao.z)(l=>null===l?(0,vt.of)(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,ln.D)([a,l]).pipe((0,gd.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Po),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(yV),f.LFG(OP))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const kP=new f.OlP("");let _V=(()=>{class n{constructor(t,r,i,a,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof EP?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ym?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof tC&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof GL&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new GL(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Jd(n,e){return{\u0275kind:n,\u0275providers:e}}function wV(){const n=(0,f.f3M)(f.zs3);return e=>{const t=n.get(f.z2F);if(e!==t.components[0])return;const r=n.get(Po),i=n.get(EV);1===n.get(FP)&&r.initialNavigation(),n.get(IV,null,f.XFs.Optional)?.setUpPreloading(),n.get(kP,null,f.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const EV=new f.OlP("",{factory:()=>new ki.x}),FP=new f.OlP("",{providedIn:"root",factory:()=>1}),IV=new f.OlP("");function Yz(n){return Jd(0,[{provide:IV,useExisting:Wz},{provide:yV,useExisting:n}])}const CV=new f.OlP("ROUTER_FORROOT_GUARD"),Xz=[Ze,{provide:YI,useClass:mP},Po,nC,{provide:qv,useFactory:function vV(n){return n.routerState.root},deps:[Po]},OP,[]];function Jz(){return new f.PXZ("Router",Po)}let DV=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Xz,[],{provide:Qv,multi:!0,useValue:t},{provide:CV,useFactory:r3,deps:[[Po,new f.FiY,new f.tp0]]},{provide:NA,useValue:r||{}},r?.useHash?{provide:Ve,useClass:xe}:{provide:Ve,useClass:Xe},{provide:kP,useFactory:()=>{const n=(0,f.f3M)(Uo),e=(0,f.f3M)(f.R0b),t=(0,f.f3M)(NA),r=(0,f.f3M)(MA),i=(0,f.f3M)(YI);return t.scrollOffset&&n.setOffset(t.scrollOffset),new _V(i,r,n,e,t)}},r?.preloadingStrategy?Yz(r.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:Jz},r?.initialNavigation?i3(r):[],r?.bindToComponentInputs?Jd(8,[QL,{provide:bA,useExisting:QL}]).\u0275providers:[],[{provide:bV,useFactory:wV},{provide:f.tb,multi:!0,useExisting:bV}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Qv,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(CV,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function r3(n){return"guarded"}function i3(n){return["disabled"===n.initialNavigation?Jd(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const e=(0,f.f3M)(Po);return()=>{e.setUpLocationChangeListener()}}},{provide:FP,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Jd(2,[{provide:FP,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:e=>{const t=e.get(Ne,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Po),a=e.get(EV);mV(i,()=>{r(!0)}),e.get(MA).afterPreactivation=()=>(r(!0),a.closed?(0,vt.of)(void 0):a),i.initialNavigation()}))}}]).\u0275providers:[]]}const bV=new f.OlP("");let o3=(()=>{class n{constructor(){this.title="practice_two"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[AP]}),n})();var a3=U(1389);let Xm=(()=>{class n{constructor(t,r,i,a){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=a,this.afAuth.authState.subscribe(l=>{l?(this.userData=l,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.SetUserData(i.user),this.afAuth.authState.subscribe(a=>{a&&this.router.navigate(["dashboard"])})}).catch(i=>{window.alert(i.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}GoogleAuth(){return this.AuthLogin(new a3.V).then(t=>{this.router.navigate(["dashboard"])})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.router.navigate(["dashboard"]),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Jk),f.LFG(Oa),f.LFG(Po),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),u3=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Xm))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-sign-in"]],decls:35,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-md-4"],[1,"card","m-4","shadow"],[1,"card-body","py-4"],[1,"displayTable"],[1,"displayTableCell","text-center"],[1,"authBlock"],[1,"formGroup","p-1"],["type","text","placeholder","Username","required","",1,"form-control"],["userName",""],["type","password","placeholder","Password","required","",1,"form-control"],["userPassword",""],[1,"formGroup","pt-3"],["type","button","value","Log in",1,"btn","btn-primary",3,"click"],[1,"formGroup","pt-1"],[1,"or"],[1,"orInner"],[1,"formGroup","pb-1"],["type","button",1,"btn","googleBtn",3,"click"],["src","assets/btn_google_signin_light_normal_web.png"],[1,"forgotPassword"],["routerLink","/forgot-password"],[1,"redirectToLogin"],["routerLink","/register-user",1,"redirect"]],template:function(t,r){if(1&t){const i=f.EpF();f.TgZ(0,"div",0)(1,"div",1),f._UZ(2,"div",2),f.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"h5"),f._uU(10,"Sign In"),f.qZA(),f.TgZ(11,"div",8),f._UZ(12,"input",9,10),f.qZA(),f.TgZ(14,"div",8),f._UZ(15,"input",11,12),f.qZA(),f.TgZ(17,"div",13)(18,"input",14),f.NdJ("click",function(){f.CHM(i);const l=f.MAs(13),h=f.MAs(16);return f.KtG(r.authService.SignIn(l.value,h.value))}),f.qZA()(),f.TgZ(19,"div",15)(20,"span",16)(21,"span",17),f._uU(22,"Or"),f.qZA()()(),f.TgZ(23,"div",18)(24,"button",19),f.NdJ("click",function(){return r.authService.GoogleAuth()}),f._UZ(25,"img",20),f.qZA()(),f.TgZ(26,"div",21)(27,"span",22),f._uU(28,"Forgot Password?"),f.qZA()()(),f.TgZ(29,"div",23)(30,"span"),f._uU(31,"Don't have an account?"),f.TgZ(32,"span",24),f._uU(33," Sign Up"),f.qZA()()()()()()()(),f._UZ(34,"div",2),f.qZA()()}},dependencies:[Qm]}),n})(),l3=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Xm))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-sign-up"]],decls:34,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-md-4"],[1,"col-md-4","text-center"],[1,"card","m-4","shadow"],[1,"card-body","p-2"],[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup","p-1"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],["src","assets/google.jpg",2,"height","22px"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const i=f.EpF();f.TgZ(0,"div",0)(1,"div",1),f._UZ(2,"div",2),f.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"h5"),f._uU(10,"Sign Up"),f.qZA(),f.TgZ(11,"div",9),f._UZ(12,"input",10,11),f.qZA(),f.TgZ(14,"div",9),f._UZ(15,"input",12,13),f.qZA(),f.TgZ(17,"div",9)(18,"input",14),f.NdJ("click",function(){f.CHM(i);const l=f.MAs(13),h=f.MAs(16);return f.KtG(r.authService.SignUp(l.value,h.value))}),f.qZA()(),f.TgZ(19,"div",9)(20,"span",15)(21,"span",16),f._uU(22,"Or"),f.qZA()()(),f.TgZ(23,"div",9)(24,"button",17),f.NdJ("click",function(){return r.authService.GoogleAuth()}),f._UZ(25,"i",18),f._uU(26," Continue with "),f._UZ(27,"img",19),f.qZA()()(),f.TgZ(28,"div",20)(29,"span"),f._uU(30,"Already have an account? "),f.TgZ(31,"span",21),f._uU(32,"Log In"),f.qZA()()()()()()()(),f._UZ(33,"div",2),f.qZA()()}},dependencies:[Qm]}),n})();class xA{}class LP{}class wc{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(l):this.headers.set(a,[l])}})}:()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{let i;if(i="string"==typeof r?[r]:"number"==typeof r?[r.toString()]:r.map(a=>a.toString()),i.length>0){const a=t.toLowerCase();this.headers.set(a,i),this.maybeSetNormalizedName(t,a)}})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof wc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new wc;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof wc?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let l=this.headers.get(t);if(!l)return;l=l.filter(h=>-1===a.indexOf(h)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class c3{encodeKey(e){return TV(e)}encodeValue(e){return TV(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const h3=/%(\d[a-f0-9])/gi,f3={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function TV(n){return encodeURIComponent(n).replace(h3,(e,t)=>f3[t]??e)}function PA(n){return`${n}`}class pp{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new c3,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function d3(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[l,h]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],m=t.get(l)||[];m.push(h),t.set(l,m)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(PA):[PA(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new pp({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(PA(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(PA(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class p3{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function SV(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function AV(n){return typeof Blob<"u"&&n instanceof Blob}function RV(n){return typeof FormData<"u"&&n instanceof FormData}class uC{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function g3(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new wc),this.context||(this.context=new p3),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+l}}else this.params=new pp,this.urlWithParams=t}serializeBody(){return null===this.body?null:SV(this.body)||AV(this.body)||RV(this.body)||function m3(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof pp?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||RV(this.body)?null:AV(this.body)?this.body.type||null:SV(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof pp?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,a=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let m=e.headers||this.headers,v=e.params||this.params;const b=e.context??this.context;return void 0!==e.setHeaders&&(m=Object.keys(e.setHeaders).reduce((S,x)=>S.set(x,e.setHeaders[x]),m)),e.setParams&&(v=Object.keys(e.setParams).reduce((S,x)=>S.set(x,e.setParams[x]),v)),new uC(t,r,a,{params:v,headers:m,context:b,reportProgress:h,responseType:i,withCredentials:l})}}var Ri=(()=>((Ri=Ri||{})[Ri.Sent=0]="Sent",Ri[Ri.UploadProgress=1]="UploadProgress",Ri[Ri.ResponseHeader=2]="ResponseHeader",Ri[Ri.DownloadProgress=3]="DownloadProgress",Ri[Ri.Response=4]="Response",Ri[Ri.User=5]="User",Ri))();class VP{constructor(e,t=200,r="OK"){this.headers=e.headers||new wc,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class UP extends VP{constructor(e={}){super(e),this.type=Ri.ResponseHeader}clone(e={}){return new UP({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Xv extends VP{constructor(e={}){super(e),this.type=Ri.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Xv({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class MV extends VP{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function BP(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let NV=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof uC)a=t;else{let m,v;m=i.headers instanceof wc?i.headers:new wc(i.headers),i.params&&(v=i.params instanceof pp?i.params:new pp({fromObject:i.params})),a=new uC(t,r,void 0!==i.body?i.body:null,{headers:m,context:i.context,params:v,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=(0,vt.of)(a).pipe($v(m=>this.handler.handle(m)));if(t instanceof uC||"events"===i.observe)return l;const h=l.pipe(Xn(m=>m instanceof Xv));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return h.pipe((0,Tt.U)(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return h.pipe((0,Tt.U)(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return h.pipe((0,Tt.U)(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return h.pipe((0,Tt.U)(m=>m.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new pp).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,BP(i,r))}post(t,r,i={}){return this.request("POST",t,BP(i,r))}put(t,r,i={}){return this.request("PUT",t,BP(i,r))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(xA))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function xV(n,e){return e(n)}function y3(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const v3=new f.OlP(""),lC=new f.OlP(""),PV=new f.OlP("");function w3(){let n=null;return(e,t)=>{null===n&&(n=((0,f.f3M)(v3,{optional:!0})??[]).reduceRight(y3,xV));const r=(0,f.f3M)(f.HDt),i=r.add();return n(e,t).pipe(qI(()=>r.remove(i)))}}let OV=(()=>{class n extends xA{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=(0,f.f3M)(f.HDt)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(lC),...this.injector.get(PV,[])]));this.chain=i.reduceRight((a,l)=>function _3(n,e,t){return(r,i)=>t.runInContext(()=>e(r,a=>n(a,i)))}(a,l,this.injector),xV)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(qI(()=>this.pendingTasks.remove(r)))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(LP),f.LFG(f.lqb))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const D3=/^\)\]\}',?\n/;let FV=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new f.vHH(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?(0,ln.D)(r.\u0275loadImpl()):(0,vt.of)(null)).pipe(yn(()=>new Fi.y(a=>{const l=r.build();if(l.open(t.method,t.urlWithParams),t.withCredentials&&(l.withCredentials=!0),t.headers.forEach((se,ce)=>l.setRequestHeader(se,ce.join(","))),t.headers.has("Accept")||l.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const se=t.detectContentTypeHeader();null!==se&&l.setRequestHeader("Content-Type",se)}if(t.responseType){const se=t.responseType.toLowerCase();l.responseType="json"!==se?se:"text"}const h=t.serializeBody();let m=null;const v=()=>{if(null!==m)return m;const se=l.statusText||"OK",ce=new wc(l.getAllResponseHeaders()),We=function b3(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(l)||t.url;return m=new UP({headers:ce,status:l.status,statusText:se,url:We}),m},b=()=>{let{headers:se,status:ce,statusText:We,url:ut}=v(),He=null;204!==ce&&(He=typeof l.response>"u"?l.responseText:l.response),0===ce&&(ce=He?200:0);let lt=ce>=200&&ce<300;if("json"===t.responseType&&"string"==typeof He){const Vt=He;He=He.replace(D3,"");try{He=""!==He?JSON.parse(He):null}catch(Kt){He=Vt,lt&&(lt=!1,He={error:Kt,text:He})}}lt?(a.next(new Xv({body:He,headers:se,status:ce,statusText:We,url:ut||void 0})),a.complete()):a.error(new MV({error:He,headers:se,status:ce,statusText:We,url:ut||void 0}))},S=se=>{const{url:ce}=v(),We=new MV({error:se,status:l.status||0,statusText:l.statusText||"Unknown Error",url:ce||void 0});a.error(We)};let x=!1;const H=se=>{x||(a.next(v()),x=!0);let ce={type:Ri.DownloadProgress,loaded:se.loaded};se.lengthComputable&&(ce.total=se.total),"text"===t.responseType&&l.responseText&&(ce.partialText=l.responseText),a.next(ce)},Z=se=>{let ce={type:Ri.UploadProgress,loaded:se.loaded};se.lengthComputable&&(ce.total=se.total),a.next(ce)};return l.addEventListener("load",b),l.addEventListener("error",S),l.addEventListener("timeout",S),l.addEventListener("abort",S),t.reportProgress&&(l.addEventListener("progress",H),null!==h&&l.upload&&l.upload.addEventListener("progress",Z)),l.send(h),a.next({type:Ri.Sent}),()=>{l.removeEventListener("error",S),l.removeEventListener("abort",S),l.removeEventListener("load",b),l.removeEventListener("timeout",S),t.reportProgress&&(l.removeEventListener("progress",H),null!==h&&l.upload&&l.upload.removeEventListener("progress",Z)),l.readyState!==l.DONE&&l.abort()}})))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Or))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const jP=new f.OlP("XSRF_ENABLED"),LV=new f.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),VV=new f.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class UV{}let A3=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ko(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(_e),f.LFG(f.Lbi),f.LFG(LV))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function R3(n,e){const t=n.url.toLowerCase();if(!(0,f.f3M)(jP)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,f.f3M)(UV).getToken(),i=(0,f.f3M)(VV);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var yi=(()=>((yi=yi||{})[yi.Interceptors=0]="Interceptors",yi[yi.LegacyInterceptors=1]="LegacyInterceptors",yi[yi.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",yi[yi.NoXsrfProtection=3]="NoXsrfProtection",yi[yi.JsonpSupport=4]="JsonpSupport",yi[yi.RequestsMadeViaParent=5]="RequestsMadeViaParent",yi))();function Jv(n,e){return{\u0275kind:n,\u0275providers:e}}function M3(...n){const e=[NV,FV,OV,{provide:xA,useExisting:OV},{provide:LP,useExisting:FV},{provide:lC,useValue:R3,multi:!0},{provide:jP,useValue:!0},{provide:UV,useClass:A3}];for(const t of n)e.push(...t.\u0275providers);return(0,f.MR2)(e)}const BV=new f.OlP("LEGACY_INTERCEPTOR_FN");let x3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[M3(Jv(yi.LegacyInterceptors,[{provide:BV,useFactory:w3},{provide:lC,useExisting:BV,multi:!0}]))]}),n})(),V3=(()=>{class n{postData(t){return this.http.post(`${this.baseURL}`,t,{headers:{token:`${this.token}`}})}constructor(t){this.http=t,this.baseURL="/flightInfoChallenge/",this.token="SGV5IFNjb3R0ISBJZiB5b3UgZGVjb2RlZCB0aGlzLCBwbGVhc2UgYnJpbmcgaXQgdXAgaW4gdGhlIGludGVydmlldyBmb3IgYm9udXMgcG9pbnRzISE"}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(NV))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jV=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),Jm=(()=>{class n extends jV{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const Ec=new f.OlP("NgValueAccessor"),j3={provide:Ec,useExisting:(0,f.Gpc)(()=>kA),multi:!0},$3=new f.OlP("CompositionEventMode");let kA=(()=>{class n extends jV{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function H3(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36($3,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[f._Bn([j3]),f.qOj]}),n})();const Gs=new f.OlP("NgValidators"),mp=new f.OlP("NgAsyncValidators");function WV(n){return function gp(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function FA(n){return null}function XV(n){return null!=n}function JV(n){return(0,f.QGY)(n)?(0,ln.D)(n):n}function e2(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function t2(n,e){return e.map(t=>t(n))}function n2(n){return n.map(e=>function z3(n){return!n.validate}(e)?e:t=>e.validate(t))}function HP(n){return null!=n?function r2(n){if(!n)return null;const e=n.filter(XV);return 0==e.length?null:function(t){return e2(t2(t,e))}}(n2(n)):null}function $P(n){return null!=n?function i2(n){if(!n)return null;const e=n.filter(XV);return 0==e.length?null:function(t){return function U3(...n){const e=(0,zh.jO)(n),{args:t,keys:r}=_L(n),i=new Fi.y(a=>{const{length:l}=t;if(!l)return void a.complete();const h=new Array(l);let m=l,v=l;for(let b=0;b<l;b++){let S=!1;(0,Eu.Xf)(t[b]).subscribe((0,Zr.x)(a,x=>{S||(S=!0,v--),h[b]=x},()=>m--,void 0,()=>{(!m||!S)&&(v||a.next(r?wL(r,h):h),a.complete())}))}});return e?i.pipe(vL(e)):i}(t2(t,e).map(JV)).pipe((0,Tt.U)(e2))}}(n2(n)):null}function s2(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function GP(n){return n?Array.isArray(n)?n:[n]:[]}function LA(n,e){return Array.isArray(n)?n.includes(e):n===e}function u2(n,e){const t=GP(e);return GP(n).forEach(i=>{LA(t,i)||t.push(i)}),t}function l2(n,e){return GP(e).filter(t=>!LA(n,t))}class c2{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=HP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=$P(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class lo extends c2{get formDirective(){return null}get path(){return null}}class yp extends c2{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class d2{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let h2=(()=>{class n extends d2{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(yp,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[f.qOj]}),n})(),f2=(()=>{class n extends d2{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(lo,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[f.qOj]}),n})();const cC="VALID",UA="INVALID",ew="PENDING",dC="DISABLED";function qP(n){return(BA(n)?n.validators:n)||null}function KP(n,e){return(BA(e)?e.asyncValidators:n)||null}function BA(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class y2{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===cC}get invalid(){return this.status===UA}get pending(){return this.status==ew}get disabled(){return this.status===dC}get enabled(){return this.status!==dC}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(u2(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(u2(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(l2(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(l2(e,this._rawAsyncValidators))}hasValidator(e){return LA(this._rawValidators,e)}hasAsyncValidator(e){return LA(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ew,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=dC,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=cC,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===cC||this.status===ew)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?dC:cC}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ew,this._hasOwnPendingAsyncValidator=!0;const t=JV(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?dC:this.errors?UA:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ew)?ew:this._anyControlsHaveStatus(UA)?UA:cC}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){BA(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Z3(n){return Array.isArray(n)?HP(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Y3(n){return Array.isArray(n)?$P(n):n||null}(this._rawAsyncValidators)}}class ZP extends y2{constructor(e,t,r){super(qP(t),KP(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function m2(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new f.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function g2(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[t])throw new f.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const tw=new f.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>jA}),jA="always";function hC(n,e,t=jA){YP(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function J3(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&_2(n,e)})}(n,e),function t6(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function e6(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&_2(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function X3(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function GA(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function YP(n,e){const t=function o2(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(s2(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function a2(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(s2(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();GA(e._rawValidators,i),GA(e._rawAsyncValidators,i)}function _2(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const o6={provide:lo,useExisting:(0,f.Gpc)(()=>WA)},fC=(()=>Promise.resolve())();let WA=(()=>{class n extends lo{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new f.vpe,this.form=new ZP({},HP(t),$P(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){fC.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),hC(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){fC.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){fC.then(()=>{const r=this._findContainer(t.path),i=new ZP({});(function v2(n,e){YP(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){fC.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){fC.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function w2(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Gs,10),f.Y36(mp,10),f.Y36(tw,8))},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([o6]),f.qOj]}),n})();function E2(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function I2(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const C2=class extends y2{constructor(e=null,t,r){super(qP(t),KP(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),BA(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=I2(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){E2(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){E2(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){I2(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},l6={provide:yp,useExisting:(0,f.Gpc)(()=>eO)},T2=(()=>Promise.resolve())();let eO=(()=>{class n extends yp{constructor(t,r,i,a,l,h){super(),this._changeDetectorRef=l,this.callSetDisabledState=h,this.control=new C2,this._registered=!1,this.name="",this.update=new f.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function JP(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===kA?t=a:function i6(n){return Object.getPrototypeOf(n.constructor)===Jm}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function XP(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){hC(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){T2.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,f.D6c)(r);T2.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function HA(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(lo,9),f.Y36(Gs,10),f.Y36(mp,10),f.Y36(Ec,10),f.Y36(f.sBO,8),f.Y36(tw,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([l6]),f.qOj,f.TTD]}),n})(),S2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const c6={provide:Ec,useExisting:(0,f.Gpc)(()=>tO),multi:!0};let tO=(()=>{class n extends Jm{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},features:[f._Bn([c6]),f.qOj]}),n})(),A2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),ey=(()=>{class n{constructor(){this._validator=FA}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):FA,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,features:[f.TTD]}),n})();const S6={provide:Gs,useExisting:(0,f.Gpc)(()=>qA),multi:!0};let qA=(()=>{class n extends ey{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=f.D6c,this.createValidator=t=>WV}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&f.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[f._Bn([S6]),f.qOj]}),n})(),P6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[A2]}),n})(),k6=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:tw,useValue:t.callSetDisabledState??jA}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[P6]}),n})();function F6(n,e){if(1&n&&(f.TgZ(0,"div",1),f._UZ(1,"div",34),f.TgZ(2,"div",35)(3,"p"),f._uU(4,"Hello "),f.TgZ(5,"strong"),f._uU(6),f.qZA()()()()),2&n){const t=e.ngIf;f.xp6(6),f.Oqu(t.displayName?t.displayName:"User")}}let L6=(()=>{class n{constructor(t,r){this.authService=t,this.flightinfopayloadService=r}ngOnInit(){}submitData(t){this.flightinfopayloadService.postData({airline:t.airline,arrivalDate:t.arrivalDate,arrivalTime:t.arrivalTime,flightNumber:t.flightNumber,numOfGuests:t.numOfGuests,comments:t.comments}).subscribe(i=>{console.log(i)},i=>{console.log(i)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Xm),f.Y36(V3))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-dashboard"]],decls:55,vars:1,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-1"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link","active"],[1,"fas","fa-user"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],[1,"col-md-11"],["class","row",4,"ngIf"],[1,"col-md-4"],[1,"media"],[1,"media-body"],[1,"card","shadow"],[1,"card-header","text-start","fw-bold"],[1,"card-body","p-2"],[1,"col-md-12"],[1,"ps-2"],[3,"ngSubmit"],["flightinfopayloadForm","ngForm"],[1,"main"],[1,"input-fields","p-1"],["name","airline","ngModel","","placeholder","Airline","id","airline","type","text","required","",1,"form-control"],["for","arrivalTime",1,"ps-2"],["name","arrivalDate","ngModel","","placeholder","Arrival Date","id","arrivalDate","type","date","required","",1,"form-control"],["name","arrivalTime","ngModel","","placeholder","Arrival Time","id","arrivalTime","type","time","required","",1,"form-control"],["name","flightNumber","ngModel","","placeholder","Flight Number","id","flightNumber","type","text","required","",1,"form-control"],["name","numOfGuests","ngModel","","placeholder","Number of Guests","id","numOfGuests","type","number","required","",1,"form-control"],["name","comments","ngModel","","placeholder","Comments","id","comments","type","text",1,"form-control"],[1,"text-end"],[1,"p-1"],[1,"btn","btn-primary"],[1,"alert"],[1,"col-md-6","py-4"],[1,"col-md-6","pt-4","text-end"]],template:function(t,r){if(1&t){const i=f.EpF();f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"ul",3)(4,"li",4)(5,"a",5),f._UZ(6,"i",6),f._uU(7,"Dashboard "),f.qZA()(),f.TgZ(8,"li",4)(9,"a",7),f.NdJ("click",function(){return r.authService.SignOut()}),f._UZ(10,"i",8),f._uU(11," Log out "),f.qZA()()()(),f.TgZ(12,"div",9)(13,"div",0),f.YNc(14,F6,7,1,"div",10),f.TgZ(15,"div",1),f._UZ(16,"div",11),f.TgZ(17,"div",11)(18,"div",12)(19,"div",13)(20,"div",14)(21,"div",15),f._uU(22,"Flight Information"),f.qZA(),f.TgZ(23,"div",16)(24,"div",1)(25,"div",17)(26,"p",18),f._uU(27,"Enter your informaiton below to save your flight details."),f.qZA()()(),f.TgZ(28,"div",1)(29,"div",17)(30,"form",19,20),f.NdJ("ngSubmit",function(){f.CHM(i);const l=f.MAs(31);return f.KtG(r.submitData(l.value))}),f.TgZ(32,"div",21)(33,"div",22),f._UZ(34,"input",23),f.qZA(),f.TgZ(35,"div",22)(36,"label",24),f._uU(37,"Arrival Date"),f.qZA(),f._UZ(38,"input",25),f.qZA(),f.TgZ(39,"div",22)(40,"label",24),f._uU(41,"Arrival Time"),f.qZA(),f._UZ(42,"input",26),f.qZA(),f.TgZ(43,"div",22),f._UZ(44,"input",27),f.qZA(),f.TgZ(45,"div",22),f._UZ(46,"input",28),f.qZA(),f.TgZ(47,"div",22),f._UZ(48,"textarea",29),f.qZA()(),f.TgZ(49,"div",30)(50,"div",31)(51,"button",32),f._uU(52,"Submit Data"),f.qZA()()()(),f._UZ(53,"div",33),f.qZA()()()()()()(),f._UZ(54,"div",11),f.qZA()()()()()}2&t&&(f.xp6(14),f.Q6J("ngIf",r.authService.userData))},dependencies:[ia,S2,kA,tO,h2,f2,qA,eO,WA]}),n})(),V6=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Xm))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-forgot-password"]],decls:24,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-md-4"],[1,"col-md-4","text-center"],[1,"card","m-4","shadow"],[1,"card-body","p-2"],[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup","p-2"],["type","email","placeholder","Email Address","required","",1,"form-control"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btn-primary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],["claas","col-md-4"]],template:function(t,r){if(1&t){const i=f.EpF();f.TgZ(0,"div",0)(1,"div",1),f._UZ(2,"div",2),f.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"h5"),f._uU(10,"Reset Password"),f.qZA(),f.TgZ(11,"p",9),f._uU(12,"Please enter your email address to request a password reset."),f.qZA(),f.TgZ(13,"div",10),f._UZ(14,"input",11,12),f.qZA(),f.TgZ(16,"div",10)(17,"input",13),f.NdJ("click",function(){f.CHM(i);const l=f.MAs(15);return f.KtG(r.authService.ForgotPassword(l.value))}),f.qZA()()(),f.TgZ(18,"div",14)(19,"span"),f._uU(20,"Go back to ? "),f.TgZ(21,"span",15),f._uU(22,"Log In"),f.qZA()()()()()()()(),f._UZ(23,"div",16),f.qZA()()}},dependencies:[Qm]}),n})();function U6(n,e){if(1&n&&(f.TgZ(0,"div",10)(1,"p",15),f._uU(2,"We have sent a confirmation email to "),f.TgZ(3,"strong"),f._uU(4),f.qZA(),f._uU(5,"."),f.qZA(),f.TgZ(6,"p",15),f._uU(7,"Please check your email and click on the link to verfiy your email address."),f.qZA()()),2&n){const t=e.ngIf;f.xp6(4),f.Oqu(t.email)}}const B6=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:u3},{path:"register-user",component:l3},{path:"dashboard",component:L6,canActivate:[(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Xm),f.LFG(Po))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"forgot-password",component:V6},{path:"verify-email-address",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Xm))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-verify-email"]],decls:22,vars:1,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-4"],[1,"col-md-4","text-center"],[1,"card","shadow"],[1,"card-body"],[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1),f._UZ(2,"div",2),f.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"h4"),f._uU(10,"Thank You for Registering"),f.qZA(),f.YNc(11,U6,8,1,"div",9),f.TgZ(12,"div",10)(13,"button",11),f.NdJ("click",function(){return r.authService.SendVerificationMail()}),f._UZ(14,"i",12),f._uU(15," Resend Verification Email "),f.qZA()()(),f.TgZ(16,"div",13)(17,"span"),f._uU(18,"Go back to?"),f.TgZ(19,"span",14),f._uU(20," Sign in"),f.qZA()()()()()()()(),f._UZ(21,"div",2),f.qZA()()),2&t&&(f.xp6(11),f.Q6J("ngIf",r.authService.userData))},dependencies:[ia,Qm]}),n})()}];let j6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[DV.forRoot(B6),DV]}),n})();const W2_firebase={apiKey:"AIzaSyCGMjO067o80KbiNpP1fjhMxYxLzuoPBGA",authDomain:"practicetwo-81806.firebaseapp.com",projectId:"practicetwo-81806",storageBucket:"practicetwo-81806.appspot.com",messagingSenderId:"313215576018",appId:"1:313215576018:web:5129ae39119c37bf9e4a0b",measurementId:"G-0GVHEYYYCC"};let H6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[o3]}),n.\u0275inj=f.cJS({providers:[Xm],imports:[Ia,An.hO.initializeApp(W2_firebase),yy,wB,iD,xG,j6,k6,x3]}),n})();Rp().bootstrapModule(H6).catch(n=>console.error(n))},1135:(mt,be,U)=>{U.d(be,{X:()=>$});var f=U(7579);class $ extends f.x{constructor(ee){super(),this._value=ee}get value(){return this.getValue()}_subscribe(ee){const ue=super._subscribe(ee);return!ue.closed&&ee.next(this._value),ue}getValue(){const{hasError:ee,thrownError:ue,_value:_e}=this;if(ee)throw ue;return this._throwIfClosed(),_e}next(ee){super.next(this._value=ee)}}},9751:(mt,be,U)=>{U.d(be,{y:()=>Ne});var f=U(930),$=U(727),O=U(8822),ee=U(9635),ue=U(2416),_e=U(576),we=U(2806);let Ne=(()=>{class ie{constructor(Re){Re&&(this._subscribe=Re)}lift(Re){const Xe=new ie;return Xe.source=this,Xe.operator=Re,Xe}subscribe(Re,Xe,xe){const Ze=function q(ie){return ie&&ie instanceof f.Lv||function z(ie){return ie&&(0,_e.m)(ie.next)&&(0,_e.m)(ie.error)&&(0,_e.m)(ie.complete)}(ie)&&(0,$.Nn)(ie)}(Re)?Re:new f.Hp(Re,Xe,xe);return(0,we.x)(()=>{const{operator:Oe,source:Ct}=this;Ze.add(Oe?Oe.call(Ze,Ct):Ct?this._subscribe(Ze):this._trySubscribe(Ze))}),Ze}_trySubscribe(Re){try{return this._subscribe(Re)}catch(Xe){Re.error(Xe)}}forEach(Re,Xe){return new(Xe=Ee(Xe))((xe,Ze)=>{const Oe=new f.Hp({next:Ct=>{try{Re(Ct)}catch(dt){Ze(dt),Oe.unsubscribe()}},error:Ze,complete:xe});this.subscribe(Oe)})}_subscribe(Re){var Xe;return null===(Xe=this.source)||void 0===Xe?void 0:Xe.subscribe(Re)}[O.L](){return this}pipe(...Re){return(0,ee.U)(Re)(this)}toPromise(Re){return new(Re=Ee(Re))((Xe,xe)=>{let Ze;this.subscribe(Oe=>Ze=Oe,Oe=>xe(Oe),()=>Xe(Ze))})}}return ie.create=Ve=>new ie(Ve),ie})();function Ee(ie){var Ve;return null!==(Ve=ie??ue.config.Promise)&&void 0!==Ve?Ve:Promise}},7579:(mt,be,U)=>{U.d(be,{x:()=>we});var f=U(9751),$=U(727);const ee=(0,U(3888).d)(Ee=>function(){Ee(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ue=U(8737),_e=U(2806);let we=(()=>{class Ee extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const ie=new Ne(this,this);return ie.operator=q,ie}_throwIfClosed(){if(this.closed)throw new ee}next(q){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ie of this.currentObservers)ie.next(q)}})}error(q){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:ie}=this;for(;ie.length;)ie.shift().error(q)}})}complete(){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:ie,isStopped:Ve,observers:Re}=this;return ie||Ve?$.Lc:(this.currentObservers=null,Re.push(q),new $.w0(()=>{this.currentObservers=null,(0,ue.P)(Re,q)}))}_checkFinalizedStatuses(q){const{hasError:ie,thrownError:Ve,isStopped:Re}=this;ie?q.error(Ve):Re&&q.complete()}asObservable(){const q=new f.y;return q.source=this,q}}return Ee.create=(z,q)=>new Ne(z,q),Ee})();class Ne extends we{constructor(z,q){super(),this.destination=z,this.source=q}next(z){var q,ie;null===(ie=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===ie||ie.call(q,z)}error(z){var q,ie;null===(ie=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===ie||ie.call(q,z)}complete(){var z,q;null===(q=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===q||q.call(z)}_subscribe(z){var q,ie;return null!==(ie=null===(q=this.source)||void 0===q?void 0:q.subscribe(z))&&void 0!==ie?ie:$.Lc}}},930:(mt,be,U)=>{U.d(be,{Hp:()=>xe,Lv:()=>ie});var f=U(576),$=U(727),O=U(2416),ee=U(7849),ue=U(5032);const _e=Ee("C",void 0,void 0);function Ee(re,Ce,ae){return{kind:re,value:Ce,error:ae}}var z=U(3410),q=U(2806);class ie extends $.w0{constructor(Ce){super(),this.isStopped=!1,Ce?(this.destination=Ce,(0,$.Nn)(Ce)&&Ce.add(this)):this.destination=dt}static create(Ce,ae,me){return new xe(Ce,ae,me)}next(Ce){this.isStopped?Ct(function Ne(re){return Ee("N",re,void 0)}(Ce),this):this._next(Ce)}error(Ce){this.isStopped?Ct(function we(re){return Ee("E",void 0,re)}(Ce),this):(this.isStopped=!0,this._error(Ce))}complete(){this.isStopped?Ct(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ce){this.destination.next(Ce)}_error(Ce){try{this.destination.error(Ce)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ve=Function.prototype.bind;function Re(re,Ce){return Ve.call(re,Ce)}class Xe{constructor(Ce){this.partialObserver=Ce}next(Ce){const{partialObserver:ae}=this;if(ae.next)try{ae.next(Ce)}catch(me){Ze(me)}}error(Ce){const{partialObserver:ae}=this;if(ae.error)try{ae.error(Ce)}catch(me){Ze(me)}else Ze(Ce)}complete(){const{partialObserver:Ce}=this;if(Ce.complete)try{Ce.complete()}catch(ae){Ze(ae)}}}class xe extends ie{constructor(Ce,ae,me){let Pe;if(super(),(0,f.m)(Ce)||!Ce)Pe={next:Ce??void 0,error:ae??void 0,complete:me??void 0};else{let ne;this&&O.config.useDeprecatedNextContext?(ne=Object.create(Ce),ne.unsubscribe=()=>this.unsubscribe(),Pe={next:Ce.next&&Re(Ce.next,ne),error:Ce.error&&Re(Ce.error,ne),complete:Ce.complete&&Re(Ce.complete,ne)}):Pe=Ce}this.destination=new Xe(Pe)}}function Ze(re){O.config.useDeprecatedSynchronousErrorHandling?(0,q.O)(re):(0,ee.h)(re)}function Ct(re,Ce){const{onStoppedNotification:ae}=O.config;ae&&z.z.setTimeout(()=>ae(re,Ce))}const dt={closed:!0,next:ue.Z,error:function Oe(re){throw re},complete:ue.Z}},727:(mt,be,U)=>{U.d(be,{Lc:()=>_e,w0:()=>ue,Nn:()=>we});var f=U(576);const O=(0,U(3888).d)(Ee=>function(q){Ee(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((ie,Ve)=>`${Ve+1}) ${ie.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var ee=U(8737);class ue{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const Re of q)Re.remove(this);else q.remove(this);const{initialTeardown:ie}=this;if((0,f.m)(ie))try{ie()}catch(Re){z=Re instanceof O?Re.errors:[Re]}const{_finalizers:Ve}=this;if(Ve){this._finalizers=null;for(const Re of Ve)try{Ne(Re)}catch(Xe){z=z??[],Xe instanceof O?z=[...z,...Xe.errors]:z.push(Xe)}}if(z)throw new O(z)}}add(z){var q;if(z&&z!==this)if(this.closed)Ne(z);else{if(z instanceof ue){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(z)}}_hasParent(z){const{_parentage:q}=this;return q===z||Array.isArray(q)&&q.includes(z)}_addParent(z){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(z),q):q?[q,z]:z}_removeParent(z){const{_parentage:q}=this;q===z?this._parentage=null:Array.isArray(q)&&(0,ee.P)(q,z)}remove(z){const{_finalizers:q}=this;q&&(0,ee.P)(q,z),z instanceof ue&&z._removeParent(this)}}ue.EMPTY=(()=>{const Ee=new ue;return Ee.closed=!0,Ee})();const _e=ue.EMPTY;function we(Ee){return Ee instanceof ue||Ee&&"closed"in Ee&&(0,f.m)(Ee.remove)&&(0,f.m)(Ee.add)&&(0,f.m)(Ee.unsubscribe)}function Ne(Ee){(0,f.m)(Ee)?Ee():Ee.unsubscribe()}},2416:(mt,be,U)=>{U.d(be,{config:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(mt,be,U)=>{U.d(be,{E:()=>$});const $=new(U(9751).y)(ue=>ue.complete())},8996:(mt,be,U)=>{U.d(be,{D:()=>Ce});var f=U(8421),$=U(5363),O=U(9468),_e=U(9751),Ne=U(2202),Ee=U(576),z=U(9672);function ie(ae,me){if(!ae)throw new Error("Iterable cannot be null");return new _e.y(Pe=>{(0,z.f)(Pe,me,()=>{const ne=ae[Symbol.asyncIterator]();(0,z.f)(Pe,me,()=>{ne.next().then(tt=>{tt.done?Pe.complete():Pe.next(tt.value)})},0,!0)})})}var Ve=U(3670),Re=U(8239),Xe=U(1144),xe=U(6495),Ze=U(2206),Oe=U(4532),Ct=U(3260);function Ce(ae,me){return me?function re(ae,me){if(null!=ae){if((0,Ve.c)(ae))return function ee(ae,me){return(0,f.Xf)(ae).pipe((0,O.R)(me),(0,$.Q)(me))}(ae,me);if((0,Xe.z)(ae))return function we(ae,me){return new _e.y(Pe=>{let ne=0;return me.schedule(function(){ne===ae.length?Pe.complete():(Pe.next(ae[ne++]),Pe.closed||this.schedule())})})}(ae,me);if((0,Re.t)(ae))return function ue(ae,me){return(0,f.Xf)(ae).pipe((0,O.R)(me),(0,$.Q)(me))}(ae,me);if((0,Ze.D)(ae))return ie(ae,me);if((0,xe.T)(ae))return function q(ae,me){return new _e.y(Pe=>{let ne;return(0,z.f)(Pe,me,()=>{ne=ae[Ne.h](),(0,z.f)(Pe,me,()=>{let tt,$e;try{({value:tt,done:$e}=ne.next())}catch(en){return void Pe.error(en)}$e?Pe.complete():Pe.next(tt)},0,!0)}),()=>(0,Ee.m)(ne?.return)&&ne.return()})}(ae,me);if((0,Ct.L)(ae))return function dt(ae,me){return ie((0,Ct.Q)(ae),me)}(ae,me)}throw(0,Oe.z)(ae)}(ae,me):(0,f.Xf)(ae)}},8421:(mt,be,U)=>{U.d(be,{Xf:()=>Ve});var f=U(7582),$=U(1144),O=U(8239),ee=U(9751),ue=U(3670),_e=U(2206),we=U(4532),Ne=U(6495),Ee=U(3260),z=U(576),q=U(7849),ie=U(8822);function Ve(re){if(re instanceof ee.y)return re;if(null!=re){if((0,ue.c)(re))return function Re(re){return new ee.y(Ce=>{const ae=re[ie.L]();if((0,z.m)(ae.subscribe))return ae.subscribe(Ce);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(re);if((0,$.z)(re))return function Xe(re){return new ee.y(Ce=>{for(let ae=0;ae<re.length&&!Ce.closed;ae++)Ce.next(re[ae]);Ce.complete()})}(re);if((0,O.t)(re))return function xe(re){return new ee.y(Ce=>{re.then(ae=>{Ce.closed||(Ce.next(ae),Ce.complete())},ae=>Ce.error(ae)).then(null,q.h)})}(re);if((0,_e.D)(re))return Oe(re);if((0,Ne.T)(re))return function Ze(re){return new ee.y(Ce=>{for(const ae of re)if(Ce.next(ae),Ce.closed)return;Ce.complete()})}(re);if((0,Ee.L)(re))return function Ct(re){return Oe((0,Ee.Q)(re))}(re)}throw(0,we.z)(re)}function Oe(re){return new ee.y(Ce=>{(function dt(re,Ce){var ae,me,Pe,ne;return(0,f.mG)(this,void 0,void 0,function*(){try{for(ae=(0,f.KL)(re);!(me=yield ae.next()).done;)if(Ce.next(me.value),Ce.closed)return}catch(tt){Pe={error:tt}}finally{try{me&&!me.done&&(ne=ae.return)&&(yield ne.call(ae))}finally{if(Pe)throw Pe.error}}Ce.complete()})})(re,Ce).catch(ae=>Ce.error(ae))})}},6451:(mt,be,U)=>{U.d(be,{T:()=>_e});var f=U(8189),$=U(8421),O=U(515),ee=U(7669),ue=U(8996);function _e(...we){const Ne=(0,ee.yG)(we),Ee=(0,ee._6)(we,1/0),z=we;return z.length?1===z.length?(0,$.Xf)(z[0]):(0,f.J)(Ee)((0,ue.D)(z,Ne)):O.E}},9646:(mt,be,U)=>{U.d(be,{of:()=>O});var f=U(7669),$=U(8996);function O(...ee){const ue=(0,f.yG)(ee);return(0,$.D)(ee,ue)}},5403:(mt,be,U)=>{U.d(be,{x:()=>$});var f=U(930);function $(ee,ue,_e,we,Ne){return new O(ee,ue,_e,we,Ne)}class O extends f.Lv{constructor(ue,_e,we,Ne,Ee,z){super(ue),this.onFinalize=Ee,this.shouldUnsubscribe=z,this._next=_e?function(q){try{_e(q)}catch(ie){ue.error(ie)}}:super._next,this._error=Ne?function(q){try{Ne(q)}catch(ie){ue.error(ie)}finally{this.unsubscribe()}}:super._error,this._complete=we?function(){try{we()}catch(q){ue.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ue;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(ue=this.onFinalize)||void 0===ue||ue.call(this))}}}},1884:(mt,be,U)=>{U.d(be,{x:()=>ee});var f=U(4671),$=U(4482),O=U(5403);function ee(_e,we=f.y){return _e=_e??ue,(0,$.e)((Ne,Ee)=>{let z,q=!0;Ne.subscribe((0,O.x)(Ee,ie=>{const Ve=we(ie);(q||!_e(z,Ve))&&(q=!1,z=Ve,Ee.next(ie))}))})}function ue(_e,we){return _e===we}},4004:(mt,be,U)=>{U.d(be,{U:()=>O});var f=U(4482),$=U(5403);function O(ee,ue){return(0,f.e)((_e,we)=>{let Ne=0;_e.subscribe((0,$.x)(we,Ee=>{we.next(ee.call(ue,Ee,Ne++))}))})}},8189:(mt,be,U)=>{U.d(be,{J:()=>O});var f=U(5577),$=U(4671);function O(ee=1/0){return(0,f.z)($.y,ee)}},5577:(mt,be,U)=>{U.d(be,{z:()=>Ne});var f=U(4004),$=U(8421),O=U(4482),ee=U(9672),ue=U(5403),we=U(576);function Ne(Ee,z,q=1/0){return(0,we.m)(z)?Ne((ie,Ve)=>(0,f.U)((Re,Xe)=>z(ie,Re,Ve,Xe))((0,$.Xf)(Ee(ie,Ve))),q):("number"==typeof z&&(q=z),(0,O.e)((ie,Ve)=>function _e(Ee,z,q,ie,Ve,Re,Xe,xe){const Ze=[];let Oe=0,Ct=0,dt=!1;const re=()=>{dt&&!Ze.length&&!Oe&&z.complete()},Ce=me=>Oe<ie?ae(me):Ze.push(me),ae=me=>{Re&&z.next(me),Oe++;let Pe=!1;(0,$.Xf)(q(me,Ct++)).subscribe((0,ue.x)(z,ne=>{Ve?.(ne),Re?Ce(ne):z.next(ne)},()=>{Pe=!0},void 0,()=>{if(Pe)try{for(Oe--;Ze.length&&Oe<ie;){const ne=Ze.shift();Xe?(0,ee.f)(z,Xe,()=>ae(ne)):ae(ne)}re()}catch(ne){z.error(ne)}}))};return Ee.subscribe((0,ue.x)(z,Ce,()=>{dt=!0,re()})),()=>{xe?.()}}(ie,Ve,Ee,q)))}},5363:(mt,be,U)=>{U.d(be,{Q:()=>ee});var f=U(9672),$=U(4482),O=U(5403);function ee(ue,_e=0){return(0,$.e)((we,Ne)=>{we.subscribe((0,O.x)(Ne,Ee=>(0,f.f)(Ne,ue,()=>Ne.next(Ee),_e),()=>(0,f.f)(Ne,ue,()=>Ne.complete(),_e),Ee=>(0,f.f)(Ne,ue,()=>Ne.error(Ee),_e)))})}},3099:(mt,be,U)=>{U.d(be,{B:()=>ue});var f=U(8421),$=U(7579),O=U(930),ee=U(4482);function ue(we={}){const{connector:Ne=(()=>new $.x),resetOnError:Ee=!0,resetOnComplete:z=!0,resetOnRefCountZero:q=!0}=we;return ie=>{let Ve,Re,Xe,xe=0,Ze=!1,Oe=!1;const Ct=()=>{Re?.unsubscribe(),Re=void 0},dt=()=>{Ct(),Ve=Xe=void 0,Ze=Oe=!1},re=()=>{const Ce=Ve;dt(),Ce?.unsubscribe()};return(0,ee.e)((Ce,ae)=>{xe++,!Oe&&!Ze&&Ct();const me=Xe=Xe??Ne();ae.add(()=>{xe--,0===xe&&!Oe&&!Ze&&(Re=_e(re,q))}),me.subscribe(ae),!Ve&&xe>0&&(Ve=new O.Hp({next:Pe=>me.next(Pe),error:Pe=>{Oe=!0,Ct(),Re=_e(dt,Ee,Pe),me.error(Pe)},complete:()=>{Ze=!0,Ct(),Re=_e(dt,z),me.complete()}}),(0,f.Xf)(Ce).subscribe(Ve))})(ie)}}function _e(we,Ne,...Ee){if(!0===Ne)return void we();if(!1===Ne)return;const z=new O.Hp({next:()=>{z.unsubscribe(),we()}});return(0,f.Xf)(Ne(...Ee)).subscribe(z)}},9468:(mt,be,U)=>{U.d(be,{R:()=>$});var f=U(4482);function $(O,ee=0){return(0,f.e)((ue,_e)=>{_e.add(O.schedule(()=>ue.subscribe(_e),ee))})}},8505:(mt,be,U)=>{U.d(be,{b:()=>ue});var f=U(576),$=U(4482),O=U(5403),ee=U(4671);function ue(_e,we,Ne){const Ee=(0,f.m)(_e)||we||Ne?{next:_e,error:we,complete:Ne}:_e;return Ee?(0,$.e)((z,q)=>{var ie;null===(ie=Ee.subscribe)||void 0===ie||ie.call(Ee);let Ve=!0;z.subscribe((0,O.x)(q,Re=>{var Xe;null===(Xe=Ee.next)||void 0===Xe||Xe.call(Ee,Re),q.next(Re)},()=>{var Re;Ve=!1,null===(Re=Ee.complete)||void 0===Re||Re.call(Ee),q.complete()},Re=>{var Xe;Ve=!1,null===(Xe=Ee.error)||void 0===Xe||Xe.call(Ee,Re),q.error(Re)},()=>{var Re,Xe;Ve&&(null===(Re=Ee.unsubscribe)||void 0===Re||Re.call(Ee)),null===(Xe=Ee.finalize)||void 0===Xe||Xe.call(Ee)}))}):ee.y}},4408:(mt,be,U)=>{U.d(be,{o:()=>ue});var f=U(727);class $ extends f.w0{constructor(we,Ne){super()}schedule(we,Ne=0){return this}}const O={setInterval(_e,we,...Ne){const{delegate:Ee}=O;return Ee?.setInterval?Ee.setInterval(_e,we,...Ne):setInterval(_e,we,...Ne)},clearInterval(_e){const{delegate:we}=O;return(we?.clearInterval||clearInterval)(_e)},delegate:void 0};var ee=U(8737);class ue extends ${constructor(we,Ne){super(we,Ne),this.scheduler=we,this.work=Ne,this.pending=!1}schedule(we,Ne=0){var Ee;if(this.closed)return this;this.state=we;const z=this.id,q=this.scheduler;return null!=z&&(this.id=this.recycleAsyncId(q,z,Ne)),this.pending=!0,this.delay=Ne,this.id=null!==(Ee=this.id)&&void 0!==Ee?Ee:this.requestAsyncId(q,this.id,Ne),this}requestAsyncId(we,Ne,Ee=0){return O.setInterval(we.flush.bind(we,this),Ee)}recycleAsyncId(we,Ne,Ee=0){if(null!=Ee&&this.delay===Ee&&!1===this.pending)return Ne;null!=Ne&&O.clearInterval(Ne)}execute(we,Ne){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ee=this._execute(we,Ne);if(Ee)return Ee;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(we,Ne){let z,Ee=!1;try{this.work(we)}catch(q){Ee=!0,z=q||new Error("Scheduled action threw falsy error")}if(Ee)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:we,scheduler:Ne}=this,{actions:Ee}=Ne;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ee.P)(Ee,this),null!=we&&(this.id=this.recycleAsyncId(Ne,we,null)),this.delay=null,super.unsubscribe()}}}},7565:(mt,be,U)=>{U.d(be,{v:()=>O});var f=U(6063);class ${constructor(ue,_e=$.now){this.schedulerActionCtor=ue,this.now=_e}schedule(ue,_e=0,we){return new this.schedulerActionCtor(this,ue).schedule(we,_e)}}$.now=f.l.now;class O extends ${constructor(ue,_e=$.now){super(ue,_e),this.actions=[],this._active=!1}flush(ue){const{actions:_e}=this;if(this._active)return void _e.push(ue);let we;this._active=!0;do{if(we=ue.execute(ue.state,ue.delay))break}while(ue=_e.shift());if(this._active=!1,we){for(;ue=_e.shift();)ue.unsubscribe();throw we}}}},4986:(mt,be,U)=>{U.d(be,{z:()=>O});var f=U(4408);const O=new(U(7565).v)(f.o)},6063:(mt,be,U)=>{U.d(be,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(mt,be,U)=>{U.d(be,{z:()=>f});const f={setTimeout($,O,...ee){const{delegate:ue}=f;return ue?.setTimeout?ue.setTimeout($,O,...ee):setTimeout($,O,...ee)},clearTimeout($){const{delegate:O}=f;return(O?.clearTimeout||clearTimeout)($)},delegate:void 0}},2202:(mt,be,U)=>{U.d(be,{h:()=>$});const $=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(mt,be,U)=>{U.d(be,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(mt,be,U)=>{U.d(be,{_6:()=>_e,jO:()=>ee,yG:()=>ue});var f=U(576);function O(we){return we[we.length-1]}function ee(we){return(0,f.m)(O(we))?we.pop():void 0}function ue(we){return function $(we){return we&&(0,f.m)(we.schedule)}(O(we))?we.pop():void 0}function _e(we,Ne){return"number"==typeof O(we)?we.pop():Ne}},8737:(mt,be,U)=>{function f($,O){if($){const ee=$.indexOf(O);0<=ee&&$.splice(ee,1)}}U.d(be,{P:()=>f})},3888:(mt,be,U)=>{function f($){const ee=$(ue=>{Error.call(ue),ue.stack=(new Error).stack});return ee.prototype=Object.create(Error.prototype),ee.prototype.constructor=ee,ee}U.d(be,{d:()=>f})},2806:(mt,be,U)=>{U.d(be,{O:()=>ee,x:()=>O});var f=U(2416);let $=null;function O(ue){if(f.config.useDeprecatedSynchronousErrorHandling){const _e=!$;if(_e&&($={errorThrown:!1,error:null}),ue(),_e){const{errorThrown:we,error:Ne}=$;if($=null,we)throw Ne}}else ue()}function ee(ue){f.config.useDeprecatedSynchronousErrorHandling&&$&&($.errorThrown=!0,$.error=ue)}},9672:(mt,be,U)=>{function f($,O,ee,ue=0,_e=!1){const we=O.schedule(function(){ee(),_e?$.add(this.schedule(null,ue)):this.unsubscribe()},ue);if($.add(we),!_e)return we}U.d(be,{f:()=>f})},4671:(mt,be,U)=>{function f($){return $}U.d(be,{y:()=>f})},1144:(mt,be,U)=>{U.d(be,{z:()=>f});const f=$=>$&&"number"==typeof $.length&&"function"!=typeof $},2206:(mt,be,U)=>{U.d(be,{D:()=>$});var f=U(576);function $(O){return Symbol.asyncIterator&&(0,f.m)(O?.[Symbol.asyncIterator])}},576:(mt,be,U)=>{function f($){return"function"==typeof $}U.d(be,{m:()=>f})},3670:(mt,be,U)=>{U.d(be,{c:()=>O});var f=U(8822),$=U(576);function O(ee){return(0,$.m)(ee[f.L])}},6495:(mt,be,U)=>{U.d(be,{T:()=>O});var f=U(2202),$=U(576);function O(ee){return(0,$.m)(ee?.[f.h])}},8239:(mt,be,U)=>{U.d(be,{t:()=>$});var f=U(576);function $(O){return(0,f.m)(O?.then)}},3260:(mt,be,U)=>{U.d(be,{L:()=>ee,Q:()=>O});var f=U(7582),$=U(576);function O(ue){return(0,f.FC)(this,arguments,function*(){const we=ue.getReader();try{for(;;){const{value:Ne,done:Ee}=yield(0,f.qq)(we.read());if(Ee)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(Ne)}}finally{we.releaseLock()}})}function ee(ue){return(0,$.m)(ue?.getReader)}},4482:(mt,be,U)=>{U.d(be,{A:()=>$,e:()=>O});var f=U(576);function $(ee){return(0,f.m)(ee?.lift)}function O(ee){return ue=>{if($(ue))return ue.lift(function(_e){try{return ee(_e,this)}catch(we){this.error(we)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(mt,be,U)=>{function f(){}U.d(be,{Z:()=>f})},9635:(mt,be,U)=>{U.d(be,{U:()=>O,z:()=>$});var f=U(4671);function $(...ee){return O(ee)}function O(ee){return 0===ee.length?f.y:1===ee.length?ee[0]:function(_e){return ee.reduce((we,Ne)=>Ne(we),_e)}}},7849:(mt,be,U)=>{U.d(be,{h:()=>O});var f=U(2416),$=U(3410);function O(ee){$.z.setTimeout(()=>{const{onUnhandledError:ue}=f.config;if(!ue)throw ee;ue(ee)})}},4532:(mt,be,U)=>{function f($){return new TypeError(`You provided ${null!==$&&"object"==typeof $?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(be,{z:()=>f})},2223:(mt,be,U)=>{U.d(be,{$8M:()=>id,$WT:()=>Ws,$Z:()=>Zw,AFp:()=>DR,AaK:()=>ie,CHM:()=>zc,CRH:()=>w0,D6c:()=>rl,EJc:()=>LT,EpF:()=>Ad,F4k:()=>I_,FYo:()=>$y,FiY:()=>Ys,G48:()=>Zf,GfV:()=>sD,Gpc:()=>Xe,HDt:()=>UT,JOm:()=>Nu,KtG:()=>pu,LFG:()=>kn,Lbi:()=>kw,Lck:()=>nT,MAs:()=>wf,MMx:()=>U_,MR2:()=>Sw,NdJ:()=>TE,Ojb:()=>bR,OlP:()=>bn,Oqu:()=>FE,P3R:()=>Ny,PXZ:()=>yN,Q6J:()=>Ef,QGY:()=>$a,Qsj:()=>Gt,R0b:()=>is,RDi:()=>cR,Rgc:()=>Vf,SBq:()=>ys,Sil:()=>dN,Suo:()=>DT,TTD:()=>_a,TgZ:()=>w_,X6Q:()=>YT,XFs:()=>Ye,Xpm:()=>sa,Xts:()=>cg,Y36:()=>md,YKP:()=>o0,YNc:()=>DE,Yjl:()=>wp,Yz7:()=>tn,Z0I:()=>qn,ZZ4:()=>Ev,_Bn:()=>Fd,_UZ:()=>Vg,_c5:()=>J0,_uU:()=>wb,aQg:()=>X0,c2e:()=>O0,cJS:()=>hr,cg1:()=>Kg,dDg:()=>gN,dqk:()=>Wt,eFA:()=>cv,eJc:()=>Bd,ekj:()=>OE,eoX:()=>GT,f3M:()=>Yt,g9A:()=>eD,h0i:()=>js,hGG:()=>eI,iGM:()=>qu,ifc:()=>Et,ip1:()=>iv,jDz:()=>rT,kL8:()=>rc,lG2:()=>hl,lqb:()=>pd,lri:()=>Cm,n5z:()=>kp,oAB:()=>ru,q4F:()=>zy,qFp:()=>ON,qLn:()=>Tr,qOj:()=>lE,qZA:()=>E_,rWj:()=>uv,rg0:()=>Cl,sBO:()=>JT,s_b:()=>Ld,soG:()=>ym,tb:()=>bm,tp0:()=>Os,uIk:()=>Id,vHH:()=>re,vpe:()=>Ka,wAp:()=>Nt,xp6:()=>Yh,z2F:()=>Wd,zSh:()=>xw,zs3:()=>Ua});var f=U(7579),$=U(727),O=U(1135),ee=U(9751),ue=U(6451),_e=U(9646),we=U(3099),Ne=U(5577),Ee=U(1884);function z(s){for(let o in s)if(s[o]===z)return o;throw Error("Could not find renamed property on target object.")}function q(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function ie(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ie).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function Ve(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const Re=z({__forward_ref__:z});function Xe(s){return s.__forward_ref__=Xe,s.toString=function(){return ie(this())},s}function xe(s){return Ze(s)?s():s}function Ze(s){return"function"==typeof s&&s.hasOwnProperty(Re)&&s.__forward_ref__===Xe}function Oe(s){return s&&!!s.\u0275providers}const dt="https://g.co/ng/security#xss";class re extends Error{constructor(o,u){super(function Ce(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function ae(s){return"string"==typeof s?s:null==s?"":String(s)}function $e(s,o){throw new re(-201,!1)}function rt(s,o){null==s&&function yt(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function tn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function hr(s){return{providers:s.providers||[],imports:s.imports||[]}}function rr(s){return Ni(s,Hr)||Ni(s,si)}function qn(s){return null!==rr(s)}function Ni(s,o){return s.hasOwnProperty(o)?s[o]:null}function zi(s){return s&&(s.hasOwnProperty(Kn)||s.hasOwnProperty(Cs))?s[Kn]:null}const Hr=z({\u0275prov:z}),Kn=z({\u0275inj:z}),si=z({ngInjectableDef:z}),Cs=z({ngInjectorDef:z});var Ye=(()=>((Ye=Ye||{})[Ye.Default=0]="Default",Ye[Ye.Host=1]="Host",Ye[Ye.Self=2]="Self",Ye[Ye.SkipSelf=4]="SkipSelf",Ye[Ye.Optional=8]="Optional",Ye))();let ht;function Zt(s){const o=ht;return ht=s,o}function fr(s,o,u){const c=rr(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&Ye.Optional?null:void 0!==o?o:void $e(ie(s))}const Wt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ti={},Ft="__NG_DI_FLAG__",Pn="ngTempTokenPath",Ds=/\n/gm,Zn="__source";let Tn;function On(s){const o=Tn;return Tn=s,o}function pr(s,o=Ye.Default){if(void 0===Tn)throw new re(-203,!1);return null===Tn?fr(s,void 0,o):Tn.get(s,o&Ye.Optional?null:void 0,o)}function kn(s,o=Ye.Default){return(function wt(){return ht}()||pr)(xe(s),o)}function Yt(s,o=Ye.Default){return kn(s,W(o))}function W(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function G(s){const o=[];for(let u=0;u<s.length;u++){const c=xe(s[u]);if(Array.isArray(c)){if(0===c.length)throw new re(900,!1);let d,p=Ye.Default;for(let _=0;_<c.length;_++){const E=c[_],D=V(E);"number"==typeof D?-1===D?d=E.token:p|=D:d=E}o.push(kn(d,p))}else o.push(kn(c))}return o}function F(s,o){return s[Ft]=o,s.prototype[Ft]=o,s}function V(s){return s[Ft]}function ve(s){return{toString:s}.toString()}var qe=(()=>((qe=qe||{})[qe.OnPush=0]="OnPush",qe[qe.Default=1]="Default",qe))(),Et=(()=>{return(s=Et||(Et={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Et;var s})();const It={},ft=[],Mt=z({\u0275cmp:z}),Cn=z({\u0275dir:z}),Bt=z({\u0275pipe:z}),Nr=z({\u0275mod:z}),Gr=z({\u0275fac:z}),ge=z({__NG_ELEMENT_ID__:z}),oe=z({__NG_ENV_ID__:z});function Le(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const p=o.length;if(d+p===c||s.charCodeAt(d+p)<=32)return d}u=d+1}}function gt(s,o,u){let c=0;for(;c<u.length;){const d=u[c];if("number"==typeof d){if(0!==d)break;c++;const p=u[c++],_=u[c++],E=u[c++];s.setAttribute(o,_,E,p)}else{const p=d,_=u[++c];Ht(p)?s.setProperty(o,p,_):s.setAttribute(o,p,_),c++}}return c}function xt(s){return 3===s||4===s||6===s}function Ht(s){return 64===s.charCodeAt(0)}function on(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||xr(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function xr(s,o,u,c,d){let p=0,_=s.length;if(-1===o)_=-1;else for(;p<s.length;){const E=s[p++];if("number"==typeof E){if(E===o){_=-1;break}if(E>o){_=p-1;break}}}for(;p<s.length;){const E=s[p];if("number"==typeof E)break;if(E===u){if(null===c)return void(null!==d&&(s[p+1]=d));if(c===s[p+1])return void(s[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==_&&(s.splice(_,0,o),p=_+1),s.splice(p++,0,u),null!==c&&s.splice(p++,0,c),null!==d&&s.splice(p++,0,d)}const Yn="ng-template";function co(s,o,u){let c=0,d=!0;for(;c<s.length;){let p=s[c++];if("string"==typeof p&&d){const _=s[c++];if(u&&"class"===p&&-1!==Le(_.toLowerCase(),o,0))return!0}else{if(1===p){for(;c<s.length&&"string"==typeof(p=s[c++]);)if(p.toLowerCase()===o)return!0;return!1}"number"==typeof p&&(d=!1)}}return!1}function ko(s){return 4===s.type&&s.value!==Yn}function tu(s,o,u){return o===(4!==s.type||u?s.value:Yn)}function eh(s,o,u){let c=4;const d=s.attrs||[],p=function Ic(s){for(let o=0;o<s.length;o++)if(xt(s[o]))return o;return s.length}(d);let _=!1;for(let E=0;E<o.length;E++){const D=o[E];if("number"!=typeof D){if(!_)if(4&c){if(c=2|1&c,""!==D&&!tu(s,D,u)||""===D&&1===o.length){if(vi(c))return!1;_=!0}}else{const A=8&c?D:o[++E];if(8&c&&null!==s.attrs){if(!co(s.attrs,A,u)){if(vi(c))return!1;_=!0}continue}const j=ho(8&c?"class":D,d,ko(s),u);if(-1===j){if(vi(c))return!1;_=!0;continue}if(""!==A){let Y;Y=j>p?"":d[j+1].toLowerCase();const te=8&c?Y:null;if(te&&-1!==Le(te,A,0)||2&c&&A!==Y){if(vi(c))return!1;_=!0}}}}else{if(!_&&!vi(c)&&!vi(D))return!1;if(_&&vi(D))continue;_=!1,c=D|1&c}}return vi(c)||_}function vi(s){return 0==(1&s)}function ho(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let p=!1;for(;d<o.length;){const _=o[d];if(_===s)return d;if(3===_||6===_)p=!0;else{if(1===_||2===_){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=p?1:2}return-1}return function or(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function Fo(s,o,u=!1){for(let c=0;c<o.length;c++)if(eh(s,o[c],u))return!0;return!1}function ia(s,o){return s?":not("+o.trim()+")":o}function ny(s){let o=s[0],u=1,c=2,d="",p=!1;for(;u<s.length;){let _=s[u];if("string"==typeof _)if(2&c){const E=s[++u];d+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?d+="."+_:4&c&&(d+=" "+_);else""!==d&&!vi(_)&&(o+=ia(p,d),d=""),c=_,p=p||!vi(c);u++}return""!==d&&(o+=ia(p,d)),o}function sa(s){return ve(()=>{const o=rh(s),u={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===qe.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||Et.Emulated,styles:s.styles||ft,_:null,schemas:s.schemas||null,tView:null,id:""};iu(u);const c=s.dependencies;return u.directiveDefs=oa(c,!1),u.pipeDefs=oa(c,!0),u.id=function ih(s){let o=0;const u=[s.selectors,s.ngContentSelectors,s.hostVars,s.hostAttrs,s.consts,s.vars,s.decls,s.encapsulation,s.standalone,s.exportAs,JSON.stringify(s.inputs),JSON.stringify(s.outputs),Object.getOwnPropertyNames(s.type.prototype),!!s.contentQueries,!!s.viewQuery].join("|");for(const d of u)o=Math.imul(31,o)+d.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(u),u})}function vp(s){return jt(s)||Pr(s)}function nu(s){return null!==s}function ru(s){return ve(()=>({type:s.type,bootstrap:s.bootstrap||ft,declarations:s.declarations||ft,imports:s.imports||ft,exports:s.exports||ft,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function dl(s,o){if(null==s)return It;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),u[d]=c,o&&(o[d]=p)}return u}function hl(s){return ve(()=>{const o=rh(s);return iu(o),o})}function wp(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function jt(s){return s[Mt]||null}function Pr(s){return s[Cn]||null}function wn(s){return s[Bt]||null}function Ws(s){const o=jt(s)||Pr(s)||wn(s);return null!==o&&o.standalone}function ai(s,o){const u=s[Nr]||null;if(!u&&!0===o)throw new Error(`Type ${ie(s)} does not have '\u0275mod' property.`);return u}function rh(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||ft,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:dl(s.inputs,o),outputs:dl(s.outputs)}}function iu(s){s.features?.forEach(o=>o(s))}function oa(s,o){if(!s)return null;const u=o?wn:vp;return()=>("function"==typeof s?s():s).map(c=>u(c)).filter(nu)}const ar=0,nt=1,Ut=2,Gn=3,ui=4,aa=5,zr=6,qs=7,En=8,ls=9,Lo=10,At=11,ou=12,fl=13,fo=14,Fn=15,pl=16,Vo=17,bs=18,ua=19,gl=20,Wr=21,li=22,Dc=23,cs=24,un=25,Ts=1,Uo=2,xi=7,Bo=8,la=9,Or=11;function ni(s){return Array.isArray(s)&&"object"==typeof s[Ts]}function ri(s){return Array.isArray(s)&&!0===s[Ts]}function bc(s){return 0!=(4&s.flags)}function ds(s){return s.componentOffset>-1}function po(s){return 1==(1&s.flags)}function Sn(s){return!!s.template}function da(s){return 0!=(512&s[Ut])}function fa(s,o){return s.hasOwnProperty(Gr)?s[Gr]:null}let uu=Wt.WeakRef??class ch{constructor(o){this.ref=o}deref(){return this.ref}},dh=0,Oi=null,pa=!1;function kr(s){const o=Oi;return Oi=s,o}class ga{constructor(){this.id=dh++,this.ref=function lu(s){return new uu(s)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[o,u]of this.producers){const c=u.producerNode.deref();if(void 0!==c&&u.atTrackingVersion===this.trackingVersion){if(c.producerPollStatus(u.seenValueVersion))return!0}else this.producers.delete(o),c?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const o=pa;pa=!0;try{for(const[u,c]of this.consumers){const d=c.consumerNode.deref();void 0!==d&&d.trackingVersion===c.atTrackingVersion?d.onConsumerDependencyMayHaveChanged():(this.consumers.delete(u),d?.producers.delete(this.id))}}finally{pa=o}}producerAccessed(){if(pa)throw new Error("");if(null===Oi)return;let o=Oi.producers.get(this.id);void 0===o?(o={consumerNode:Oi.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:Oi.trackingVersion},Oi.producers.set(this.id,o),this.consumers.set(Oi.id,o)):(o.seenValueVersion=this.valueVersion,o.atTrackingVersion=Oi.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==Oi?.consumerAllowSignalWrites}producerPollStatus(o){return this.valueVersion!==o||(this.onProducerUpdateValueVersion(),this.valueVersion!==o)}}let xc=null;function Cl(s){const o=kr(null);try{return s()}finally{kr(o)}}const bp=()=>{};class Dl extends ga{constructor(o,u,c){super(),this.watch=o,this.schedule=u,this.dirty=!1,this.cleanupFn=bp,this.registerOnCleanup=d=>{this.cleanupFn=d},this.consumerAllowSignalWrites=c}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const o=kr(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=bp,this.watch(this.registerOnCleanup)}finally{kr(o)}}cleanup(){this.cleanupFn()}}class Tp{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function _a(){return Oc}function Oc(s){return s.type.prototype.ngOnChanges&&(s.setInput=hh),du}function du(){const s=fh(this),o=s?.current;if(o){const u=s.previous;if(u===It)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function hh(s,o,u,c){const d=this.declaredInputs[u],p=fh(s)||function ph(s,o){return s[hu]=o}(s,{previous:It,current:null}),_=p.current||(p.current={}),E=p.previous,D=E[d];_[d]=new Tp(D&&D.currentValue,o,E===It),s[c]=o}_a.ngInherit=!0;const hu="__ngSimpleChanges__";function fh(s){return s[hu]||null}const qi=function(s,o,u){};function mn(s){for(;Array.isArray(s);)s=s[ar];return s}function Vc(s,o){return mn(o[s])}function ci(s,o){return mn(o[s.index])}function Uc(s,o){return s.data[o]}function Kr(s,o){const u=o[s];return ni(u)?u:u[ar]}function jo(s){return 128==(128&s[Ut])}function Ho(s,o){return null==o?null:s[o]}function Bc(s){s[Vo]=0}function mh(s){1024&s[Ut]||(s[Ut]|=1024,Sl(s,1))}function jc(s){1024&s[Ut]&&(s[Ut]&=-1025,Sl(s,-1))}function Sl(s,o){let u=s[Gn];if(null===u)return;u[aa]+=o;let c=u;for(u=u[Gn];null!==u&&(1===o&&1===c[aa]||-1===o&&0===c[aa]);)u[aa]+=o,c=u,u=u[Gn]}const Rt={lFrame:Ch(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function _h(){return Rt.bindingsEnabled}function Me(){return Rt.lFrame.lView}function nn(){return Rt.lFrame.tView}function zc(s){return Rt.lFrame.contextLView=s,s[En]}function pu(s){return Rt.lFrame.contextLView=null,s}function Ir(){let s=Rl();for(;null!==s&&64===s.type;)s=s.parent;return s}function Rl(){return Rt.lFrame.currentTNode}function Ks(s,o){const u=Rt.lFrame;u.currentTNode=s,u.isParent=o}function Zs(){return Rt.lFrame.isParent}function _o(){return Rt.lFrame.bindingIndex++}function Wc(s,o){const u=Rt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Ia(o)}function Ia(s){Rt.lFrame.currentDirectiveIndex=s}function Ml(){return Rt.lFrame.currentQueryIndex}function qc(s){Rt.lFrame.currentQueryIndex=s}function yu(s){const o=s[nt];return 2===o.type?o.declTNode:1===o.type?s[zr]:null}function Kc(s,o,u){if(u&Ye.SkipSelf){let d=o,p=s;for(;!(d=d.parent,null!==d||u&Ye.Host||(d=yu(p),null===d||(p=p[fo],10&d.type))););if(null===d)return!1;o=d,s=p}const c=Rt.lFrame=Rs();return c.currentTNode=o,c.lView=s,!0}function vo(s){const o=Rs(),u=s[nt];Rt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Rs(){const s=Rt.lFrame,o=null===s?null:s.child;return null===o?Ch(s):o}function Ch(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Dh(){const s=Rt.lFrame;return Rt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Zc=Dh;function _u(){const s=Dh();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Ei(){return Rt.lFrame.selectedIndex}function Go(s){Rt.lFrame.selectedIndex=s}function Ln(){const s=Rt.lFrame;return Uc(s.tView,s.selectedIndex)}let xp=!0;function Xc(){return xp}function Ms(s){xp=s}function vu(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:D,ngAfterViewChecked:A,ngOnDestroy:N}=p;_&&(s.contentHooks??=[]).push(-u,_),E&&((s.contentHooks??=[]).push(u,E),(s.contentCheckHooks??=[]).push(u,E)),D&&(s.viewHooks??=[]).push(-u,D),A&&((s.viewHooks??=[]).push(u,A),(s.viewCheckHooks??=[]).push(u,A)),null!=N&&(s.destroyHooks??=[]).push(u,N)}}function Nl(s,o,u){Jc(s,o,3,u)}function wu(s,o,u,c){(3&s[Ut])===u&&Jc(s,o,u,c)}function Ah(s,o){let u=s[Ut];(3&u)===o&&(u&=4095,u+=1,s[Ut]=u)}function Jc(s,o,u,c){const p=c??-1,_=o.length-1;let E=0;for(let D=void 0!==c?65535&s[Vo]:0;D<_;D++)if("number"==typeof o[D+1]){if(E=o[D],null!=c&&E>=c)break}else o[D]<0&&(s[Vo]+=65536),(E<p||-1==p)&&(Rh(s,u,o,D),s[Vo]=(4294901760&s[Vo])+D+2),D++}function ed(s,o){qi(4,s,o);const u=kr(null);try{o.call(s)}finally{kr(u),qi(5,s,o)}}function Rh(s,o,u,c){const d=u[c]<0,p=u[c+1],E=s[d?-u[c]:u[c]];d?s[Ut]>>12<s[Vo]>>16&&(3&s[Ut])===o&&(s[Ut]+=4096,ed(E,p)):ed(E,p)}const An=-1;class ki{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function yn(s){return s!==An}function Tt(s){return 32767&s}function Iu(s,o){let u=function Ns(s){return s>>16}(s),c=o;for(;u>0;)c=c[fo],u--;return c}let Cu=!0;function xs(s){const o=Cu;return Cu=s,o}const Da=255,Xn=5;let Ki=0;const Ii={};function Du(s,o){const u=wo(s,o);if(-1!==u)return u;const c=o[nt];c.firstCreatePass&&(s.injectorIndex=o.length,xl(c.data,s),xl(o,null),xl(c.blueprint,null));const d=Ps(s,o),p=s.injectorIndex;if(yn(d)){const _=Tt(d),E=Iu(d,o),D=E[nt].data;for(let A=0;A<8;A++)o[p+A]=E[_+A]|D[_+A]}return o[p+8]=d,p}function xl(s,o){s.push(0,0,0,0,0,0,0,0,o)}function wo(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Ps(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){if(c=Fp(d),null===c)return An;if(u++,d=d[fo],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return An}function Li(s,o,u){!function ba(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(ge)&&(c=u[ge]),null==c&&(c=u[ge]=Ki++);const d=c&Da;o.data[s+(d>>Xn)]|=1<<d}(s,o,u)}function td(s,o,u){if(u&Ye.Optional||void 0!==s)return s;$e()}function Qt(s,o,u,c){if(u&Ye.Optional&&void 0===c&&(c=null),!(u&(Ye.Self|Ye.Host))){const d=s[ls],p=Zt(void 0);try{return d?d.get(o,c,u&Ye.Optional):fr(o,c,u&Ye.Optional)}finally{Zt(p)}}return td(c,0,u)}function Pl(s,o,u,c=Ye.Default,d){if(null!==s){if(2048&o[Ut]&&!(c&Ye.Self)){const _=function cy(s,o,u,c,d){let p=s,_=o;for(;null!==p&&null!==_&&2048&_[Ut]&&!(512&_[Ut]);){const E=Ta(p,_,u,c|Ye.Self,Ii);if(E!==Ii)return E;let D=p.parent;if(!D){const A=_[gl];if(A){const N=A.get(u,Ii,c);if(N!==Ii)return N}D=Fp(_),_=_[fo]}p=D}return d}(s,o,u,c,Ii);if(_!==Ii)return _}const p=Ta(s,o,u,c,Ii);if(p!==Ii)return p}return Qt(o,u,c,d)}function Ta(s,o,u,c,d){const p=function rd(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(ge)?s[ge]:void 0;return"number"==typeof o?o>=0?o&Da:Op:o}(u);if("function"==typeof p){if(!Kc(o,s,c))return c&Ye.Host?td(d,0,c):Qt(o,u,c,d);try{const _=p(c);if(null!=_||c&Ye.Optional)return _;$e()}finally{Zc()}}else if("number"==typeof p){let _=null,E=wo(s,o),D=An,A=c&Ye.Host?o[Fn][zr]:null;for((-1===E||c&Ye.SkipSelf)&&(D=-1===E?Ps(s,o):o[E+8],D!==An&&xh(c,!1)?(_=o[nt],E=Tt(D),o=Iu(D,o)):E=-1);-1!==E;){const N=o[nt];if(Nh(p,E,N.data)){const j=ly(E,o,u,_,c,A);if(j!==Ii)return j}D=o[E+8],D!==An&&xh(c,o[nt].data[E+8]===A)&&Nh(p,E,o)?(_=N,E=Tt(D),o=Iu(D,o)):E=-1}}return d}function ly(s,o,u,c,d,p){const _=o[nt],E=_.data[s+8],N=nd(E,_,u,null==c?ds(E)&&Cu:c!=_&&0!=(3&E.type),d&Ye.Host&&p===E);return null!==N?Eo(o,_,N,E):Ii}function nd(s,o,u,c,d){const p=s.providerIndexes,_=o.data,E=1048575&p,D=s.directiveStart,N=p>>20,Y=d?E+N:s.directiveEnd;for(let te=c?E:E+N;te<Y;te++){const De=_[te];if(te<D&&u===De||te>=D&&De.type===u)return te}if(d){const te=_[D];if(te&&Sn(te)&&te.type===u)return D}return null}function Eo(s,o,u,c){let d=s[u];const p=o.data;if(function vt(s){return s instanceof ki}(d)){const _=d;_.resolving&&function Pe(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new re(-200,`Circular dependency in DI detected for ${s}${u}`)}(function me(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ae(s)}(p[u]));const E=xs(_.canSeeViewProviders);_.resolving=!0;const D=_.injectImpl?Zt(_.injectImpl):null;Kc(s,c,Ye.Default);try{d=s[u]=_.factory(void 0,p,s,c),o.firstCreatePass&&u>=c.directiveStart&&function Sh(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(c){const _=Oc(o);(u.preOrderHooks??=[]).push(s,_),(u.preOrderCheckHooks??=[]).push(s,_)}d&&(u.preOrderHooks??=[]).push(0-s,d),p&&((u.preOrderHooks??=[]).push(s,p),(u.preOrderCheckHooks??=[]).push(s,p))}(u,p[u],o)}finally{null!==D&&Zt(D),xs(E),_.resolving=!1,Zc()}}return d}function Nh(s,o,u){return!!(u[o+(s>>Xn)]&1<<s)}function xh(s,o){return!(s&Ye.Self||s&Ye.Host&&o)}class Io{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return Pl(this._tNode,this._lView,o,W(c),u)}}function Op(){return new Io(Ir(),Me())}function kp(s){return ve(()=>{const o=s.prototype.constructor,u=o[Gr]||Ol(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const p=d[Gr]||Ol(d);if(p&&p!==u)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function Ol(s){return Ze(s)?()=>{const o=Ol(xe(s));return o&&o()}:fa(s)}function Fp(s){const o=s[nt],u=o.type;return 2===u?o.declTNode:1===u?s[zr]:null}function id(s){return function Pp(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const p=u[d];if(xt(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(p===o)return u[d+1];d+=2}}}return null}(Ir(),s)}const Wo="__parameters__";function gr(s,o,u){return ve(()=>{const c=function Lr(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...p){if(this instanceof d)return c.apply(this,p),this;const _=new d(...p);return E.annotation=_,E;function E(D,A,N){const j=D.hasOwnProperty(Wo)?D[Wo]:Object.defineProperty(D,Wo,{value:[]})[Wo];for(;j.length<=N;)j.push(null);return(j[N]=j[N]||[]).push(_),D}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}function Su(s,o){s.forEach(u=>Array.isArray(u)?Su(u,o):o(u))}function Bn(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function qo(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function I(s,o,u){let c=R(s,o);return c>=0?s[1|c]=u:(c=~c,function Ll(s,o,u,c){let d=s.length;if(d==o)s.push(u,c);else if(1===d)s.push(c,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function T(s,o){const u=R(s,o);if(u>=0)return s[1|u]}function R(s,o){return function K(s,o,u){let c=0,d=s.length>>u;for(;d!==c;){const p=c+(d-c>>1),_=s[p<<u];if(o===_)return p<<u;_>o?d=p:c=p+1}return~(d<<u)}(s,o,1)}const Ys=F(gr("Optional"),8),Os=F(gr("SkipSelf"),4);function Mu(s){return 128==(128&s.flags)}var Nu=(()=>((Nu=Nu||{})[Nu.Important=1]="Important",Nu[Nu.DashCase=2]="DashCase",Nu))();const mC=new Map;let lO=0;const EC="__ngContext__";function Zi(s,o){ni(o)?(s[EC]=o[ua],function yC(s){mC.set(s[ua],s)}(o)):s[EC]=o}let Uh;function ow(s,o){return Uh(s,o)}function dd(s){const o=s[Gn];return ri(o)?o[Gn]:o}function Xp(s){return my(s[ou])}function Jp(s){return my(s[ui])}function my(s){for(;null!==s&&!ri(s);)s=s[ui];return s}function Oa(s,o,u,c,d){if(null!=c){let p,_=!1;ri(c)?p=c:ni(c)&&(_=!0,c=c[ar]);const E=mn(c);0===s&&null!==u?null==d?fw(o,u,E):Ul(o,u,E,d||null,!0):1===s&&null!==u?Ul(o,u,E,d||null,!0):2===s?function Ey(s,o,u){const c=tg(s,o);c&&function sR(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,E,_):3===s&&o.destroyNode(E),null!=p&&function NC(s,o,u,c,d){const p=u[xi];p!==mn(u)&&Oa(o,s,c,p,d);for(let E=Or;E<u.length;E++){const D=u[E];ng(D[nt],D,s,o,c,p)}}(o,s,p,u,d)}}function Bh(s,o,u){return s.createElement(o,u)}function Pt(s,o){const u=s[la],c=u.indexOf(o);jc(o),u.splice(c,1)}function eg(s,o){if(s.length<=Or)return;const u=Or+o,c=s[u];if(c){const d=c[pl];null!==d&&d!==s&&Pt(d,c),o>0&&(s[u-1][ui]=c[ui]);const p=qo(s,Or+o);!function DC(s,o){ng(s,o,o[At],2,null,null),o[ar]=null,o[zr]=null}(c[nt],c);const _=p[bs];null!==_&&_.detachView(p[nt]),c[Gn]=null,c[ui]=null,c[Ut]&=-129}return c}function vy(s,o){if(!(256&o[Ut])){const u=o[At];o[Dc]?.destroy(),o[cs]?.destroy(),u.destroyNode&&ng(s,o,u,3,null,null),function tR(s){let o=s[ou];if(!o)return dw(s[nt],s);for(;o;){let u=null;if(ni(o))u=o[ou];else{const c=o[Or];c&&(u=c)}if(!u){for(;o&&!o[ui]&&o!==s;)ni(o)&&dw(o[nt],o),o=o[Gn];null===o&&(o=s),ni(o)&&dw(o[nt],o),u=o&&o[ui]}o=u}}(o)}}function dw(s,o){if(!(256&o[Ut])){o[Ut]&=-129,o[Ut]|=256,function iR(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof ki)){const p=u[c+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const E=d[p[_]],D=p[_+1];qi(4,E,D);try{D.call(E)}finally{qi(5,E,D)}}else{qi(4,d,p);try{p.call(d)}finally{qi(5,d,p)}}}}}(s,o),function rR(s,o){const u=s.cleanup,c=o[qs];if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const _=u[p+3];_>=0?c[_]():c[-_].unsubscribe(),p+=2}else u[p].call(c[u[p+1]]);null!==c&&(o[qs]=null);const d=o[Wr];if(null!==d){o[Wr]=null;for(let p=0;p<d.length;p++)(0,d[p])()}}(s,o),1===o[nt].type&&o[At].destroy();const u=o[pl];if(null!==u&&ri(o[Gn])){u!==o[Gn]&&Pt(u,o);const c=o[bs];null!==c&&c.detachView(s)}!function vC(s){mC.delete(s[ua])}(o)}}function hw(s,o,u){return function TC(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[ar];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:p}=s.data[c.directiveStart+d];if(p===Et.None||p===Et.Emulated)return null}return ci(c,u)}}(s,o.parent,u)}function Ul(s,o,u,c,d){s.insertBefore(o,u,c,d)}function fw(s,o,u){s.appendChild(o,u)}function SC(s,o,u,c,d){null!==c?Ul(s,o,u,c,d):fw(s,o,u)}function tg(s,o){return s.parentNode(o)}let wy,ww,Dy,hd=function RC(s,o,u){return 40&s.type?ci(s,u):null};function Bl(s,o,u,c){const d=hw(s,c,o),p=o[At],E=function AC(s,o,u){return hd(s,o,u)}(c.parent||o[zr],c,o);if(null!=d)if(Array.isArray(u))for(let D=0;D<u.length;D++)SC(p,d,u[D],E,!1);else SC(p,d,u,E,!1);void 0!==wy&&wy(p,c,o,u,d)}function xu(s,o){if(null!==o){const u=o.type;if(3&u)return ci(o,s);if(4&u)return gw(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return xu(s,c);{const d=s[o.index];return ri(d)?gw(-1,d):mn(d)}}if(32&u)return ow(o,s)()||mn(s[o.index]);{const c=Bi(s,o);return null!==c?Array.isArray(c)?c[0]:xu(dd(s[Fn]),c):xu(s,o.next)}}return null}function Bi(s,o){return null!==o?s[Fn][zr].projection[o.projection]:null}function gw(s,o){const u=Or+s+1;if(u<o.length){const c=o[u],d=c[nt].firstChild;if(null!==d)return xu(c,d)}return o[xi]}function mw(s,o,u,c,d,p,_){for(;null!=u;){const E=c[u.index],D=u.type;if(_&&0===o&&(E&&Zi(mn(E),c),u.flags|=2),32!=(32&u.flags))if(8&D)mw(s,o,u.child,c,d,p,!1),Oa(o,s,d,E,p);else if(32&D){const A=ow(u,c);let N;for(;N=A();)Oa(o,s,d,N,p);Oa(o,s,d,E,p)}else 16&D?rg(s,o,c,u,d,p):Oa(o,s,d,E,p);u=_?u.projectionNext:u.next}}function ng(s,o,u,c,d,p){mw(u,c,s.firstChild,o,d,p,!1)}function rg(s,o,u,c,d,p){const _=u[Fn],D=_[zr].projection[c.projection];if(Array.isArray(D))for(let A=0;A<D.length;A++)Oa(o,s,d,D[A],p);else{let A=D;const N=_[Gn];Mu(c)&&(A.flags|=128),mw(s,o,A,N,d,p,!0)}}function ka(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function vw(s,o,u){const{mergedAttrs:c,classes:d,styles:p}=u;null!==c&&gt(s,o,c),null!==d&&ka(s,o,d),null!==p&&function _w(s,o,u){s.setAttribute(o,"style",u)}(s,o,p)}function cR(s){ww=s}function by(s){return function Ew(){if(void 0===Dy&&(Dy=null,Wt.trustedTypes))try{Dy=Wt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Dy}()?.createScriptURL(s)||s}class Ty{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${dt})`}}function jl(s){return s instanceof Ty?s.changingThisBreaksApplicationSecurity:s}function sg(s,o){const u=function Fa(s){return s instanceof Ty&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see ${dt})`)}return u===o}const gR=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Qr=(()=>((Qr=Qr||{})[Qr.NONE=0]="NONE",Qr[Qr.HTML=1]="HTML",Qr[Qr.STYLE=2]="STYLE",Qr[Qr.SCRIPT=3]="SCRIPT",Qr[Qr.URL=4]="URL",Qr[Qr.RESOURCE_URL=5]="RESOURCE_URL",Qr))();function jC(s){const o=$h();return o?o.sanitize(Qr.URL,s)||"":sg(s,"URL")?jl(s):function Iw(s){return(s=String(s)).match(gR)?s:"unsafe:"+s}(ae(s))}function HC(s){const o=$h();if(o)return by(o.sanitize(Qr.RESOURCE_URL,s)||"");if(sg(s,"ResourceURL"))return by(jl(s));throw new re(904,!1)}function Ny(s,o,u){return function ms(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?HC:jC}(o,u)(s)}function $h(){const s=Me();return s&&s[Lo].sanitizer}class bn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=tn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const cg=new bn("ENVIRONMENT_INITIALIZER"),bo=new bn("INJECTOR",-1),GC=new bn("INJECTOR_DEF_TYPES");class zC{get(o,u=ti){if(u===ti){const c=new Error(`NullInjectorError: No provider for ${ie(o)}!`);throw c.name="NullInjectorError",c}return u}}function Sw(s){return{\u0275providers:s}}function wR(...s){return{\u0275providers:Aw(0,s),\u0275fromNgModule:!0}}function Aw(s,...o){const u=[],c=new Set;let d;return Su(o,p=>{const _=p;Rw(_,u,[],c)&&(d||=[],d.push(_))}),void 0!==d&&Hl(d,u),u}function Hl(s,o){for(let u=0;u<s.length;u++){const{providers:d}=s[u];xy(d,p=>{o.push(p)})}}function Rw(s,o,u,c){if(!(s=xe(s)))return!1;let d=null,p=zi(s);const _=!p&&jt(s);if(p||_){if(_&&!_.standalone)return!1;d=s}else{const D=s.ngModule;if(p=zi(D),!p)return!1;d=D}const E=c.has(d);if(_){if(E)return!1;if(c.add(d),_.dependencies){const D="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const A of D)Rw(A,o,u,c)}}else{if(!p)return!1;{if(null!=p.imports&&!E){let A;c.add(d);try{Su(p.imports,N=>{Rw(N,o,u,c)&&(A||=[],A.push(N))})}finally{}void 0!==A&&Hl(A,o)}if(!E){const A=fa(d)||(()=>new d);o.push({provide:d,useFactory:A,deps:ft},{provide:GC,useValue:d,multi:!0},{provide:cg,useValue:()=>kn(d),multi:!0})}const D=p.providers;null==D||E||xy(D,N=>{o.push(N)})}}return d!==s&&void 0!==s.providers}function xy(s,o){for(let u of s)Oe(u)&&(u=u.\u0275providers),Array.isArray(u)?xy(u,o):o(u)}const ER=z({provide:String,useValue:z});function Mw(s){return null!==s&&"object"==typeof s&&ER in s}function Ou(s){return"function"==typeof s}const xw=new bn("Set Injector scope."),Py={},IR={};let Pw;function dg(){return void 0===Pw&&(Pw=new zC),Pw}class pd{}class Ow extends pd{get destroyed(){return this._destroyed}constructor(o,u,c,d){super(),this.parent=u,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,JC(o,_=>this.processProvider(_)),this.records.set(bo,$l(void 0,this)),d.has("environment")&&this.records.set(pd,$l(void 0,this));const p=this.records.get(xw);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(GC.multi,ft,Ye.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const u of this._ngOnDestroyHooks)u.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const u of o)u()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const u=On(this),c=Zt(void 0);try{return o()}finally{On(u),Zt(c)}}get(o,u=ti,c=Ye.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(oe))return o[oe](this);c=W(c);const d=On(this),p=Zt(void 0);try{if(!(c&Ye.SkipSelf)){let E=this.records.get(o);if(void 0===E){const D=function XC(s){return"function"==typeof s||"object"==typeof s&&s instanceof bn}(o)&&rr(o);E=D&&this.injectableDefInScope(D)?$l(Oy(o),Py):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&Ye.Self?dg():this.parent).get(o,u=c&Ye.Optional&&u===ti?null:u)}catch(_){if("NullInjectorError"===_.name){if((_[Pn]=_[Pn]||[]).unshift(ie(o)),d)throw _;return function P(s,o,u,c){const d=s[Pn];throw o[Zn]&&d.unshift(o[Zn]),s.message=function J(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=ie(o);if(Array.isArray(o))d=o.map(ie).join(" -> ");else if("object"==typeof o){let p=[];for(let _ in o)if(o.hasOwnProperty(_)){let E=o[_];p.push(_+":"+("string"==typeof E?JSON.stringify(E):ie(E)))}d=`{${p.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(Ds,"\n  ")}`}("\n"+s.message,d,u,c),s.ngTokenPath=d,s[Pn]=null,s}(_,o,"R3InjectorError",this.source)}throw _}finally{Zt(p),On(d)}}resolveInjectorInitializers(){const o=On(this),u=Zt(void 0);try{const c=this.get(cg.multi,ft,Ye.Self);for(const d of c)d()}finally{On(o),Zt(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(ie(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new re(205,!1)}processProvider(o){let u=Ou(o=xe(o))?o:xe(o&&o.provide);const c=function KC(s){return Mw(s)?$l(void 0,s.useValue):$l(ZC(s),Py)}(o);if(Ou(o)||!0!==o.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=$l(void 0,Py,!0),d.factory=()=>G(d.multi),this.records.set(u,d)),u=o,d.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===Py&&(u.value=IR,u.value=u.factory()),"object"==typeof u.value&&u.value&&function QC(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=xe(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}removeOnDestroy(o){const u=this._onDestroyHooks.indexOf(o);-1!==u&&this._onDestroyHooks.splice(u,1)}}function Oy(s){const o=rr(s),u=null!==o?o.factory:fa(s);if(null!==u)return u;if(s instanceof bn)throw new re(204,!1);if(s instanceof Function)return function CR(s){const o=s.length;if(o>0)throw function Ra(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new re(204,!1);const u=function Oo(s){return s&&(s[Hr]||s[si])||null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new re(204,!1)}function ZC(s,o,u){let c;if(Ou(s)){const d=xe(s);return fa(d)||Oy(d)}if(Mw(s))c=()=>xe(s.useValue);else if(function Nw(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...G(s.deps||[]));else if(function WC(s){return!(!s||!s.useExisting)}(s))c=()=>kn(xe(s.useExisting));else{const d=xe(s&&(s.useClass||s.provide));if(!function YC(s){return!!s.deps}(s))return fa(d)||Oy(d);c=()=>new d(...G(s.deps))}return c}function $l(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function JC(s,o){for(const u of s)Array.isArray(u)?JC(u,o):u&&Oe(u)?JC(u.\u0275providers,o):o(u)}const DR=new bn("AppId",{providedIn:"root",factory:()=>bO}),bO="ng",eD=new bn("Platform Initializer"),kw=new bn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),bR=new bn("CSP nonce",{providedIn:"root",factory:()=>function ig(){if(void 0!==ww)return ww;if(typeof document<"u")return document;throw new re(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let nD=(s,o)=>null;function Bw(s,o){return nD(s,o)}class zh{}class By{}class Wh{resolveComponentFactory(o){throw function jy(s){const o=Error(`No component factory found for ${ie(s)}.`);return o.ngComponent=s,o}(o)}}let gg=(()=>{class s{}return s.NULL=new Wh,s})();function PO(){return qh(Ir(),Me())}function qh(s,o){return new ys(ci(s,o))}let ys=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=PO,s})();function at(s){return s instanceof ys?s.nativeElement:s}class $y{}let Gt=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Gy(){const s=Me(),u=Kr(Ir().index,s);return(ni(u)?u:s)[At]}(),s})(),mg=(()=>{class s{}return s.\u0275prov=tn({token:s,providedIn:"root",factory:()=>null}),s})();class sD{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const zy=new sD("16.0.4"),Hw={};function yg(s){for(;s;){s[Ut]|=64;const o=dd(s);if(da(s)&&!o)return s;s=o}return null}function Kh(s){return s.ngOriginalError}class Tr{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Kh(o);for(;u&&Kh(u);)u=Kh(u);return u||null}}const $w=new bn("",{providedIn:"root",factory:()=>!1});function ku(s){return s instanceof Function?s():s}class qy extends ga{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(o){this._lView=o}onConsumerDependencyMayHaveChanged(){yg(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(o,u,c){const d=kr(this);this.trackingVersion++;try{o(u,c)}finally{kr(d)}}destroy(){this.trackingVersion++}}let Zh=null;function Ky(){return Zh??=new qy,Zh}function Zy(s,o){return s[o]??Ky()}function Ww(s,o){const u=Ky();u.hasReadASignal&&(s[o]=Zh,u.lView=s,Zh=new qy)}const zt={};function Yh(s){pD(nn(),Me(),Ei()+s,!1)}function pD(s,o,u,c){if(!c)if(3==(3&o[Ut])){const p=s.preOrderCheckHooks;null!==p&&Nl(o,p,u)}else{const p=s.preOrderHooks;null!==p&&wu(o,p,0,u)}Go(u)}function Jy(s,o=null,u=null,c){const d=e_(s,o,u,c);return d.resolveInjectorInitializers(),d}function e_(s,o=null,u=null,c,d=new Set){const p=[u||ft,wR(s)];return c=c||("object"==typeof s?void 0:ie(s)),new Ow(p,o||dg(),c||null,d)}let Ua=(()=>{class s{static create(u,c){if(Array.isArray(u))return Jy({name:""},c,u,"");{const d=u.name??"";return Jy({name:d},u.parent,u.providers,d)}}}return s.THROW_IF_NOT_FOUND=ti,s.NULL=new zC,s.\u0275prov=tn({token:s,providedIn:"any",factory:()=>kn(bo)}),s.__NG_ELEMENT_ID__=-1,s})();function md(s,o=Ye.Default){const u=Me();return null===u?kn(s,o):Pl(Ir(),u,xe(s),o)}function Zw(){throw new Error("invalid")}function wg(s,o,u,c,d,p,_,E,D,A,N){const j=o.blueprint.slice();return j[ar]=d,j[Ut]=140|c,(null!==A||s&&2048&s[Ut])&&(j[Ut]|=2048),Bc(j),j[Gn]=j[fo]=s,j[En]=u,j[Lo]=_||s&&s[Lo],j[At]=E||s&&s[At],j[ls]=D||s&&s[ls]||null,j[zr]=p,j[ua]=function ZA(){return lO++}(),j[li]=N,j[gl]=A,j[Fn]=2==o.type?s[Fn]:j,j}function yd(s,o,u,c,d){let p=s.data[o];if(null===p)p=function Eg(s,o,u,c,d){const p=Rl(),_=Zs(),D=s.data[o]=function jR(s,o,u,c,d,p){let _=o?o.injectorIndex:-1,E=0;return function yo(){return null!==Rt.skipHydrationRootTNode}()&&(E|=128),{type:u,index:c,insertBeforeIndex:null,injectorIndex:_,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:E,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=D),null!==p&&(_?null==p.child&&null!==D.parent&&(p.child=D):null===p.next&&(p.next=D,D.prev=p)),D}(s,o,u,c,d),function Rp(){return Rt.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=u,p.value=c,p.attrs=d;const _=function gu(){const s=Rt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return Ks(p,!0),p}function Qh(s,o,u,c){if(0===u)return-1;const d=o.length;for(let p=0;p<u;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function wD(s,o,u,c,d){const p=Zy(o,Dc),_=Ei(),E=2&c;try{if(Go(-1),E&&o.length>un&&pD(s,o,un,!1),qi(E?2:0,d),E)p.runInContext(u,c,d);else{const A=kr(null);try{u(c,d)}finally{kr(A)}}}finally{E&&null===o[Dc]&&Ww(o,Dc),Go(_),qi(E?3:1,d)}}function Ig(s,o,u){if(bc(o)){const c=kr(null);try{const p=o.directiveEnd;for(let _=o.directiveStart;_<p;_++){const E=s.data[_];E.contentQueries&&E.contentQueries(1,u[_],_)}}finally{kr(c)}}}function Cg(s,o,u){_h()&&(function bD(s,o,u,c){const d=u.directiveStart,p=u.directiveEnd;ds(u)&&function _d(s,o,u){const c=ci(o,s),_=Wl(s,wg(s,di(u),null,u.onPush?64:16,c,o,null,s[Lo].rendererFactory.createRenderer(c,u),null,null,null));s[o.index]=_}(o,u,s.data[d+u.componentOffset]),s.firstCreatePass||Du(u,o),Zi(c,o);const _=u.initialInputs;for(let E=d;E<p;E++){const D=s.data[E],A=Eo(o,s,E,u);Zi(A,o),null!==_&&SD(0,E-d,A,D,0,_),Sn(D)&&(Kr(u.index,o)[En]=Eo(o,s,E,u))}}(s,o,u,ci(u,o)),64==(64&u.flags)&&Jw(s,o,u))}function Dg(s,o,u=ci){const c=o.localNames;if(null!==c){let d=o.index+1;for(let p=0;p<c.length;p+=2){const _=c[p+1],E=-1===_?u(o,s):s[_];s[d++]=E}}}function di(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=hi(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts,s.id):o}function hi(s,o,u,c,d,p,_,E,D,A,N){const j=un+c,Y=j+d,te=function t_(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:zt);return u}(j,Y),De="function"==typeof A?A():A;return te[nt]={type:s,blueprint:te,template:u,queries:null,viewQuery:E,declTNode:o,data:te.slice().fill(null,j),bindingStartIndex:j,expandoStartIndex:Y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:D,consts:De,incompleteFirstPass:!1,ssrId:N}}let ED=s=>null;function CD(s,o,u,c){for(let d in s)if(s.hasOwnProperty(d)){u=null===u?{}:u;const p=s[d];null===c?Xh(u,o,d,p):c.hasOwnProperty(d)&&Xh(u,o,c[d],p)}return u}function Xh(s,o,u,c){s.hasOwnProperty(u)?s[u].push(o,c):s[u]=[o,c]}function Tg(s,o,u,c){if(_h()){const d=null===c?null:{"":-1},p=function r_(s,o){const u=s.directiveRegistry;let c=null,d=null;if(u)for(let p=0;p<u.length;p++){const _=u[p];if(Fo(o,_.selectors,!1))if(c||(c=[]),Sn(_))if(null!==_.findHostDirectiveDefs){const E=[];d=d||new Map,_.findHostDirectiveDefs(_,E,d),c.unshift(...E,_),eE(s,o,E.length)}else c.unshift(_),eE(s,o,0);else d=d||new Map,_.findHostDirectiveDefs?.(_,c,d),c.push(_)}return null===c?null:[c,d]}(s,u);let _,E;null===p?_=E=null:[_,E]=p,null!==_&&Xw(s,o,u,_,d,E),d&&function GR(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const p=u[o[d+1]];if(null==p)throw new re(-301,!1);c.push(o[d],p)}}}(u,c,d)}u.mergedAttrs=on(u.mergedAttrs,u.attrs)}function Xw(s,o,u,c,d,p){for(let A=0;A<c.length;A++)Li(Du(u,o),s,c[A].type);!function zR(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}(u,s.data.length,c.length);for(let A=0;A<c.length;A++){const N=c[A];N.providersResolver&&N.providersResolver(N)}let _=!1,E=!1,D=Qh(s,o,c.length,null);for(let A=0;A<c.length;A++){const N=c[A];u.mergedAttrs=on(u.mergedAttrs,N.hostAttrs),WR(s,u,o,D,N),Jh(D,N,d),null!==N.contentQueries&&(u.flags|=4),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(u.flags|=64);const j=N.type.prototype;!_&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((s.preOrderHooks??=[]).push(u.index),_=!0),!E&&(j.ngOnChanges||j.ngDoCheck)&&((s.preOrderCheckHooks??=[]).push(u.index),E=!0),D++}!function bg(s,o,u){const d=o.directiveEnd,p=s.data,_=o.attrs,E=[];let D=null,A=null;for(let N=o.directiveStart;N<d;N++){const j=p[N],Y=u?u.get(j):null,De=Y?Y.outputs:null;D=CD(j.inputs,N,D,Y?Y.inputs:null),A=CD(j.outputs,N,A,De);const Fe=null===D||null===_||ko(o)?null:AD(D,N,_);E.push(Fe)}null!==D&&(D.hasOwnProperty("class")&&(o.flags|=8),D.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=E,o.inputs=D,o.outputs=A}(s,u,p)}function Jw(s,o,u){const c=u.directiveStart,d=u.directiveEnd,p=u.index,_=function $o(){return Rt.lFrame.currentDirectiveIndex}();try{Go(p);for(let E=c;E<d;E++){const D=s.data[E],A=o[E];Ia(E),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&TD(D,A)}}finally{Go(-1),Ia(_)}}function TD(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function eE(s,o,u){o.componentOffset=u,(s.components??=[]).push(o.index)}function Jh(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;Sn(o)&&(u[""]=s)}}function WR(s,o,u,c,d){s.data[c]=d;const p=d.factory||(d.factory=fa(d.type)),_=new ki(p,Sn(d),md);s.blueprint[c]=_,u[c]=_,function $R(s,o,u,c,d){const p=d.hostBindings;if(p){let _=s.hostBindingOpCodes;null===_&&(_=s.hostBindingOpCodes=[]);const E=~o.index;(function Sg(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(_)!=E&&_.push(E),_.push(u,c,p)}}(s,o,c,Qh(s,u,d.hostVars,zt),d)}function Yo(s,o,u,c,d,p){const _=ci(s,o);!function ef(s,o,u,c,d,p,_){if(null==p)s.removeAttribute(o,d,u);else{const E=null==_?ae(p):_(p,c||"",d);s.setAttribute(o,d,E,u)}}(o[At],_,p,s.value,u,c,d)}function SD(s,o,u,c,d,p){const _=p[o];if(null!==_)for(let E=0;E<_.length;)tf(c,u,_[E++],_[E++],_[E++])}function tf(s,o,u,c,d){const p=kr(null);try{null!==s.setInput?s.setInput(o,d,u,c):o[c]=d}finally{kr(p)}}function AD(s,o,u){let c=null,d=0;for(;d<u.length;){const p=u[d];if(0!==p)if(5!==p){if("number"==typeof p)break;if(s.hasOwnProperty(p)){null===c&&(c=[]);const _=s[p];for(let E=0;E<_.length;E+=2)if(_[E]===o){c.push(p,_[E+1],u[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function Xi(s,o,u,c){return[s,!0,!1,o,null,0,c,u,null,null,null]}function tE(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const p=u[c+1];if(-1!==p){const _=s.data[p];qc(u[c]),_.contentQueries(2,o[p],p)}}}function Wl(s,o){return s[ou]?s[fl][ui]=o:s[ou]=o,s[fl]=o,o}function nf(s,o,u){qc(0);const c=kr(null);try{o(s,u)}finally{kr(c)}}function i_(s){return s[qs]||(s[qs]=[])}function nE(s){return s.cleanup||(s.cleanup=[])}function rf(s,o){const u=s[ls],c=u?u.get(Tr,null):null;c&&c.handleError(o)}function Ag(s,o,u,c,d){for(let p=0;p<u.length;){const _=u[p++],E=u[p++];tf(s.data[_],o[_],c,E,d)}}function iE(s,o){const u=Kr(o,s),c=u[nt];!function s_(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])}(c,u);const d=u[ar];null!==d&&null===u[li]&&(u[li]=Bw(d,u[ls])),vd(c,u,u[En])}function vd(s,o,u){vo(o);try{const c=s.viewQuery;null!==c&&nf(1,c,u);const d=s.template;null!==d&&wD(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&tE(s,o),s.staticViewQueries&&nf(2,s.viewQuery,u);const p=s.components;null!==p&&function RD(s,o){for(let u=0;u<o.length;u++)iE(s,o[u])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[Ut]&=-5,_u()}}let o_=(()=>{class s{constructor(){this.all=new Set,this.queue=new Map}create(u,c,d){const p=typeof Zone>"u"?null:Zone.current,_=new Dl(u,A=>{this.all.has(A)&&this.queue.set(A,p)},d);let E;this.all.add(_),_.notify();const D=()=>{_.cleanup(),E?.(),this.all.delete(_),this.queue.delete(_)};return E=c?.onDestroy(D),{destroy:D}}flush(){if(0!==this.queue.size)for(const[u,c]of this.queue)this.queue.delete(u),c?c.run(()=>u.run()):u.run()}get isQueueEmpty(){return 0===this.queue.size}}return s.\u0275prov=tn({token:s,providedIn:"root",factory:()=>new s}),s})();function Rg(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,p=0;if(null!==o)for(let _=0;_<o.length;_++){const E=o[_];"number"==typeof E?p=E:1==p?d=Ve(d,E):2==p&&(c=Ve(c,E+": "+o[++_]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}function sf(s,o,u,c,d=!1){for(;null!==u;){const p=o[u.index];if(null!==p&&c.push(mn(p)),ri(p)){for(let E=Or;E<p.length;E++){const D=p[E],A=D[nt].firstChild;null!==A&&sf(D[nt],D,A,c)}p[xi]!==p[ar]&&c.push(p[xi])}const _=u.type;if(8&_)sf(s,o,u.child,c);else if(32&_){const E=ow(u,o);let D;for(;D=E();)c.push(D)}else if(16&_){const E=Bi(o,u);if(Array.isArray(E))c.push(...E);else{const D=dd(o[Fn]);sf(D[nt],D,E,c,!0)}}u=d?u.projectionNext:u.next}return c}function a_(s,o,u,c=!0){const d=o[Lo].rendererFactory;d.begin&&d.begin();try{wd(s,o,s.template,u)}catch(_){throw c&&rf(o,_),_}finally{d.end&&d.end(),o[Lo].effectManager?.flush()}}function wd(s,o,u,c){const d=o[Ut];if(256!=(256&d)){o[Lo].effectManager?.flush(),vo(o);try{Bc(o),function Eh(s){return Rt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&wD(s,o,u,2,c);const _=3==(3&d);if(_){const A=s.preOrderCheckHooks;null!==A&&Nl(o,A,null)}else{const A=s.preOrderHooks;null!==A&&wu(o,A,0,null),Ah(o,0)}if(function Ed(s){for(let o=Xp(s);null!==o;o=Jp(o)){if(!o[Uo])continue;const u=o[la];for(let c=0;c<u.length;c++){mh(u[c])}}}(o),function Mg(s){for(let o=Xp(s);null!==o;o=Jp(o))for(let u=Or;u<o.length;u++){const c=o[u],d=c[nt];jo(c)&&wd(d,c,d.template,c[En])}}(o),null!==s.contentQueries&&tE(s,o),_){const A=s.contentCheckHooks;null!==A&&Nl(o,A)}else{const A=s.contentHooks;null!==A&&wu(o,A,1),Ah(o,1)}!function LR(s,o){const u=s.hostBindingOpCodes;if(null===u)return;const c=Zy(o,cs);try{for(let d=0;d<u.length;d++){const p=u[d];if(p<0)Go(~p);else{const _=p,E=u[++d],D=u[++d];Wc(E,_),c.runInContext(D,2,o[_])}}}finally{null===o[cs]&&Ww(o,cs),Go(-1)}}(s,o);const E=s.components;null!==E&&function ZR(s,o){for(let u=0;u<o.length;u++)aE(s,o[u])}(o,E);const D=s.viewQuery;if(null!==D&&nf(2,D,c),_){const A=s.viewCheckHooks;null!==A&&Nl(o,A)}else{const A=s.viewHooks;null!==A&&wu(o,A,2),Ah(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[Ut]&=-73,jc(o)}finally{_u()}}}function aE(s,o){const u=Kr(o,s);if(jo(u)){const c=u[nt];80&u[Ut]?wd(c,u,c.template,u[En]):u[aa]>0&&uE(u)}}function uE(s){for(let c=Xp(s);null!==c;c=Jp(c))for(let d=Or;d<c.length;d++){const p=c[d];if(jo(p))if(1024&p[Ut]){const _=p[nt];wd(_,p,_.template,p[En])}else p[aa]>0&&uE(p)}const u=s[nt].components;if(null!==u)for(let c=0;c<u.length;c++){const d=Kr(u[c],s);jo(d)&&d[aa]>0&&uE(d)}}class af{get rootNodes(){const o=this._lView,u=o[nt];return sf(u,o,u.firstChild,[])}constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[En]}set context(o){this._lView[En]=o}get destroyed(){return 256==(256&this._lView[Ut])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[Gn];if(ri(o)){const u=o[Bo],c=u?u.indexOf(this):-1;c>-1&&(eg(o,c),qo(u,c))}this._attachedToViewContainer=!1}vy(this._lView[nt],this._lView)}onDestroy(o){!function va(s,o){if(256==(256&s[Ut]))throw new re(911,!1);null===s[Wr]&&(s[Wr]=[]),s[Wr].push(o)}(this._lView,o)}markForCheck(){yg(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ut]&=-129}reattach(){this._lView[Ut]|=128}detectChanges(){a_(this._lView[nt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function eR(s,o){ng(s,o,o[At],2,null,null)}(this._lView[nt],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new re(902,!1);this._appRef=o}}class xD extends af{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;a_(o[nt],o,o[En],!1)}checkNoChanges(){}get context(){return null}}class PD extends gg{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=jt(o);return new Kl(u,this.ngModule)}}function ql(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class l_{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){c=W(c);const d=this.injector.get(o,Hw,c);return d!==Hw||u===Hw?d:this.parentInjector.get(o,u,c)}}class Kl extends By{get inputs(){return ql(this.componentDef.inputs)}get outputs(){return ql(this.componentDef.outputs)}constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function th(s){return s.map(ny).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}create(o,u,c,d){let p=(d=d||this.ngModule)instanceof pd?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const _=p?new l_(o,p):o,E=_.get($y,null);if(null===E)throw new re(407,!1);const N={rendererFactory:E,sanitizer:_.get(mg,null),effectManager:_.get(o_,null)},j=E.createRenderer(null,this.componentDef),Y=this.componentDef.selectors[0][0]||"div",te=c?function Yw(s,o,u,c){const p=c.get($w,!1)||u===Et.ShadowDom,_=s.selectRootElement(o,p);return function VR(s){ED(s)}(_),_}(j,c,this.componentDef.encapsulation,_):Bh(j,Y,function Fu(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(Y)),De=this.componentDef.onPush?576:528,Fe=hi(0,null,null,1,0,null,null,null,null,null,null),Qe=wg(null,Fe,null,De,null,null,N,j,_,null,null);let _t,Ae;vo(Qe);try{const Ot=this.componentDef;let an,Rn=null;Ot.findHostDirectiveDefs?(an=[],Rn=new Map,Ot.findHostDirectiveDefs(Ot,an,Rn),an.push(Ot)):an=[Ot];const Hs=function c_(s,o){const u=s[nt],c=un;return s[c]=o,yd(u,c,2,"#host",null)}(Qe,te),Tv=function Ng(s,o,u,c,d,p,_){const E=d[nt];!function xg(s,o,u,c){for(const d of s)o.mergedAttrs=on(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(Rg(o,o.mergedAttrs,!0),null!==u&&vw(c,u,o))}(c,s,o,_);let D=null;null!==o&&(D=Bw(o,d[ls]));const A=p.rendererFactory.createRenderer(o,u),N=wg(d,di(u),null,u.onPush?64:16,d[s.index],s,p,A,null,null,D);return E.firstCreatePass&&eE(E,s,c.length-1),Wl(d,N),d[s.index]=N}(Hs,te,Ot,an,Qe,N,j);Ae=Uc(Fe,un),te&&function kD(s,o,u,c){if(c)gt(s,u,["ng-version",zy.full]);else{const{attrs:d,classes:p}=function cl(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===d?""!==p&&o.push(p,s[++c]):8===d&&u.push(p);else{if(!vi(d))break;d=p}c++}return{attrs:o,classes:u}}(o.selectors[0]);d&&gt(s,u,d),p&&p.length>0&&ka(s,u,p.join(" "))}}(j,Ot,te,c),void 0!==u&&function QR(s,o,u){const c=s.projection=[];for(let d=0;d<o.length;d++){const p=u[d];c.push(null!=p?Array.from(p):null)}}(Ae,this.ngContentSelectors,u),_t=function YR(s,o,u,c,d,p){const _=Ir(),E=d[nt],D=ci(_,d);Xw(E,d,_,u,null,c);for(let N=0;N<u.length;N++)Zi(Eo(d,E,_.directiveStart+N,_),d);Jw(E,d,_),D&&Zi(D,d);const A=Eo(d,E,_.directiveStart+_.componentOffset,_);if(s[En]=d[En]=A,null!==p)for(const N of p)N(A,o);return Ig(E,_,s),A}(Tv,Ot,an,Rn,Qe,[XR]),vd(Fe,Qe,null)}finally{_u()}return new OD(this.componentType,_t,qh(Ae,Qe),Qe,Ae)}}class OD extends zh{constructor(o,u,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.previousInputValues=null,this.instance=u,this.hostView=this.changeDetectorRef=new xD(d),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),u))return;const p=this._rootLView;Ag(p[nt],p,d,o,u),this.previousInputValues.set(o,u),yg(Kr(this._tNode.index,p))}}get injector(){return new Io(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function XR(){const s=Ir();vu(Me()[nt],s)}function lE(s){let o=function FD(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let d;if(Sn(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new re(903,!1);d=o.\u0275dir}if(d){if(u){c.push(d);const _=s;_.inputs=Ba(s.inputs),_.declaredInputs=Ba(s.declaredInputs),_.outputs=Ba(s.outputs);const E=d.hostBindings;E&&UD(s,E);const D=d.viewQuery,A=d.contentQueries;if(D&&LD(s,D),A&&VD(s,A),q(s.inputs,d.inputs),q(s.declaredInputs,d.declaredInputs),q(s.outputs,d.outputs),Sn(d)&&d.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let _=0;_<p.length;_++){const E=p[_];E&&E.ngInherit&&E(s),E===lE&&(u=!1)}}o=Object.getPrototypeOf(o)}!function Pg(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=on(d.hostAttrs,u=on(u,d.hostAttrs))}}(c)}function Ba(s){return s===It?{}:s===ft?[]:s}function LD(s,o){const u=s.viewQuery;s.viewQuery=u?(c,d)=>{o(c,d),u(c,d)}:o}function VD(s,o){const u=s.contentQueries;s.contentQueries=u?(c,d,p)=>{o(c,d,p),u(c,d,p)}:o}function UD(s,o){const u=s.hostBindings;s.hostBindings=u?(c,d)=>{o(c,d),u(c,d)}:o}function Og(s){return!!dE(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function dE(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function fi(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function Id(s,o,u,c){const d=Me();return fi(d,_o(),o)&&(nn(),Yo(Ln(),d,s,o,u,c)),Id}function DE(s,o,u,c,d,p,_,E){const D=Me(),A=nn(),N=s+un,j=A.firstCreatePass?function CE(s,o,u,c,d,p,_,E,D){const A=o.consts,N=yd(o,s,4,_||null,Ho(A,E));Tg(o,u,N,Ho(A,D)),vu(o,N);const j=N.tView=hi(2,N,c,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A,null);return null!==o.queries&&(o.queries.template(o,N),j.queries=o.queries.embeddedTView(N)),N}(N,A,D,o,u,c,d,p,_):A.data[N];Ks(j,!1);const Y=Ha(A,D,j,s);Xc()&&Bl(A,D,Y,j),Zi(Y,D),Wl(D,D[N]=Xi(Y,D,Y,j)),po(j)&&Cg(A,D,j),null!=_&&Dg(D,j,E)}let Ha=function eo(s,o,u,c){return Ms(!0),o[At].createComment("")};function wf(s){return function mo(s,o){return s[o]}(function Fr(){return Rt.lFrame.contextLView}(),un+s)}function Ef(s,o,u){const c=Me();return fi(c,_o(),o)&&function Fs(s,o,u,c,d,p,_,E){const D=ci(o,u);let N,A=o.inputs;!E&&null!=A&&(N=A[c])?(Ag(s,u,N,c,d),ds(o)&&function HR(s,o){const u=Kr(o,s);16&u[Ut]||(u[Ut]|=64)}(u,o.index)):3&o.type&&(c=function Qw(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=_?_(d,o.value||"",c):d,p.setProperty(D,c,d))}(nn(),Ln(),c,s,o,c[At],u,!1),Ef}function v_(s,o,u,c,d){const _=d?"class":"style";Ag(s,u,o.inputs[_],_,c)}function w_(s,o,u,c){const d=Me(),p=nn(),_=un+s,E=d[At],D=p.firstCreatePass?function If(s,o,u,c,d,p){const _=o.consts,D=yd(o,s,2,c,Ho(_,d));return Tg(o,u,D,Ho(_,p)),null!==D.attrs&&Rg(D,D.attrs,!1),null!==D.mergedAttrs&&Rg(D,D.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,D),D}(_,p,d,o,u,c):p.data[_],A=XD(p,d,D,E,o,s);d[_]=A;const N=po(D);return Ks(D,!0),vw(E,A,D),32!=(32&D.flags)&&Xc()&&Bl(p,d,A,D),0===function Hc(){return Rt.lFrame.elementDepthCount}()&&Zi(A,d),function ay(){Rt.lFrame.elementDepthCount++}(),N&&(Cg(p,d,D),Ig(p,D,d)),null!==c&&Dg(d,D),w_}function E_(){let s=Ir();Zs()?function vh(){Rt.lFrame.isParent=!1}():(s=s.parent,Ks(s,!1));const o=s;(function fu(s){return Rt.skipHydrationRootTNode===s})(o)&&function Ap(){Rt.skipHydrationRootTNode=null}(),function $c(){Rt.lFrame.elementDepthCount--}();const u=nn();return u.firstCreatePass&&(vu(u,s),bc(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function zo(s){return 0!=(8&s.flags)}(o)&&v_(u,o,Me(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Eu(s){return 0!=(16&s.flags)}(o)&&v_(u,o,Me(),o.stylesWithoutHost,!1),E_}function Vg(s,o,u,c){return w_(s,o,u,c),E_(),Vg}let XD=(s,o,u,c,d,p)=>(Ms(!0),Bh(c,d,function Qc(){return Rt.lFrame.currentNamespace}()));function Ad(){return Me()}function $a(s){return!!s&&"function"==typeof s.then}function I_(s){return!!s&&"function"==typeof s.subscribe}function TE(s,o,u,c){const d=Me(),p=nn(),_=Ir();return function to(s,o,u,c,d,p,_){const E=po(c),A=s.firstCreatePass&&nE(s),N=o[En],j=i_(o);let Y=!0;if(3&c.type||_){const Fe=ci(c,o),Qe=_?_(Fe):Fe,_t=j.length,Ae=_?an=>_(mn(an[c.index])):c.index;let Ot=null;if(!_&&E&&(Ot=function Xr(s,o,u,c){const d=s.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const _=d[p];if(_===u&&d[p+1]===c){const E=o[qs],D=d[p+2];return E.length>D?E[D]:null}"string"==typeof _&&(p+=2)}return null}(s,o,d,c.index)),null!==Ot)(Ot.__ngLastListenerFn__||Ot).__ngNextListenerFn__=p,Ot.__ngLastListenerFn__=p,Y=!1;else{p=ct(c,o,N,p,!1);const an=u.listen(Qe,d,p);j.push(p,an),A&&A.push(d,Ae,_t,_t+1)}}else p=ct(c,o,N,p,!1);const te=c.outputs;let De;if(Y&&null!==te&&(De=te[d])){const Fe=De.length;if(Fe)for(let Qe=0;Qe<Fe;Qe+=2){const Rn=o[De[Qe]][De[Qe+1]].subscribe(p),Hs=j.length;j.push(p,Rn),A&&A.push(d,c.index,Hs,-(Hs+1))}}}(p,d,d[At],_,s,o,c),TE}function C_(s,o,u,c){try{return qi(6,o,u),!1!==u(c)}catch(d){return rf(s,d),!1}finally{qi(7,o,u)}}function ct(s,o,u,c,d){return function p(_){if(_===Function)return c;yg(s.componentOffset>-1?Kr(s.index,o):o);let D=C_(o,u,c,_),A=p.__ngNextListenerFn__;for(;A;)D=C_(o,u,A,_)&&D,A=A.__ngNextListenerFn__;return d&&!1===D&&_.preventDefault(),D}}function RE(s,o){return s<<17|o<<2}function Yl(s){return s>>17&32767}function Ql(s){return 2|s}function Xl(s){return(131068&s)>>2}function Jn(s,o){return-131069&s|o<<2}function Rd(s){return 1|s}function Ug(s,o,u,c,d){const p=s[u+1],_=null===o;let E=c?Yl(p):Xl(p),D=!1;for(;0!==E&&(!1===D||_);){const N=s[E+1];ME(s[E],o)&&(D=!0,s[E+1]=c?Rd(N):Ql(N)),E=c?Yl(N):Xl(N)}D&&(s[u+1]=c?Ql(p):Rd(p))}function ME(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&R(s,o)>=0}function OE(s,o){return function Ao(s,o,u,c){const d=Me(),p=nn(),_=function Dn(s){const o=Rt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);p.firstUpdatePass&&function pb(s,o,u,c){const d=s.data;if(null===d[u+1]){const p=d[Ei()],_=function fb(s,o){return o>=s.expandoStartIndex}(s,u);(function vb(s,o){return 0!=(s.flags&(o?8:16))})(p,c)&&null===o&&!_&&(o=!1),o=function ro(s,o,u,c){const d=function Ih(s){const o=Rt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(u=Hg(u=Ti(null,s,o,u,c),o.attrs,c),p=null);else{const _=o.directiveStylingLast;if(-1===_||s[_]!==d)if(u=Ti(d,s,o,u,c),null===p){let D=function Bg(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==Xl(c))return s[Yl(c)]}(s,o,c);void 0!==D&&Array.isArray(D)&&(D=Ti(null,s,o,D[1],c),D=Hg(D,o.attrs,c),function jg(s,o,u,c){s[Yl(u?o.classBindings:o.styleBindings)]=c}(s,o,c,D))}else p=function gb(s,o,u){let c;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)c=Hg(c,s[p].hostAttrs,u);return Hg(c,o.attrs,u)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),u}(d,p,o,c),function Vr(s,o,u,c,d,p){let _=p?o.classBindings:o.styleBindings,E=Yl(_),D=Xl(_);s[c]=u;let N,A=!1;if(Array.isArray(u)?(N=u[1],(null===N||R(u,N)>0)&&(A=!0)):N=u,d)if(0!==D){const Y=Yl(s[E+1]);s[c+1]=RE(Y,E),0!==Y&&(s[Y+1]=Jn(s[Y+1],c)),s[E+1]=function $t(s,o){return 131071&s|o<<17}(s[E+1],c)}else s[c+1]=RE(E,0),0!==E&&(s[E+1]=Jn(s[E+1],c)),E=c;else s[c+1]=RE(D,0),0===E?E=c:s[D+1]=Jn(s[D+1],c),D=c;A&&(s[c+1]=Ql(s[c+1])),Ug(s,N,c,!0),Ug(s,N,c,!1),function et(s,o,u,c,d){const p=d?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&R(p,o)>=0&&(u[c+1]=Rd(u[c+1]))}(o,N,s,c,p),_=RE(E,D),p?o.classBindings=_:o.styleBindings=_}(d,p,o,u,_,c)}}(p,s,_,c),o!==zt&&fi(d,_,o)&&function kE(s,o,u,c,d,p,_,E){if(!(3&o.type))return;const D=s.data,A=D[E+1],N=function St(s){return 1==(1&s)}(A)?_b(D,o,u,d,Xl(A),_):void 0;T_(N)||(T_(p)||function ub(s){return 2==(2&s)}(A)&&(p=_b(D,null,u,d,E,_)),function yw(s,o,u,c,d){if(o)d?s.addClass(u,c):s.removeClass(u,c);else{let p=-1===c.indexOf("-")?void 0:Nu.DashCase;null==d?s.removeStyle(u,c,p):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),p|=Nu.Important),s.setStyle(u,c,d,p))}}(c,_,Vc(Ei(),u),d,p))}(p,p.data[Ei()],d,d[At],s,d[_+1]=function pM(s,o){return null==s||""===s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ie(jl(s)))),s}(o,u),c,_)}(s,o,null,!0),OE}function Ti(s,o,u,c,d){let p=null;const _=u.directiveEnd;let E=u.directiveStylingLast;for(-1===E?E=u.directiveStart:E++;E<_&&(p=o[E],c=Hg(c,p.hostAttrs,d),p!==s);)E++;return null!==s&&(u.directiveStylingLast=E),c}function Hg(s,o,u){const c=u?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const _=o[p];"number"==typeof _?d=_:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),I(s,_,!!u||o[++p]))}return void 0===s?null:s}function _b(s,o,u,c,d,p){const _=null===o;let E;for(;d>0;){const D=s[d],A=Array.isArray(D),N=A?D[1]:D,j=null===N;let Y=u[d+1];Y===zt&&(Y=j?ft:void 0);let te=j?T(Y,c):N===c?Y:void 0;if(A&&!T_(te)&&(te=T(D,c)),T_(te)&&(E=te,_))return E;const De=s[d+1];d=_?Yl(De):Xl(De)}if(null!==o){let D=p?o.residualClasses:o.residualStyles;null!=D&&(E=T(D,c))}return E}function T_(s){return void 0!==s}function wb(s,o=""){const u=Me(),c=nn(),d=s+un,p=c.firstCreatePass?yd(c,d,1,o,null):c.data[d],_=Eb(c,u,p,o,s);u[d]=_,Xc()&&Bl(c,u,_,p),Ks(p,!1)}let Eb=(s,o,u,c,d)=>(Ms(!0),function yy(s,o){return s.createText(o)}(o[At],c));function FE(s){return LE("",s,""),FE}function LE(s,o,u){const c=Me(),d=function zn(s,o,u,c){return fi(s,_o(),u)?o+ae(u)+c:zt}(c,s,o,u);return d!==zt&&function Qo(s,o,u){const c=Vc(o,s);!function _y(s,o,u){s.setValue(o,u)}(s[At],c,u)}(c,Ei(),d),LE}const ts=void 0;var nc=["en",[["a","p"],["AM","PM"],ts],[["AM","PM"],ts,ts],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ts,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ts,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ts,"{1} 'at' {0}",ts],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Wg(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Md={};function Kg(s){const o=function Ob(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=A_(o);if(u)return u;const c=o.split("-")[0];if(u=A_(c),u)return u;if("en"===c)return nc;throw new re(701,!1)}function rc(s){return Kg(s)[Nt.PluralCase]}function A_(s){return s in Md||(Md[s]=Wt.ng&&Wt.ng.common&&Wt.ng.common.locales&&Wt.ng.common.locales[s]),Md[s]}var Nt=(()=>((Nt=Nt||{})[Nt.LocaleId=0]="LocaleId",Nt[Nt.DayPeriodsFormat=1]="DayPeriodsFormat",Nt[Nt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Nt[Nt.DaysFormat=3]="DaysFormat",Nt[Nt.DaysStandalone=4]="DaysStandalone",Nt[Nt.MonthsFormat=5]="MonthsFormat",Nt[Nt.MonthsStandalone=6]="MonthsStandalone",Nt[Nt.Eras=7]="Eras",Nt[Nt.FirstDayOfWeek=8]="FirstDayOfWeek",Nt[Nt.WeekendRange=9]="WeekendRange",Nt[Nt.DateFormat=10]="DateFormat",Nt[Nt.TimeFormat=11]="TimeFormat",Nt[Nt.DateTimeFormat=12]="DateTimeFormat",Nt[Nt.NumberSymbols=13]="NumberSymbols",Nt[Nt.NumberFormats=14]="NumberFormats",Nt[Nt.CurrencyCode=15]="CurrencyCode",Nt[Nt.CurrencySymbol=16]="CurrencySymbol",Nt[Nt.CurrencyName=17]="CurrencyName",Nt[Nt.Currencies=18]="Currencies",Nt[Nt.Directionality=19]="Directionality",Nt[Nt.PluralCase=20]="PluralCase",Nt[Nt.ExtraData=21]="ExtraData",Nt))();const Nd="en-US";let HE=Nd;function nr(s,o,u,c,d){if(s=xe(s),Array.isArray(s))for(let p=0;p<s.length;p++)nr(s[p],o,u,c,d);else{const p=nn(),_=Me();let E=Ou(s)?s:xe(s.provide),D=ZC(s);const A=Ir(),N=1048575&A.providerIndexes,j=A.directiveStart,Y=A.providerIndexes>>20;if(Ou(s)||!s.multi){const te=new ki(D,d,md),De=L_(E,o,d?N:N+Y,j);-1===De?(Li(Du(A,_),p,E),Pf(p,s,o.length),o.push(E),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),u.push(te),_.push(te)):(u[De]=te,_[De]=te)}else{const te=L_(E,o,N+Y,j),De=L_(E,o,N,N+Y),Qe=De>=0&&u[De];if(d&&!Qe||!d&&!(te>=0&&u[te])){Li(Du(A,_),p,E);const _t=function tT(s,o,u,c,d){const p=new ki(s,u,md);return p.multi=[],p.index=o,p.componentProviders=0,im(p,d,c&&!u),p}(d?sm:PM,u.length,d,c,D);!d&&Qe&&(u[De].providerFactory=_t),Pf(p,s,o.length,0),o.push(E),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),u.push(_t),_.push(_t)}else Pf(p,s,te>-1?te:De,im(u[d?De:te],D,!d&&c));!d&&c&&Qe&&u[De].componentProviders++}}}function Pf(s,o,u,c){const d=Ou(o),p=function qC(s){return!!s.useClass}(o);if(d||p){const D=(p?xe(o.useClass):o).prototype.ngOnDestroy;if(D){const A=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const N=A.indexOf(u);-1===N?A.push(u,[c,D]):A[N+1].push(c,D)}else A.push(u,D)}}}function im(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function L_(s,o,u,c){for(let d=u;d<c;d++)if(o[d]===s)return d;return-1}function PM(s,o,u,c){return s0(this.multi,[])}function sm(s,o,u,c){const d=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=Eo(u,u[nt],this.providerFactory.index,c);p=E.slice(0,_),s0(d,p);for(let D=_;D<E.length;D++)p.push(E[D])}else p=[],s0(d,p);return p}function s0(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function Fd(s,o=[]){return u=>{u.providersResolver=(c,d)=>function xM(s,o,u){const c=nn();if(c.firstCreatePass){const d=Sn(s);nr(u,c.data,c.blueprint,d,!0),nr(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class js{}class o0{}function nT(s,o){return new uc(s,o??null,[])}class uc extends js{constructor(o,u,c){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new PD(this);const d=ai(o);this._bootstrapComponents=ku(d.bootstrap),this._r3Injector=e_(o,u,[{provide:js,useValue:this},{provide:gg,useValue:this.componentFactoryResolver},...c],ie(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class om extends o0{constructor(o){super(),this.moduleType=o}create(o){return new uc(this.moduleType,o,[])}}class V_ extends js{constructor(o){super(),this.componentFactoryResolver=new PD(this),this.instance=null;const u=new Ow([...o.providers,{provide:js,useValue:this},{provide:gg,useValue:this.componentFactoryResolver}],o.parent||dg(),o.debugName,new Set(["environment"]));this.injector=u,o.runEnvironmentInitializers&&u.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function U_(s,o,u=null){return new V_({providers:s,parent:o,debugName:u,runEnvironmentInitializers:!0}).injector}let kM=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const c=Aw(0,u.type),d=c.length>0?U_([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,d)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=tn({token:s,providedIn:"environment",factory:()=>new s(kn(pd))}),s})();function rT(s){s.getStandaloneInjector=o=>o.get(kM).getOrCreateStandaloneInjector(s)}function hm(s){return o=>{setTimeout(s,void 0,o)}}const Ka=class dm extends f.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let d=o,p=u||(()=>null),_=c;if(o&&"object"==typeof o){const D=o;d=D.next?.bind(D),p=D.error?.bind(D),_=D.complete?.bind(D)}this.__isAsync&&(p=hm(p),d&&(d=hm(d)),_&&(_=hm(_)));const E=super.subscribe({next:d,error:p,complete:_});return o instanceof $.w0&&o.add(E),E}};function mT(){return this._results[Symbol.iterator]()}class fm{get changes(){return this._changes||(this._changes=new Ka)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=fm.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=mT)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=function ur(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Vp(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],p=o[c];if(u&&(d=u(d),p=u(p)),p!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Vf=(()=>{class s{}return s.__NG_ELEMENT_ID__=zM,s})();const GM=Vf,yT=class extends GM{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,u){return this.createEmbeddedViewImpl(o,u,null)}createEmbeddedViewImpl(o,u,c){const d=this._declarationTContainer.tView,p=wg(this._declarationLView,d,o,16,null,d.declTNode,null,null,null,u||null,c||null);p[pl]=this._declarationLView[this._declarationTContainer.index];const E=this._declarationLView[bs];return null!==E&&(p[bs]=E.createEmbeddedView(d)),vd(d,p,o),new af(p)}};function zM(){return $_(Ir(),Me())}function $_(s,o){return 4&s.type?new yT(o,s,qh(s,o)):null}let Ld=(()=>{class s{}return s.__NG_ELEMENT_ID__=Vd,s})();function Vd(){return W_(Ir(),Me())}const Ud=Ld,cc=class extends Ud{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return qh(this._hostTNode,this._hostLView)}get injector(){return new Io(this._hostTNode,this._hostLView)}get parentInjector(){const o=Ps(this._hostTNode,this._hostLView);if(yn(o)){const u=Iu(o,this._hostLView),c=Tt(o);return new Io(u[nt].data[c+8],u)}return new Io(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=Bf(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-Or}createEmbeddedView(o,u,c){let d,p;"number"==typeof c?d=c:null!=c&&(d=c.index,p=c.injector);const E=o.createEmbeddedViewImpl(u||{},p,null);return this.insertImpl(E,d,false),E}createComponent(o,u,c,d,p){const _=o&&!function Aa(s){return"function"==typeof s}(o);let E;if(_)E=u;else{const Fe=u||{};E=Fe.index,c=Fe.injector,d=Fe.projectableNodes,p=Fe.environmentInjector||Fe.ngModuleRef}const D=_?o:new Kl(jt(o)),A=c||this.parentInjector;if(!p&&null==D.ngModule){const Qe=(_?A:this.parentInjector).get(pd,null);Qe&&(p=Qe)}jt(D.componentType??{});const te=D.create(A,d,null,p);return this.insertImpl(te.hostView,E,false),te}insert(o,u){return this.insertImpl(o,u,!1)}insertImpl(o,u,c){const d=o._lView,p=d[nt];if(function gh(s){return ri(s[Gn])}(d)){const D=this.indexOf(o);if(-1!==D)this.detach(D);else{const A=d[Gn],N=new cc(A,A[zr],A[Gn]);N.detach(N.indexOf(o))}}const _=this._adjustIndex(u),E=this._lContainer;if(function nR(s,o,u,c){const d=Or+c,p=u.length;c>0&&(u[d-1][ui]=o),c<p-Or?(o[ui]=u[d],Bn(u,Or+c,o)):(u.push(o),o[ui]=null),o[Gn]=u;const _=o[pl];null!==_&&u!==_&&function br(s,o){const u=s[la];o[Fn]!==o[Gn][Gn][Fn]&&(s[Uo]=!0),null===u?s[la]=[o]:u.push(o)}(_,o);const E=o[bs];null!==E&&E.insertView(s),o[Ut]|=128}(p,d,E,_),!c){const D=gw(_,E),A=d[At],N=tg(A,E[xi]);null!==N&&function bC(s,o,u,c,d,p){c[ar]=d,c[zr]=o,ng(s,c,u,1,d,p)}(p,E[zr],A,d,N,D)}return o.attachToViewContainerRef(),Bn(z_(E),_,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=Bf(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=eg(this._lContainer,u);c&&(qo(z_(this._lContainer),u),vy(c[nt],c))}detach(o){const u=this._adjustIndex(o,-1),c=eg(this._lContainer,u);return c&&null!=qo(z_(this._lContainer),u)?new af(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function Bf(s){return s[Bo]}function z_(s){return s[Bo]||(s[Bo]=[])}function W_(s,o){let u;const c=o[s.index];return ri(c)?u=c:(u=Xi(c,o,null,s),o[s.index]=u,Wl(o,u)),y0(u,o,s,c),new cc(u,s,o)}let y0=function _0(s,o,u,c){if(s[xi])return;let d;d=8&u.type?mn(c):function m0(s,o){const u=s[At],c=u.createComment(""),d=ci(o,s);return Ul(u,tg(u,d),c,function oR(s,o){return s.nextSibling(o)}(u,d),!1),c}(o,u),s[xi]=d};class q_{constructor(o){this.queryList=o,this.matches=null}clone(){return new q_(this.queryList)}setDirty(){this.queryList.setDirty()}}class jf{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let p=0;p<c;p++){const _=u.getByIndex(p);d.push(this.queries[_.indexInDeclarationView].clone())}return new jf(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Y_(o,u).matches&&this.queries[u].setDirty()}}class Hf{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class zu{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,p=this.getByIndex(c).embeddedTView(o,d);p&&(p.indexInDeclarationView=c,null!==u?u.push(p):u=[p])}return null!==u?new zu(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class v0{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new v0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const p=c[d];this.matchTNodeWithReadOption(o,u,IT(u,p)),this.matchTNodeWithReadOption(o,u,nd(u,o,p,!1,!1))}else c===Vf?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,nd(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===ys||d===Ld||d===Vf&&4&u.type)this.addMatch(u.index,-2);else{const p=nd(u,o,d,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function IT(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function YM(s,o,u,c){return-1===u?function ZM(s,o){return 11&s.type?qh(s,o):4&s.type?$_(s,o):null}(o,s):-2===u?function QM(s,o,u){return u===ys?qh(o,s):u===Vf?$_(o,s):u===Ld?W_(o,s):void 0}(s,o,c):Eo(s,s[nt],u,o)}function $f(s,o,u,c){const d=o[bs].queries[c];if(null===d.matches){const p=s.data,_=u.matches,E=[];for(let D=0;D<_.length;D+=2){const A=_[D];E.push(A<0?null:YM(o,p[A],_[D+1],u.metadata.read))}d.matches=E}return d.matches}function Wu(s,o,u,c){const d=s.queries.getByIndex(u),p=d.matches;if(null!==p){const _=$f(s,o,d,u);for(let E=0;E<p.length;E+=2){const D=p[E];if(D>0)c.push(_[E/2]);else{const A=p[E+1],N=o[-D];for(let j=Or;j<N.length;j++){const Y=N[j];Y[pl]===Y[Gn]&&Wu(Y[nt],Y,A,c)}if(null!==N[la]){const j=N[la];for(let Y=0;Y<j.length;Y++){const te=j[Y];Wu(te[nt],te,A,c)}}}}}return c}function qu(s){const o=Me(),u=nn(),c=Ml();qc(c+1);const d=Y_(u,c);if(s.dirty&&function oy(s){return 4==(4&s[Ut])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const p=d.crossesNgTemplate?Wu(u,o,c,[]):$f(u,o,d,c);s.reset(p,at),s.notifyOnChanges()}return!0}return!1}function DT(s,o,u,c){const d=nn();if(d.firstCreatePass){const p=Ir();(function Z_(s,o,u){null===s.queries&&(s.queries=new zu),s.queries.track(new v0(o,u))})(d,new Hf(o,u,c),p.index),function bT(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function K_(s,o,u){const c=new fm(4==(4&u));(function BR(s,o,u,c){const d=i_(o);d.push(u),s.firstCreatePass&&nE(s).push(c,d.length-1)})(s,o,c,c.destroy),null===o[bs]&&(o[bs]=new jf),o[bs].queries.push(new q_(c))}(d,Me(),u)}function w0(){return function XM(s,o){return s[bs].queries[o].queryList}(Me(),Ml())}function Y_(s,o){return s.queries.getByIndex(o)}function Bd(s){return!!ai(s)}const iv=new bn("Application Initializer");let mm=(()=>{class s{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c}),this.appInits=Yt(iv,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const u=[];for(const d of this.appInits){const p=d();if($a(p))u.push(p);else if(I_(p)){const _=new Promise((E,D)=>{p.subscribe({complete:E,error:D})});u.push(_)}}const c=()=>{this.done=!0,this.resolve()};Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),O0=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const ym=new bn("LocaleId",{providedIn:"root",factory:()=>Yt(ym,Ye.Optional|Ye.SkipSelf)||function lN(){return typeof $localize<"u"&&$localize.locale||Nd}()}),LT=new bn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let UT=(()=>{class s{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new O.X(!1)}add(){this.hasPendingTasks.next(!0);const u=this.taskId++;return this.pendingTasks.add(u),u}remove(u){this.pendingTasks.delete(u),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();class BT{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let dN=(()=>{class s{compileModuleSync(u){return new om(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),p=ku(ai(u).declarations).reduce((_,E)=>{const D=jt(E);return D&&_.push(new Kl(D)),_},[]);return new BT(c,p)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const fN=(()=>Promise.resolve(0))();function wm(s){typeof Zone>"u"?fN.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}function jT(...s){}class is{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ka(!1),this.onMicrotaskEmpty=new Ka(!1),this.onStable=new Ka(!1),this.onError=new Ka(!1),typeof Zone>"u")throw new re(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function L0(){let s=Wt.requestAnimationFrame,o=Wt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function sv(s){const o=()=>{!function Em(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Wt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Im(s),s.isCheckStableRunning=!0,qf(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Im(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,p,_,E)=>{try{return ov(s),u.invokeTask(d,p,_,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),av(s)}},onInvoke:(u,c,d,p,_,E,D)=>{try{return ov(s),u.invoke(d,p,_,E,D)}finally{s.shouldCoalesceRunChangeDetection&&o(),av(s)}},onHasTask:(u,c,d,p)=>{u.hasTask(d,p),c===d&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,Im(s),qf(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,c,d,p)=>(u.handleError(d,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!is.isInAngularZone())throw new re(909,!1)}static assertNotInAngularZone(){if(is.isInAngularZone())throw new re(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+d,o,V0,jT,jT);try{return p.runTask(_,u,c)}finally{p.cancelTask(_)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const V0={};function qf(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Im(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function ov(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function av(s){s._nesting--,qf(s)}class HT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ka,this.onMicrotaskEmpty=new Ka,this.onStable=new Ka,this.onError=new Ka}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}const $T=new bn("",{providedIn:"root",factory:U0});function U0(){const s=Yt(is);let o=!0;const u=new ee.y(d=>{o=s.isStable&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks,s.runOutsideAngular(()=>{d.next(o),d.complete()})}),c=new ee.y(d=>{let p;s.runOutsideAngular(()=>{p=s.onStable.subscribe(()=>{is.assertNotInAngularZone(),wm(()=>{!o&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks&&(o=!0,d.next(!0))})})});const _=s.onUnstable.subscribe(()=>{is.assertInAngularZone(),o&&(o=!1,s.runOutsideAngular(()=>{d.next(!1)}))});return()=>{p.unsubscribe(),_.unsubscribe()}});return(0,ue.T)(u,c.pipe((0,we.B)()))}const Cm=new bn(""),uv=new bn("");let B0,gN=(()=>{class s{constructor(u,c,d){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,B0||(function ss(s){B0=s}(d),d.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{is.assertNotInAngularZone(),wm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())wm(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(kn(is),kn(GT),kn(uv))},s.\u0275prov=tn({token:s,factory:s.\u0275fac}),s})(),GT=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return B0?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Xu=null;const Dm=new bn("AllowMultipleToken"),Gd=new bn("PlatformDestroyListeners"),bm=new bn("appBootstrapListener");class yN{constructor(o,u){this.name=o,this.token=u}}function cv(s,o,u=[]){const c=`Platform: ${o}`,d=new bn(c);return(p=[])=>{let _=zd();if(!_||_.injector.get(Dm,!1)){const E=[...u,...p,{provide:d,useValue:!0}];s?s(E):function j0(s){if(Xu&&!Xu.get(Dm,!1))throw new re(400,!1);(function WT(){!function ya(s){xc=s}(()=>{throw new re(600,!1)})})(),Xu=s;const o=s.get(hv);(function qT(s){s.get(eD,null)?.forEach(u=>u())})(s)}(function dv(s=[],o){return Ua.create({name:o,providers:[{provide:xw,useValue:"platform"},{provide:Gd,useValue:new Set([()=>Xu=null])},...s]})}(E,c))}return function Kf(s){const o=zd();if(!o)throw new re(401,!1);return o}()}}function zd(){return Xu?.get(hv)??null}let hv=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const d=function G0(s="zone.js",o){return"noop"===s?new HT:"zone.js"===s?new is(o):s}(c?.ngZone,function $0(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:s?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:s?.runCoalescing??!1}}({eventCoalescing:c?.ngZoneEventCoalescing,runCoalescing:c?.ngZoneRunCoalescing}));return d.run(()=>{const p=function a0(s,o,u){return new uc(s,o,u)}(u.moduleType,this.injector,function Tm(s){return[{provide:is,useFactory:s},{provide:cg,multi:!0,useFactory:()=>{const o=Yt(vN,{optional:!0});return()=>o.initialize()}},{provide:KT,useFactory:z0},{provide:$T,useFactory:U0}]}(()=>d)),_=p.injector.get(Tr,null);return d.runOutsideAngular(()=>{const E=d.onError.subscribe({next:D=>{_.handleError(D)}});p.onDestroy(()=>{pv(this._modules,p),E.unsubscribe()})}),function fv(s,o,u){try{const c=u();return $a(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(_,d,()=>{const E=p.injector.get(mm);return E.runInitializers(),E.donePromise.then(()=>(function tr(s){rt(s,"Expected localeId to be defined"),"string"==typeof s&&(HE=s.toLowerCase().replace(/_/g,"-"))}(p.injector.get(ym,Nd)||Nd),this._moduleDoBootstrap(p),p))})})}bootstrapModule(u,c=[]){const d=Ju({},c);return function zT(s,o,u){const c=new om(u);return Promise.resolve(c)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(u){const c=u.injector.get(Wd);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new re(-403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new re(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(Gd,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(kn(Ua))},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Ju(s,o){return Array.isArray(o)?o.reduce(Ju,s):{...s,...o}}let Wd=(()=>{class s{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Yt(KT),this.zoneIsStable=Yt($T),this.componentTypes=[],this.components=[],this.isStable=Yt(UT).hasPendingTasks.pipe((0,Ne.z)(u=>u?(0,_e.of)(!1):this.zoneIsStable),(0,Ee.x)(),(0,we.B)()),this._injector=Yt(pd)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,c){const d=u instanceof By;if(!this._injector.get(mm).done)throw!d&&Ws(u),new re(405,!1);let _;_=d?u:this._injector.get(gg).resolveComponentFactory(u),this.componentTypes.push(_.componentType);const E=function mN(s){return s.isBoundToModule}(_)?void 0:this._injector.get(js),A=_.create(Ua.NULL,[],c||_.selector,E),N=A.location.nativeElement,j=A.injector.get(Cm,null);return j?.registerApplication(N),A.onDestroy(()=>{this.detachView(A.hostView),pv(this.components,A),j?.unregisterApplication(N)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new re(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this.internalErrorHandler(u)}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;pv(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const c=this._injector.get(bm,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>pv(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new re(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function pv(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}const KT=new bn("",{providedIn:"root",factory:()=>Yt(Tr).handleError.bind(void 0)});function z0(){const s=Yt(is),o=Yt(Tr);return u=>s.runOutsideAngular(()=>o.handleError(u))}let vN=(()=>{class s{constructor(){this.zone=Yt(is),this.applicationRef=Yt(Wd)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function YT(){return!1}function Zf(){}let JT=(()=>{class s{}return s.__NG_ELEMENT_ID__=eS,s})();function eS(s){return function wN(s,o,u){if(ds(s)&&!u){const c=Kr(s.index,o);return new af(c,c)}return 47&s.type?new af(o[Fn],o):null}(Ir(),Me(),16==(16&s))}class _v{constructor(){}supports(o){return Og(o)}create(o){return new Z0(o)}}const K0=(s,o)=>o;class Z0{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||K0}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,p=null;for(;u||c;){const _=!c||u&&u.currentIndex<wv(c,d,p)?u:c,E=wv(_,d,p),D=_.currentIndex;if(_===c)d--,c=c._nextRemoved;else if(u=u._next,null==_.previousIndex)d++;else{p||(p=[]);const A=E-d,N=D-d;if(A!=N){for(let Y=0;Y<A;Y++){const te=Y<p.length?p[Y]:p[Y]=0,De=te+Y;N<=De&&De<A&&(p[Y]=te+1)}p[_.previousIndex]=N-A}}E!==D&&o(_,E,D)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Og(o))throw new re(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,_,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],_=this._trackByFn(E,p),null!==u&&Object.is(u.trackById,_)?(c&&(u=this._verifyReinsertion(u,p,_,E)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,_,E),c=!0),u=u._next}else d=0,function rM(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Symbol.iterator]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,E=>{_=this._trackByFn(d,E),null!==u&&Object.is(u.trackById,_)?(c&&(u=this._verifyReinsertion(u,E,_,d)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,_,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,d)):o=this._addAfter(new IN(u,c),p,d),o}_verifyReinsertion(o,u,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new vv),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new vv),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class IN{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class CN{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class vv{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new CN,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function wv(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class oS{constructor(){}supports(o){return o instanceof Map||dE(o)}create(){return new aS}}class aS{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||dE(o)))throw new re(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const p=d._prev,_=d._next;return p&&(p._next=_),_&&(_._prev=p),d._next=null,d._prev=null,d}const c=new DN(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class DN{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Y0(){return new Ev([new _v])}let Ev=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Y0()),deps:[[s,new Os,new Ys]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new re(901,!1)}}return s.\u0275prov=tn({token:s,providedIn:"root",factory:Y0}),s})();function Q0(){return new X0([new oS])}let X0=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Q0()),deps:[[s,new Os,new Ys]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(c)return c;throw new re(901,!1)}}return s.\u0275prov=tn({token:s,providedIn:"root",factory:Q0}),s})();const J0=cv(null,"core",[]);let eI=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(kn(Wd))},s.\u0275mod=ru({type:s}),s.\u0275inj=hr({}),s})();function rl(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function ON(s){const o=jt(s);if(!o)return null;const u=new Kl(o);return{get selector(){return u.selector},get type(){return u.componentType},get inputs(){return u.inputs},get outputs(){return u.outputs},get ngContentSelectors(){return u.ngContentSelectors},get isStandalone(){return o.standalone}}}},3942:(mt,be,U)=>{U.d(be,{Z:()=>Xe});var f=U(2090),$=U(4859),O=U(6881),ee=U(1877);class ue{constructor(Ze,Oe){this._delegate=Ze,this.firebase=Oe,(0,O._addComponent)(Ze,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=Ze.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ze){this._delegate.automaticDataCollectionEnabled=Ze}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ze=>{this._delegate.checkDestroyed(),Ze()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(Ze,Oe=O._DEFAULT_ENTRY_NAME){var Ct;this._delegate.checkDestroyed();const dt=this._delegate.container.getProvider(Ze);return!dt.isInitialized()&&"EXPLICIT"===(null===(Ct=dt.getComponent())||void 0===Ct?void 0:Ct.instantiationMode)&&dt.initialize(),dt.getImmediate({identifier:Oe})}_removeServiceInstance(Ze,Oe=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ze).clearInstance(Oe)}_addComponent(Ze){(0,O._addComponent)(this._delegate,Ze)}_addOrOverwriteComponent(Ze){(0,O._addOrOverwriteComponent)(this._delegate,Ze)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const we=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function Ee(){const xe=function Ne(xe){const Ze={},Oe={__esModule:!0,initializeApp:function re(Pe,ne={}){const tt=O.initializeApp(Pe,ne);if((0,f.r3)(Ze,tt.name))return Ze[tt.name];const $e=new xe(tt,Oe);return Ze[tt.name]=$e,$e},app:dt,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function ae(Pe){const ne=Pe.name,tt=ne.replace("-compat","");if(O._registerComponent(Pe)&&"PUBLIC"===Pe.type){const $e=(en=dt())=>{if("function"!=typeof en[tt])throw we.create("invalid-app-argument",{appName:ne});return en[tt]()};void 0!==Pe.serviceProps&&(0,f.ZB)($e,Pe.serviceProps),Oe[tt]=$e,xe.prototype[tt]=function(...en){return this._getService.bind(this,ne).apply(this,Pe.multipleInstances?en:[])}}return"PUBLIC"===Pe.type?Oe[tt]:null},removeApp:function Ct(Pe){delete Ze[Pe]},useAsService:function me(Pe,ne){return"serverAuth"===ne?null:ne},modularAPIs:O}};function dt(Pe){if(!(0,f.r3)(Ze,Pe=Pe||O._DEFAULT_ENTRY_NAME))throw we.create("no-app",{appName:Pe});return Ze[Pe]}return Oe.default=Oe,Object.defineProperty(Oe,"apps",{get:function Ce(){return Object.keys(Ze).map(Pe=>Ze[Pe])}}),dt.App=xe,Oe}(ue);return xe.INTERNAL=Object.assign(Object.assign({},xe.INTERNAL),{createFirebaseNamespace:Ee,extendNamespace:function Ze(Oe){(0,f.ZB)(xe,Oe)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),xe}(),q=new ee.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const xe=self.firebase.SDK_VERSION;xe&&xe.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Xe=z;!function Re(xe){(0,O.registerVersion)("@firebase/app-compat","0.2.11",xe)}()},6881:(mt,be,U)=>{U.r(be),U.d(be,{FirebaseError:()=>ee.ZR,SDK_VERSION:()=>Wi,_DEFAULT_ENTRY_NAME:()=>Ye,_addComponent:()=>fr,_addOrOverwriteComponent:()=>_i,_apps:()=>wt,_clearComponents:()=>gn,_components:()=>Zt,_getProvider:()=>ir,_registerComponent:()=>Wt,_removeServiceInstance:()=>us,deleteApp:()=>Tn,getApp:()=>$r,getApps:()=>Zn,initializeApp:()=>Ds,onLog:()=>pr,registerVersion:()=>On,setLogLevel:()=>kn});var f=U(5861),$=U(4859),O=U(1877),ee=U(2090);const ue=(ge,oe)=>oe.some(Le=>ge instanceof Le);let _e,we;const z=new WeakMap,q=new WeakMap,ie=new WeakMap,Ve=new WeakMap,Re=new WeakMap;let Ze={get(ge,oe,Le){if(ge instanceof IDBTransaction){if("done"===oe)return q.get(ge);if("objectStoreNames"===oe)return ge.objectStoreNames||ie.get(ge);if("store"===oe)return Le.objectStoreNames[1]?void 0:Le.objectStore(Le.objectStoreNames[0])}return re(ge[oe])},set:(ge,oe,Le)=>(ge[oe]=Le,!0),has:(ge,oe)=>ge instanceof IDBTransaction&&("done"===oe||"store"===oe)||oe in ge};function dt(ge){return"function"==typeof ge?function Ct(ge){return ge!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ee(){return we||(we=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ge)?function(...oe){return ge.apply(Ce(this),oe),re(z.get(this))}:function(...oe){return re(ge.apply(Ce(this),oe))}:function(oe,...Le){const gt=ge.call(Ce(this),oe,...Le);return ie.set(gt,oe.sort?oe.sort():[oe]),re(gt)}}(ge):(ge instanceof IDBTransaction&&function xe(ge){if(q.has(ge))return;const oe=new Promise((Le,gt)=>{const xt=()=>{ge.removeEventListener("complete",Ht),ge.removeEventListener("error",on),ge.removeEventListener("abort",on)},Ht=()=>{Le(),xt()},on=()=>{gt(ge.error||new DOMException("AbortError","AbortError")),xt()};ge.addEventListener("complete",Ht),ge.addEventListener("error",on),ge.addEventListener("abort",on)});q.set(ge,oe)}(ge),ue(ge,function Ne(){return _e||(_e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ge,Ze):ge)}function re(ge){if(ge instanceof IDBRequest)return function Xe(ge){const oe=new Promise((Le,gt)=>{const xt=()=>{ge.removeEventListener("success",Ht),ge.removeEventListener("error",on)},Ht=()=>{Le(re(ge.result)),xt()},on=()=>{gt(ge.error),xt()};ge.addEventListener("success",Ht),ge.addEventListener("error",on)});return oe.then(Le=>{Le instanceof IDBCursor&&z.set(Le,ge)}).catch(()=>{}),Re.set(oe,ge),oe}(ge);if(Ve.has(ge))return Ve.get(ge);const oe=dt(ge);return oe!==ge&&(Ve.set(ge,oe),Re.set(oe,ge)),oe}const Ce=ge=>Re.get(ge),Pe=["get","getKey","getAll","getAllKeys","count"],ne=["put","add","delete","clear"],tt=new Map;function $e(ge,oe){if(!(ge instanceof IDBDatabase)||oe in ge||"string"!=typeof oe)return;if(tt.get(oe))return tt.get(oe);const Le=oe.replace(/FromIndex$/,""),gt=oe!==Le,xt=ne.includes(Le);if(!(Le in(gt?IDBIndex:IDBObjectStore).prototype)||!xt&&!Pe.includes(Le))return;const Ht=function(){var on=(0,f.Z)(function*(xr,...Yn){const co=this.transaction(xr,xt?"readwrite":"readonly");let ko=co.store;return gt&&(ko=ko.index(Yn.shift())),(yield Promise.all([ko[Le](...Yn),xt&&co.done]))[0]});return function(Yn){return on.apply(this,arguments)}}();return tt.set(oe,Ht),Ht}!function Oe(ge){Ze=ge(Ze)}(ge=>({...ge,get:(oe,Le,gt)=>$e(oe,Le)||ge.get(oe,Le,gt),has:(oe,Le)=>!!$e(oe,Le)||ge.has(oe,Le)}));class en{constructor(oe){this.container=oe}getPlatformInfoString(){return this.container.getProviders().map(Le=>{if(function wr(ge){const oe=ge.getComponent();return"VERSION"===oe?.type}(Le)){const gt=Le.getImmediate();return`${gt.library}/${gt.version}`}return null}).filter(Le=>Le).join(" ")}}const ii="@firebase/app",de=new O.Yd("@firebase/app"),Ye="[DEFAULT]",ht={[ii]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},wt=new Map,Zt=new Map;function fr(ge,oe){try{ge.container.addComponent(oe)}catch(Le){de.debug(`Component ${oe.name} failed to register with FirebaseApp ${ge.name}`,Le)}}function _i(ge,oe){ge.container.addOrOverwriteComponent(oe)}function Wt(ge){const oe=ge.name;if(Zt.has(oe))return de.debug(`There were multiple attempts to register component ${oe}.`),!1;Zt.set(oe,ge);for(const Le of wt.values())fr(Le,ge);return!0}function ir(ge,oe){const Le=ge.container.getProvider("heartbeat").getImmediate({optional:!0});return Le&&Le.triggerHeartbeat(),ge.container.getProvider(oe)}function us(ge,oe,Le=Ye){ir(ge,oe).clearInstance(Le)}function gn(){Zt.clear()}const Ft=new ee.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Pn{constructor(oe,Le,gt){this._isDeleted=!1,this._options=Object.assign({},oe),this._config=Object.assign({},Le),this._name=Le.name,this._automaticDataCollectionEnabled=Le.automaticDataCollectionEnabled,this._container=gt,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(oe){this.checkDestroyed(),this._automaticDataCollectionEnabled=oe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(oe){this._isDeleted=oe}checkDestroyed(){if(this.isDeleted)throw Ft.create("app-deleted",{appName:this._name})}}const Wi="9.22.1";function Ds(ge,oe={}){let Le=ge;"object"!=typeof oe&&(oe={name:oe});const gt=Object.assign({name:Ye,automaticDataCollectionEnabled:!1},oe),xt=gt.name;if("string"!=typeof xt||!xt)throw Ft.create("bad-app-name",{appName:String(xt)});if(Le||(Le=(0,ee.aH)()),!Le)throw Ft.create("no-options");const Ht=wt.get(xt);if(Ht){if((0,ee.vZ)(Le,Ht.options)&&(0,ee.vZ)(gt,Ht.config))return Ht;throw Ft.create("duplicate-app",{appName:xt})}const on=new $.H0(xt);for(const Yn of Zt.values())on.addComponent(Yn);const xr=new Pn(Le,gt,on);return wt.set(xt,xr),xr}function $r(ge=Ye){const oe=wt.get(ge);if(!oe&&ge===Ye&&(0,ee.aH)())return Ds();if(!oe)throw Ft.create("no-app",{appName:ge});return oe}function Zn(){return Array.from(wt.values())}function Tn(ge){return sr.apply(this,arguments)}function sr(){return(sr=(0,f.Z)(function*(ge){const oe=ge.name;wt.has(oe)&&(wt.delete(oe),yield Promise.all(ge.container.getProviders().map(Le=>Le.delete())),ge.isDeleted=!0)})).apply(this,arguments)}function On(ge,oe,Le){var gt;let xt=null!==(gt=ht[ge])&&void 0!==gt?gt:ge;Le&&(xt+=`-${Le}`);const Ht=xt.match(/\s|\//),on=oe.match(/\s|\//);if(Ht||on){const xr=[`Unable to register library "${xt}" with version "${oe}":`];return Ht&&xr.push(`library name "${xt}" contains illegal characters (whitespace or "/")`),Ht&&on&&xr.push("and"),on&&xr.push(`version name "${oe}" contains illegal characters (whitespace or "/")`),void de.warn(xr.join(" "))}Wt(new $.wA(`${xt}-version`,()=>({library:xt,version:oe}),"VERSION"))}function pr(ge,oe){if(null!==ge&&"function"!=typeof ge)throw Ft.create("invalid-log-argument");(0,O.Am)(ge,oe)}function kn(ge){(0,O.Ub)(ge)}const oi="firebase-heartbeat-database",Yt=1,W="firebase-heartbeat-store";let G=null;function F(){return G||(G=function ae(ge,oe,{blocked:Le,upgrade:gt,blocking:xt,terminated:Ht}={}){const on=indexedDB.open(ge,oe),xr=re(on);return gt&&on.addEventListener("upgradeneeded",Yn=>{gt(re(on.result),Yn.oldVersion,Yn.newVersion,re(on.transaction),Yn)}),Le&&on.addEventListener("blocked",Yn=>Le(Yn.oldVersion,Yn.newVersion,Yn)),xr.then(Yn=>{Ht&&Yn.addEventListener("close",()=>Ht()),xt&&Yn.addEventListener("versionchange",co=>xt(co.oldVersion,co.newVersion,co))}).catch(()=>{}),xr}(oi,Yt,{upgrade:(ge,oe)=>{0===oe&&ge.createObjectStore(W)}}).catch(ge=>{throw Ft.create("idb-open",{originalErrorMessage:ge.message})})),G}function P(){return(P=(0,f.Z)(function*(ge){try{return yield(yield F()).transaction(W).objectStore(W).get(qe(ge))}catch(oe){if(oe instanceof ee.ZR)de.warn(oe.message);else{const Le=Ft.create("idb-get",{originalErrorMessage:oe?.message});de.warn(Le.message)}}})).apply(this,arguments)}function J(ge,oe){return ve.apply(this,arguments)}function ve(){return(ve=(0,f.Z)(function*(ge,oe){try{const gt=(yield F()).transaction(W,"readwrite");yield gt.objectStore(W).put(oe,qe(ge)),yield gt.done}catch(Le){if(Le instanceof ee.ZR)de.warn(Le.message);else{const gt=Ft.create("idb-set",{originalErrorMessage:Le?.message});de.warn(gt.message)}}})).apply(this,arguments)}function qe(ge){return`${ge.name}!${ge.options.appId}`}class ft{constructor(oe){this.container=oe,this._heartbeatsCache=null;const Le=this.container.getProvider("app").getImmediate();this._storage=new Bt(Le),this._heartbeatsCachePromise=this._storage.read().then(gt=>(this._heartbeatsCache=gt,gt))}triggerHeartbeat(){var oe=this;return(0,f.Z)(function*(){const gt=oe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),xt=Mt();if(null===oe._heartbeatsCache&&(oe._heartbeatsCache=yield oe._heartbeatsCachePromise),oe._heartbeatsCache.lastSentHeartbeatDate!==xt&&!oe._heartbeatsCache.heartbeats.some(Ht=>Ht.date===xt))return oe._heartbeatsCache.heartbeats.push({date:xt,agent:gt}),oe._heartbeatsCache.heartbeats=oe._heartbeatsCache.heartbeats.filter(Ht=>{const on=new Date(Ht.date).valueOf();return Date.now()-on<=2592e6}),oe._storage.overwrite(oe._heartbeatsCache)})()}getHeartbeatsHeader(){var oe=this;return(0,f.Z)(function*(){if(null===oe._heartbeatsCache&&(yield oe._heartbeatsCachePromise),null===oe._heartbeatsCache||0===oe._heartbeatsCache.heartbeats.length)return"";const Le=Mt(),{heartbeatsToSend:gt,unsentEntries:xt}=function Cn(ge,oe=1024){const Le=[];let gt=ge.slice();for(const xt of ge){const Ht=Le.find(on=>on.agent===xt.agent);if(Ht){if(Ht.dates.push(xt.date),Nr(Le)>oe){Ht.dates.pop();break}}else if(Le.push({agent:xt.agent,dates:[xt.date]}),Nr(Le)>oe){Le.pop();break}gt=gt.slice(1)}return{heartbeatsToSend:Le,unsentEntries:gt}}(oe._heartbeatsCache.heartbeats),Ht=(0,ee.L)(JSON.stringify({version:2,heartbeats:gt}));return oe._heartbeatsCache.lastSentHeartbeatDate=Le,xt.length>0?(oe._heartbeatsCache.heartbeats=xt,yield oe._storage.overwrite(oe._heartbeatsCache)):(oe._heartbeatsCache.heartbeats=[],oe._storage.overwrite(oe._heartbeatsCache)),Ht})()}}function Mt(){return(new Date).toISOString().substring(0,10)}class Bt{constructor(oe){this.app=oe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,ee.hl)()&&(0,ee.eu)().then(()=>!0).catch(()=>!1)})()}read(){var oe=this;return(0,f.Z)(function*(){return(yield oe._canUseIndexedDBPromise)&&(yield function V(ge){return P.apply(this,arguments)}(oe.app))||{heartbeats:[]}})()}overwrite(oe){var Le=this;return(0,f.Z)(function*(){var gt;if(yield Le._canUseIndexedDBPromise){const Ht=yield Le.read();return J(Le.app,{lastSentHeartbeatDate:null!==(gt=oe.lastSentHeartbeatDate)&&void 0!==gt?gt:Ht.lastSentHeartbeatDate,heartbeats:oe.heartbeats})}})()}add(oe){var Le=this;return(0,f.Z)(function*(){var gt;if(yield Le._canUseIndexedDBPromise){const Ht=yield Le.read();return J(Le.app,{lastSentHeartbeatDate:null!==(gt=oe.lastSentHeartbeatDate)&&void 0!==gt?gt:Ht.lastSentHeartbeatDate,heartbeats:[...Ht.heartbeats,...oe.heartbeats]})}})()}}function Nr(ge){return(0,ee.L)(JSON.stringify({version:2,heartbeats:ge})).length}!function Gr(ge){Wt(new $.wA("platform-logger",oe=>new en(oe),"PRIVATE")),Wt(new $.wA("heartbeat",oe=>new ft(oe),"PRIVATE")),On(ii,"0.9.11",ge),On(ii,"0.9.11","esm2017"),On("fire-js","")}("")},4859:(mt,be,U)=>{U.d(be,{H0:()=>Ne,wA:()=>O,zt:()=>ue});var f=U(5861),$=U(2090);class O{constructor(z,q,ie){this.name=z,this.instanceFactory=q,this.type=ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const ee="[DEFAULT]";class ue{constructor(z,q){this.name=z,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const q=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(q)){const ie=new $.BH;if(this.instancesDeferred.set(q,ie),this.isInitialized(q)||this.shouldAutoInitialize())try{const Ve=this.getOrInitializeService({instanceIdentifier:q});Ve&&ie.resolve(Ve)}catch{}}return this.instancesDeferred.get(q).promise}getImmediate(z){var q;const ie=this.normalizeInstanceIdentifier(z?.identifier),Ve=null!==(q=z?.optional)&&void 0!==q&&q;if(!this.isInitialized(ie)&&!this.shouldAutoInitialize()){if(Ve)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ie})}catch(Re){if(Ve)return null;throw Re}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function we(Ee){return"EAGER"===Ee.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:ee})}catch{}for(const[q,ie]of this.instancesDeferred.entries()){const Ve=this.normalizeInstanceIdentifier(q);try{const Re=this.getOrInitializeService({instanceIdentifier:Ve});ie.resolve(Re)}catch{}}}}clearInstance(z=ee){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,f.Z)(function*(){const q=Array.from(z.instances.values());yield Promise.all([...q.filter(ie=>"INTERNAL"in ie).map(ie=>ie.INTERNAL.delete()),...q.filter(ie=>"_delete"in ie).map(ie=>ie._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=ee){return this.instances.has(z)}getOptions(z=ee){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:q={}}=z,ie=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(ie))throw Error(`${this.name}(${ie}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ve=this.getOrInitializeService({instanceIdentifier:ie,options:q});for(const[Re,Xe]of this.instancesDeferred.entries())ie===this.normalizeInstanceIdentifier(Re)&&Xe.resolve(Ve);return Ve}onInit(z,q){var ie;const Ve=this.normalizeInstanceIdentifier(q),Re=null!==(ie=this.onInitCallbacks.get(Ve))&&void 0!==ie?ie:new Set;Re.add(z),this.onInitCallbacks.set(Ve,Re);const Xe=this.instances.get(Ve);return Xe&&z(Xe,Ve),()=>{Re.delete(z)}}invokeOnInitCallbacks(z,q){const ie=this.onInitCallbacks.get(q);if(ie)for(const Ve of ie)try{Ve(z,q)}catch{}}getOrInitializeService({instanceIdentifier:z,options:q={}}){let ie=this.instances.get(z);if(!ie&&this.component&&(ie=this.component.instanceFactory(this.container,{instanceIdentifier:(Ee=z,Ee===ee?void 0:Ee),options:q}),this.instances.set(z,ie),this.instancesOptions.set(z,q),this.invokeOnInitCallbacks(ie,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,ie)}catch{}var Ee;return ie||null}normalizeInstanceIdentifier(z=ee){return this.component?this.component.multipleInstances?z:ee:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ne{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const q=this.getProvider(z.name);if(q.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);q.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const q=new ue(z,this);return this.providers.set(z,q),q}getProviders(){return Array.from(this.providers.values())}}},1877:(mt,be,U)=>{U.d(be,{Am:()=>Ee,Ub:()=>Ne,Yd:()=>we,in:()=>$});const f=[];var $=(()=>(($=$||{})[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",$))();const O={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},ee=$.INFO,ue={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},_e=(z,q,...ie)=>{if(q<z.logLevel)return;const Ve=(new Date).toISOString(),Re=ue[q];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[Re](`[${Ve}]  ${z.name}:`,...ie)};class we{constructor(q){this.name=q,this._logLevel=ee,this._logHandler=_e,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in $))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?O[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...q),this._logHandler(this,$.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...q),this._logHandler(this,$.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,$.INFO,...q),this._logHandler(this,$.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,$.WARN,...q),this._logHandler(this,$.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...q),this._logHandler(this,$.ERROR,...q)}}function Ne(z){f.forEach(q=>{q.setLogLevel(z)})}function Ee(z,q){for(const ie of f){let Ve=null;q&&q.level&&(Ve=O[q.level]),ie.userLogHandler=null===z?null:(Re,Xe,...xe)=>{const Ze=xe.map(Oe=>{if(null==Oe)return null;if("string"==typeof Oe)return Oe;if("number"==typeof Oe||"boolean"==typeof Oe)return Oe.toString();if(Oe instanceof Error)return Oe.message;try{return JSON.stringify(Oe)}catch{return null}}).filter(Oe=>Oe).join(" ");Xe>=(Ve??Re.logLevel)&&z({level:$[Xe].toLowerCase(),message:Ze,args:xe,type:Re.name})}}}},259:(mt,be,U)=>{U.d(be,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=U(6881);(0,f.registerVersion)("firebase","9.22.1","app")},9260:(mt,be,U)=>{U.d(be,{Z:()=>f.Z});var f=U(3942);f.Z.registerVersion("firebase","9.22.1","app-compat")},9568:(mt,be,U)=>{U.r(be);var f=U(5861),$=U(3942),O=U(1389),ee=U(2090),we=(U(6881),U(1877),U(4859));function Ne(){return window}function q(){return q=(0,f.Z)(function*(F,V,P){var J;const{BuildInfo:ve}=Ne();(0,O.as)(V.sessionId,"AuthEvent did not contain a session ID");const qe=yield function Oe(F){return Ct.apply(this,arguments)}(V.sessionId),Et={};return(0,O.at)()?Et.ibi=ve.packageName:(0,O.au)()?Et.apn=ve.packageName:(0,O.av)(F,"operation-not-supported-in-this-environment"),ve.displayName&&(Et.appDisplayName=ve.displayName),Et.sessionId=qe,(0,O.aw)(F,P,V.type,void 0,null!==(J=V.eventId)&&void 0!==J?J:void 0,Et)}),q.apply(this,arguments)}function Ve(){return(Ve=(0,f.Z)(function*(F){const{BuildInfo:V}=Ne(),P={};(0,O.at)()?P.iosBundleId=V.packageName:(0,O.au)()?P.androidPackageName=V.packageName:(0,O.av)(F,"operation-not-supported-in-this-environment"),yield(0,O.ax)(F,P)})).apply(this,arguments)}function xe(){return(xe=(0,f.Z)(function*(F,V,P){const{cordova:J}=Ne();let ve=()=>{};try{yield new Promise((qe,Et)=>{let It=null;function ft(){var Bt;qe();const Nr=null===(Bt=J.plugins.browsertab)||void 0===Bt?void 0:Bt.close;"function"==typeof Nr&&Nr(),"function"==typeof P?.close&&P.close()}function Mt(){It||(It=window.setTimeout(()=>{Et((0,O.az)(F,"redirect-cancelled-by-user"))},2e3))}function Cn(){"visible"===document?.visibilityState&&Mt()}V.addPassiveListener(ft),document.addEventListener("resume",Mt,!1),(0,O.au)()&&document.addEventListener("visibilitychange",Cn,!1),ve=()=>{V.removePassiveListener(ft),document.removeEventListener("resume",Mt,!1),document.removeEventListener("visibilitychange",Cn,!1),It&&window.clearTimeout(It)}})}finally{ve()}})).apply(this,arguments)}function Ct(){return(Ct=(0,f.Z)(function*(F){const V=function dt(F){if((0,O.as)(/[0-9a-zA-Z]+/.test(F),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(F);const V=new ArrayBuffer(F.length),P=new Uint8Array(V);for(let J=0;J<F.length;J++)P[J]=F.charCodeAt(J);return P}(F),P=yield crypto.subtle.digest("SHA-256",V);return Array.from(new Uint8Array(P)).map(ve=>ve.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Ce extends O.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(V=>{this.resolveInialized=V})}addPassiveListener(V){this.passiveListeners.add(V)}removePassiveListener(V){this.passiveListeners.delete(V)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(V){return this.resolveInialized(),this.passiveListeners.forEach(P=>P(V)),super.onEvent(V)}initialized(){var V=this;return(0,f.Z)(function*(){yield V.initPromise})()}}function Pe(F){return ne.apply(this,arguments)}function ne(){return(ne=(0,f.Z)(function*(F){const V=yield en()._get(wr(F));return V&&(yield en()._remove(wr(F))),V})).apply(this,arguments)}function $e(){const F=[];for(let P=0;P<20;P++){const J=Math.floor(62*Math.random());F.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(J))}return F.join("")}function en(){return(0,O.aC)(O.b)}function wr(F){return(0,O.aD)("authEvent",F.config.apiKey,F.name)}function de(F){if(!F?.includes("?"))return{};const[V,...P]=F.split("?");return(0,ee.zd)(P.join("?"))}const ke=class Te{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aE,this._overrideRedirectResult=O.aF}_initialize(V){var P=this;return(0,f.Z)(function*(){const J=V._key();let ve=P.eventManagers.get(J);return ve||(ve=new Ce(V),P.eventManagers.set(J,ve),P.attachCallbackListeners(V,ve)),ve})()}_openPopup(V){(0,O.av)(V,"operation-not-supported-in-this-environment")}_openRedirect(V,P,J,ve){var qe=this;return(0,f.Z)(function*(){!function Ze(F){var V,P,J,ve,qe,Et,It,ft,Mt,Cn;const Bt=Ne();(0,O.aA)("function"==typeof(null===(V=Bt?.universalLinks)||void 0===V?void 0:V.subscribe),F,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.aA)(typeof(null===(P=Bt?.BuildInfo)||void 0===P?void 0:P.packageName)<"u",F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.aA)("function"==typeof(null===(qe=null===(ve=null===(J=Bt?.cordova)||void 0===J?void 0:J.plugins)||void 0===ve?void 0:ve.browsertab)||void 0===qe?void 0:qe.openUrl),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aA)("function"==typeof(null===(ft=null===(It=null===(Et=Bt?.cordova)||void 0===Et?void 0:Et.plugins)||void 0===It?void 0:It.browsertab)||void 0===ft?void 0:ft.isAvailable),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aA)("function"==typeof(null===(Cn=null===(Mt=Bt?.cordova)||void 0===Mt?void 0:Mt.InAppBrowser)||void 0===Cn?void 0:Cn.open),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(V);const Et=yield qe._initialize(V);yield Et.initialized(),Et.resetRedirect(),(0,O.aG)(),yield qe._originValidation(V);const It=function ae(F,V,P=null){return{type:V,eventId:P,urlResponse:null,sessionId:$e(),postBody:null,tenantId:F.tenantId,error:(0,O.az)(F,"no-auth-event")}}(V,J,ve);yield function me(F,V){return en()._set(wr(F),V)}(V,It);const ft=yield function z(F,V,P){return q.apply(this,arguments)}(V,It,P),Mt=yield function Re(F){const{cordova:V}=Ne();return new Promise(P=>{V.plugins.browsertab.isAvailable(J=>{let ve=null;J?V.plugins.browsertab.openUrl(F):ve=V.InAppBrowser.open(F,(0,O.ay)()?"_blank":"_system","location=yes"),P(ve)})})}(ft);return function Xe(F,V,P){return xe.apply(this,arguments)}(V,Et,Mt)})()}_isIframeWebStorageSupported(V,P){throw new Error("Method not implemented.")}_originValidation(V){const P=V._key();return this.originValidationPromises[P]||(this.originValidationPromises[P]=function ie(F){return Ve.apply(this,arguments)}(V)),this.originValidationPromises[P]}attachCallbackListeners(V,P){const{universalLinks:J,handleOpenURL:ve,BuildInfo:qe}=Ne(),Et=setTimeout((0,f.Z)(function*(){yield Pe(V),P.onEvent(Ge())}),500),It=function(){var Cn=(0,f.Z)(function*(Bt){clearTimeout(Et);const Nr=yield Pe(V);let Gr=null;Nr&&Bt?.url&&(Gr=function tt(F,V){var P,J;const ve=function zs(F){const V=de(F),P=V.link?decodeURIComponent(V.link):void 0,J=de(P).link,ve=V.deep_link_id?decodeURIComponent(V.deep_link_id):void 0;return de(ve).link||ve||J||P||F}(V);if(ve.includes("/__/auth/callback")){const qe=de(ve),Et=qe.firebaseError?function ii(F){try{return JSON.parse(F)}catch{return null}}(decodeURIComponent(qe.firebaseError)):null,It=null===(J=null===(P=Et?.code)||void 0===P?void 0:P.split("auth/"))||void 0===J?void 0:J[1],ft=It?(0,O.az)(It):null;return ft?{type:F.type,eventId:F.eventId,tenantId:F.tenantId,error:ft,urlResponse:null,sessionId:null,postBody:null}:{type:F.type,eventId:F.eventId,tenantId:F.tenantId,sessionId:F.sessionId,urlResponse:ve,postBody:null}}return null}(Nr,Bt.url)),P.onEvent(Gr||Ge())});return function(Nr){return Cn.apply(this,arguments)}}();typeof J<"u"&&"function"==typeof J.subscribe&&J.subscribe(null,It);const ft=ve,Mt=`${qe.packageName.toLowerCase()}://`;Ne().handleOpenURL=function(){var Cn=(0,f.Z)(function*(Bt){if(Bt.toLowerCase().startsWith(Mt)&&It({url:Bt}),"function"==typeof ft)try{ft(Bt)}catch(Nr){console.error(Nr)}});return function(Bt){return Cn.apply(this,arguments)}}()}};function Ge(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.az)("no-auth-event")}}function rt(){var F;return(null===(F=self?.location)||void 0===F?void 0:F.protocol)||null}function sn(F=(0,ee.z$)()){return!("file:"!==rt()&&"ionic:"!==rt()&&"capacitor:"!==rt()||!F.toLowerCase().match(/iphone|ipad|ipod|android/))}function hr(){try{const F=self.localStorage,V=O.aL();if(F)return F.setItem(V,"1"),F.removeItem(V),!function Er(F=(0,ee.z$)()){return function $n(){return(0,ee.w1)()&&11===document?.documentMode}()||function tn(F=(0,ee.z$)()){return/Edge\/\d+/.test(F)}(F)}()||(0,ee.hl)()}catch{return rr()&&(0,ee.hl)()}return!1}function rr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function qn(){return(function yt(){return"http:"===rt()||"https:"===rt()}()||(0,ee.ru)()||sn())&&!function vn(){return(0,ee.b$)()||(0,ee.UG)()}()&&hr()&&!rr()}function Ni(){return sn()&&typeof document<"u"}function zi(){return(zi=(0,f.Z)(function*(){return!!Ni()&&new Promise(F=>{const V=setTimeout(()=>{F(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(V),F(!0)})})})).apply(this,arguments)}const Kn={LOCAL:"local",NONE:"none",SESSION:"session"},si=O.aA,Cs="persistence";function ht(F){return wt.apply(this,arguments)}function wt(){return(wt=(0,f.Z)(function*(F){yield F._initializationPromise;const V=fr(),P=O.aD(Cs,F.config.apiKey,F.name);V&&V.setItem(P,F._getPersistence())})).apply(this,arguments)}function fr(){var F;try{return(null===(F=function Hr(){return typeof window<"u"?window:null}())||void 0===F?void 0:F.sessionStorage)||null}catch{return null}}const _i=O.aA;class Wt{constructor(){this.browserResolver=O.aC(O.k),this.cordovaResolver=O.aC(ke),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aE,this._overrideRedirectResult=O.aF}_initialize(V){var P=this;return(0,f.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._initialize(V)})()}_openPopup(V,P,J,ve){var qe=this;return(0,f.Z)(function*(){return yield qe.selectUnderlyingResolver(),qe.assertedUnderlyingResolver._openPopup(V,P,J,ve)})()}_openRedirect(V,P,J,ve){var qe=this;return(0,f.Z)(function*(){return yield qe.selectUnderlyingResolver(),qe.assertedUnderlyingResolver._openRedirect(V,P,J,ve)})()}_isIframeWebStorageSupported(V,P){this.assertedUnderlyingResolver._isIframeWebStorageSupported(V,P)}_originValidation(V){return this.assertedUnderlyingResolver._originValidation(V)}get _shouldInitProactively(){return Ni()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return _i(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var V=this;return(0,f.Z)(function*(){if(V.underlyingResolver)return;const P=yield function Oo(){return zi.apply(this,arguments)}();V.underlyingResolver=P?V.cordovaResolver:V.browserResolver})()}}function ir(F){return F.unwrap()}function gn(F){return Ft(F)}function Ft(F){const{_tokenResponse:V}=F instanceof ee.ZR?F.customData:F;if(!V)return null;if(!(F instanceof ee.ZR)&&"temporaryProof"in V&&"phoneNumber"in V)return O.P.credentialFromResult(F);const P=V.providerId;if(!P||P===O.p.PASSWORD)return null;let J;switch(P){case O.p.GOOGLE:J=O.V;break;case O.p.FACEBOOK:J=O.U;break;case O.p.GITHUB:J=O.W;break;case O.p.TWITTER:J=O.Z;break;default:const{oauthIdToken:ve,oauthAccessToken:qe,oauthTokenSecret:Et,pendingToken:It,nonce:ft}=V;return qe||Et||ve||It?It?P.startsWith("saml.")?O.aO._create(P,It):O.L._fromParams({providerId:P,signInMethod:P,pendingToken:It,idToken:ve,accessToken:qe}):new O.X(P).credential({idToken:ve,accessToken:qe,rawNonce:ft}):null}return F instanceof ee.ZR?J.credentialFromError(F):J.credentialFromResult(F)}function Pn(F,V){return V.catch(P=>{throw P instanceof ee.ZR&&function ti(F,V){var P;const J=null===(P=V.customData)||void 0===P?void 0:P._tokenResponse;if("auth/multi-factor-auth-required"===V?.code)V.resolver=new $r(F,O.aq(F,V));else if(J){const ve=Ft(V),qe=V;ve&&(qe.credential=ve,qe.tenantId=J.tenantId||void 0,qe.email=J.email||void 0,qe.phoneNumber=J.phoneNumber||void 0)}}(F,P),P}).then(P=>{const ve=P.user;return{operationType:P.operationType,credential:gn(P),additionalUserInfo:O.ao(P),user:Zn.getOrCreate(ve)}})}function Wi(F,V){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,f.Z)(function*(F,V){const P=yield V;return{verificationId:P.verificationId,confirm:J=>Pn(F,P.confirm(J))}})).apply(this,arguments)}class $r{constructor(V,P){this.resolver=P,this.auth=function us(F){return F.wrapped()}(V)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(V){return Pn(ir(this.auth),this.resolver.resolveSignIn(V))}}class Zn{constructor(V){this._delegate=V,this.multiFactor=O.ar(V)}static getOrCreate(V){return Zn.USER_MAP.has(V)||Zn.USER_MAP.set(V,new Zn(V)),Zn.USER_MAP.get(V)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(V){return this._delegate.getIdTokenResult(V)}getIdToken(V){return this._delegate.getIdToken(V)}linkAndRetrieveDataWithCredential(V){return this.linkWithCredential(V)}linkWithCredential(V){var P=this;return(0,f.Z)(function*(){return Pn(P.auth,O.a0(P._delegate,V))})()}linkWithPhoneNumber(V,P){var J=this;return(0,f.Z)(function*(){return Wi(J.auth,O.l(J._delegate,V,P))})()}linkWithPopup(V){var P=this;return(0,f.Z)(function*(){return Pn(P.auth,O.d(P._delegate,V,Wt))})()}linkWithRedirect(V){var P=this;return(0,f.Z)(function*(){return yield ht(O.aH(P.auth)),O.g(P._delegate,V,Wt)})()}reauthenticateAndRetrieveDataWithCredential(V){return this.reauthenticateWithCredential(V)}reauthenticateWithCredential(V){var P=this;return(0,f.Z)(function*(){return Pn(P.auth,O.a1(P._delegate,V))})()}reauthenticateWithPhoneNumber(V,P){return Wi(this.auth,O.r(this._delegate,V,P))}reauthenticateWithPopup(V){return Pn(this.auth,O.e(this._delegate,V,Wt))}reauthenticateWithRedirect(V){var P=this;return(0,f.Z)(function*(){return yield ht(O.aH(P.auth)),O.h(P._delegate,V,Wt)})()}sendEmailVerification(V){return O.ae(this._delegate,V)}unlink(V){var P=this;return(0,f.Z)(function*(){return yield O.an(P._delegate,V),P})()}updateEmail(V){return O.aj(this._delegate,V)}updatePassword(V){return O.ak(this._delegate,V)}updatePhoneNumber(V){return O.u(this._delegate,V)}updateProfile(V){return O.ai(this._delegate,V)}verifyBeforeUpdateEmail(V,P){return O.af(this._delegate,V,P)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Zn.USER_MAP=new WeakMap;const Tn=O.aA;let sr=(()=>{class F{constructor(P,J){if(this.app=P,J.isInitialized())return this._delegate=J.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ve}=P.options;Tn(ve,"invalid-api-key",{appName:P.name}),Tn(ve,"invalid-api-key",{appName:P.name});const qe=typeof window<"u"?Wt:void 0;this._delegate=J.initialize({options:{persistence:pr(ve,P.name),popupRedirectResolver:qe}}),this._delegate._updateErrorMap(O.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Zn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(P){this._delegate.languageCode=P}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(P){this._delegate.tenantId=P}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(P,J){O.I(this._delegate,P,J)}applyActionCode(P){return O.a5(this._delegate,P)}checkActionCode(P){return O.a6(this._delegate,P)}confirmPasswordReset(P,J){return O.a4(this._delegate,P,J)}createUserWithEmailAndPassword(P,J){var ve=this;return(0,f.Z)(function*(){return Pn(ve._delegate,O.a8(ve._delegate,P,J))})()}fetchProvidersForEmail(P){return this.fetchSignInMethodsForEmail(P)}fetchSignInMethodsForEmail(P){return O.ad(this._delegate,P)}isSignInWithEmailLink(P){return O.ab(this._delegate,P)}getRedirectResult(){var P=this;return(0,f.Z)(function*(){Tn(qn(),P._delegate,"operation-not-supported-in-this-environment");const J=yield O.j(P._delegate,Wt);return J?Pn(P._delegate,Promise.resolve(J)):{credential:null,user:null}})()}addFrameworkForLogging(P){!function Be(F,V){(0,O.aH)(F)._logFramework(V)}(this._delegate,P)}onAuthStateChanged(P,J,ve){const{next:qe,error:Et,complete:It}=On(P,J,ve);return this._delegate.onAuthStateChanged(qe,Et,It)}onIdTokenChanged(P,J,ve){const{next:qe,error:Et,complete:It}=On(P,J,ve);return this._delegate.onIdTokenChanged(qe,Et,It)}sendSignInLinkToEmail(P,J){return O.aa(this._delegate,P,J)}sendPasswordResetEmail(P,J){return O.a3(this._delegate,P,J||void 0)}setPersistence(P){var J=this;return(0,f.Z)(function*(){let ve;switch(function Ye(F,V){si(Object.values(Kn).includes(V),F,"invalid-persistence-type"),(0,ee.b$)()?si(V!==Kn.SESSION,F,"unsupported-persistence-type"):(0,ee.UG)()?si(V===Kn.NONE,F,"unsupported-persistence-type"):rr()?si(V===Kn.NONE||V===Kn.LOCAL&&(0,ee.hl)(),F,"unsupported-persistence-type"):si(V===Kn.NONE||hr(),F,"unsupported-persistence-type")}(J._delegate,P),P){case Kn.SESSION:ve=O.a;break;case Kn.LOCAL:ve=(yield O.aC(O.i)._isAvailable())?O.i:O.b;break;case Kn.NONE:ve=O.N;break;default:return O.av("argument-error",{appName:J._delegate.name})}return J._delegate.setPersistence(ve)})()}signInAndRetrieveDataWithCredential(P){return this.signInWithCredential(P)}signInAnonymously(){return Pn(this._delegate,O._(this._delegate))}signInWithCredential(P){return Pn(this._delegate,O.$(this._delegate,P))}signInWithCustomToken(P){return Pn(this._delegate,O.a2(this._delegate,P))}signInWithEmailAndPassword(P,J){return Pn(this._delegate,O.a9(this._delegate,P,J))}signInWithEmailLink(P,J){return Pn(this._delegate,O.ac(this._delegate,P,J))}signInWithPhoneNumber(P,J){return Wi(this._delegate,O.s(this._delegate,P,J))}signInWithPopup(P){var J=this;return(0,f.Z)(function*(){return Tn(qn(),J._delegate,"operation-not-supported-in-this-environment"),Pn(J._delegate,O.c(J._delegate,P,Wt))})()}signInWithRedirect(P){var J=this;return(0,f.Z)(function*(){return Tn(qn(),J._delegate,"operation-not-supported-in-this-environment"),yield ht(J._delegate),O.f(J._delegate,P,Wt)})()}updateCurrentUser(P){return this._delegate.updateCurrentUser(P)}verifyPasswordResetCode(P){return O.a7(this._delegate,P)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return F.Persistence=Kn,F})();function On(F,V,P){let J=F;"function"!=typeof F&&({next:J,error:V,complete:P}=F);const ve=J;return{next:Et=>ve(Et&&Zn.getOrCreate(Et)),error:V,complete:P}}function pr(F,V){const P=function Zt(F,V){const P=fr();if(!P)return[];const J=O.aD(Cs,F,V);switch(P.getItem(J)){case Kn.NONE:return[O.N];case Kn.LOCAL:return[O.i,O.a];case Kn.SESSION:return[O.a];default:return[]}}(F,V);if(typeof self<"u"&&!P.includes(O.i)&&P.push(O.i),typeof window<"u")for(const J of[O.b,O.a])P.includes(J)||P.push(J);return P.includes(O.N)||P.push(O.N),P}class kn{constructor(){this.providerId="phone",this._delegate=new O.P(ir($.Z.auth()))}static credential(V,P){return O.P.credential(V,P)}verifyPhoneNumber(V,P){return this._delegate.verifyPhoneNumber(V,P)}unwrap(){return this._delegate}}kn.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,kn.PROVIDER_ID=O.P.PROVIDER_ID;const oi=O.aA;class Yt{constructor(V,P,J=$.Z.app()){var ve;oi(null===(ve=J.options)||void 0===ve?void 0:ve.apiKey,"invalid-api-key",{appName:J.name}),this._delegate=new O.R(V,P,J.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function G(F){F.INTERNAL.registerComponent(new we.wA("auth-compat",V=>{const P=V.getProvider("app-compat").getImmediate(),J=V.getProvider("auth");return new sr(P,J)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.Q,FacebookAuthProvider:O.U,GithubAuthProvider:O.W,GoogleAuthProvider:O.V,OAuthProvider:O.X,SAMLAuthProvider:O.Y,PhoneAuthProvider:kn,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:Yt,TwitterAuthProvider:O.Z,Auth:sr,AuthCredential:O.J,Error:ee.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),F.registerVersion("@firebase/auth-compat","0.4.2")}($.Z)},5861:(mt,be,U)=>{function f(O,ee,ue,_e,we,Ne,Ee){try{var z=O[Ne](Ee),q=z.value}catch(ie){return void ue(ie)}z.done?ee(q):Promise.resolve(q).then(_e,we)}function $(O){return function(){var ee=this,ue=arguments;return new Promise(function(_e,we){var Ne=O.apply(ee,ue);function Ee(q){f(Ne,_e,we,Ee,z,"next",q)}function z(q){f(Ne,_e,we,Ee,z,"throw",q)}Ee(void 0)})}}U.d(be,{Z:()=>$})},7582:(mt,be,U)=>{function ee(de,Ie){var Te={};for(var ke in de)Object.prototype.hasOwnProperty.call(de,ke)&&Ie.indexOf(ke)<0&&(Te[ke]=de[ke]);if(null!=de&&"function"==typeof Object.getOwnPropertySymbols){var Ge=0;for(ke=Object.getOwnPropertySymbols(de);Ge<ke.length;Ge++)Ie.indexOf(ke[Ge])<0&&Object.prototype.propertyIsEnumerable.call(de,ke[Ge])&&(Te[ke[Ge]]=de[ke[Ge]])}return Te}function ie(de,Ie,Te,ke){return new(Te||(Te=Promise))(function(Be,Je){function ot(yt){try{rt(ke.next(yt))}catch(sn){Je(sn)}}function xn(yt){try{rt(ke.throw(yt))}catch(sn){Je(sn)}}function rt(yt){yt.done?Be(yt.value):function Ge(Be){return Be instanceof Te?Be:new Te(function(Je){Je(Be)})}(yt.value).then(ot,xn)}rt((ke=ke.apply(de,Ie||[])).next())})}function re(de){return this instanceof re?(this.v=de,this):new re(de)}function Ce(de,Ie,Te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ge,ke=Te.apply(de,Ie||[]),Be=[];return Ge={},Je("next"),Je("throw"),Je("return"),Ge[Symbol.asyncIterator]=function(){return this},Ge;function Je(vn){ke[vn]&&(Ge[vn]=function($n){return new Promise(function(tn,Er){Be.push([vn,$n,tn,Er])>1||ot(vn,$n)})})}function ot(vn,$n){try{!function xn(vn){vn.value instanceof re?Promise.resolve(vn.value.v).then(rt,yt):sn(Be[0][2],vn)}(ke[vn]($n))}catch(tn){sn(Be[0][3],tn)}}function rt(vn){ot("next",vn)}function yt(vn){ot("throw",vn)}function sn(vn,$n){vn($n),Be.shift(),Be.length&&ot(Be[0][0],Be[0][1])}}function me(de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Te,Ie=de[Symbol.asyncIterator];return Ie?Ie.call(de):(de=function xe(de){var Ie="function"==typeof Symbol&&Symbol.iterator,Te=Ie&&de[Ie],ke=0;if(Te)return Te.call(de);if(de&&"number"==typeof de.length)return{next:function(){return de&&ke>=de.length&&(de=void 0),{value:de&&de[ke++],done:!de}}};throw new TypeError(Ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(de),Te={},ke("next"),ke("throw"),ke("return"),Te[Symbol.asyncIterator]=function(){return this},Te);function ke(Be){Te[Be]=de[Be]&&function(Je){return new Promise(function(ot,xn){!function Ge(Be,Je,ot,xn){Promise.resolve(xn).then(function(rt){Be({value:rt,done:ot})},Je)}(ot,xn,(Je=de[Be](Je)).done,Je.value)})}}}U.d(be,{FC:()=>Ce,KL:()=>me,_T:()=>ee,mG:()=>ie,qq:()=>re})}},mt=>{mt(mt.s=8029)}]);